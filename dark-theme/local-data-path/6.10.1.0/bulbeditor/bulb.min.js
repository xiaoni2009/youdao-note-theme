!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BulbEditor",[],t):"object"==typeof exports?exports.BulbEditor=t():e.BulbEditor=t()}(window,function(){return function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)a=s[d],i[a]&&p.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={1:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./";var s=window.webpackJsonpBulbEditor=window.webpackJsonpBulbEditor||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;return r.push([378,0]),n()}([,function(e,t,n){(function(o){var i;void 0===(i=function(t,o){"use strict";void 0===(i=function(e){for(var t,o=n(156),i=this&&this.DEBUG?this:window,r=i.DEBUG||null!=i.logLevel,a=i.console,s={},l=function(){},c="log warn error time timeEnd profile profileEnd".split(" "),u=c.length;--u>=0;)t=c[u],r&&a[t]?s[t]=a[t].bind(a):s[t]=l;return r&&i.alert?s.debugAlert=function(e){i.alert(e)}:s.debugAlert=s.error,r&&(s.log=function(){o.log("Log: ",Array.prototype.slice.call(arguments),"white","#CCCCCC")},s.warn=function(){o.warn(Array.prototype.slice.call(arguments))},s.error=function(){o.error(Array.prototype.slice.call(arguments))},s.DEBUG=r),s}.call(o,n,o,e))||(e.exports=i)}.apply(t,[n,t]))||(e.exports=i)}).call(this,n(54))},function(e,t,n){var o=n(12),i=n(63),r=n(49),a=n(50),s=n(64),l=function(e,t,n){var c,u,d,p,h=e&l.F,f=e&l.G,g=e&l.S,y=e&l.P,m=e&l.B,v=f?o:g?o[t]||(o[t]={}):(o[t]||{}).prototype,b=f?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(c in f&&(n=t),n)d=((u=!h&&v&&void 0!==v[c])?v:n)[c],p=m&&u?s(d,o):y&&"function"==typeof d?s(Function.call,d):d,v&&a(v,c,d,e&l.U),b[c]!=d&&r(b,c,p),y&&_[c]!=d&&(_[c]=d)};o.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(){function e(){}return e.getAllBlockTypes=function(){return[e.ATTACHMENT,e.BLOCK,e.CATALOGUE,e.HANDWRITE,e.HEADING,e.HR,e.IMAGE,e.LIST_ITEM,e.PARAGRAPH,e.TABLE,e.TODO,e.QUOTE,e.CODE,e.UNKNOWN]},e.getType=function(e){if(e)return e.getType()},e.isParagraph=function(t){return e.getType(t)===e.PARAGRAPH},e.isParagraphCluster=function(t){return this.isParagraphClusterType(e.getType(t))},e.isParagraphClusterType=function(t){return t===e.PARAGRAPH||t===e.LIST_ITEM||t===e.HEADING||t===e.CATALOGUE||t===e.TODO||t===e.QUOTE||t===e.CODE},e.isListItem=function(t){return e.getType(t)===e.LIST_ITEM},e.isAttachment=function(t){return e.getType(t)===e.ATTACHMENT},e.isHeaderFooter=function(e){return this.getType(e)===this.HEADER_FOOTER},e.isTable=function(t){return e.getType(t)===e.TABLE},e.isImage=function(t){return e.getType(t)===e.IMAGE},e.isHr=function(t){return e.getType(t)===e.HR},e.isUnknown=function(t){return this.getType(t)===e.UNKNOWN},e.isHeading=function(t){return e.getType(t)===e.HEADING},e.isCatalogue=function(t){return e.getType(t)===e.CATALOGUE},e.isTodo=function(t){return e.getType(t)===e.TODO},e.isQuote=function(t){return e.getType(t)===e.QUOTE},e.isCode=function(t){return e.getType(t)===e.CODE},e.isTextBlock=function(t,n){return(!n||!n.selectWholeBlock)&&e.isParagraphCluster(t)},e.isTextOrTableBlock=function(t){return e.isTextBlock(t)||e.isTable(t)},e.isHandWrite=function(t){return e.getType(t)===e.HANDWRITE},e.ATTACHMENT="attachment",e.BLOCK="block",e.CATALOGUE="catalogue",e.HANDWRITE="handwrite",e.HEADER_FOOTER="header-footer",e.HEADING="heading",e.HR="horizontal-line",e.IMAGE="image",e.LIST_ITEM="list-item",e.PARAGRAPH="paragraph",e.QUOTE="quote",e.TABLE="table",e.TODO="todo",e.CODE="code",e.UNKNOWN="unknown",e}()}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(){function e(){}return e.isCollabCommand=function(e){var t=!1;return null!=e&&null!=e.collabProperties&&(t=e.collabProperties.isCollabCmd),t},e.isGUID=function(e){return!!e&&/^[\w\-]+$/.test(e)},e.isInlineStateSetCommand=function(e){return null!=e.isInlineStateSet&&!0===e.isInlineStateSet()},e.newGUID=function(){var e="";return e+=(Math.floor(100*Math.random())+"00").substr(0,2),e+=(Math.floor(100*Math.random())+"00").substr(0,2),e+="-",e+=Date.now().toString()},e}()}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1),o=n(0);return{_map:{},add:function(e){var n=e.prototype.name,o=this._map;n?o[n]?t.error("Command class ["+n+"] exists!"):o[n]=e:t.error("The Command class has no name!",e)},get:function(e){var n=this._map[e];return n||t.error("Command class ["+e+"] does not exist!"),n},getAllNames:function(){return o.keys(this._map)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return{COMPAT:"compat",DEFAULT_BACKGROUND:"NoBackground",INTERM:"interm",INDENT_WIDTH:28,MAX_LIST_ITEM_LEVEL:9,LINE_BREAK:/Windows/.test(window.navigator.userAgent)?"\r\n":"\n",IS_MAC:/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),QUOTE_PADDING:"0 10px 0 17px",QUOTE_BORDER_LEFT:"3px solid #e8e8e8",QUOTE_MARGIN:"0 5px",PLATFORM_LINE_HEIGHT:1.75,PAGE_TYPE_A4:"A4",PAGE_TYPE_B5:"B5",PAGE_TYPE_NONE:"NONE",PAGE_TYPE_TEST:"TEST",PAGE_HEIGHT_A4:1123,PAGE_HEIGHT_B5:945,PAGE_HEIGHT_NONE:Number.MAX_VALUE,PAGE_HEIGHT_TEST:100,PAGE_WIDTH_A4:792,PAGE_WIDTH_B5:663,PAGE_WIDTH_NONE:Number.MAX_VALUE,PAGE_WIDTH_TEST:792,PAGE_SPLIT_BLANK_HEIGHT:70,PAGE_SPLIT_MIDDLE_HEIGHT:10,TOLERABLE_HEIGHT_CHANGE:3,PAGE_CLASS_A4:"page-A4",PAGE_CLASS_B5:"page-B5",PAGE_CLASS_TEST:"page-TEST",WSClientStatusCode:{Connecting:0,Open:1,Closing:2,Closed:3,Ready:5,Disabled:10,Intializing:11},WSEVENTID_HOST_CLOSE:4500,MAX_MESSAGE_SIZE:5e3,MAX_UNDO_STACK_SIZE:20,MAX_CMD_DELAY_MILLIS:4e3,MAX_INIT_DELAY_MILLIS:2e3,MAX_LOCAL_CMD_COUNT_PER_SEC:20,REGULAR_CMD_SENT_MILLIS:2e3,LATENCY_TO_SHOW_SET_CONTENT_PROGRESS:2e3,CJSON_ACTION:"action",CJSON_COMMANDID:"cmdId",CJSON_COMMANDOWNER:"cmdOwner",CJSON_COLLABCOMMANDS:"collabCmds",CJSON_COLLAB_NOTE_READY:"collabNoteReady",CJSON_COLLAB_VERSION:"collabVersion",CJSON_DATA_CMD_ERROR:"dataCmdError",CJSON_ENDVERSION:"endVersion",CJSON_ERROR_TO_CLOSE:"errToClose",CJSON_FINALVERSION:"finalVersion",CJSON_INITIALIZE_COLLABSTARTED:"collabStarted",CJSON_INITIALIZE_DONE:"done",CJSON_INITIALIZE_RESULT:"initResult",CJSON_IS_HISTORY_SAVE:"isHistorySave",CJSON_IS_SERVER_CMD:"isServerCmd",CJSON_LOCKCOLOR:"lockColor",CJSON_LOCK_BLOCK_ID:"lockedBlkId",CJSON_MODIFIERS:"modifiers",CJSON_NICKNAME:"nickname",CJSON_NONDATACOMMANDS:"nondataCmds",CJSON_NOTEVERSIONUPDATE:"versionUpdate",CJSON_PORTRAIT:"portraitUrl",CJSON_READONLY:"readOnly",CJSON_SESSIONID:"sessionId",CJSON_SESSIONPROPERTY:"sessionProp",CJSON_STARTVERSION:"startVersion",NONDATACMD_BLOCKSELECTION:"nb_BlkSelection",NONDATACMD_CLINTPONG:"nb_clientPong",NONDATACMD_COLLABCLOSE:"nb_CollabClose",NONDATACMD_COLLABINFO:"nb_CollabInfo",NONDATACMD_DATACMDFAILED:"nb_dataCmdFailed",NONDATACMD_GETMODIFIERS:"nb_getModifiers",NONDATACMD_NOTESAVE:"nb_noteSave",NONDATACMD_LOCKRELEASE:"nb_lockRelease",NONDATACMD_SESSIONINITIALIZED:"nb_sessionInitialized",NONDATACMD_SEVERPING:"nb_serverPing",OPTIONS_COLLABID:"collabId",OPTIONS_NICKNAME:"nickname",OPTIONS_NOTEVERSION:"noteVersion",OPTIONS_PORTRAIT:"portraitUrl",OPTIONS_SESSIONTYPE:"sessionType",OPTIONS_SESSIONID:"sessionId",OPTIONS_USERID:"userId",OPTIONS_BUILDVERSION:"buildVersion",OPTIONS_RECONNECT:"reconn",ERRORID_FAILED_RECEIVE_COLLAB_CMD:4001,ERRORID_FAILED_SEND_LOCAL_CMD:4002,ERRORID_COLLAB_ENGINE_NULL:4003,CONNECTION_FAILED_SEND:"发送协同命令失败：",CONNECTION_NO_CONNECTED:"当前没有与协同服务器连接",CONNECTION_REFUSED:"协同服务器连接被拒绝",CONNECTION_SERVER_CLOSED:"协同服务器已经关闭",ERROR_CODE:"错误编码：",ERROR_CONFLICT_EXECUTION:"编辑区域冲突",ERROR_FAILED_SEND_LOCAL_CMD:"发送本地已执行命令失败",ERROR_FAILED_RECEIVE_COLLAB_CMD:"接收协同命令超时",ERROR_EXCEPTION:"未知错误：",ERROR_REASON:"原因：",ERROR_UNMATCHED_VERSION:"本地笔记版本与服务器端不匹配，本地/服务器：",INVALIDACTION_BLANK_NOTE:"笔记还没有加载",INVALIDACTION_BLOCKS_DIRTY:"目标段落已经被人修改过",INVALIDACTION_COLLAB_NOT_READY:"笔记内容不满足协同的要求",INVALIDACTION_EDIT_READ_ONLY:"只读模式下不可以编辑",INVALIDACTION_EDIT_NOT_READY:"笔记还没有进入编辑状态，如果此状态持续数秒，请刷新页面",INVALIDACTION_FINALVERSION_NOTREADY:"被撤销命令正在同步中，请稍后再试",INVALIDACTION_EMPTY_CMDJSON:"空协同操作指令，将被忽略",INVALIDACTION_EMPTY_LOCALCMD:"空本地操作指令，将被忽略",INVALIDACTION_INVALID_LOCALCMD:"无效的本地命令",INVALIDACTION_FAILED_COLLABCMD:"协同命令执行失败",INVALIDACTION_FAILED_LOCALCMD:"本地命令执行失败",INVALIDACTION_INVALID_CMD_VERSION:"被撤销命令版本无效，丢弃此命令",INVALIDACTION_INVALID_RANGE:"命令所操作区域已经被删除或者无效",INVALIDACTION_TOO_MANY_CMD:"命令操作过快，请稍候，等待处理命令个数：",INVALIDACTION_TOO_LARGE_MESSAGE:"操作所含数据过多，请减少操作数据：",INVALIDACTION_UNSUPPORTED_CMD:"不支持的操作指令：",INVALIDACTION_WORK_ON_LOCKED_BLOCK:"当前或相邻的段落或目标段落被锁定或删除，请稍后操作",LOADING_IMAGE_PATH:"http://note.youdao.com/editor/collab/loading.gif?47",INSERT_BLANK_CATALOGUE_TEXT:"目录为空，请插入标题（字体左侧）后点击刷新按钮"}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(17),o=n(1),i=n(0),r=n(780),a={_keyHandlerMap:{},_parseKey:function(e){return e=(e=(e+="").replace(/[\s\uFEFF\xA0]/g,"")).toLowerCase()},_makeMapKey:function(e,t){return(e=e||"main")+"-"+t},getHandler:function(e,t){return this._keyHandlerMap[this._makeMapKey(e,t)]},register:function(e){if(e&&e.name&&e.key&&e.action){var t,n,r,a=this._keyHandlerMap;(n=i.defaults({},e,{scope:"main",read:!1,preventDefault:!0})).key=t=this._parseKey(e.key),t?a[r=this._makeMapKey(n.scope,n.name)]||i.some(a,function(e){return e.key===t&&e.scope===n.scope})?o.error("The key handler is conflict with other",n):a[r]=n:o.warn("The key is not valid!",e)}else o.warn("The param is not valid!",e)},exec:function(e,t,n,i){var r=this._makeMapKey(e,t),a=this._keyHandlerMap[r];a?n.isReadOnly&&n.isReadOnly()&&!a.read?i&&i.preventDefault&&i.preventDefault():(a.preventDefault&&i&&i.preventDefault&&i.preventDefault(),this.disableExec(a,n,i,t)||a.action.apply(a,[n,i,t])):o.warn("No key handler for scope/name: ",e,t)},disableExec:function(e,t,n,o){var i,a,s,l,c,u=r.ACTION_HIDE,d=r.ACTION_DISABLE;return!!t.getNoteRange&&(i=t.getNoteRange().getStartBlockRange().block.getType().toUpperCase(),a=o.replace("insert",""),s=r["RANGE_"+i],l=r.EDITOR_BUTTON_STATE_MAP[a.toLowerCase()],!!(a&&s&&l)&&((c=l.find(function(e){return e.on===s}))&&(c.action===u||c.action===d)))},matchKey:function(e,t){if(t){var n,r=this._keyHandlerMap;if(n=i.find(r,function(n){return n.key===t&&n.scope===e}))return n.name;o.warn("Can not find the key handler with key: "+t)}},getAllHandlerNamesOfScope:function(e){var t=[];return i.each(this._keyHandlerMap,function(n){n.scope===e&&t.push(n.name)}),t}};return t.extend({initialize:function(e){e=i.defaults(e||{},{scope:"main"}),this._scope=e.scope,this._customMap={},delete this.options},getKey:function(e){return(this._customMap[e]||a.getHandler(this._scope,e)||{}).key},bind:function(e){var t=this.getKey(e);t&&this.trigger("bind-key",t)},unbind:function(e){var t=this.getKey(e);t&&this.trigger("unbind-key",t)},updateKey:function(e,t){if(e&&t){a.getHandler(this._scope,e)&&(this.unbind(e),this._customMap[e]={key:t},this.bind(e))}},hasHandler:function(e){return!!a.getHandler(this._scope,e)},execWithKey:function(e,t,n){var r;i.some(this._customMap,function(t,n){if(t.key===e)return r=n,!0}),r||(r=a.matchKey(this._scope,e)),r?a.exec(this._scope,r,t,n):o.warn("no handler for scope/key ",this._scope,e)},execWithName:function(e,t,n){a.exec(this._scope,e,t,n)},getAvailableHandlerNames:function(){return a.getAllHandlerNamesOfScope(this._scope)}},{register:function(e){a.register(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(59),n(17),n(124),n(7),n(1),n(246),n(122),n(26),n(190),n(191)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e,n){return new t({keepLineBreak:!1!==n,text:e})},t.createBlank=function(e){return t.create("",e)},t.fromCollabJSON=function(e){if(!e||!e.text)return t.createBlank(!0);var o=t.create(e.text,e.keepLineBreak);return n.each(e.inlineStyles,function(e,t){n.each(e,function(e){d.isSupport(t)?o.setStyle(e.from,e.to,t,e.value):o.setUnknownStyle(e.from,e.to,t,e.value)})}),o},t.fromJSON=function(e){if(e&&e.isRichText&&e.data){var o,i=[];return n.each(e.data,function(e){var t=c.fromJSON(e);t&&i.push(t)}),(o=new t({keepLineBreak:e.keepLineBreak,text:""})).appendRichChars(i),o}},t.fromXml=function(e){var n=this,o=$(e),i=new t({text:o.find("text").text()});return o.find("inline-styles").children().each(function(e,t){var n,o,r=t.nodeName.toLowerCase(),s=$(t),l=parseInt(s.find("from").text(),10),c=parseInt(s.find("to").text(),10),p=s.find("value");0!==p.length&&(n=p.text(),d.isSupport(r)?i.setStyle(l,c,r,n):(o=s.attr(a.COMPAT),u.isCompatible(o)&&(h.add(r),n=o+"|"+n,i.setUnknownStyle(l,c,r,n))))}),o.find("entities").children().each(function(e,t){var r=$(t),a={},s=r.find("type").text(),l=parseInt(r.find("start").text(),10);a.type=s,a.start=l,a.inlineStyles=n.getEntityStyles("inline-styles",o),i.appendEntity(a)}),i},t.getEntityStyles=function(e,t){var n={};return $(t).find("entities").children().find(e).children().each(function(e,t){var o=t.nodeName,i=$(t).text();n[o]=i}),n},t.CLONE_DATA=function(e){var t,n=e.length,o=new Array(n);for(t=0;t<n;++t)o[t]=e[t].clone();return o},t.EXTRACT_UNKNOWN_VALUE=function(e){var t=e.indexOf("|");return-1===t?{value:e}:{compat:e.substring(0,t),value:e.substring(t+1)}},t.prototype.append=function(e){e&&e.getClonedData||l.warn("no richText"),this.appendRichChars(e.getClonedData())},t.prototype.appendRichChars=function(e){e&&0!==e.length&&(this.isKeepLineBreak()||(e=this._removeLineBreak(e)),this.richTextProps.data=this.richTextProps.data.concat(e))},t.prototype.clone=function(){var e=new t({keepLineBreak:this.isKeepLineBreak(),text:""});return e.appendRichChars(this.getClonedData()),e},t.prototype.getClonedData=function(){return t.CLONE_DATA(this.richTextProps.data)},t.prototype.getCommonStyle=function(e,t,n,o,i){var r,s,c=this.richTextProps.data,u=null;if(this.isEmpty())return d.getDefault(n);if(e<0)l.warn("start should not be less than 0",e);else if(e>t)l.warn("start should not greater than end",e,t);else{if(!(t>c.length)){if(e===t)0===e&&c[0]?u=c[0].getStyle(n,!1,o):c[e-1]&&(u=c[e-1].getStyle(n,!1,o));else for(r=e;r<t;++r)if(c&&c[r]){if(s=c[r].getStyle(n,!1,o),null===u)u=s;else if(u!==s)return i?null:a.INTERM}else l.warn("unexpected undefine in data",c);return!i||u!==a.INTERM&&u!==d.getDefault(n)?u:null}l.warn("end should not geater than data.length",t,c)}},t.prototype.getCommonStyles=function(e,t,o){var i=this,r={},a=d.getAllConfig();return n.each(a,function(n,a){var s=i.getCommonStyle(e,t,a,o);null!=s&&(r[a]=s)}),r},t.prototype.setEntities=function(e){this.richTextProps.entities=e},t.prototype.getEntities=function(){return this.richTextProps.entities},t.prototype.removeEntitiy=function(e){var t=this;n.each(e,function(e,o){var i=n.findLastIndex(t.richTextProps.entities,{type:o});t.richTextProps.entities.splice(i,1)})},t.prototype.getLength=function(e){var t,n=this.richTextProps.data,o=n.length;if(e)for(t=0;t<n.length;t++)$.trim(n[t].toString())||o--;return o},t.prototype.getReadOnlyData=function(){return this.richTextProps.data},t.prototype.getReadOnlyStylesList=function(e,t,o){var i=this,r=this.richTextProps.data,a=[],s=d.getAllConfig();return e=!1!==e,n.each(r,function(r){var l={};n.each(s,function(n,a){var s;s=o&&!r.getStyle(a,!1)&&i.merStyle(o,a)?i.merStyle(o,a):r.getStyle(a,e,t),(e||!e&&null!=s)&&(l[a]=s)}),a.push(l)}),a},t.prototype.merStyle=function(e,t){var o;return n.each(e,function(e,n){t===n&&(o=e)}),o},t.prototype.getStyle=function(e,t,n,i){var r,a,s,c=this.richTextProps.data;if(o(e>=0),o(e<=t),o(t<=c.length),void 0===e||e<0||void 0===t||e>t||t>c.length)return l.error("unexpected params:",e,t,c.length),null;for(s=new Array(t-e),r=e;r<t;++r)a=c[r].getStyle(n,!1,i),s[r-e]=a;return s},t.prototype.getStyleRanges=function(e,t){if(e){if(t=!0===t,d.isSupport(e))t=!1;else if(!t)return;var o,i,r,a,s=this.richTextProps.data,l=s.length,c=[],u=!1;for(o=0;o<l;o++)i=s[o],(r=t?i.getUnknownStyle(e):i.getStyle(e,!1))?(a=n.last(c),!u&&a&&a.value===r?a.to=o+1:c.push({from:o,to:o+1,value:r}),u=!1):u=!0;return c}},t.prototype.getStylesAtIndex=function(e,t){var n=this.richTextProps.data,o=n.length;if(!(e<0||e>=o))return n[e].getStyles(t);l.warn("invlid index of the text",e,n)},t.prototype.indexOf=function(e,t,n){var o,i,r,a,s,l=e.getReadOnlyData(),c=l.length,u=this.getReadOnlyData(),d=u.length;if(c>d)return-1;for(i=t;i<d;i++){for(o=!0,r=0;r<c;r++){if(a=u[i+r],s=l[r],!a){o=!1;break}if((!0!==n||a.char.toLowerCase()!==s.char.toLowerCase())&&a.char!==s.char){o=!1;break}}if(o)return i}return-1},t.prototype.insert=function(e,t){if(e&&e.getClonedData){var n=this.richTextProps.data,o=n.splice(t),i=e.getClonedData();!1===this.isKeepLineBreak()&&!0===e.isKeepLineBreak()&&(i=this._removeLineBreak(i)),this.richTextProps.data=n.concat(i,o)}},t.prototype.isEmpty=function(){return this.getLength(!1)<=0},t.prototype.isKeepLineBreak=function(){return this.richTextProps.keepLineBreak},t.prototype.removeLineBreak=function(){this.richTextProps.data=this._removeLineBreak(this.richTextProps.data)},t.prototype.removeStyles=function(){var e,t=this.richTextProps.data,n=t.length;for(e=0;e<n;++e)t[e].removeStyles()},t.prototype.appendEntity=function(e){this.richTextProps.entities.push(e)},t.prototype.setKeepLineBreak=function(e){(e=!!e)!==this.richTextProps.keepLineBreak&&(this.richTextProps.keepLineBreak=e,!1===this.richTextProps.keepLineBreak&&this.removeLineBreak())},t.prototype.setStyle=function(e,t,o,i,r){if(o&&null!=i){var a,s=this.richTextProps.data,l=n.isArray(i);for(t=Math.min(t,s.length),a=e;a<t;++a)s[a].setStyle(o,l?i[a-e]:i,r)}},t.prototype.setEntity=function(e){var o=this,i=n.sortBy(o.getEntities(),function(e){return e.start}),r=0;i.forEach(function(n){var i=n.type,a=n.start,s=n.inlineStyles,l=new t({text:e[i]});l.setStyles(0,l.getLength(),s),o.insert(l,a+r),r+=l.getLength()}),o.removeEntitiy(e)},t.prototype.setStyles=function(e,t,o){var i=this;o&&n.each(o,function(n,o){i.setStyle(e,t,o,n)})},t.prototype.setUnknownStyle=function(e,t,o,i){var r,a=this.richTextProps.data,s=n.isArray(i);for(t=Math.min(t,a.length),r=e;r<t;++r)a[r].setUnknownStyle(o,s?i[r-e]:i)},t.prototype.slice=function(e,n,o){var i=this.richTextProps.data.slice(e,n),r=new t({});return!1!==o&&(i=t.CLONE_DATA(i)),r.appendRichChars(i),r},t.prototype.toCollabJSON=function(){return this.toJSON(!0)},t.prototype.toJSON=function(e){return!0===e?this._toSimplifyJSON():{data:n.map(this.richTextProps.data,function(e){return e.toJSON()}),isRichText:!0,keepLineBreak:this.isKeepLineBreak()}},t.prototype.toString=function(){for(var e="",t=this.richTextProps.data,n=0,o=t.length;n<o;n++)e+=t[n];return e},t.prototype.toXml=function(e){var t,o=this,i=e.createElement("inline-styles"),r=d.getAllConfig();return n.each(r,function(t,n){var r=o.getStyleRanges(n,!1);o._handleStyleRangesForXML(e,i,n,r,!1)}),t=h.get(),n.each(t,function(t){var n=o.getStyleRanges(t,!0);o._handleStyleRangesForXML(e,i,t,n,!0)}),i},t.prototype.initialize=function(e){var t=this;this.richTextProps=n.clone(e),this.richTextProps=n.defaults(this.richTextProps||{},{keepLineBreak:!0,text:""}),this.richTextProps.data=[],this.richTextProps.entities=[],this.richTextProps.text=r.clear(this.richTextProps.text),this.richTextProps.keepLineBreak||(this.richTextProps.text=this.richTextProps.text.replace(/[\r\n]/g,"")),n.each(p(this.richTextProps.text),function(e){t.richTextProps.data.push(new c(e))})},t.prototype._handleStyleRangesForXML=function(e,o,i,r,s){r&&r.length&&n.each(r,function(n){if(n&&n.value){var r,l,c,u=e.createElement(i),d=e.createElement("from"),p=e.createElement("to"),h=e.createElement("value");d.appendChild(e.createTextNode(n.from)),u.appendChild(d),p.appendChild(e.createTextNode(n.to)),u.appendChild(p),s?((c=(r=t.EXTRACT_UNKNOWN_VALUE(n.value)).compat)&&u.setAttribute(a.COMPAT,c),l=r.value):l=n.value,h.appendChild(e.createTextNode(l)),u.appendChild(h),o.appendChild(u)}})},t.prototype._handleStyleRangesForJSON=function(e,o,i,r){i&&i.length&&n.each(i,function(n){if(n&&n.value){var i,a=e[o];a||(a=e[o]=[]),i=r?t.EXTRACT_UNKNOWN_VALUE(n.value).value:n.value,a.push({from:n.from,to:n.to,value:i})}})},t.prototype._removeLineBreak=function(e){return e&&0!==e.length?e=n.filter(e,function(e){return!1===e.isLineBreak()}):[]},t.prototype._toSimplifyJSON=function(){var e,t,o=this,i={},r=d.getAllConfig();return n.each(r,function(e,t){var n=o.getStyleRanges(t,!1);o._handleStyleRangesForJSON(i,t,n,!1)}),e=h.get(),n.each(e,function(e){var t=o.getStyleRanges(e,!0);o._handleStyleRangesForJSON(i,e,t,!0)}),t={keepLineBreak:o.isKeepLineBreak(),text:o.toString()},n.isEmpty(i)||(t.inlineStyles=i),t},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o=n(18);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(123),o=n(0),i=n(1),r=new RegExp("^/yws/res/|^https?://"+t.getNamespace()+"/yws/res"),a=new RegExp("^/yws/api/group|^https?://"+t.getNamespace()+"/yws/api/group"),s={UNKNOWN:-1,WEB_NOTE:1,WEB_GROUP:2,PC:3,IPHONE:4,ANDROID:5,MAC:6},l=window.YNE_PLATFORM||s.UNKNOWN,c=o.keys(s),u={};return s.name=l,o.each(c,function(e){var t=e.toLowerCase(),n=l[e];s["IS_"+e]=l===n||l===t}),l.IS_UNKNOWN&&i.error("The platform is unknown!"),u.isFromWebNote=function(e){return r.test(e)},u.isFromWebGroup=function(e){return a.test(e)},o.extend(s,u),s}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(21),n(1),n(7)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.checkStatus=function(e,o){this.resetStatus(),!1===this.queryAction(e,o)&&(this.isDisabled=this.isHidden=!0),this.isHidden||this.type===t.TYPE.SUBMENU&&(n.invoke(this.items,"checkStatus",e,o),this.isDisabled=0===this.items.filter(function(e){return!e.isHidden&&!e.isDisabled}).length)},t.prototype.onSelected=function(){this.keyHandlerName?this.editor.getController().execKeyHandler(this.keyHandlerName):this.selectAction()},t.prototype.queryAction=function(e,t){i.error("The queryAction() of "+this.name+" should be implemented by options!")},t.prototype.reset=function(){this.resetStatus()},t.prototype.select=function(){this.onSelected()},t.prototype.selectAction=function(){i.error("The selectAction() of "+this.name+" should be implemented by options!")},t.prototype.simplify=function(){var e={index:this.index,type:this.type,isDisabled:this.isDisabled,isHidden:this.isHidden,isDefault:this.isDefault,label:this.label,key:this._getKey()};return this.items&&this.items.length&&(e.items=n.map(this.items,function(e){if(e&&e.simplify)return e.simplify()})),e},t.prototype.initialize=function(e){e=e||{},this.name=e.name,this.label=e.label,this.type=e.type||t.TYPE.ITEM,this.isDefault=!!e.isDefault,this.isDisabled=!!e.isDisabled,this.isHidden=!!e.isHidden,this.key=e.key||"",this.keyHandlerName=e.keyHandlerName||"",this.items=e.items,null!=e.queryAction&&(this.queryAction=e.queryAction),null!=e.selectAction&&(this.selectAction=e.selectAction)},t.prototype.resetStatus=function(){this.isDefault=!1,this.isDisabled=!1,this.isHidden=!1},t.prototype._getKey=function(){var e=this.key||"",o=this.editor.getController().keyHandlerManager;return this.keyHandlerName&&o&&(e=o.getKey(this.keyHandlerName)),e?(e=e.replace(/[\s\uFEFF\xA0]/g,""))?(e=(e=e.toLowerCase()).replace(/mod/,t.MOD),r.IS_MAC&&n.each({meta:"⌘",ctrl:"⌃",alt:"⌥",shift:"⇧"},function(t,n){e=e.replace(n,t)}),e=(e=e.replace(/^([a-z])/g,function(e,t){return t.toUpperCase()})).replace(/\+([a-z])/g,function(e,t){return"+"+t.toUpperCase()})):"":(i.warn("no key for ContextMenuItem: "+this.name),"")},t.TYPE={ITEM:0,SUBMENU:1,SPLIT:2},t.MOD=r.IS_MAC?"meta":"ctrl",t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(373),r=n(4),a=n(1),s=n(22),l=n(129),c=n(3);return t=i.extend({name:"UnknownCompositeCommand",_args:null,_cmds:null,_affectedBlockIds:null,_note:null,isSimple:!1,startingRange:null,endingRange:null,effected:!1,isLocalExecutedCmd:null,finalNoteVersion:null,originalNoteVersion:null,skipBlockLocking:!1,isOriginalCmd:!1,sendingToCollabServerMillis:null,isReadyToApply:null,initialize:function(){var e;this._args=this.options.args||{},this._args.collabProperties=this._args.collabProperties||{},e=this._args.collabProperties,this._cmds=[],this._affectedBlockIds=[],t.__super__.initialize.apply(this),!0===e.isCollabEnabled&&(e.isCollabCmd&&(this.finalNoteVersion=e.finalNoteVersion),this._initializeAffectedBlocks(),this.rangeIsRequired=!0,this.isReadyToApply=!0,this._args.isOriginalCmd&&(this.isOriginalCmd=!0))},finilize:function(){},_applyCommandToComposite:function(e,t){var n,o=this._cmds;o||(o=this._cmds=[]),n=e.apply(),e.isSimple?this.effected=!1!==n:(this.effected=this.effected||e.effected,this._affectedBlockIds||a.error("_affectedBlockIds cannot be null. please check the cmd("+this.name+") initialize has invoked its parent method")),t?this.setEndingRange(t):!e.isSimple&&e.getEndingRange()&&this.setEndingRange(e.getEndingRange()),o.push(e)},apply:function(){throw"Method not implemented."},doReapply:function(e){var t,n,o=this._cmds;if(a.log("doReapply(): `"+this.name+"`"),r.isCollabCommand(e))return this._reapplyCollabCmd(e);if(!o||!o.length)return a.warn("doReapply(): the composite command `"+this.name+"`no _cmds"),!0;for(t=o.length,n=0;n<t;++n)o[n].doReapply(e);return!0},doUnapply:function(e){var t,n=this._cmds;if(r.isCollabCommand(e))return this._unapplyCollabCmd(e);if(!n||!n.length)return a.warn("doUnapply(): the composite command `"+this.name+"`no _cmds"),!0;for(t=n.length-1;t>=0;--t)n[t].doUnapply(e);return!0},setStartingRange:function(e){s.isNoteRange(e)?(this.startingRange=e,this.options.args.range=this.startingRange):a.warn("noteRange is not a NoteRange",e)},setEndingRange:function(e){var t;s.isNoteRange(e)?(this.endingRange=e,t=this._getAffectedBlockIdsFromRange(this.options.note,this.endingRange),this.pushAffectedBlockIds(t)):a.warn("noteRange is not a NoteRange",e)},getStartingRange:function(){return this.startingRange},getEndingRange:function(){return this.endingRange},canBeMerged:function(e){return!!o.contains(["comp.KeyTextInput"],this.name)&&(!this.isCollabUndo&&!this.isCollabRedo&&e.name===this.name&&e.getCmdId()!==this.getCmdId()&&e.isLocalExecutedCmd===this.isLocalExecutedCmd)},executeAtomicCommand:function(e,t){this._applyCommandToComposite(e,t)},fromCollabJSON:function(){var e=this.options.args,n=e.collabProperties.cmdJSON,o=e.collabProperties.coreEditor;t.__super__.fromCollabJSON.apply(this),n&&(n.startNoteRange&&(e.range=l.buildNoteRangeFromJSON(n.startNoteRange,o),e.range?this.setStartingRange(e.range):a.warn("Failed to re-build the startNoteRange",n.startNoteRange)),n.endNoteRange&&(e.endRange=l.buildNoteRangeFromJSON(n.endNoteRange,o),e.endRange&&this.setEndingRange(e.endRange)),n.cmdNoteVersion&&(this.originalNoteVersion=n.cmdNoteVersion),this.skipBlockLocking=n.skipBlockLocking)},getAffectedBlockIds:function(){return o.clone(this._affectedBlockIds)},getCmdFinalNoteVersion:function(){return this.finalNoteVersion},getCmdOriginalNoteVersion:function(){return this.originalNoteVersion},getCollabProps:function(){return this._args.collabProperties},getLockedBlockIds:function(){var e=[],t=this.endingRange;return this.isCollabUndo?t=this.startingRange:this.skipBlockLocking&&(t=null),s.isNoteRange(t)?e.push(t.getEndBlockRange().getBlockId()):t&&a.error("locked targetRange should be a NOTE range",t),e},getIgnoreUndoRedo:function(){return this._args.ignoreUndoRedo},isSingleBlockAffected:function(){var e=!0;return this._args.range?s.isNoteRange(this._args.range)&&this._args.range.isInMultiBlock()&&(e=!1):e=!1,e},isValidStartNoteRange:function(){return!0},mergeLocalCmd:function(e){a.log("targetCmd:",e)},pushAffectedBlockIds:function(e){e&&(this._affectedBlockIds=o.union(this._affectedBlockIds,e))},resetAffectedBlockIds:function(e){this._affectedBlockIds=[],this.pushAffectedBlockIds(e)},setCmdFinalNoteVersion:function(e){this.finalNoteVersion=e},setCmdOriginalNoteVersion:function(e){this.originalNoteVersion=e},setIgnoreUndoRedo:function(e){this._args.ignoreUndoRedo=e},toCollabJSON:function(){var e,n=this,i=t.__super__.toCollabJSON.apply(n),l=[],c=n.getStartingRange(),u=!1;if(n.isOriginalCmd)if(s.isNoteRange(c))i.startNoteRange=c.toCollabJSON();else if(n.rangeIsRequired)return a.error("startingRange should be noteRange",c),null;if(n.isCollabUndo&&(i.isCollabUndo=n.isCollabUndo),n.isCollabRedo&&(i.isCollabRedo=n.isCollabRedo),n.originalNoteVersion&&(i.cmdNoteVersion=n.originalNoteVersion),n.isCollabUndo||n.isCollabRedo){if(n.cmdId=r.newGUID(),i.cmdId=n.cmdId,n.isOriginalCmd)if(s.isNoteRange(n.endingRange))i.endNoteRange=n.endingRange.toCollabJSON();else if(n.rangeIsRequired)return a.error("endingRange should be a noteRange:",n.endingRange),null;o.each(n._cmds,function(t){u||(t.rangeIsRequired=!1,n.isCollabUndo?(t.setCollabRedo(!1),t.setCollabUndo(!0)):(t.setCollabRedo(!0),t.setCollabUndo(!1)),(e=t.toCollabJSON())?l.push(e):(u=!0,a.error("Failed to get cmdJSON",t)))}),i.affectedBlockIds=n._affectedBlockIds.join(",")}return u?null:(l.length>0&&(i.innerCmds=l),n.isLocalExecutedCmd&&(i.isLocalExecutedCmd=!0),i.skipBlockLocking=n.skipBlockLocking,i)},_getAffectedBlockIdsFromRange:function(e,t){var n=[],i=[];if(e&&t){switch(t.getType()){case s.TYPE:n=e.getInterBlocks(t.getStartBlockRange().block,t.getEndBlockRange().block,!0);break;case c.PARAGRAPH:t.block&&n.push(t.block);break;default:a.error("pending supported range type:"+t.getType())}n&&n.length>0&&o.each(n,function(e){i.push(e.getId())})}return i},_initializeAffectedBlocks:function(){var e=[],t=this.options.note,n=this._args.range;n&&(e=this._getAffectedBlockIdsFromRange(t,n),this.pushAffectedBlockIds(e))},_reapplyCollabCmd:function(e){var t=e.collabProperties.cmdJSON;if(t&&t.innerCmds){var n,o=t.innerCmds,i=o.length;for(n=0;n<i;++n){var r=e.collabProperties.coreEditor.buildInnerCommandFromJSON(o[n],e);r&&(r.doReapply(r._args),r.isSimple&&(e.collabProperties.redoUndoEffected=!0))}}},_unapplyCollabCmd:function(e){var t=e.collabProperties.cmdJSON;if(t&&t.innerCmds){var n,o=t.innerCmds;for(n=o.length-1;n>=0;--n){var i=e.collabProperties.coreEditor.buildInnerCommandFromJSON(o[n],e);i&&(i.doUnapply(i._args),i.isSimple&&(e.collabProperties.redoUndoEffected=!0))}}}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(33),n(28),n(158),n(1),n(7),n(90),n(20),n(3),n(34),n(9),n(81),n(26)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlank=function(e){var n=new t({});return!0===e&&l.PLATFORM_LINE_HEIGHT&&l.PLATFORM_LINE_HEIGHT!==f.getDefault("line-height",d.PARAGRAPH)&&n.setBlockStyle("line-height",l.PLATFORM_LINE_HEIGHT),n},t.fromJSON=function(e,t){return this.generalFromJSON(e,!1,t)},t.fromCollabJSON=function(e){return this.generalFromJSON(e,!0)},t.fromXml=function(e){var t=this.createBlank();return t.parseIdFromXml(e),t.setText(h.fromXml(e)),$(e).children().each(function(e,n){switch(n.nodeName){case u.TAG_ID_NAME:case u.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":case"language":case"theme":case"entities":break;case"styles":o.fromXml(t,n);break;default:i.appendToTree(t.unknownTree,n)}}),t},t.generalFromJSON=function(e,t,o){if(e){if(e.type=e.type||e.blockType,d.isParagraphClusterType(e.type)&&(e.text||e.richText)){var i,r=this.createBlank();return i=t?h.fromCollabJSON(e.richText):h.fromJSON(e.richText||e.text),r.setText(i),o||n.each(e.styles,function(e,t){r.setBlockStyle(t,e)}),e.blockId&&r.setId(e.blockId),r}a.warn("invalid type or text.")}else a.warn("jsonObj should not be null!")},t.prototype.append=function(e){this.richText.append(e)},t.prototype.countWords=function(e){var t,n=0,o=this.richText;return l.IS_MOBILE||!e?n=r(o):(t=this.getRangeText(e))&&(n=r(t)),n},t.prototype.deleteText=function(e,t,o){n.isObject(e)&&!n.isUndefined(e.start)&&(t=e.end,e=e.start);var i,r=this.richText,a=r.slice(0,e),s=h.createBlank();t>=0&&(i=r.slice(t)),s.append(a),s.append(i),this.setText(s,o)},t.prototype.getBlockBackColor=function(){var e=this.richText.getStyle(0,this.richText.getLength(),"back-color");return d.isParagraph(this)&&e.length&&n.all(e,function(t){return t===e[0]})?e[0]:""},t.prototype.getCommonInlineStyle=function(e,t){var n,o;return t?(n=t.start,o=t.end):(n=this.getStartOffset(),o=this.getEndOffset()),this.richText.getCommonStyle(n,o,e)},t.prototype.getCommonInlineStyles=function(e){var t,n,o=this.richText;return e?(t=e.start,n=e.end):(t=this.getStartOffset(),n=this.getEndOffset()),o.getCommonStyles(t,n)},t.prototype.getDefaultInlineStyles=function(){return g.getAllDefault()},t.prototype.getStartOffset=function(){return 0},t.prototype.getEndOffset=function(){return this.getLength()},t.prototype.getHighlight=function(e,t){if(e&&e.length){var o=this.richText,i=[];return n.each(e,function(e){for(var n=e.getLength(),r=o.indexOf(e,0,t.ignoreCase);-1!==r;)i[r]={end:r+n,start:r},r=o.indexOf(e,r+n,t.ignoreCase)}),(i=n.compact(i)).length?i:null}},t.prototype.getInlineStyleForEmpty=function(e,t){return(this.getInlineStylesForEmpty(t)||{})[e]},t.prototype.getInlineStylesForEmpty=function(e){var t=this.inlineStylesForEmpty;return e&&(t=t||g.getAllDefault()),t=n.clone(t)},t.prototype.getLength=function(e){return this.richText.getLength(e)},t.prototype.getReadOnlyText=function(){return this.richText},t.prototype.getRangeText=function(e){if(e&&null!=e.start)return this.sliceText(e.start,e.end)},t.prototype.getStyleRanges=function(e,t){return this.richText.getStyleRanges(e,t)},t.prototype.getText=function(){return this.richText.slice(0)},t.prototype.getTextStyle=function(e,t,o){var i=this.richText;return n.isObject(t)&&null!=t.start&&(o=t.end,t=t.start),i.getStyle(t,o,e)},t.prototype.getTextStylesAtIndex=function(e){return this.richText.getStylesAtIndex(e)},t.prototype.setEntity=function(e){this.richText.setEntity(e),this.trigger("content-change")},t.prototype.insertText=function(e,t){return this.richText.insert(t,e),this.trigger("content-change"),!0},t.prototype.isEmpty=function(){return this.richText.isEmpty()},t.prototype.isEmptyContent=function(){return 0===this.getLength(!1)},t.prototype.removeAllStyles=function(){e.prototype.removeAllStyles.call(this),this.richText.removeStyles(),this.trigger("content-change",this)},t.prototype.setInlineStylesForEmpty=function(e){this.inlineStylesForEmpty=e},t.prototype.setText=function(e,t){e instanceof h||(n.isString(e)||(e=String(e)),e=new h({text:e})),this.richText=e,this.trigger("content-change",t)},t.prototype.setTextStyle=function(e,t,o,i){var r,a=this.richText;d.isQuote(this)&&(r=this.getDefaultSetFont()),n.isObject(o)&&null!=o.start&&(i=o.end,o=o.start),a.setStyle(o,i,e,t,r),this.trigger("content-change")},t.prototype.sliceText=function(e,t,n){return this.richText.slice(e,t,n)},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.richText=this.richText.toCollabJSON(),t},t.prototype.toHtml=function(e,t,n){var o,i,r,a=document.createElement("div"),s=$(a);return n=!0===n,s.attr("yne-bulb-block","paragraph").css("white-space","pre-wrap"),this.applyBlockStylesOnElement(s),e=e||0,t=null==t?this.getEndOffset():t,o=this.sliceText(e,t,!1),i=p.rich2html(o,{withDefault:n}),s.html(i),r=a.outerHTML,a=s=null,r},t.prototype.toPlain=function(e,t){var n;return e=e||0,n=this.sliceText(e,t,!1).toString(),n=c(n)},t.prototype.toJSON=function(t,n){t=t||0;var o=this.sliceText(t,n,!1),i=e.prototype.toJSON.call(this);return i.richText=o.toJSON(),i},t.prototype.toXml=function(t){var n,r,a=e.prototype.toXml.apply(this,[t]),s=t.createElement("text"),l=this.richText.toString(),c=t.createTextNode(l);return s.appendChild(c),a.appendChild(s),(r=this.richText.toXml(t))&&a.appendChild(r),n=t.createElement("styles"),o.toXml(this,n,t),a.appendChild(n),i.appendToXml(this.unknownTree,a),a},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=d.PARAGRAPH,null!=t.text?this.setText(t.text):this.setText("")},t.prototype.applyBlockStylesOnElement=function(e,t){var o,i=this,r=i.getBlockStyles(),s={};n.each(r,function(e,n){switch(n){case"align":s["text-align"]=e;break;case"indent":case"text-indent":t?(e=i.getBlockStyle("indent")+i.getBlockStyle("text-indent"),o="text-indent"):(e=e>0?e:0,o="indent"===n?"margin-left":"text-indent"),s[o]=e*l.INDENT_WIDTH||"";break;case"line-height":e>0&&(s["line-height"]=String(e));break;case"back-color":s["background-color"]=String(e);break;case"padding":s.padding=String(e);break;default:a.warn("unknown block style: "+n)}}),s["line-height"]||(o=f.getDefault("line-height",d.PARAGRAPH),s["line-height"]=o),o=p.getDefaultForHtml("font-size"),s["font-size"]=o,e.css(s)},t}(u)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(21)],void 0===(i=function(e,t,n){return function(e){function t(t){return(t=t||{}).enableEvent=!0,e.call(this,t)||this}return s(t,e),t.prototype.on=function(e,t,n){return this.eventInst.on(e,t,n)},t.prototype.off=function(e,t,n){return this.eventInst.off(e,t,n)},t.prototype.trigger=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return(t=this.eventInst).trigger.apply(t,[e].concat(n))},t.prototype.bind=function(e,t,n){return this.eventInst.bind(e,t,n)},t.prototype.unbind=function(e,t,n){return this.eventInst.unbind(e,t,n)},t.prototype.once=function(e,t,n){return this.eventInst.once(e,t,n)},t.prototype.listenTo=function(e,t,n){return this.eventInst.listenTo(e,t,n)},t.prototype.listenToOnce=function(e,t,n){return this.eventInst.listenToOnce(e,t,n)},t.prototype.stopListening=function(e,t,n){return this.eventInst.stopListening(e,t,n)},t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(1)],void 0===(i=function(e,t,n){return function(){function e(){}return e.getTemplate=function(e,t){var o=e+"/"+t,i=(this&&this.JST?this:window).JST[o];if(!i){if(n.DEBUG)throw new Error("JST has no template: "+o);n.error("JST has no template: "+o)}return i},e.render=function(e,t,o){var i=this.getTemplate(e,t);if(i)return i(o);n.error("no tempalte: "+e+"/"+t+".jst","template/jst.js")},e.trimTempalte=function(e){if(e=e||""){var t,n,o=e.split(/[\r\n]/),i=o.length;for(t=0;t<i;t++)n=(n=o[t]||"").trim(),o[t]=n;return o.join("")}},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(4),n(11),n(17),n(1),n(81)],void 0===(i=function(e,t,n,o,i,r,a,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromXml=function(e){throw new Error("The fromXml should be implemented by subclass!")},t.parseResourceList=function(e){var t=[];return $(e).find(">resource-list>resource-mono>res-id").each(function(e,n){var o=$(n).text();(o=$.trim(o))&&t.push(o)}),t},t.prototype.isSupportedBlockStyle=function(e){return l.isSupport(e,this.type)},t.prototype.isEmptyContent=function(){return!1},t.prototype.isEmpty=function(){return!1},t.prototype.setBlockStyle=function(e,t){var o=l.getConfig(e,this.type),i=/^-?\d+%$/;o&&("Enum"===o.type?o.possible[t]||(t=o.default):"Number"!==o.type||n.isNumber(t)?"Boolean"!==o.type||n.isBoolean(t)?n["is"+o.type]&&t&&!n["is"+o.type](t)&&(t=t.default):t="true"===t:(t=null===t||""===t?NaN:i.test(t)?t:Number(t),i.test(t)||!isNaN(t)&&t||(t=o.default)),t=t||o.default,this.styles[e]=t,this.trigger("style-change",e,t))},t.prototype.setBlockStyles=function(e){var t=this;e&&n.each(e,function(e,n){t.setBlockStyle(n,e)})},t.prototype.getBlockStyles=function(){return n.clone(this.styles)},t.prototype.getBlockStyle=function(e,t){var n=l.getConfig(e,this.type);return n?!0===t?this.styles[e]:this.styles[e]||n.default:null},t.prototype.getDefaultBlockStyles=function(){return l.getDefaultsOfBlock(this.type)},t.prototype.removeBlockStyles=function(){this.styles={},this.trigger("styles-reset")},t.prototype.removeAllStyles=function(){this.removeBlockStyles()},t.prototype.toXml=function(e){var n,o,i,r=this.getId();if(null!=r)return n=e.createElement(this.xmlNodeName),o=e.createElement(t.TAG_ID_NAME),i=e.createTextNode(r),o.appendChild(i),n.appendChild(o),n;a.debugAlert("The block has NO id",this)},t.prototype.getType=function(){return this.type},t.prototype.parseIdFromXml=function(e){var n,o;(n=this._getChildByTagName(e,t.TAG_ID_NAME))&&(o=n.textContent),o||i.IS_ANDROID||(n=this._getChildByTagName(e,t.LEGACY_TAG_ID_NAME))&&(o=n.textContent),null==o?this.validForCollab=!1:this.blockId=o},t.prototype.toJSON=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{blockId:this.getId(),blockType:this.type,styles:this.getBlockStyles(),type:this.type}},t.prototype.toHtml=function(e,t,n){throw new Error("toHtml() should be implemented by subclass!")},t.prototype.toPlain=function(e,t){throw new Error("toPlain() should be implemented by subclass!")},t.prototype.countWords=function(e){throw new Error("countWords() should be implemented by subclass!")},t.prototype.setResourceIds=function(e){e&&e.length&&(this.resourceIds=e)},t.prototype.getResourceIds=function(){return this.resourceIds},t.prototype.getExtraInfo=function(e){var t;return this.trigger("get-extra-info",e,function(e){t=e}),t},t.prototype.getDefaultSetFont=function(){var e;return this.trigger("get-default-set-font",function(t){e=t}),e},t.prototype.highlight=function(e,t,n){this.trigger("high-light",e,t,n)},t.prototype.getId=function(){var e=this.blockId;return null==e&&a.debugAlert("The blockId should NOT be null"),e},t.prototype.setId=function(e){null!=e?this.blockId=e:a.debugAlert("The param blockId should NOT be null")},t.prototype.setLocked=function(e,t){this.locked===e&&t&&!t.lockUpdated||(this.locked=e,this.trigger("locked-change",t))},t.prototype.isLocked=function(){return this.locked},t.prototype.getUnknownTree=function(){return this.unknownTree},t.prototype.isValidForCollab=function(){return this.validForCollab},t.prototype.resetLockState=function(){this.locked=!1},t.prototype.toCollabJSON=function(){return this.toJSON()},t.prototype.setReadOnly=function(e){this.readOnly=!!e},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.initialize=function(e){e=e||{},this.styles={},this.validForCollab=!0,null==this.blockId&&(null!=e.blockId||null!=e.id?this.blockId=e.blockId||e.id:this.blockId=o.newGUID()),this.unknownTree={}},t.prototype._getChildByTagName=function(e,t){if(e)for(var n=e.childNodes[0];n;){if(n.nodeName&&n.nodeName===t)return n;n=n.nextSibling}},t.TAG_ID_NAME="coId",t.LEGACY_TAG_ID_NAME="id",t}(r)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(27)],void 0===(i=function(e,t,n,o){return function(){function e(e){(e=e||{}).enableEvent&&(this.eventInst={},n.extend(this.eventInst,o.Events)),this.options=n.extend({},e),this.initialize.apply(this,[e])}return e.extend=function(e,t){var o,i,r=this;return o=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(o,r,t),(i=function(){this.constructor=o}).prototype=r.prototype,o.prototype=new i,e&&n.extend(o.prototype,e),o.__super__=r.prototype,o},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(16),n(192),n(82),n(11),n(21),n(1),n(7),n(3),n(628)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){if(e&&e.startRange&&e.endRange)return new t(e);c.warn("options is unvalid!")},t.createForHeaderFooter=function(e){return new t({blockRanges:[new i({block:e})]})},t.createMock=function(){var e={},n=new o({}),i=new r({block:n,end:0,start:0});return e.startRange=i,e.endRange=e.startRange,new t(e)},t.fromCollabJSON=function(e,n){var o=null;if(e){var i=e.startBlockRange,r=e.endBlockRange,a={};a.startRange=n.buildBlockRangeFromJSON(i),e.isInSingleBlock?a.endRange=a.startRange:a.endRange=n.buildBlockRangeFromJSON(r),a.startRange&&a.endRange&&(o=t.create(a))}return o},t.fromNativeRange=function(e,o){if(e){if(e instanceof t)return e;var i=o.parseNativeRange(e);if(i&&i.length)return new t({endRange:n.last(i),startRange:n.first(i)});c.warn("Failed to parse native range to note range!")}else c.warn("no range")},t.isNoteRange=function(e){var n=!1;return e&&e.type===t.TYPE&&e.getStartBlockRange()&&e.getEndBlockRange()&&(n=!0),n},t.isValidType=function(e){return e===t.DATA_TYPES.JSON||e===t.DATA_TYPES.HTML||e===t.DATA_TYPES.PLAIN},t._getMethodName=function(e){var n="";switch(e){case t.DATA_TYPES.JSON:n="JSON";break;case t.DATA_TYPES.HTML:n="Html";break;case t.DATA_TYPES.PLAIN:n="Plain"}return n},t.getBlockRangeMethodName=function(e){var n=t._getMethodName(e);if(n)return"getDataAs"+n},t.prototype.canDrawedByNative=function(){return!this.isInSingleBlock()||this.getStartBlockRange().canDrawedByNative()},t.prototype.clone=function(e){var n,o;return!1===e?(n=this.startRange,o=this.endRange):(n=this.startRange.clone(),o=this.isInSingleBlock()?n:this.endRange.clone()),t.create({startRange:n,endRange:o})},t.prototype.collapse=function(e){var t=!1===e?this.getEndBlockRange():this.getStartBlockRange();t&&t.collapse?(t.collapse(e),this.startRange=t,this.endRange=t):c.warn("There is no blockRange or blockRange has no `collapse` method")},t.prototype.createWalker=function(e,t){return p.create(this,e,t)},t.prototype.getStartBlockRange=function(){return this.startRange},t.prototype.getEndBlockRange=function(){return this.endRange},t.prototype.getDataAsHtml=function(e){var t=this.startRange;return this._isSingleNotFullSelectedLI()?t.block.toHtml(t.start,t.end):e.toHtml(this)},t.prototype.getDataAsJSON=function(e,n){var o=this._getDataWithType(e,t.DATA_TYPES.JSON,n);return o=o||[],JSON.stringify(o)},t.prototype.getDataAsPlain=function(e,n){var o=this._getDataWithType(e,t.DATA_TYPES.PLAIN,n),i="";return o&&o.length&&(i=o.join(u.LINE_BREAK)),i},t.prototype.getDataWithType=function(e,t,n){return this._getDataWithType(e,t,n)},t.prototype.getType=function(){return this.type},t.prototype.isCollapsed=function(){return!(!this.startRange||!this.isInSingleBlock())&&this.startRange.isCollapsed()},t.prototype.isInSingleBlock=function(){return this.startRange===this.endRange},t.prototype.isInMultiBlock=function(){return!this.isInSingleBlock()},t.prototype.isMatchBlockTypes=function(e,t){if(!e)return c.warn("The param note does not exist!"),!1;var n,o,i,r=this.startRange.block,a=this.endRange.block,s=e.getBlockIndex(r),l=e.getBlockIndex(a);if(-1===s||-1===l)return c.warn("startIndex or endIndex is -1!"),!1;for(n=e.getAllBlocks(),o=s;o<=l;o++)if(i=d.getType(n[o]),-1===t.indexOf(i))return!1;return!0},t.prototype.isSingleTableSelected=function(){var e=this.startRange;return!(!this.isInSingleBlock()||!d.isTable(e.block))},t.prototype.setBlockRanges=function(e){this.startRange=n.first(e),this.endRange=n.last(e),this._checkValid()},t.prototype.toCollabJSON=function(e){var t={};return t.startBlockRange=this.startRange.toCollabJSON(e),this.isInSingleBlock()?t.isInSingleBlock=!0:(t.isInSingleBlock=!1,t.endBlockRange=this.endRange.toCollabJSON(e)),t},t.prototype.toNativeRange=function(e){var t,n,o;if(this.canDrawedByNative())if(t=this.getStartBlockRange().toNativeRange(e)){if(this.isInSingleBlock())return t;if(n=this.getEndBlockRange().toNativeRange(e))return(o=document.createRange()).setStart(t.startContainer,t.startOffset),o.setEnd(n.endContainer,n.endOffset),o;c.warn("no native range for end block!")}else c.warn("no native range for start block!")},t.prototype.initialize=function(e){e=e||{},delete this.options,this.type="note",e.startRange||e.endRange||!e.blockRanges?this.setBlockRanges([e.startRange,e.endRange]):this.setBlockRanges(e.blockRanges)},t.prototype._checkValid=function(){var e=this.startRange,t=this.endRange;if(!e||!t)throw new Error("starRange or endRange is not valid!");if(!e.block||!t.block)throw new Error("starRange.block or endRange.block is not valid!");if(e.block===t.block&&e!==t)throw new Error("startRange and endRange should be the same object when startRange.block === endRange.block")},t.prototype._getDataWithType=function(e,n,o){if(e&&e.getBlockAt){if(t.isValidType(n)){o=o||function(){return!0};var i,r,s,l,u=[],p=this.startRange,h=t.getBlockRangeMethodName(n);if(t.DATA_TYPES.PLAIN===n&&this._isSingleNotFullSelectedLI())return i=p.block.toPlain(p.start,p.end),u.push(i),u;if(!(l=this.createWalker(e,function(e){return o(e.block)})))return[];for(s=l.next();s;)null!=(i=s[h]())?Array.isArray(i)?u=u.concat(i):(r=s.block,(a.IS_WEB_NOTE||a.IS_WEB_GROUP)&&d.isAttachment(r)&&i.resource&&!/^http/i.test(i.resource)&&(i.resource=location.protocol+"//"+location.hostname+i.resource),u.push(i)):c.warn("data is null!"),s=l.next();return u}c.warn("type is unvalid!")}else c.warn("note is unvalid!")},t.prototype._isSingleNotFullSelectedLI=function(){var e=this.startRange,t=!1;return this.isInSingleBlock()&&d.isListItem(e.block)&&(0!==e.start||e.end!==e.block.getLength())&&(t=!0),t},t.TYPE="note",t.DATA_TYPES={JSON:1,HTML:2,PLAIN:3},t}(l)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(129),o=n(41),i=n(3),r=n(146),a=n(26),s=n(163),l=n(0),c=n(9),u=n(1),d=n(16),p=n(36),h=n(98),f=n(73),g=n(42),y=n(130),m=n(75),v=n(110),b=n(205),_=n(48),I=n(44),k=n(134),w=n(302),C=n(303),S=n(374),x=n(207),A=n(304),T=n(7),N=n(22),E=n(140),D=n(93);return{createNewListItem:function(e,t,n){var o=new p({id:t,level:e.getLevel(),list:e.getOwnerList(),text:n});return o.setBlockStyles(e.getBlockStyles()),o},createNewParagraph:function(e,t,n,o){var r=new d({blockId:t,text:o?new c({text:n.toString()}):n});return!e||i.isHeading(e)||i.isCatalogue(e)?e&&(r.setBlockStyle("back-color",e.getBlockStyle("back-color")),r.setBlockStyle("padding",e.getBlockStyle("padding"))):r.setBlockStyles(e.getBlockStyles()),r},createNewTodo:function(e,t){var n=new g(t);return e&&n.setBlockStyles(e.getBlockStyles()),n},createNewCode:function(e,t){var n=new m(t);return e&&n.setBlockStyles(e.getBlockStyles()),n},convertCodeToPara:function(e){var t=this,n=e;return i.isCode(e)&&(n=e.toCodeLines().map(function(n){return t.createNewParagraph(e,null,n)})).forEach(function(t){t.setBlockStyles(e.getBlockStyles())}),n},createNewQuote:function(e,t){var n=new y(t);return e&&n.setBlockStyles(e.getBlockStyles()),n},createNewHeading:function(e,t,n,o,r){var a,l;return n.getLength&&!r&&(l=n.getLength(),i.isHeading(e)&&"b"===e.getLevel()&&(n=this._clearHeadingInlineStyle("color",e,n)),n.setStyles(0,l,s.headingInlineStyles[o])),(a=new h({id:t,text:n,level:o})).setBlockStyles(e.getBlockStyles()),s.headingBlockStyles[o]&&!r&&a.setBlockStyles(s.headingBlockStyles[o]),a},_clearHeadingInlineStyle:function(e,t,n){var o,i=t.getLevel(),r=s.headingInlineStyles[i][e];for(o=0;o<n.getLength();o++)r===n.getStylesAtIndex(o)[e]&&delete n.richTextProps.data[o].styles[e];return n},createNewCatalogue:function(e,t){var n=new f(t);return!t.ownerList&&i.isCatalogue(e)&&(t.ownerList=e.getOwnerList()),n=new f(t),e&&n.setBlockStyles(e.getBlockStyles()),n},isForCatalogueBlock:function(e){return i.isHeading(e)&&e.getLevel()<4&&!e.isEmpty()&&e.getText().toString().trim()},deleteSelectedContent:function(e,t,n){var o,r,a,s,l;N.isNoteRange(n)?(o=n.getStartBlockRange(),a=n.getEndBlockRange(),r=o.block,s=a.block,i.isTextBlock(r)&&(i.isCode(r)?o.selectWholeBlock?e.executeAtomicCommand(new _({note:t,blocks:[r]})):e.executeAtomicCommand(new b({block:r,startBlockRange:o,endBlockRange:a})):e.executeAtomicCommand(new v({block:r,start:o.start,end:o.end}))),n.isInMultiBlock()&&((l=t.getInterBlocks(r,s))&&l.length>0&&e.executeAtomicCommand(new _({note:t,blocks:l})),i.isTextBlock(s)&&(i.isCode(s)?e.executeAtomicCommand(new b({block:s,startBlockRange:o,endBlockRange:a})):e.executeAtomicCommand(new v({block:s,start:a.start,end:a.end}))))):u.error("deleteSelectedContent: selectedNoteRange should be a NoteRange",n)},getBackwardBlockRange:function(e,t){var n=e.getPreBlock(t);if(n)return o.createRangeByBlock({block:n,allContent:!1,collapseToStart:!1})},getForwardBlockRange:function(e,t){var n=e.getNextBlock(t);if(n)return o.createRangeByBlock({block:n,allContent:!1,collapseToStart:!0})},getNoteView:function(e){return e._cmdArgs.collabProperties.coreEditor.noteView},insertTabChar:function(e,t,n,o){var i;(i=new c({text:"\t"})).setStyles(0,i.getLength(),o),e.executeAtomicCommand(new k({block:t,start:n,text:i}))},isInSameList:function(e){var t,n=!1;return i.isListItem(e[0])?n=l.every(e,function(e,n){if(i.isListItem(e)){if(0===n)return t=e.getOwnerList(),!0;if(e.getOwnerList()===t)return!0}return!1}):n},recogLink:function(e,t,n,o){var i,a,s={color:"#003884",underline:!0};i=t.getText().toString().slice(n,o);for(var l=o-1;l>=n;l--)if(t.getTextStyle("href",l,l+1)[0]){n=l;break}i=i.slice(n,o),(a=r.matchEnd(i))&&a.result&&(s.href=a.fullURI,e.executeAtomicCommand(new w({blocks:[t],styleNameValues:s,start:n+a.result.index,end:o})))},replaceBlockWithListItem:function(e,t,n,o,i,r){var a,s=o.getId();return e.executeAtomicCommand(new _({note:t,blocks:[o]})),a=this.createNewListItem(n,s,i),e.executeAtomicCommand(new I({note:t,newBlks:[a],preBlk:r})),a},replaceBlockWithParagraph:function(e,t,n,o,i,r){var a,s=n.getId(),l=t.getPreBlock(n);return(a=this.createNewParagraph(n,s,o,r)).setInlineStylesForEmpty(i),e.executeAtomicCommand(new _({note:t,blocks:[n]})),e.executeAtomicCommand(new I({note:t,newBlks:[a],preBlk:l})),a},replaceBlockWithHeading:function(e,t,n,o,i){var r,a=n.getId(),s=t.getPreBlock(n);return r=this.createNewHeading(n,a,o,i),e.executeAtomicCommand(new _({note:t,blocks:[n]})),e.executeAtomicCommand(new I({note:t,newBlks:[r],preBlk:s})),r},deleteHref:function(e,t,n,o){e.executeAtomicCommand(new w({blocks:[t],styleNameValues:{href:"",color:"#393939",underline:!1},start:n,end:o}))},resetAllStyles:function(e,t,n,o,i,r){this.setStylesOnNoteRange(e,t,n,o,i,r)},setNonTextBlockAsEndingRange:function(e,n){var o=t.buildNoteRangeFromNonTextBlock(n);e.setEndingRange(o)},setBlockStyle:function(e,t){e&&e.setInlineStylesForEmpty&&e.isEmpty()&&e.setInlineStylesForEmpty(t)},setResourceBlockStyleByPreBlock:function(e,t){e&&t&&(e.setBlockStyle("back-color",t.getBlockStyle("back-color")),e.setBlockStyle("padding",t.getBlockStyle("padding")))},setStylesOnNoteRange:function(e,t,n,o,r,s){var c,u=this,d=n.getStartBlockRange(),p=d.block,h=n.getEndBlockRange(),f=h.block,g=[],y=[],m=[],v=[],b=!!s&&s.resetAllStyles,_=!!s&&s.isRemoveFormat;return(void 0===o&&void 0===r||b)&&(c=!0,r||(r=a.getAllDefault(["href"]))),o=o||{},r=r||{},u._isFullSelected(d)?y.push(p):(c&&(o=p.getDefaultBlockStyles()),_||u._setBlocksBlockStyles(e,[p],o)),n.isInMultiBlock()&&(g=t.getInterBlocks(p,f),y=l.union(y,g),u._isFullSelected(h)?y.push(f):(c&&(o=f.getDefaultBlockStyles()),_||u._setBlocksBlockStyles(e,[f],o))),l.each(y,function(t){c&&(o=t.getDefaultBlockStyles()),u._setBlocksBlockStyles(e,[t],o),i.isTextBlock(t)&&m.push(t),i.isTable(t)&&v.push(t)}),l.isEmpty(r)||(i.isTextBlock(p)&&!u._isFullSelected(d)&&e.executeAtomicCommand(new w({blocks:[p],styleNameValues:c&&i.isHeading(p)?p.getDefaultInlineStyles():r,start:d.start,end:d.end})),n.isInMultiBlock()&&i.isTextBlock(f)&&!u._isFullSelected(h)&&e.executeAtomicCommand(new w({blocks:[f],styleNameValues:c&&i.isHeading(f)?f.getDefaultInlineStyles():r,start:h.start,end:h.end})),y.length>0&&(m=u._filterHeadingBlock(e,m,r,c),e.executeAtomicCommand(new w({blocks:m,styleNameValues:r,fullText:!0})))),this._filterTableBlocks({isStyleReset:c,startBlockRange:d,endBlockRange:h,noteRange:n,fullSelectedTableBlocks:v,inlineStyles:r,blockStyles:o,targetCmd:e})},_filterHeadingBlock:function(e,t,n,o){if(!o)return t;var r=t.filter(function(e){if(!i.isHeading(e))return e}),a=t.filter(function(e){if(i.isHeading(e))return e});return a.length>0&&a.forEach(function(t){e.executeAtomicCommand(new w({blocks:[t],styleNameValues:t.getDefaultInlineStyles(),fullText:!0}))}),r},_filterTableBlocks:function(e){var t=this,n=e.startBlockRange,o=e.endBlockRange,r=e.noteRange,a=e.fullSelectedTableBlocks,s=e.inlineStyles,c=e.blockStyles,u=e.targetCmd,d=n.block,p=o.block;n.isOnCellEdit&&n.isOnCellEdit()||t._adaptTableStylesInlineToBlock(s,c,e.isStyleReset),l.isEmpty(s)||(i.isTable(d)&&t._setTableCellInlineStyles({table:d,range:n,styles:s,cmd:u}),r.isInMultiBlock()&&i.isTable(p)&&t._setTableCellInlineStyles({table:p,range:o,styles:s,cmd:u}),a.forEach(function(e){t._setTableCellInlineStyles({table:e,styles:s,isAll:!0,cmd:u})})),l.isEmpty(c)||(i.isTable(d)&&t._setTableCellBlockStyles({table:d,range:n,styles:c,cmd:u}),r.isInMultiBlock()&&i.isTable(p)&&t._setTableCellBlockStyles({table:p,range:o,styles:c,cmd:u}),a.forEach(function(e){t._setTableCellBlockStyles({table:e,isAll:!0,styles:c,cmd:u})}))},_adaptTableStylesInlineToBlock:function(e,t,n){!l.isEmpty(e)&&e["back-color"]&&(t.backColor=e["back-color"],n||delete e["back-color"])},_setTableCellInlineStyles:function(e){var t,n,o=e.isAll,i=e.range,r=e.cmd,a=o?D.TYPES.ALL:D.TYPES.NORMAL;i?t=i.getAsRectRange():a===D.TYPES.ALL&&(t=(i=D.create({block:e.table,type:D.TYPES.ALL})).getAsRectRange()),n=t?t.getRect():null,r.executeAtomicCommand(new S({table:e.table,styles:e.styles,type:a,rect:n}))},_setTableCellBlockStyles:function(e){var t=e.isAll,n=e.range?e.range:D.create({block:e.table,type:D.TYPES.ALL}),o=e.cmd,i=n.getAsRectRange(),r=t?D.ALL:D.NORMAL,a=n&&i?i.getRect():null;o.executeAtomicCommand(new x({table:e.table,styles:e.styles,type:r,rect:a}))},setTextBlockAsEndingRange:function(e,n,o,i){var r=t.buildNoteRangeFromParagraph(n,o,i);e.setEndingRange(r)},setCodeBlockAsEndingRange:function(e,t,n,o){var i=E.createNewRange({preCodeRange:t,charOffset:n,lineOffset:o}),r=N.create({endRange:i,startRange:i});e.setEndingRange(r)},expandCodeRange:function(e,t,n,o){var i=E.createNewRange({preCodeRange:t,charOffset:n,lineOffset:o,needCollapse:!1}),r=N.create({endRange:i,startRange:i});return e.setEndingRange(r),i},updateBlocksIndentLevel:function(e,t,n){var o,i,r={},a={};l.each(t,function(e){o=e.getBlockStyle("indent"),!l.isNumber(o)||0===o&&n<0||(i=parseInt(e.getBlockStyle("text-indent"),10)||0,o=o<0?0:o+n,o=Math.min(o,T.MAX_LIST_ITEM_LEVEL-i),r[o]||(r[o]=[]),r[o].push(e))}),l.each(r,function(t,n){a.indent=n,e.executeAtomicCommand(new C({blocks:t,styleNameValues:a}))})},updateBlockTextIndentLevel:function(e,t,n){var o,i,r;o=t.getBlockStyle("text-indent"),r=parseInt(t.getBlockStyle("indent"),10)||0,o||(o=0),i=o+n,(i=Math.min(i,T.MAX_LIST_ITEM_LEVEL-r))>=0&&e.executeAtomicCommand(new C({blocks:[t],styleNameValues:{"text-indent":i}}))},_isFullSelected:function(e){var t=e.block;return i.isTextBlock(t)?0===e.start&&e.end===t.getLength()||void 0:!i.isTable(t)||e.isFullSelected()},_setBlocksBlockStyles:function(e,t,n){l.isEmpty(n)||e.executeAtomicCommand(new C({blocks:t,styleNameValues:n}))},fixMergeCellBeforeRowColChange:function(e){e.isCol?this._fixMergeCellColChange(e):this._fixMergeCellRowChange(e)},_fixMergeCellRowChange:function(e){var t,n,o,i,r=e.table,a=e.isCol,s=e.insertData,l=e.isDelete,c=e.index,d=r.getCells();if(d[c])for(n=0;n<d[c].length;n++)if((t=r.getCell(c,n))&&(t.isMergePoint()&&l&&(i=this._fixMergePointCellWhenDel({cell:t,row:c,col:n,table:r,isCol:a,cmd:e.cmd})),t.isMergedCell())){if((o=this._findMergePointCell({cell:t,row:c,col:n,table:r})).row===c)continue;if((i=this._fixMergePointWithMergeCell({pointCellInfo:o,table:r,isCol:a,isDelete:l,insertData:s,cmd:e.cmd,cellInfo:{row:c,col:n}})).col<n)return void u.error("New index should more then i");n=i.col}},_fixMergeCellColChange:function(e){var t,n,o,i,r=e.table,a=e.isCol,s=e.insertData,l=e.isDelete,c=e.index,d=r.getCells();for(n=0;n<d.length;n++)if((t=r.getCell(n,c))&&(t.isMergePoint()&&l&&(n=(i=this._fixMergePointCellWhenDel({cell:t,row:n,col:c,table:r,isCol:a,cmd:e.cmd})).row),t.isMergedCell())){if((o=this._findMergePointCell({cell:t,row:n,col:c,table:r})).col===c)continue;if((i=this._fixMergePointWithMergeCell({pointCellInfo:o,table:r,isCol:a,isDelete:l,insertData:s,cmd:e.cmd,cellInfo:{row:n,col:c}})).row<n)return void u.error("New index should more then i");n=i.row}},_findMergePointCell:function(e){var t=e.row,n=e.col;return e.table.getCell(t,n,{findMergePointIfNeeded:!0,withPosition:!0})},_fixMergePointWithMergeCell:function(e){var t,n,o,i=e.table,r=e.pointCellInfo,a=e.cellInfo,s=e.isDelete,l=e.isCol,c=e.cmd,u=e.insertData,d=r.cell,p=r.row,h=r.col,f=d.getMergePointAttr(),g=a.row,y=a.col,m=0,v=0;for(s?l?m=-1:v=-1:l?m=1:v=1,c.executeAtomicCommand(new A({table:i,type:A.TYPES.POINT,value:{width:f.width+m,height:f.height+v,fireChange:!1},rect:{row:p,col:h}})),t=g;t<p+f.height;t++)for(n=y;n<h+f.width;n++)o=i.getCell(t,n).getMergedCellAttr(),n===y&&!s&&l&&u[t]&&u[t].setMergedCellAttr(o.dx,o.dy),t!==g||s||l||!u[n]||u[n].setMergedCellAttr(o.dx,o.dy),c.executeAtomicCommand(new A({table:i,type:A.TYPES.CELL,value:{dx:o.dx+m,dy:o.dy+v,fireChange:!1},rect:{row:t,col:n}}));return{row:p+f.height-1,col:h+f.width-1}},_fixMergePointCellWhenDel:function(e){var t,n,o,i,r=e.cell,a=e.row,s=e.col,l=e.table,c=e.isCol,u=e.cmd,d=r.getMergePointAttr(),p=0,h=0;for(c?h=1:p=1,t=a+p;t<a+d.height;t++)for(n=s+h;n<s+d.width;n++)(o=l.getCell(t,n))&&(t!==a+p||n!==s+h?(i=o.getMergedCellAttr(),u.executeAtomicCommand(new A({table:l,type:A.TYPES.CELL,value:{dx:i.dx-h,dy:i.dy-p},rect:{row:t,col:n}}))):u.executeAtomicCommand(new A({table:l,type:A.TYPES.POINT,value:{width:d.width-h,height:d.height-p},rect:{row:t,col:n}})));return{row:a+d.height-1,col:s+d.width-1}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(151)("wks"),i=n(112),r=n(12).Symbol,a="function"==typeof r;(e.exports=function(e){return o[e]||(o[e]=a&&r[e]||(a?r:i)("Symbol."+e))}).store=o},function(e,t,n){var o=n(66),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(247)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.getAllConfig=function(t){var o=e.getStyleNames(t),i={};return n.each(o,function(t){i[t]=e.getConfig(t)}),i},e.getAllDefault=function(t){var o=e.getStyleNames(t),i={};return n.each(o,function(t){i[t]=e.getDefault(t)}),i},e.getConfig=function(t){var i=o[t],r=e.overrideDefaults[t];return i&&r&&((i=n.clone(i)).default=r),i},e.getDefault=function(t){var n=e.overrideDefaults[t];return null!=n?n:(n=o[t])?n.default:void 0},e.getStyleNames=function(e){var t=n.keys(o);return e&&e.length?n.difference(t,e):t},e.isSupport=function(e){return null!=o[e]},e.reset=function(){e.overrideDefaults={}},e.setDefault=function(t,n){var o=e.getDefault(t);null!=n&&n!==o&&(e.overrideDefaults[t]=n)},e.overrideDefaults={},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},,function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(7),n(122),n(1)],void 0===(i=function(e,t,n,o,i,r){return function(){function e(){}return e.appendToTree=function(e,t){if(e&&t){var n=$(t).attr(o.COMPAT);i.isCompatible(n)&&(e.unknown||(e.unknown=[]),e.unknown.push(t.cloneNode(!0)))}else r.error("arguments are not valid!")},e.appendToXml=function(e,t){e&&t?e.unknown&&e.unknown.length&&n.each(e.unknown,function(e){var n;e&&e.cloneNode&&(n=e.nodeName,$(t).find(">"+n).length>0?r.error("unknown node <"+n+"> has already exist!"):t.appendChild(e.cloneNode(!0)))}):r.error("arguments are not valid!")},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(373),i=n(1);return t=o.extend({name:"UnknownSimpleCommand",isSimple:!0,initialize:function(){t.__super__.initialize.apply(this)},apply:function(){throw"Method not implemented."},doReapply:function(e){return i.log("doReapply(): `"+this.name+"`"),this.apply(e)},doUnapply:function(){throw i.log("doReapply(): `"+this.name+"`"),"Method not implemented."},isCollabCommand:function(){var e=this.options.args;return null!=e&&null!=e.collabProperties&&!0===e.collabProperties.isCollabCmd}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){e.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(10),i=n(309),r=n(77),a=Object.defineProperty;t.f=n(30)?Object.defineProperty:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(78);e.exports=function(e){return Object(o(e))}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(81),n(28)],void 0===(i=function(e,t,n,o,i){return function(){function e(){}return e.toXml=function(e,t,r){var a=e.getBlockStyles(),s=e.getType(),l=o.getStyleNamesOfBlock(s);n.each(l,function(e){var n=a[e],i=o.getConfig(e,s,!1);if(null!=n&&n!==i.default){var l=r.createElement(e),c=r.createTextNode(n);l.appendChild(c),t.appendChild(l)}});var c=e.getUnknownTree();c&&c.styles&&i.appendToXml(c.styles,t)},e.fromXml=function(e,t){var r=e.getUnknownTree(),a=e.getType(),s=o.getStyleNamesOfBlock(a),l=[];$(t).children().each(function(t,n){var o,a=n.nodeName;e.isSupportedBlockStyle(a)?(o=$(n).text(),e.setBlockStyle(a,o),l.push(a)):(r.styles||(r.styles={}),i.appendToTree(r.styles,n))}),n.each(s,function(t){var n;-1===l.indexOf(t)&&(n=o.getConfig(t,a,!1),e.setBlockStyle(t,n.default))})},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(91),n(159),n(9),n(26)],void 0===(i=function(e,t,n,o,i,r,a){return function(){function e(){}return e.getCssRule=function(t){return e.globalInlineStyleRules[t]},e.getDefaultForHtml=function(t){var n,o,i,r=e.inlineStyleDefaultForHtml[t];return null==r&&(n=e.getCssRule(t),o=a.getDefault(t),n?((i={})[t]=o,r=n(i)):r=o,e.inlineStyleDefaultForHtml[t]=r),r},e.html2rich=function(e){return new r({text:$(e).text()})},e.rich2html=function(t,o){var r,a,s,l,c,u,d,p=t.getReadOnlyData(),h=t.getEntities(),f=p.length,g=[],y="";if(o=n.defaults(o||{},{customDefaultStyles:null,styleRules:null,withDefault:!0,styles:null}),0===f)return"<br>";for(r=t.getReadOnlyStylesList(o.withDefault,o.customDefaultStyles,o.styles),o.styleRules?(d=n.clone(o.styleRules),n.defaults(d,e.globalInlineStyleRules)):d=e.globalInlineStyleRules,d=i.getRules(d),h&&h.length&&(l=n.pluck(h,"start")),a=0;a<f;++a)s=p[a],u=r[a],e.isEqualStyles(c,u)||(e.handleEndStyles(g),y!==u.href&&(e.handleEndHref(g),e.handleStartHref(g,u.href)),e.handleStartStyles(g,u,d)),g.push(n.escape(s.toString())),l&&n.contains(l,a)&&g.push('<span class = "loading" ></span>'),c=u,y=u.href;return e.handleEndStyles(g),e.handleEndHref(g),g.join("")},e.resetCssRules=function(){e.globalInlineStyleRules={},e.resetInlineStyleDefaultForHtml()},e.resetInlineStyleDefaultForHtml=function(t){t?(t+="",delete e.inlineStyleDefaultForHtml[t]):e.inlineStyleDefaultForHtml={}},e.setCssRules=function(t){n.each(t,function(t,o){n.isFunction(t)&&(e.globalInlineStyleRules[o]=t,e.resetInlineStyleDefaultForHtml(o))})},e.anchorEndTag=function(){return"</a>"},e.anchorStartTag=function(e){return e+="",'<a href="'+o.safeHref(e)+'">'},e.handleEndHref=function(t){t.push(e.anchorEndTag())},e.handleEndStyles=function(t){t.push(e.spanEndTag())},e.handleStartHref=function(t,n){n&&t.push(e.anchorStartTag(n))},e.handleStartStyles=function(t,o,i){n.isEmpty(o)||t.push(e.spanStartTag(o,i))},e.isEqualStyles=function(t,n){if(!t||!n)return!1;var o,i=e.supportedInlineStyleNames.length;for(o=0;o<i;o++)if(t[e.supportedInlineStyleNames[o]]!==n[e.supportedInlineStyleNames[o]])return!1;return!0},e.spanEndTag=function(){return"</span>"},e.spanStartTag=function(e,t){var o=document.createElement("span");return n.each(t,function(t,n){var i=t(e);(i||0===i)&&(o.style[n]=i)}),o.outerHTML.replace(/<\/span>$/i,"")},e.globalInlineStyleRules={},e.inlineStyleDefaultForHtml={},e.supportedInlineStyleNames=a.getStyleNames(),e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return function(e,t,n,o){if(o=!0===o,e||o){var i,r,a,s,l=function(e,t){var n,o,i;if(t.implementation&&t.implementation.createHTMLDocument)return(n=t.implementation.createHTMLDocument("title")).body.innerHTML=e,n;if((i=t.defaultView||window).DOMParser){o=new i.DOMParser;try{n=o.parseFromString("","text/html")}catch(e){}if(n)return n.body.innerHTML=e,n}}(e,t=t||document);if(l){if(!1!==n)return l.body;for(i=(a=l.body.childNodes).length,s=[],r=0;r<i;r++)s.push(a[r]);return s}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(4),n(33),n(39),n(28),n(59),n(1),n(7),n(90),n(20),n(3),n(139),n(16),n(34),n(9)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m){return function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.createBlank=function(){return new t({})},t.fromCollabJSON=function(e){return this.generalFromJSON(e,!0)},t.fromJSON=function(e){return this.generalFromJSON(e,!1)},t.fromXml=function(e){var n,o=$(e),r=parseInt(o.attr("level"),10)||1;return(n=new t({level:r})).setText(m.fromXml(e)),n.parseIdFromXml(e),$(e).children().each(function(e,t){switch(t.nodeName){case p.TAG_ID_NAME:case p.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":i.fromXml(n,t);break;default:a.appendToTree(n.unknownTree,t)}}),n},t.getOrCreateListById=function(e,t,n){var i,a,s=null,l=t;for(a=e.length-1;a>=0;--a)i=e[a],h.isListItem(i)&&i.getOwnerList()&&i.getOwnerList().getId()===t&&(i.getOwnerList().getType()===n?s=i.getOwnerList():l=o.newGUID());return s||(s=new r({listId:l,type:n})),s},t.generalFromJSON=function(t,n){var o=e.generalFromJSON.call(this,t,n);return o&&(t.listId&&o.setListId(t.listId),t.listType&&o.setListType(t.listType),t.level&&o.setLevel(t.level),t.index&&o.setIndex(t.index)),o},t.prototype.getIndex=function(){return this.index},t.prototype.getListId=function(){return this.ownerList?this.ownerList.getId():this.listItemProps.listId},t.prototype.getListType=function(){return this.ownerList?this.ownerList.getType():this.listItemProps.listType},t.prototype.getLevel=function(){return this.listItemProps.level},t.prototype.getOwnerList=function(){return this.ownerList},t.prototype.isOrdered=function(){return this.ownerList.isOrdered()},t.prototype.setIndex=function(e){n.isNumber(e)&&e>0&&(this.index=e,this.trigger("index-change",e))},t.prototype.setLevel=function(e){n.isNumber(e)&&(e=Math.max(e,1),e=Math.min(e,u.MAX_LIST_ITEM_LEVEL),this.listItemProps.level=e,this.ownerList&&this.ownerList.updateIndexes(),this.trigger("level-change",e))},t.prototype.setListId=function(e){this.listItemProps.listId?c.error("should not override existing listId"):this.listItemProps.listId=e},t.prototype.setListType=function(e){this.listItemProps.listType?c.error("should not override existing listType"):this.listItemProps.listType=e},t.prototype.setOwnerList=function(e){this.ownerList=e,this.ownerList&&(this.listItemProps.listId=this.ownerList.getId(),this.listItemProps.listType=this.ownerList.getType())},t.prototype.toCollabJSON=function(){return this._generalToJSON(null,null,!0)},t.prototype.toHtml=function(e,t,n){var o,i,r,a=document.createElement("li"),s=$(a);return n=!0===n,this.applyBlockStylesOnElement(s),s.css("list-style-position","inside").css("white-space","pre-wrap").css("word-break","break-word"),(r=f.makeHtmlMarker(this))&&r.listStyleType&&s.css("list-style-type",r.listStyleType),r&&r.markerStyles&&s.css(r.markerStyles),e=e||0,o=this.sliceText(e,t,!1),i=y.rich2html(o,{withDefault:n}),a.innerHTML=i,a.outerHTML},t.prototype.toJSON=function(e,t){return this._generalToJSON(e,t,!1)},t.prototype.toPlain=function(e,t){var n;return e=e||0,n=this.sliceText(e,t,!1).toString(),n=d(n)},t.prototype.toXml=function(t){var n,o=this.getOwnerList();if(o)return(n=e.prototype.toXml.apply(this,[t])).setAttribute("level",this.getLevel().toString()),n.setAttribute("list-id",this.listItemProps.listId),{listId:this.listItemProps.listId,listItem:n,listType:o.getType(),ownerList:o};c.error("The list item has no owner list!")},t.prototype.updateListType=function(){this.ownerList&&(this.listItemProps.listType=this.ownerList.getType())},t.prototype.initialize=function(t){var o=t.level||1;e.prototype.initialize.call(this,t),this.type=h.LIST_ITEM,this.listItemProps=n.clone(t),this.setLevel(o),this.setIndex(1),t.list&&(this.ownerList=t.list,this.listItemProps.listId=this.ownerList.getId(),this.listItemProps.listType=this.ownerList.getType()),!this.listItemProps.listId&&t.listId&&(this.listItemProps.listId=t.listId),!this.listItemProps.listType&&t.listType&&(this.listItemProps.listType=t.listType),t.id&&this.setId(t.id),t.text&&this.setText(t.text),this.on("attached",this._onAttached.bind(this)),this.on("detached",this._onDetached.bind(this))},t.prototype._onAttached=function(e){var n,o,i=this.getOwnerList(),r=e.getAllBlocks(),a=e.getBlockIndex(this),s=null;if(l(a>=0,"Block not attached yet.",a,this),!i&&this.getListId()&&(i=t.getOrCreateListById(r,this.getListId(),this.getListType()),this.setOwnerList(i)),0===i.getLength())i.insertAfter(this,null);else{for(n=a-1;n>=0;--n)if(o=r[n],h.isListItem(o)&&o.getOwnerList()===i){s=o;break}i.insertAfter(this,s)}},t.prototype._onDetached=function(){this.getOwnerList().removeItem(this)},t.prototype._generalToJSON=function(t,n,o){var i;return(i=o?e.prototype.toCollabJSON.call(this):e.prototype.toJSON.call(this,t,n)).level=this.getLevel(),i.index=this.getIndex(),this.listItemProps.listId&&(i.listId=this.listItemProps.listId),this.listItemProps.listType&&(i.listType=this.listItemProps.listType),i},t}(g)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(300);var t=n(299),o=n(0),i=n(1),r=n(19);return t.extend({className:"toolbar-item toolbar-button",events:{click:"onClick",mousedown:"onMouseDown"},name:"unknown",label:"",text:!1,defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:null,editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},initialize:function(e){this.editor=e.editor,this.render(),this.setState(this.defaultState),this.bindEditorEvents(),this.bindEvents()},render:function(){var e,t=this.$el,n=this.label;t.addClass("button-"+this.name),e=r.render("pc",this.templateName,{name:this.name,label:this.label,text:this.text,defaultState:this.defaultState}),t.html(e),null!=this.shortcut&&(n="<div><span>"+this.label+'</span><span class="split"></span><span>'+this.shortcut+"</span><div>"),t.find(".button-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300],content:n,contentAsHTML:!0}),this.isVisible||this.hide()},bindEvents:function(){},bindEditorEvents:function(){var e=this,t=e.editor,n=e.editorEvents;n&&o.each(n,function(n,o){t.on(o,e[n].bind(e))})},onMouseDown:function(e){e.preventDefault()},onClick:function(){},setState:function(e){var t=this.$el;e=!0===e,this.state=e,e?t.find(".button").addClass("active"):t.find(".button").removeClass("active")},reset:function(){i.warn("Button ["+this.name+"] reset(): do nothing!")},onSelectionChange:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;!function(){function i(e,t){if(t=t||{},(e=e||"")instanceof i)return e;if(!(this instanceof i))return new i(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=!1,i=!1;return"string"==typeof e&&(e=function(e){e=e.replace(T,"").replace(N,"").toLowerCase();var t,n=!1;if(F[e])e=F[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=H.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=H.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=H.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=H.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=H.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=H.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=H.hex8.exec(e))?{a:(o=t[1],S(o)/255),r:S(t[2]),g:S(t[3]),b:S(t[4]),format:n?"name":"hex8"}:(t=H.hex6.exec(e))?{r:S(t[1]),g:S(t[2]),b:S(t[3]),format:n?"name":"hex"}:!!(t=H.hex3.exec(e))&&{r:S(t[1]+""+t[1]),g:S(t[2]+""+t[2]),b:S(t[3]+""+t[3]),format:n?"name":"hex"};var o}(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(r=e.r,a=e.g,s=e.b,t={r:255*w(r,255),g:255*w(a,255),b:255*w(s,255)},o=!0,i="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=A(e.s),e.v=A(e.v),t=function(e,t,n){e=6*w(e,360),t=w(t,100),n=w(n,100);var o=D.floor(e),i=e-o,r=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=o%6;return{r:255*[n,a,r,r,s,n][l],g:255*[s,n,n,a,r,r][l],b:255*[r,r,s,n,n,a][l]}}(e.h,e.s,e.v),o=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=A(e.s),e.l=A(e.l),t=function(e,t,n){function o(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}var i,r,a;if(e=w(e,360),t=w(t,100),n=w(n,100),0===t)i=r=a=n;else{var s=.5>n?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),r=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*i,g:255*r,b:255*a}}(e.h,e.s,e.l),o=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=k(n),{ok:o,format:e.format||i,r:O(255,L(t.r,0)),g:O(255,L(t.g,0)),b:O(255,L(t.b,0)),a:n};var r,a,s}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=M(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=M(this._r)),this._g<1&&(this._g=M(this._g)),this._b<1&&(this._b=M(this._b)),this._ok=n.ok,this._tc_id=E++}function r(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var o,i,r=L(e,t,n),a=O(e,t,n),s=(r+a)/2;if(r==a)o=i=0;else{var l=r-a;switch(i=s>.5?l/(2-r-a):l/(r+a),r){case e:o=(t-n)/l+(n>t?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:i,l:s}}function a(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var o,i,r=L(e,t,n),a=O(e,t,n),s=r,l=r-a;if(i=0===r?0:l/r,r==a)o=0;else{switch(r){case e:o=(t-n)/l+(n>t?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:i,v:s}}function s(e,t,n,o){var i=[x(M(e).toString(16)),x(M(t).toString(16)),x(M(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function l(e,t,n,o){var i;return[x((i=o,Math.round(255*parseFloat(i)).toString(16))),x(M(e).toString(16)),x(M(t).toString(16)),x(M(n).toString(16))].join("")}function c(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s-=t/100,n.s=C(n.s),i(n)}function u(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.s+=t/100,n.s=C(n.s),i(n)}function d(e){return i(e).desaturate(100)}function p(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l+=t/100,n.l=C(n.l),i(n)}function h(e,t){t=0===t?0:t||10;var n=i(e).toRgb();return n.r=L(0,O(255,n.r-M(-t/100*255))),n.g=L(0,O(255,n.g-M(-t/100*255))),n.b=L(0,O(255,n.b-M(-t/100*255))),i(n)}function f(e,t){t=0===t?0:t||10;var n=i(e).toHsl();return n.l-=t/100,n.l=C(n.l),i(n)}function g(e,t){var n=i(e).toHsl(),o=(M(n.h)+t)%360;return n.h=0>o?360+o:o,i(n)}function y(e){var t=i(e).toHsl();return t.h=(t.h+180)%360,i(t)}function m(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+120)%360,s:t.s,l:t.l}),i({h:(n+240)%360,s:t.s,l:t.l})]}function v(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+90)%360,s:t.s,l:t.l}),i({h:(n+180)%360,s:t.s,l:t.l}),i({h:(n+270)%360,s:t.s,l:t.l})]}function b(e){var t=i(e).toHsl(),n=t.h;return[i(e),i({h:(n+72)%360,s:t.s,l:t.l}),i({h:(n+216)%360,s:t.s,l:t.l})]}function _(e,t,n){t=t||6,n=n||30;var o=i(e).toHsl(),r=360/n,a=[i(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,a.push(i(o));return a}function I(e,t){t=t||6;for(var n=i(e).toHsv(),o=n.h,r=n.s,a=n.v,s=[],l=1/t;t--;)s.push(i({h:o,s:r,v:a})),a=(a+l)%1;return s}function k(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function w(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=O(t,L(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),D.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return O(1,L(0,e))}function S(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function A(e){return 1>=e&&(e=100*e+"%"),e}var T=/^\s+/,N=/\s+$/,E=0,D=Math,M=D.round,O=D.min,L=D.max,B=D.random;i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(.03928>=n?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=k(e),this._roundA=M(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=M(360*e.h),n=M(100*e.s),o=M(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=M(360*e.h),n=M(100*e.s),o=M(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return s(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:M(this._r),g:M(this._g),b:M(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+M(this._r)+", "+M(this._g)+", "+M(this._b)+")":"rgba("+M(this._r)+", "+M(this._g)+", "+M(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:M(100*w(this._r,255))+"%",g:M(100*w(this._g,255))+"%",b:M(100*w(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+M(100*w(this._r,255))+"%, "+M(100*w(this._g,255))+"%, "+M(100*w(this._b,255))+"%)":"rgba("+M(100*w(this._r,255))+"%, "+M(100*w(this._g,255))+"%, "+M(100*w(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(z[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+l(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";e&&(n=i(e).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return!t&&o&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return i(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},i.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:A(e[o]));e=n}return i(e,t)},i.equals=function(e,t){return!(!e||!t)&&i(e).toRgbString()==i(t).toRgbString()},i.random=function(){return i.fromRatio({r:B(),g:B(),b:B()})},i.mix=function(e,t,n){n=0===n?0:n||50;var o,r=i(e).toRgb(),a=i(t).toRgb(),s=n/100,l=2*s-1,c=a.a-r.a,u=1-(o=((o=-1==l*c?l:(l+c)/(1+l*c))+1)/2);return i({r:a.r*o+r.r*u,g:a.g*o+r.g*u,b:a.b*o+r.b*u,a:a.a*s+r.a*(1-s)})},i.readability=function(e,t){var n=i(e),o=i(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},i.isReadable=function(e,t,n){var o,r,a,s,l,c=i.readability(e,t);switch(r=!1,"AA"!==(s=((a=(a=n)||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(l=(a.size||"small").toLowerCase())&&"large"!==l&&(l="small"),(o={level:s,size:l}).level+o.size){case"AAsmall":case"AAAlarge":r=c>=4.5;break;case"AAlarge":r=c>=3;break;case"AAAsmall":r=c>=7}return r},i.mostReadable=function(e,t,n){var o,r,a,s,l=null,c=0;r=(n=n||{}).includeFallbackColors,a=n.level,s=n.size;for(var u=0;u<t.length;u++)(o=i.readability(e,t[u]))>c&&(c=o,l=i(t[u]));return i.isReadable(e,l,{level:a,size:s})||!r?l:(n.includeFallbackColors=!1,i.mostReadable(e,["#fff","#000"],n))};var R,P,j,F=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=i.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(F),H=(P="[\\s|\\(]+("+(R="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",j="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",{rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});e.exports?e.exports=i:void 0===(o=function(){return i}.call(t,n,t,e))||(e.exports=o)}()},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(59),n(17),n(1)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromCollabJSON=function(e){return new t({listId:e.id,type:e.type})},t.fromXml=function(e){var o=$(e),i=new t({listId:o.attr("id"),type:o.attr("type")});return n.each(e.attributes,function(e){switch(e.nodeName){case"id":case"type":break;default:i.unknownAttrs.push(e.cloneNode(!0))}}),i},t.prototype.addItem=function(e){e&&(this.listItems.push(e),this.updateIndexes())},t.prototype.getId=function(){return this.listProps.listId},t.prototype.getItems=function(){return this.listItems},t.prototype.getLength=function(){return this.listItems.length},t.prototype.getType=function(){return this.listProps.type},t.prototype.insertAfter=function(e,t){var n=this.listItems,o=t?n.indexOf(t):-1;this.insertItem(o+1,e)},t.prototype.insertItem=function(e,t){var n=this.listItems;return o(e>0||e<=n.length),o(!(t in n)),n.splice(e,0,t),this.updateIndexes(),e},t.prototype.isOrdered=function(){return this.listProps.type===t.ORDERED},t.prototype.isUnordered=function(){return this.listProps.type===t.UNORDERED},t.prototype.removeItem=function(e){var t=this.listItems,n=t.indexOf(e);return n>=0&&(t.splice(n,1),this.updateIndexes()),n},t.prototype.setType=function(e){o(e===t.ORDERED||e===t.UNORDERED),e!==this.listProps.type&&(this.listProps.type=e,this.updateIndexes(!0),this.trigger("type-change"))},t.prototype.toCollabJSON=function(){var e={};return e.id=this.listProps.listId,e.type=this.listProps.type,e},t.prototype.updateIndexes=function(e){var t,n,o,i=this.listItems,r=i.length,a=0,s={};for(t=0;t<r;++t)(o=(n=i[t]).getLevel())>a?s[o]=1:s[o]?s[o]++:s[o]=1,a=o,n.setIndex(s[o]),e&&n.updateListType()},t.prototype.initialize=function(e){this.listProps=n.clone(e),this.listItems=[],this.unknownAttrs=[],this.listProps.type!==t.ORDERED&&this.listProps.type!==t.UNORDERED&&(r.error("type should be ORDERED or UNORDERED",this.listProps.type),this.listProps.type=t.UNORDERED)},t.ORDERED="ordered",t.UNORDERED="unordered",t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};o=[n,r,n(0),n(3),n(192),n(1),n(193),n(248),n(249),n(194),n(82),n(93),n(261),n(140)],void 0===(i=function(e,t,n,o,i,r,s,l,c,u,d,p,h,f){return function(){function e(){}return e.createRangeByBlock=function(e){if(e&&e.block){var t,n=e.block,g=n.getType(),y=0,m=0;switch(null!=e.start&&null!=e.end?(y=e.start,m=e.end):(null==e.allContent&&null==e.collapseToStart||!0===e.allContent)&&null!=n.getEndOffset?(y=0,m=n.getEndOffset()):e.collapseToStart||null==n.getEndOffset?(y=0,m=0):m=y=n.getEndOffset(),g){case o.QUOTE:case o.TODO:case o.PARAGRAPH:case o.LIST_ITEM:case o.CATALOGUE:case o.HEADING:t=new d({block:n,end:m,start:y});break;case o.IMAGE:t=new u({block:n});break;case o.ATTACHMENT:t=new s({block:n});break;case o.TABLE:e.allContent&&(e.type=p.TYPES.ALL,delete e.allContent),e.type||e.rect||r.warn("Bad tableRange options will select first table cell",e),t=new p({block:n,rect:e.rect,type:e.type});break;case o.HR:t=new c({block:n});break;case o.UNKNOWN:t=new h({block:n});break;case o.HEADER_FOOTER:t=new i({block:n});break;case o.HANDWRITE:t=new l({block:n});break;case o.CODE:t=e.hasOwnProperty("selectWholeBlock")?new f(a({block:n},e)):new f({block:n,selectWholeBlock:!0});break;default:r.error("block.type ["+g+"] is not valid!")}return t}r.warn("arguments is not valid!")},e.isBlockRange=function(e){return null!=e&&null!=e.getType&&null!=e.getType()&&n.contains(o.getAllBlockTypes(),e.getType())},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(33),n(28),n(90),n(20),n(3),n(16),n(34),n(9)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d){return function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.createBlank=function(){return new t({})},t.fromCollabJSON=function(e){return t.generalFromJSON(e,!0)},t.fromJSON=function(e){return t.generalFromJSON(e,!1)},t.fromXml=function(e){var n=$(e),r=new t({checked:"true"===n.find("> checked:first").text()});return r.setText(d.fromXml(e)),r.parseIdFromXml(e),n.children().each(function(e,t){switch(t.nodeName){case a.TAG_ID_NAME:case a.LEGACY_TAG_ID_NAME:case"checked":case"text":case"inline-styles":break;case"styles":o.fromXml(r,t);break;default:i.appendToTree(r.unknownTree,t)}}),r},t.getMarker=function(e){if(!e)return"";var n=e.getChecked()?t.CHECKED_MARKER:t.UNCHEKED_MARKER;return n+=" "},t.generalFromJSON=function(t,n){var o=e.generalFromJSON.call(this,t,n);return o&&o.setChecked(!!t.checked),o},t.prototype.countWords=function(){return this.richText.getLength()},t.prototype.getChecked=function(){return this.todoProps.checked},t.prototype.getLegacyResId=function(){return this.todoProps.legacyResId},t.prototype.isFromOldTodo=function(){return!!this.todoProps.legacyResId},t.prototype.setChecked=function(e){e!==this.todoProps.checked&&(this.todoProps.checked=e,this.trigger("checked-change",e))},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.checked=this.getChecked(),t},t.prototype.toHtml=function(e,t,n){var o,i=document.createElement("div"),r=$(document.createElement("div")),a=$(document.createElement("div")),s=this.getChecked(),l=$(i);return l.attr("yne-bulb-block","todo").attr("yne-bulb-checked",s.toString()).attr("id",this.getId()).css("display","table"),r.css({border:"1px solid #bbb",display:"inline-flex",height:"1em","line-height":"1",position:"relative",width:"1em"}),s&&(r.css({"background-repeat":"no-repeat","background-position":"center","background-size":"100%","background-image":"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgdmlld0JveD0iMCAwIDUwIDUwIiBzdHlsZT0iaGVpZ2h0OiAxMDAlO3dpZHRoOiAxMDAlO3N0cm9rZS13aWR0aDogMjtzdHJva2U6IGJsYWNrO3RvcDogMDtsZWZ0OiAwO3Bvc2l0aW9uOiBhYnNvbHV0ZTsiICB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0xNC4xIDI3LjJsNy4xIDcuMiAxNi43LTE2LjgiPjwvcGF0aD4KPC9zdmc+)"}),l.css("text-decoration","line-through")),this.applyBlockStylesOnElement(l),e=e||0,t=null==t?this.getEndOffset():t,o=this.sliceText(e,t,!1),a.html(u.rich2html(o,{withDefault:n})),a.attr("yne-bulb-todo-content","").css({display:"table-cell","word-break":"break-word","padding-left":"8px",width:"100%"}),l.append(r),l.append(a),i.outerHTML},t.prototype.toJSON=function(t,n){var o=e.prototype.toJSON.call(this,t,n);return o.checked=this.getChecked(),o},t.prototype.toPlain=function(e,t){e=e||0;var n=this.sliceText(e,t,!1);return r(n.toString())},t.prototype.toXml=function(t){var n,o;return o=e.prototype.toXml.call(this,t),(n=t.createElement("checked")).appendChild(t.createTextNode(this.getChecked().toString())),o.appendChild(n),i.appendToXml(this.unknownTree,o),o.setAttribute("compat","true"),o},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.todoProps=n.clone(t),this.type=l.TODO},t.CHECKED_MARKER="✔",t.UNCHEKED_MARKER="☐",t}(c)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(21),i=n(0),r=n(1),a=n(266),s=n(144);return t=o.extend({inheritStyleHandlers:null,uninheritStyleHandlers:null,tagHandler:null,el:null,parent:null,children:null,styles:null,parser:null,options:null,constructor:function(e,t,n,o,i){this.el=e,this.children=[],this.parent=t,this.internalStylesParser=n,this.parent&&this.parent.children&&this.parent.children.push(this),this._computeStyles(),this.computeBulbStyles(),this.parser=o,this.options=i},computeBulbStyles:function(){},_findStyleHandler:function(e,n){var o,a=(e?this.inheritStyleHandlers:this.uninheritStyleHandlers)[n];if(i.isFunction(a))return{action:a};if(i.isObject(a)&&a.action)return a;if(!0===a&&(o=t.styleHandlers[n])&&o.action){if(o.inheritable===e)return o;r.error("The inheritable value of "+n+" is unvalid!")}},_computeStyles:function(){var e=this.el,n={},o=this.tagHandler||t.tagHandlers[e.tagName.toLowerCase()];o&&o(n,e),this.styles={},this._computeInheritStyles(n),this._computeUninheritStyles(n)},_computeStyle:function(e,t){var n,o,r,a=this,s=null!=a.inheritStyleHandlers[t],l=a.parent,c=a.el;null==a.styles[t]&&(s&&!l||(n=a._findStyleHandler(s,t))&&n.action&&(n.requireValues&&n.requireValues.length&&i.each(n.requireValues,function(t){a._computeStyle(e,t)}),s?(o=(l.styles||{})[t],(r=n.action(c,a.styles,o))||!1===r||(r=e[t]),r||!1===r||(r=o)):(r=n.action(c,a.styles))||!1===r||(r=e[t]),(r||!1===r)&&(a.styles[t]=r)))},_computeInheritStyles:function(e){var t=this;t.inheritStyleHandlers&&i.each(t.inheritStyleHandlers,function(n,o){n&&t._computeStyle(e,o)})},_computeUninheritStyles:function(e){var t=this;t.uninheritStyleHandlers&&i.each(t.uninheritStyleHandlers,function(n,o){n&&t._computeStyle(e,o)})},setup:function(){},capture:function(){r.warn("Function capture should be implemented by SubClass")},finish:function(){},handleChildrenBySelf:function(){return!1},emit:function(e){this.parent&&this.parent.capture(e)},getRoot:function(){if(this.parent)return this.parent.getRoot()}},{tagHandlers:a,styleHandlers:s})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(206),s=n(4);return t=o.extend({name:"atom.InsertBlocks",_note:null,_newBlks:null,_newBlkIds:null,_preBlkId:null,initialize:function(){var e=this,n=e.options.args;s.isCollabCommand(n)||(e._note=e.options.note,e._newBlks=e.options.newBlks,e.options.preBlk&&(e._preBlkId=e.options.preBlk.getId()),e._newBlkIds=[],r.each(e._newBlks,function(t){e._newBlkIds.push(t.getId())})),t.__super__.initialize.apply(e)},apply:function(){var e,t,n,o=this,i=0;if(o._preBlkId){if(n=o._note.getBlockIndexById(o._preBlkId),e=o._note.getBlockById(o._preBlkId),t=e.getBlockStyles(),-1===n)return!1;i=n+1}return r.each(o._newBlks,function(e){t&&t["back-color"]&&e.setBlockStyle("back-color",t["back-color"]),o._note.insert(i,e),i++}),!0},doUnapply:function(){var e=this;r.each(e._newBlkIds,function(t){e._note.remove(e._note.getBlockIndexById(t))})},fromCollabJSON:function(){var e=this,n=e.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(e),e._note=n.coreEditor.getNote(),o.preBlockId&&(e._preBlkId=o.preBlockId),n.isCollabUndo?e._newBlkIds=o.insertedBlocks:n.isCollabRedo&&(e._newBlks=[],r.each(o.insertedBlocks,function(t){e._newBlks.push(a.buildBlockFromJSON(t,n.coreEditor))}))},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this),n=[];return this.isCollabUndo?r.each(this._newBlks,function(e){n.push(e.getId())}):this.isCollabRedo&&r.each(this._newBlks,function(e){n.push(e.toCollabJSON())}),e.insertedBlocks=n,this._preBlkId&&(e.preBlockId=this._preBlkId),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1),o=n(0);return{bubble:function(e,n,i,r){if(e&&n&&i){var a=o.isArray(e);o.each(e,function(e,t){e&&(a?t=e:!0===e&&(e=t),!0===r&&n.off(t),n.on(t,i.trigger.bind(i,e)))})}else t.log("arguments are not valid",arguments)},addListeners:function(e,n,i,r){e&&n&&i?o.each(e,function(e,t){!0===r&&n.off(t),n.on(t,i[e].bind(i))}):t.log("arguments are not valid",arguments)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){var e=navigator.userAgent.toLowerCase();return{isSafari:function(){return e&&e.indexOf("applewebkit")>-1&&e.indexOf("chrome")<=-1},isEdge:function(){return e&&e.indexOf("applewebkit")>-1&&e.indexOf("edge")>-1}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(1),a=n(0),s=n(206),l=n(53),c=n(4);return t=o.extend({name:"atom.DeleteBlocks",_note:null,_deletedBlocks:null,_deletedBlockIds:null,_preBlockId:null,initialize:function(){var e=this,n=e.options.args;c.isCollabCommand(n)||(e._note=e.options.note,e._deletedBlocks=a.sortBy(e.options.blocks,function(t){return e._note.getBlockIndex(t)}),e._deletedBlockIds=[],a.each(e._deletedBlocks,function(t){e._deletedBlockIds.push(t.getId())})),t.__super__.initialize.apply(e)},apply:function(){var e,t,n=this;return n._deletedBlockIds&&0!==n._deletedBlockIds.length?((t=n._note.getBlockById(n._deletedBlockIds[0]))&&t instanceof l&&t.hideImageTitle(),e=n._note.getPreBlock(t),n._preBlockId=e?e.getId():0,a.each(n._deletedBlockIds,function(e,t){n._note.removeBlockById(e,n._deletedBlockIds.length===t+1)}),!0):(r.error("没有指定要删除的段落"),!1)},doUnapply:function(){var e=this,t=0;e._preBlockId&&(t=e._note.getBlockIndexById(e._preBlockId)+1),a.each(e._deletedBlocks,function(n){e._note.insert(t,n),t++})},fromCollabJSON:function(){var e=this,n=e.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(e),e._note=n.coreEditor.getNote(),o&&o.preBlockId&&(e._preBlockId=o.preBlockId),n.isCollabUndo?(e._deletedBlocks=[],a.each(o.deletedBlocks,function(t){e._deletedBlocks.push(s.buildBlockFromJSON(t,n.coreEditor))})):n.isCollabRedo&&(e._deletedBlockIds=[],a.each(o.deletedBlocks,function(t){e._deletedBlockIds.push(t)}))},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this),n=[];return this.isCollabUndo?a.each(this._deletedBlocks,function(e){n.push(e.toCollabJSON())}):this.isCollabRedo&&a.each(this._deletedBlockIds,function(e){n.push(e)}),e.preBlockId=this._preBlockId,e.deletedBlocks=n,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(31),i=n(111);e.exports=n(30)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(12),i=n(49),r=n(55),a=n(112)("src"),s=n(382),l=(""+s).split("toString");n(63).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(r(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(r(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===o?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var o=n(2),i=n(15),r=n(78),a=/"/g,s=function(e,t,n,o){var i=String(r(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(o).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),o(o.P+o.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(1),n(160)],void 0===(i=function(e,t,n,o,i){return function(){function e(){}return e.getAllValueByFont=function(t){var n=e.getFont(t);if(n)return e.FONT_MAP[n].join(",");o.warn("Font does not exit in Font Maps: "+t)},e.getFontMap=function(){return e.FONT_MAP},e.getFont=function(t){var o,i;if((t=(t||"").toLowerCase())&&(i=e.splitFontFamily(t)))return n.some(i,function(t){if(n.some(e.FONT_MAP,function(n,i){if(i.toLowerCase()===t||e.CONTAIN_IGNORE_CASE(n,t))return o=i,!0}),o)return!0}),o},e.getFontFirstValue=function(t){var n,o=e.getFont(t);if(n=e.FONT_MAP[o])return n[0]},e.getItems=function(){var t=[];return n.each(e.FONT_MAP,function(e,n){t.push({fullValue:e.join(","),name:n,singleValue:e[0]})}),t},e.getNames=function(){return n.keys(e.FONT_MAP)},e.splitFontFamily=function(e){var t,o=[];return(e=$.trim(e||""))?(t=e.split(","),n.each(t,function(e){e=e||"",(e=$.trim(e.replace(/["']/g,"")))&&o.push(e)}),o):[]},e.CONTAIN_IGNORE_CASE=function(e,t){return n.some(e,function(e){return(e+"").toLowerCase()===t})},e.DEFAULT_FONT=i.DEFAULT_FONT,e.FONT_MAP={"微软雅黑":[i.DEFAULT_FONT,"STXihei"],"宋体":["SimSun","STSong"],"新宋体":["NSimSun"],"仿宋":["FangSong_GB2312","FangSong","STFangsong"],"楷体":["KaiTi_GB2312","KaiTi","STKaiti"],"黑体":["SimHei","STHeiti"],Arial:["Arial"],"Arial Black":["Arial Black"],"Times New Roman":["Times New Roman"],"Courier New":["Courier New"],Tahoma:["Tahoma"],Verdana:["Verdana"]},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(33),n(9),n(28),n(71),n(199),n(11),n(1),n(35),n(107),n(20),n(3)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromJSON=function(e){if(e&&e.type&&e.type===f.IMAGE&&e.source){var n=new t({source:e.source,title:e.title});return e.styles&&n.setStyles(e.styles),e.blockId&&n.setId(e.blockId),n}u.warn("jsonObj or jsonObj.source does NOT exist!")},t.fromXml=function(e){var n=$(e),i=new t({source:$.trim(n.find("> source:first").text()),title:$.trim(n.find("> text:first").text())});return i.parseIdFromXml(e),n.children().each(function(e,t){switch(t.nodeName){case h.TAG_ID_NAME:case h.LEGACY_TAG_ID_NAME:case"source":case"text":break;case"styles":o.fromXml(i,t);break;default:r.appendToTree(i.unknownTree,t)}}),i},t.prototype.countWords=function(){return 0},t.prototype.getFakeLoading=function(){return this.imageProps.fakeLoading},t.prototype.getHighlight=function(e,t){var o=this,r=[];if(null!=t.images&&t.images.length>0&&n.some(t.images,function(e){return e.resID===o.getSource()&&(r.push({imageInfo:e}),!0)}),null!=e&&e.length>0){var a=i.create(this.imageProps.title);n.each(e,function(e){for(var t=e.getLength(),n=a.indexOf(e,0,!0);-1!==n;)r.push({end:n+t,start:n}),n=a.indexOf(e,n+t,!0)})}return r.length?r:null},t.prototype.getImageInfo=function(){return this.imageInfo},t.prototype.getResId=function(){return this.imageProps.resId},t.prototype.getSource=function(e){var t,n=this.imageProps.source;return!0===e&&(t=this.getExtraInfo("pcResMap"))&&t[n]&&(n=t[n]),n},t.prototype.getStyles=function(e){return e?this.getBlockStyle(e):this.getBlockStyles()},t.prototype.getTitle=function(){return this.imageProps.title},t.prototype.setFakeLoading=function(e){this.imageProps.fakeLoading=e},t.prototype.setImageInfo=function(e){e&&e.resId&&"number"==typeof e.rawWide?this.imageInfo=e:u.error("The imageInfo is not valid in image: "+this.imageProps.resId)},t.prototype.setSource=function(e){return!(!e||e===this.imageProps.source)&&(this.imageProps.source=e+"",this.trigger("content-change"),!0)},t.prototype.setStyles=function(e,t){return n.isString(e)?this.setBlockStyle(e,t):n.isObject(e)&&this.setBlockStyles(e),!0},t.prototype.setTitle=function(e){return e!==this.imageProps.title&&(this.imageProps.title=e+"",this.trigger("content-change"),!0)},t.prototype.hideImageTitle=function(){this.trigger("hide-image-title")},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.source=this.getSource(),t.title=this.getTitle(),t},t.prototype.toHtml=function(e,t,o){var i,r,s=d("",document,!0,!0).ownerDocument,u=this.getStyles(),p=s.createElement("div"),h=$(p),f=$(s.createElement("img"));if(h.attr("yne-bulb-block","image"),n.each(u,function(e,t){switch(t){case"align":h.css("text-align",e);break;case"width":null==e?f.css("width",""):f.css("width",e);break;case"float":h.css("float",e);break;case"back-color":h.css("background-color",e);break;case"padding":h.css("padding",e),"0px"===h.css("padding-top")&&h.css({"padding-top":"4px","padding-bottom":"4px"})}}),i=this.getSource(!0===o),r=this.getTitle(),c.IS_PC&&(i=a(i)),f.attr({alt:r,"data-media-type":"image",src:i}),!c.IS_PC){var g=l.imgToBase64(document.querySelector('img[src^="'+i+'"'));f.attr({src:g})}return h.append(f),p.outerHTML},t.prototype.toPlain=function(){return""},t.prototype.toXml=function(t){var n,i,a,s,l,c,u=this.getSource(),d=this.getTitle()||"";if(u)return n=e.prototype.toXml.apply(this,[t]),i=t.createElement("source"),a=t.createTextNode(u),i.appendChild(a),n.appendChild(i),s=t.createElement("text"),l=t.createTextNode(d),s.appendChild(l),n.appendChild(s),c=t.createElement("styles"),o.toXml(this,c,t),n.appendChild(c),r.appendToXml(this.unknownTree,n),n},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=f.IMAGE,this.imageProps={source:t.source,title:t.title},this.imageProps.fakeLoading=t.fakeLoading||!1,this.imageProps.resId=p.parseImgSource(this.imageProps.source).resId},t}(h)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(152),i=n(78);e.exports=function(e){return o(i(e))}},function(e,t,n){var o=n(153),i=n(111),r=n(56),a=n(77),s=n(55),l=n(309),c=Object.getOwnPropertyDescriptor;t.f=n(30)?c:function(e,t){if(e=r(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){var o=n(55),i=n(32),r=n(212)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),o(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){(function(o){var i;void 0===(i=function(t,o){"use strict";void 0===(i=function(e,t){var n=this.DEBUG,o=this.console,i=function(){};return n&&o.assert&&(i=o.assert.bind(o)),i}.apply(o,[n,o]))||(e.exports=i)}.apply(t,[n,t]))||(e.exports=i)}).call(this,n(54))},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return{ATTACHMENT:"attachment",IMAGE:"image",TEXT:"text"}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(71),n(107),n(11),n(162),n(1),n(35),n(94)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){if(e&&e.source)return e.resId&&l.warn("Will create resId by url!"),new t(e);l.warn("Failed to create ImageResource",e)},t.fromCollabJSON=function(e){return e.resId&&e.source||l.error("jsonObj is wrong , ",e),t.create({height:e.height,resId:e.resId,source:e.source,title:"",type:u.TYPE_IMAGE,width:e.width})},t.fromJSON=function(e,o){e.resId&&o&&o.imageMap||l.error("jsonObj is or resourceList wrong , ",e,o);var r=o.imageMap[e.resId];return r||l.error("resourceList wrong"),r.source&&(e.resId=i.parseImgSource(r.source).resId),t.fromCollabJSON(n.extend(e,r))},t.fromXml=function(e,n){var o=$(n),i=o.children("source:first").text(),r=o.children("width:first").text(),a=o.children("height:first").text();return r&&(r=parseInt(r,10)),a&&(a=parseInt(a,10)),t.create({height:a,resId:e,source:i,title:"",type:u.TYPE_IMAGE,width:r})},t.prototype.getInfo=function(){var e=this.getSize();return null===e.width&&null===e.height&&(e=null),n.extend({source:this.getSource()},e)},t.prototype.getSize=function(){return{height:this.imageProps.height||null,width:this.imageProps.width||null}},t.prototype.getSource=function(e){var t=this.imageProps.source;return e&&e[t]&&(t=e[t]),t},t.prototype.setSource=function(e){return!(!e||e===this.imageProps.source)&&(this.imageProps.source=e+"",!0)},t.prototype.toCollabJSON=function(){var e={};return e.source=this.getSource(),e.width=this.imageProps.width||null,e.height=this.imageProps.height||null,e.resId=this.imageProps.resId,e},t.prototype.toHtml=function(e){var t,i=c("",document,!0,!0).ownerDocument,a=$(i.createElement("img"));return e=n.defaults(e||{},{resourceMap:null}),t=this.getSource(e.resourceMap)||"",r.IS_PC&&(t=o(t)),a.attr({"data-media-type":"image",height:"auto",src:t,width:"100%"}),a.get(0).outerHTML},t.prototype.toJSON=function(){return{resId:this.getResId()}},t.prototype.toPlain=function(){return""},t.prototype.toXml=function(e,t){var o=e.createElement("resource-mono"),i=e.createElement("image"),r=this.getSize();a.appendText(e,o,"res-id",this.getResId()),a.appendText(e,i,"source",this.getSource()),r&&n.each(["width","height"],function(e){var t=r[e];t&&a.appendText(i,e,t+"")}),o.appendChild(i),t.appendChild(o)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.imageProps=this.resProps,this.imageProps.resId=t.resId||i.parseImgSource(t.source).resId,this.imageProps.type=u.TYPE_IMAGE},t}(u)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0);return{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,getType:function(e){if(e&&e.nodeType)return e.nodeType},isNode:function(e){var n=this.getType(e);return t.isNumber(n)&&n>=this.ELEMENT_NODE&&n<=this.NOTATION_NODE},isElement:function(e){return this.getType(e)===this.ELEMENT_NODE},isAttribute:function(e){return this.getType(e)===this.ATTRIBUTE_NODE},isText:function(e){return this.getType(e)===this.TEXT_NODE},isCDataSection:function(e){return this.getType(e)===this.CDATA_SECTION_NODE},isEntityReference:function(e){return this.getType(e)===this.ENTITY_REFERENCE_NODE},isEntity:function(e){return this.getType(e)===this.ENTITY_NODE},isProcessingInstruction:function(e){return this.getType(e)===this.PROCESSING_INSTRUCTION_NODE},isComment:function(e){return this.getType(e)===this.COMMENT_NODE},isDocument:function(e){return this.getType(e)===this.DOCUMENT_NODE},isDocumentType:function(e){return this.getType(e)===this.DOCUMENT_TYPE_NODE},isDocumentFragment:function(e){return this.getType(e)===this.DOCUMENT_TYPE_NODE},isNotation:function(e){return this.getType(e)===this.NOTATION_NODE}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){var o=n(40);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t,n){"use strict";var o=n(15);e.exports=function(e,t){return!!e&&o(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(r).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0)],void 0===(i=function(e,t,n){var o=function(e){var t=n.keys(e);return n.each(t,function(t){var n=e[t];"object"==typeof n&&null!==n&&o(n)}),Object.freeze(e)};return function(e,t){return e&&"object"==typeof e?(t=!1!==t,Object.freeze?t?o(e):Object.freeze(e):e):e}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(71),n(107),n(11),n(162),n(1),n(35),n(94)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){if(e&&e.source&&e.resource&&null!=e.fileLength&&e.fileName)return e.resId||l.warn("Will create resId by url!"),new t(e);l.warn("Failed to create AttachmentResource",e)},t.fromJSON=function(e,o){e.resId&&o&&o.attachMap||l.error("jsonObj or resourceList is wrong, ",e,o);var r=o.attachMap[e.resId];return r||l.error("resourceList is wrong"),r.resource&&(e.resId=i.parseImgSource(r.resource).resId),t.fromCollabJSON(n.extend(e,r))},t.fromCollabJSON=function(e){return e.fileLength&&e.fileName&&e.resId&&e.resource&&e.source||l.error("jsonObj is wrong, ",e),t.create({resId:e.resId,source:e.source,resource:e.resource,fileName:e.fileName,fileLength:e.fileLength})},t.fromXml=function(e,n){var o=$(n),i=o.children("source:first").text(),r=o.children("resource:first").text(),a=o.children("filename:first").text(),s=o.children("filelength:first").text();return s&&(s=parseInt(s,10)),t.create({resId:e,source:i,resource:r,fileName:a,fileLength:s,fakeLoading:!1,type:u.TYPE_ATTACHMENT})},t.prototype.getFileName=function(){return this.attachmentProps.fileName},t.prototype.getInfo=function(){return{fileLength:this.attachmentProps.fileLength,fileName:this.attachmentProps.fileName,resource:this.attachmentProps.resource,source:this.attachmentProps.source}},t.prototype.getResource=function(e){var t=this.attachmentProps.resource;return e&&e[t]&&(t=e[t]),t},t.prototype.getSource=function(e){var t=this.attachmentProps.source;return e&&e[t]&&(t=e[t]),t},t.prototype.toCollabJSON=function(){var e;return(e=this.getInfo()).resId=this.attachmentProps.resId,e},t.prototype.toHtml=function(e){var t,i=c("",document,!0,!0).ownerDocument,a=$(i.createElement("img"));return e=n.defaults(e||{},{resourceMap:null}),t=this.getSource(e.resourceMap)||"",r.IS_PC&&(t=o(t)),a.attr({alt:this.attachmentProps.fileName,"data-media-type":"attachment",filelength:this.attachmentProps.fileLength,filename:this.attachmentProps.fileName,path:this.getResource(),src:t,title:this.attachmentProps.fileName}),a.get(0).outerHTML},t.prototype.toJSON=function(){return{resId:this.getResId()}},t.prototype.toPlain=function(){return""},t.prototype.toXml=function(e,t){var n=e.createElement("resource-mono"),o=e.createElement("attach"),i=this.getInfo();a.appendText(e,n,"res-id",this.getResId()),a.appendText(e,o,"source",i.source),a.appendText(e,o,"resource",i.resource),a.appendText(e,o,"filename",i.fileName),a.appendText(e,o,"filelength",i.fileLength),n.appendChild(o),t.appendChild(n)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.attachmentProps=this.resProps,this.attachmentProps.resId=t.resId||i.parseImgSource(t.resource).resId,this.attachmentProps.type=u.TYPE_ATTACHMENT},t}(u)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return function(e){if(!e||/^http/i.test(e))return e;var t,n=e.lastIndexOf("\\");return-1===n?e:(t=e.substring(n+1),e.substring(0,n+1)+encodeURIComponent(t))}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.listeners=[],this.maxListeners=null}return e.prototype.addListener=function(e,t){return this.on(e,t)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this._filterMatchedEvent(this.listeners,e);return o.length>0&&(this._invokeListeners.apply(this,[o].concat(t)),this.listeners=this._filterNotMatchedEvent(this.listeners,e,!0)),o.length>0},e.prototype.getMaxListeners=function(){return null===this.maxListeners?e.defaultMaxListeners:this.maxListeners},e.prototype.listenerCount=function(e){return this._filterMatchedEvent(this.listeners,e).length},e.prototype.on=function(e,t){return this._register({event:e,listener:t,once:!1}),this},e.prototype.off=function(e,t){return this._unregister({event:e,listener:t}),this},e.prototype.once=function(e,t){return this._register({event:e,listener:t,once:!0}),this},e.prototype.removeAllListeners=function(e){return this.listeners=null!=e?this._filterNotMatchedEvent(this.listeners,e):[],this},e.prototype.removeListener=function(e,t){return this.listeners=this._filterNotMatchedEvent(this.listeners,e,null,t),this},e.prototype.setMaxListeners=function(e){return this.maxListeners=e,this},e.prototype._invokeListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.map(function(e){return e.listener.apply(e,t)})},e.prototype._register=function(e){if(this._checkListenerLimitReached(e.event))throw new Error("Listner Limit Reached:"+this.maxListeners);this.listeners.unshift(e)},e.prototype._unregister=function(e){this.listeners=this._filterNotMatchedEvent(this.listeners,e.event,null,e.listener)},e.prototype._returnListenerLimit=function(){return null===this.maxListeners?e.defaultMaxListeners:this.maxListeners},e.prototype._checkListenerLimitReached=function(e){return this.listenerCount(e)===this._returnListenerLimit()},e.prototype._filterMatchedEvent=function(e,t,n){return e.filter(function(e,o,i){return null==n?e.event===t:e.event===t&&e.once===n},this)},e.prototype._filterNotMatchedEvent=function(e,t,n,o){return e.filter(function(e,i,r){var a=e.event!==t;return!1===a&&null!=n&&(a=e.once!==n),!1===a&&null!=o&&(a=e.listener!==o),a},this)},e.defaultMaxListeners=10,e}();t.YEvent=n}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(4),n(33),n(28),n(1),n(3),n(16),n(34),n(9),n(74),n(0)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlank=function(){return new t({})},t.fromCollabJSON=function(e){var n=t.generalFromJSON(e,!0);return e.ownerId&&(n.oldOwnerId=e.ownerId),n},t.fromJSON=function(e){return t.generalFromJSON(e,!1)},t.fromXml=function(e){var n,r=new t({});return r.parseIdFromXml(e),r.setText(u.fromXml(e)),$(e).children().each(function(e,t){switch(t.nodeName){case l.TAG_ID_NAME:case l.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":o.fromXml(r,t);break;case"href":n=$(t).find("value").text(),r.setHref(n);break;default:i.appendToTree(r.unknownTree,t)}}),r},t.generalFromJSON=function(t,n){var o=e.generalFromJSON.call(this,t,n);return o&&t.href&&o.setHref(t.href),o},t.prototype.blur=function(){this.trigger("blur")},t.prototype.findAndSetOwnerList=function(e){var t,n=e.getPreBlock(this),o=e.getNextBlock(this),i=this.oldOwnerId;return i?a.isCatalogue(o)&&i===o.getOwnerId()?(t=o.getOwnerList(),this.setOwnerList(t),t.insertBefore(this,o)):a.isCatalogue(n)&&i===n.getOwnerId()?(t=n.getOwnerList(),this.setOwnerList(t),t.insertAfter(this,n)):(t=new d({id:i}),this.setOwnerList(t),t.insertAfter(this,null)):r.error("No oldOwnerId!")},t.prototype.focus=function(){this.trigger("focus")},t.prototype.getHref=function(){return this.href},t.prototype.getHtmlHref=function(){return n.isGUID(this.href)?"#"+this.href:this.href||"#"},t.prototype.getOwnerId=function(){return this.getOwnerList().getId()},t.prototype.getOwnerList=function(){return this.ownerList||r.warn('No ownerList! check have "setOwnerList"'),this.ownerList},t.prototype.getViewHref=function(){return n.isGUID(this.href)?null:this.href},t.prototype.isFirst=function(){return this.isFirstProp},t.prototype.isLast=function(){return this.isLastProp},t.prototype.removeSorting=function(){var e=!1;this.isFirstProp&&(e=!0,this.isFirstProp=null),this.isLastProp&&(e=!0,this.isLastProp=null),e&&this.trigger("sorting-change")},t.prototype.setOwnerList=function(e){this.ownerList=e},t.prototype.setFirst=function(){this.isFirstProp||(this.isFirstProp=!0,this.trigger("sorting-change"))},t.prototype.setHref=function(e){this.href=e||null,this.trigger("style-change","href",e)},t.prototype.setIndent=function(e){e>0&&this.setBlockStyle("indent",e)},t.prototype.setLast=function(){this.isLastProp||(this.isLastProp=!0,this.trigger("sorting-change"))},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.href=this.getHref(),t.ownerId=this.getOwnerId(),t},t.prototype.toJSON=function(t,n){var o=this.sliceText(t,n,!1),i=e.prototype.toJSON.call(this);return i.text=o.toJSON(),i.href=this.getHref(),i.ownerId=this.getOwnerId(),i},t.prototype.toHtml=function(e,t,n){var o,i,r=document.createElement("div"),a=this.getBlockStyles(),s=$("<a></a>"),l=$(r),u="";return n=!0===n,l.attr("yne-bulb-block","catalogue").css("white-space","pre-wrap"),this.isFirst()&&(u="first"),this.isLast()&&(u+="last"),l.attr("yne-bulb-order",u),this.applyBlockStylesOnElement(l,!0),p.each(a,function(e,t){switch(t){case"back-color":l.css("background-color","rgba(255, 255, 255, 0.7)");break;case"padding":l.css("padding",e),l.css("margin",e)}}),e=e||0,t=null==t?this.getEndOffset():t,o=this.sliceText(e,t,!1),i=c.rich2html(o,{withDefault:n}),s.attr("href",this.getHtmlHref()).html(i),l.html(s[0].outerHTML),r.outerHTML},t.prototype.toXml=function(t){var n,o,i=e.prototype.toXml.apply(this,[t]);return this.getHref()&&(n=t.createElement("href"),o=t.createElement("value"),$(o).text(this.getHref()),n.appendChild(o),i.appendChild(n)),$(i).attr("catalogue-id",this.getOwnerId()),$(i).attr("compat","true"),i},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=a.CATALOGUE,this.setHref(t.href),this.setIndent(t.indent),this.options&&this.options.ownerList&&this.setOwnerList(this.options.ownerList),this.on("attached",this._onAttached.bind(this)),this.on("detached",this._onDetached.bind(this)),this.on("select",this._onSelect.bind(this)),this.on("remove-select",this._onRemoveSelect.bind(this))},t.prototype._onAttached=function(e){var t=this.getOwnerList(),n=e.getPreBlock(this),o=e.getNextBlock(this);if(!t)return this.findAndSetOwnerList(e);n&&a.isCatalogue(n)&&n.getOwnerId()===this.getOwnerId()?t.insertAfter(this,n):o&&a.isCatalogue(o)&&o.getOwnerId()===this.getOwnerId()?t.insertBefore(this,o):t.insertAfter(this,null)},t.prototype._onDetached=function(){this.getOwnerList().removeItem(this)},t.prototype._onRemoveSelect=function(){this.getOwnerList().removeSelect()},t.prototype._onSelect=function(){this.getOwnerList().select()},t}(l)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(4),n(59),n(17)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromXml=function(e){var o=new t({id:$(e).attr("id")});return n.each(e.attributes,function(e){switch(e.nodeName){case"id":case"type":break;default:o.unknownAttrs.push(e.cloneNode(!0))}}),o},t.prototype.getId=function(){return this.id},t.prototype.getItems=function(){return this.items},t.prototype.getLength=function(){return this.items.length},t.prototype.insertAfter=function(e,t){var n=this.items,o=t?n.indexOf(t):-1;this.insertItem(o+1,e)},t.prototype.insertBefore=function(e,t){var n=this.items,o=t?n.indexOf(t):0;this.insertItem(o,e)},t.prototype.insertItem=function(e,t){var n=this.items;return i(e>0||e<=n.length),n.splice(e,0,t),this.updateIndexes(),e},t.prototype.isLock=function(){return!!this.state},t.prototype.removeItem=function(e){var t=this.items,n=t.indexOf(e);return n>=0&&(t.splice(n,1),this.updateIndexes()),n},t.prototype.removeSelect=function(){var e=this.items;e[0]&&e[0].blur()},t.prototype.select=function(){var e=this.items;this.isLock()||e[0]&&e[0].focus()},t.prototype.updateIndexes=function(){var e=this.items;e.forEach(function(t,n){t.removeSorting(),0===n&&t.setFirst(),n===e.length-1&&t.setLast()})},t.prototype.updateLockState=function(e){this.state=e,this.state&&this.removeSelect()},t.prototype.initialize=function(e){this.id=e.id||o.newGUID(),this.items=[],this.unknownAttrs=[]},t}(r)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(90),n(91),n(3),n(16),n(20),n(9)],void 0===(i=function(e,t,n,o,i,r,a,l){var c,u="javascript",d="default";return(c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlank=function(){return new t({})},t.fromJSON=function(e){var t=r.fromJSON.apply(this,[e]);return t.language=e.language,t.theme=e.theme,t.isSelectedBlock=e.isSelectedBlock,t},t.fromXml=function(e){var t=r.fromXml.apply(this,[e]),n=this.prototype._getChildByTagName(e,"language").textContent,o=this.prototype._getChildByTagName(e,"theme").textContent;return t.setTheme(o),t.setLanguage(n),t},t.prototype.getLanguage=function(){return this.language},t.prototype.setLanguage=function(e){this.language=e,u=e,this.trigger("content-change")},t.prototype.getTheme=function(){return this.theme},t.prototype.setTheme=function(e){this.theme=e,d=e,this.trigger("content-change")},t.prototype.getLength=function(e){return this.richText.toString().replace(t.LINE_BREAK,"").length},t.prototype.getTextStyle=function(){return[]},t.prototype.getTextStylesAtIndex=function(){return{}},t.prototype.getLineInfo=function(e){if(--e<0)return null;var n=this.richText.toString().split(t.LINE_BREAK)[e],o=n.replace(n.trimLeft(),"").length,i=n.length;return{lineStartSpacesNum:o,lineLength:i,lineText:n,lineEndChar:n[i-1]}},t.prototype.pushNewLineText=function(e){"string"==typeof e&&(e=new l({text:l})),this.richText.append(e);var n=e.toString();(n&&n[n.length-1]!==t.LINE_BREAK||""===n)&&this.richText.append(new l({text:t.LINE_BREAK})),this.trigger("content-change")},t.prototype.getCharIndex=function(e,n){for(var o=0,i=this.richText.toString();o<i.length&&e>1;)i[o]===t.LINE_BREAK&&e--,o++;return o+n},t.prototype.insertText=function(e,t,n){var o=this.richText.clone(),i=this.getCharIndex(e,t);this.richText.insert(n,i);var r=this.richText.clone();return this.trigger("content-change",{preRichText:o,newRichText:r}),!0},t.prototype.deleteText=function(t,n,o,i){var r=this.richText.clone(),a=this.getCharIndex(t,n),s=this.getCharIndex(o,i);e.prototype.deleteText.apply(this,[a,s]);var l=this.richText.clone();this.trigger("content-change",{preRichText:r,newRichText:l})},t.prototype.setText=function(e){this.richText=e},t.prototype.sliceText=function(t,n,o,i){var r=this.getCharIndex(t,n),a=this.getCharIndex(o,i);return e.prototype.sliceText.apply(this,[r,a])},t.prototype.tokenizeText=function(e){var t,n,o=this.tokenizer.tokenize(e,this.tokenizer.languages[this.language]);return t=[],n=function(e,o){Array.isArray(e.content)?e.content.forEach(function(e){n(e,!0)}):"string"==typeof e&&o?t.push({type:"tag",content:e}):t.push(e)},o.map(function(e){return n(e)}),t},t.prototype.toPlain=function(e,t,o,i){var r;return r=(e&&o?this.sliceText(e,t,o,i):this.richText).toString(),r=n(r)},t.prototype.toJSON=function(e,t,n,o){var i;i=e&&n?this.sliceText(e,t,n,o):this.richText;var r=a.prototype.toJSON.apply(this);return r.richText=i.toJSON(),r.isSelectedBlock=this.isSelectedBlock,r.theme=this.theme,r.language=this.language,r},t.prototype.code2html=function(){var e=this;return this.toCodeLines().map(function(t){return e.tokenizeText(t)}).map(function(t,n){return e.codeLineToHtml(n+1,t)}).join("")},t.prototype.toHtml=function(e,t,n){var i='<div yne-bulb-block="code" id="'+this.blockId+'" data-theme="'+this.theme+'" data-language="'+this.language+'" style="white-space: pre-wrap;">'+o.escapeHtml(this.richText.toString())+"</div>";return n&&(i='<div class="block-view code-view yne-code-theme-'+this.theme+'">\n                            <div class="para-text">\n                            '+this.code2html()+"\n                            </div>\n                          </div>"),i},t.prototype.getRichTexts=function(){var e,t,n=this.richText.getReadOnlyData(),o=[],i=n.length,r=0;for(e=0;e<i;++e)n[e].char.replace(/\n/g,"")||(t=e,o.push(this.richText.slice(r,t)),r=t+1);return o},t.prototype.toCodeLines=function(e){var n=(void 0===e?this.richText.toString():e).split(t.LINE_BREAK);return""===n[n.length-1]&&1!==n.length&&n.pop(),n},t.prototype.codeLineToHtml=function(e,n){var i=this,r=this.toCodeLines();if(e>r.length)return null;n||(n=this.tokenizeText(r[e-1]));var a=this.YNE_HEAD_CLASS+"-token",s=function(e,t){return'<span class="'+(t?a+" ":"")+(i.YNE_HEAD_CLASS+"-"+e)+'">'},l=function(e){return"<pre>"+e+"</pre>"};return n.length<=1&&""===n[0]?l('<span class="place-holder">'+t.EMPTY_LINE_TAG+"</span>"):l(n.reduce(function(e,t){if("string"==typeof t){var n=o.escapeHtml(t);return e+s(i.PLAIN_STRING_CLASS,!1)+n+"</span>"}n=o.escapeHtml(t.content);return e+s(t.type,!0)+n+"</span>"},""))},t.prototype.injectTokenizer=function(e){e.languages&&e.tokenize&&(this.tokenizer=e)},t.prototype.injectRenderParams=function(e){var t=e.YNE_HEAD_CLASS,n=e.PLAIN_STRING_CLASS;this.YNE_HEAD_CLASS=t,this.PLAIN_STRING_CLASS=n},t.prototype.toXml=function(t){var n=e.prototype.toXml.apply(this,[t]),o=function(e,o){var i=t.createElement(e),r=t.createTextNode(o);i.appendChild(r),n.appendChild(i)};return o("language",this.language),o("theme",this.theme),n},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=i.CODE,this.language=t.language||u,this.theme=t.theme||d,this.richText=t.text||new l({text:""}),this.isSelectedBlock=t.isSelectedBlock},t}(r)).LINE_BREAK="\n",c.EMPTY_LINE_TAG="&#8203;",c}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(1),n(62)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.getRange=function(t){var o,i=e.getSelection(t);return i?i.rangeCount>0?o=i.getRangeAt(0):n.warn("The selection has no range!"):n.warn("The selection is null!"),o},e.getSelection=function(e){return(e=e||window).getSelection()},e.isNodeInRange=function(t,o){if(!t)return n.warn("The param node is unvalid!"),!1;var i,r=t.ownerDocument||document,a=r.defaultView,s=a.Range;return o=o||e.getRange(a),(i=r.createRange()).selectNode(t),o.compareBoundaryPoints(s.START_TO_START,i)<1&&o.compareBoundaryPoints(s.END_TO_END,i)>-1},e.isRangeInNode=function(t,o){if(!t)return n.warn("The param node is unvalid!"),!1;var i,r=(t.ownerDocument||document).defaultView;if(!(o=o||e.getRange(r)))return n.warn("The native range is null!"),!1;for(i=o.commonAncestorContainer;i;){if(i===t)return!0;i=i.parentNode}return!1},e.isRangeInSelector=function(t,n){if(!t)return!1;var i;if(i=(n=n||e.getRange()).commonAncestorContainer,!n||!i)return!1;for(o.isText(i)&&(i=i.parentElement||i.parentNode);i&&i.webkitMatchesSelector;){if(i.webkitMatchesSelector(t))return!0;i=i.parentNode}return!1},e.removeAllRanges=function(t){var n=e.getSelection(t);n&&n.removeAllRanges()},e.setRange=function(t,o){var i=e.getSelection(o);i&&t?(i.removeAllRanges(),i.addRange(t)):n.warn("The selection or range is null!")},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o=n(18);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(2),i=n(63),r=n(15);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),o(o.S+o.F*r(function(){n(1)}),"Object",a)}},function(e,t,n){var o=n(64),i=n(152),r=n(32),a=n(25),s=n(228);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d,h=t||s;return function(t,s,f){for(var g,y,m=r(t),v=i(m),b=o(s,f,3),_=a(v.length),I=0,k=n?h(t,_):l?h(t,0):void 0;_>I;I++)if((p||I in v)&&(y=b(g=v[I],I,m),e))if(n)k[I]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return I;case 2:k.push(g)}else if(u)return!1;return d?-1:c||u?u:k}}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(1),n(3),n(245)],void 0===(i=function(e,t,n,o,i,r){return function(){function e(){}return e.getAllStyleNames=function(){return e.ALL_KEYS||(e.ALL_KEYS=[],n.each(r,function(t){var o=n.keys(t);n.each(o,function(t){-1===e.ALL_KEYS.indexOf(t)&&e.ALL_KEYS.push(t)})})),[].concat(e.ALL_KEYS)},e.getConfig=function(e,t,n){return(this.getConfigsOfBlock(t,n)||{})[e]},e.getConfigsOfBlock=function(t,i){if(t){var a=r[t],s={};return i=!1!==i,n.each(a,function(o,r){var a=n.clone(o);i&&e.overrideDefaults[t]&&null!=e.overrideDefaults[t][r]&&(a.default=e.overrideDefaults[t][r]),s[r]=a}),s}o.error("parameter is not valid",t)},e.getDefault=function(e,t,n){if(e&&t){var i=(this.getConfigsOfBlock(t,n)||{})[e];return i&&null!=i.default?i.default:void 0}o.error("parameter is not valid",e,t)},e.getDefaultsOfBlock=function(e,t){var o=this.getConfigsOfBlock(e,t),i={};return n.each(o,function(e,t){i[t]=e.default}),i},e.getStyleNamesOfBlock=function(t){var o=e.getConfigsOfBlock(t);return o?n.keys(o):[]},e.isSupport=function(t,n){var o=(e.getConfigsOfBlock(n)||{})[t];return o&&null!=o.type},e.reset=function(){e.overrideDefaults={}},e.setDefault=function(t,r,a){t&&null!=r||o.error("parameter is not valid",t,r);var s=[];a?s.push(a):s=i.getAllBlockTypes(),n.each(s,function(n){e.overrideDefaults[n]||(e.overrideDefaults[n]={}),e.overrideDefaults[n][t]=r})},e.overrideDefaults={},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(1),n(92)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){return new t(e)},t.fromCollabJSON=function(e,r){var a=e.rangeType;if(a===n.PARAGRAPH){var s=i.getBlockById(e.blockId,r);if(s){var l={block:s,end:e.endPosition,start:e.startPosition};return t.create(l)}}else o.error("wrong block range type:",a)},t.prototype.isCollapsed=function(){return this.start===this.end},t.prototype.clone=function(){return t.create({block:this.block,end:this.end,start:this.start})},t.prototype.collapse=function(e){void 0===e&&(e=!0),e?this.end=this.start:this.start=this.end},t.prototype.expandToStart=function(){this.start=this.block.getStartOffset()},t.prototype.expandToEnd=function(){this.end=this.block.getEndOffset()},t.prototype.getDataAsJSON=function(){return this.block.toJSON(this.start,this.end)},t.prototype.getDataAsHtml=function(e){return this.block.toHtml(this.start,this.end,e)},t.prototype.getDataAsPlain=function(){return this.block.toPlain(this.start,this.end)},t.prototype.getContent=function(){return this.block.sliceText(this.start,this.end)},t.prototype.canDrawedByNative=function(){return!0},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.startPosition=this.start,t.endPosition=this.end,t},t.prototype.initialize=function(e){this.type=n.PARAGRAPH,this.start=e.start||0,this.end=e.end||0,this.block=e.block},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(7),n(33),n(9),n(84),n(60),n(250),n(126),n(28),n(158),n(252),n(1),n(62),n(20),n(3),n(96),n(253),n(108),n(95),n(254)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m,v,b,_,I,k){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlankTable=function(e,n,o,i){var r,s,l,c=new t({}),u=[],d=[],p=[];for(o?c.setId(o):o=c.getId(),i&&(l=i/e),r=0;r<n;r++)for(p.push(v.DEFAULT_ROW_HEIGHT),u[r]=u[r]||[],s=0;s<e;s++)0===r&&d.push(l||v.DEFAULT_COL_WIDTH),u[r].push(I.create({cellId:I.makeCellId(o,r,s),content:a.createBlank()}));return c.setContentData(u,p,d),c},t.fromJSON=function(e,n){if(e&&e.type&&e.type===m.TABLE){var o=e.data,i=new t({colWidths:o.widths,rowHeights:o.heights,tableCells:u.cellsFromJSON({cellsJson:o.cells,height:o.heights.length,isUpdateCellId:n,resourceList:e.resourceList,width:o.widths.length})});return e.styles&&i.setBlockStyles(e.styles),e.blockId&&i.setId(e.blockId),i}f.warn("jsonObj is not valid!")},t.fromXml=function(e){var n,o,r,a,s,l=$(e),c=l.children("content:first").eq(0),u=$.trim(c.text()),p=t._resourceMapFromXml(l.children("resource-list:first").get(0)),h=new t({resourceMap:p});h.parseIdFromXml(e);try{n=JSON.parse(u)}catch(e){return void f.error(e,u)}return r=n.cells,a=t.validateRowHeights(n.heights),s=t.validateRowHeights(n.widths),o=t._tableCellsFromXml(r,a,s,{resourceMap:p,tableBlockId:h.getId()}),h.setContentData(o,a,s),l.children().each(function(e,t){switch(t.nodeName){case y.TAG_ID_NAME:case y.LEGACY_TAG_ID_NAME:case"content":case"resource-list":break;case"styles":i.fromXml(h,t);break;default:d.appendToTree(h.unknownTree,t)}}),h},t.validateRowHeights=function(e){return t._validateDimensionArray(e,v.DEFAULT_ROW_HEIGHT)},t.validColWidths=function(e){return t._validateDimensionArray(e,v.DEFAULT_COL_WIDTH)},t._resourceMapFromXml=function(e){var t={};return e?($(e).children("resource-mono").each(function(e,o){var i=$(o),r=i.find("res-id").text();r?n.some(b,function(e,n){var a,s=i.children(n+":first").get(0);if(s&&e&&e.fromXml&&(a=e.fromXml(r,s,o)),a)return t[r]=a,!0}):f.error("<resource-mono/> node has no res-id",o)}),t):t},t._tableCellsFromXml=function(e,t,n,o){var i,r,a,s=n.length,l=t.length,c=[];for(i=0;i<l;i++)for(c[i]=[],r=0;r<s;r++)a=i*s+r,c[i][r]=I.fromXml({cellRawData:e[a],colIndex:r,resourceMap:o.resourceMap,rowIndex:i,tableBlockId:o.tableBlockId});return c},t._validateDimensionArray=function(e,t){return e?n.map(e,function(e){return e>0?e:t}):[t]},t.prototype.clearCellAttr=function(e,t){if(!this.isLocked()){var n=this._getCellAt(e,t);n&&(n.clearMergePointAttr(),n.clearMergedCellAttr(),this.trigger("attribute-changed"))}},t.prototype.countWords=function(){var e=this.toPlain({filter:function(e){return e&&e.getType()===l.TEXT},returnString:!1,withLineBreak:!1}),t=0;return n.each(e,function(e){n.each(e,function(e){t+=p(e)})}),t},t.prototype.createCell=function(e){var t,n=(e=e||{}).content||a.createBlank(),o=e.styles;return t=I.create({content:n}),o&&t.setBlockStyles(o),t},t.prototype.creatRowData=function(){var e,t=this.getColumnCount(),n=[];for(e=0;e<t;e++)n.push(this.createCell());return n},t.prototype.deleteCols=function(e,t){if(!this.isLocked()){var n,o,i=[];if(!this.isLocked())return t=t||1,this.tableCells.forEach(function(n){for(o=0;o<t;o++)i[o]=i[o]||[],i[o].push(n.splice(e,1)[0])}),n=this.colWidths.splice(e,t),this.trigger("col-deleted",e,t),{colsData:i,widths:n}}},t.prototype.deleteRows=function(e,t){if(!this.isLocked()){var n,o,i=[];if(!this.isLocked()){for(t=t||1,o=0;o<t;o++)i[o]=this.tableCells.splice(e,1)[0];return n=this.rowHeights.splice(e,t),this.trigger("row-deleted",e,t),{heights:n,rowsData:i}}}},t.prototype.forEach=function(e,t){var n=this;n.forEachRow(function(o){return n.forEachColumn(function(t){return e(o,t)},t)},t)},t.prototype.forEachCell=function(e,t){var n=this,o={};n.forEach(function(t,i){var r,a=n.getCell(t,i,{findMergePointIfNeeded:!0,withPosition:!0});if(a&&(r=a.row+"-"+a.col,!0!==o[r]))return o[r]=!0,e(a.cell,a.row,a.col)},t)},t.prototype.forEachColumn=function(e,t){var n,o=this.getColumnCount();for(n=0;n<o;n++)if(!1===e(t?0+o-n:0+n))return!1},t.prototype.forEachRow=function(e,t){var n,o=this.getRowCount();for(n=0;n<o;n++)if(!1===e(t?0+o-n:0+n))return!1},t.prototype.getAllResourceInfo=function(){var e,t,n,o,i,r=this,a=[];return r.forEach(function(s,l){var c=r.getCell(s,l),u=r.getExtraInfo("pcResMap");c&&c.isImageCell()&&(e=c.getContent(),t=e.getSource(),n=e.getSource(u),t&&n&&a.push({blockId:r.getId(),extraSource:n,source:t})),c&&c.isAttachmentCell()&&(e=c.getContent(),t=e.getSource(),n=e.getSource(u),o=e.getResource(),i=e.getResource(u),t&&n&&o&&i&&a.push({extraResource:i,extraSource:n,resource:o,source:t}))}),a},t.prototype.getCell=function(e,t,o){var i,r;if(!(o=n.defaults(o||{},{findMergePointIfNeeded:!1,withPosition:!1})).findMergePointIfNeeded){if(!(r=this._getCellAt(e,t)))return;return!0===o.withPosition?{cell:r,col:t,row:e}:r}return i=this._findMergePoint(e,t),o.withPosition?i:i&&i.cell?i.cell:null},t.prototype.getCells=function(){return this.tableCells},t.prototype.getCellBlockStyles=function(e){var t,o=e.row,i=e.col,r=e.names,a=this._getCellAt(o,i);return!a.isMergedCell()&&(t=a.getBlockStyles(),r&&r.length>0?n.pick(t,r):t)},t.prototype.getCellById=function(e){if(g.isElement(e)&&(e=$(e).data("cellId")),e){var t,n,o,i=this.getRowCount(),r=this.getColumnCount();for(t=0;t<i;t++)for(n=0;n<r;n++)if((o=this.getCell(t,n))&&o.getCellId()===e)return{cell:o,col:n,row:t}}},t.prototype.getCellInlineStyles=function(e){var t=e.row,n=e.col,o=this._getCellAt(t,n);return o.isTextNoEmptyCell()?o.getInlineStyles(e.names):o.getStylesForEmpty(e.names)},t.prototype.getCellSize=function(e,t){var n=this.getCell(e,t,{findMergePointIfNeeded:!0,withPosition:!0});if(n&&n.cell)return this._getCellSize(n.cell,n.row,n.col)},t.prototype.getCellSizeById=function(e){var t=this.getCellById(e);if(t&&t.cell)return this._getCellSize(t.cell,t.row,t.col)},t.prototype.getColumnCount=function(){var e=(this.colWidths||[]).length;return Math.max(v.MIN_COL_COUNT,e)},t.prototype.getColumnWidth=function(e){return this.colWidths[e]||v.DEFAULT_COL_WIDTH},t.prototype.getCommonBlockStyle=function(e,t){var n;return t&&t.getAsRectRange&&(t=t.getAsRectRange()),t&&t.forEachCell?(t.forEachCell(function(t){var i=t.getBlockStylesAsBulb()||{};if(null==n)n=i[e];else if(n!==i[e])return n=o.INTERM,!1},!1),n===o.INTERM?null:n):(f.warn("Unvalid parameter",t),null)},t.prototype.getCommonInlineStyle=function(e,t){var n;return t&&t.getAsRectRange&&(t=t.getAsRectRange()),t&&t.forEachCell?(t.forEachCell(function(t){var i=t.getCommonInlineStyle(e);if(null==n)n=i;else if(n!==i)return n=o.INTERM,!1},!1),n===o.INTERM?null:n):(f.warn("Unvalid parameter",t),null)},t.prototype.getContentAt=function(e,t){var n=this.getCell(e,t);if(n)return{content:n.getContent(),type:n.getType()}},t.prototype.getMergedCellAttrAt=function(e,t){var n=this._getCellAt(e,t);return n?n.getMergedCellAttr():{}},t.prototype.getMergePointAttrAt=function(e,t){var n=this._getCellAt(e,t);return n?n.getMergePointAttr():{}},t.prototype.getPosition=function(e){if(e){var t,n,o=this.getRowCount(),i=this.getColumnCount();for(t=0;t<o;t++)for(n=0;n<i;n++)if(this.getCell(t,n)===e)return{col:n,row:t}}},t.prototype.getRowCount=function(){var e=(this.rowHeights||[]).length;return Math.max(v.MIN_ROW_COUNT,e)},t.prototype.highlight=function(e,t,n){this.trigger("high-light",e,t,n)},t.prototype.isEmptyContent=function(){var e=!0;return this.forEachCell(function(t){if(!t.isEmpty())return e=!1,!1}),e},t.prototype.getRowHeight=function(e){return this.rowHeights[e]||v.DEFAULT_ROW_HEIGHT},t.prototype.isMergedCell=function(e,t){var n=this.getCell(e,t);return n&&n.isMergedCell&&n.isMergedCell()},t.prototype.isMergePoint=function(e,t){var n=this.getCell(e,t);return n&&n.isMergePoint&&n.isMergePoint()},t.prototype.isMergeRect=function(e){var t;return!!this.isMergePoint(e.top,e.left)&&((t=this.getMergePointAttrAt(e.top,e.left)).width>=e.width&&t.height>=e.height)},t.prototype.insertCols=function(e,t,n){if(!this.isLocked()){var o=this,i=o.tableCells,r=e;n=n||[],t.forEach(function(e,t){i.forEach(function(t,n){t&&t.splice(r,0,e[n])}),o.colWidths.splice(r,0,n[t]||v.DEFAULT_COL_WIDTH),r+=1}),o.trigger("col-inserted",e)}},t.prototype.insertRows=function(e,t,o){if(!this.isLocked()){var i=this,r=e;o=o||[],n.forEach(t,function(e,t){i.tableCells.splice(r,0,e),i.rowHeights.splice(r,0,o[t]||v.DEFAULT_ROW_HEIGHT),r+=1}),i.trigger("row-inserted",e)}},t.prototype.setCellBlockStyles=function(e){if(!this.isLocked()){var t,o=e.row,i=e.col,r=e.styles,a=this._getCellAt(o,i);return!a.isMergedCell()&&(r&&!n.isEmpty(r)||a.clearStyles(),_.bulbStyles2TableStyles(r),a.setBlockStyles(r),t=a.getBlockStyles(),this.trigger("cell-block-style-change",o,i,r,t),!0)}},t.prototype.setCellContent=function(e,t,o){var i,s;if(!this.isLocked())if(null!=o){if(i=this.getCell(e,t))return n.isString(o)&&(o=r.create(o)),o instanceof r&&(o=a.create({richText:o})),(s=i.setContent(o))&&this.trigger("cell-content-change",i.getCellId()),s;f.warn("no cell at row/col",e,t)}else f.warn("content is not valid",o)},t.prototype.setCellInlineStyles=function(e){if(e&&e.styles&&!this.isLocked()){var t=e.row,n=e.col,o=e.styles,i=this._getCellAt(t,n);return i&&i.isTextNoEmptyCell()?(i.setInlineStyles(o),this.trigger("cell-inline-style-change",t,n)):i.setStylesForEmpty(o),!0}},t.prototype.setContentData=function(e,t,n){var o=this;e&&e.length&&t&&t.length&&n&&n.length&&(this.tableCells=e,this.rowHeights=t,this.colWidths=n,setTimeout(function(){o._checkAndFixTableData()}))},t.prototype.setColumnWidth=function(e,t){this.isLocked()||(this.colWidths[e]=t,this.trigger("col-width-set",e,t))},t.prototype.setMergedCellAttrAt=function(e,t,n,o){if(!this.isLocked()){var i=this._getCellAt(e,t);i&&(i.setMergedCellAttr(n,o),this.trigger("attribute-changed"))}},t.prototype.setMergePointAttrAt=function(e,t,n,o){if(!this.isLocked()){var i=this._getCellAt(e,t);i&&(i.setMergePointAttr(n,o),this.trigger("attribute-changed"))}},t.prototype.setRowHeight=function(e,t){this.isLocked()||(this.rowHeights[e]=t,this.trigger("row-height-set",e,t))},t.prototype.toHtml=function(e,t,o){var i=o?this.getExtraInfo("pcResMap"):null,r=c.renderTable(this,null,i),a=document.createElement("div"),s=$(a),l=this.getBlockStyles();return n.each(l,function(e,t){switch(t){case"back-color":s.css("background-color",e);break;case"padding":s.css("padding",e)}}),s.attr("yne-bulb-block","table").css({overflow:"auto"}).append(r),a.outerHTML.replace(/style="(.*?)"/g,function(e){if(e)return e.replace(/\&quot;/g,"")})},t.prototype.toJSON=function(t){var n=this,o=[].concat(n.colWidths),i=[].concat(n.rowHeights),r=[],a={},s={},l=e.prototype.toJSON.call(this);return n.forEach(function(e,o){var i,l=n.getCell(e,o);l&&l.isAttachmentCell()&&!t&&(i=l.getContent(),a[i.getResId()]=i.getInfo()),l&&l.isImageCell()&&!t&&(i=l.getContent(),s[i.getResId()]=i.getInfo()),r.push(l?l.toJSON(t):null)}),t?{cells:r,heights:i,widths:o}:(l.data={cells:r,heights:i,widths:o},l.resourceList={attachMap:a,imageMap:s},l)},t.prototype.toPlain=function(e){var t=this,o=[];return e=n.defaults(e||{},{filter:function(){return!0},returnString:!0,withLineBreak:!1}),t.forEach(function(n,i){var r=o[n],a=t.getCell(n,i),s="";r||(r=o[n]=[]),e.filter(a,n,i)&&(s=a?a.toPlain(e.withLineBreak):""),r.push(s)}),e.returnString?n.map(o,function(e){return e.join(" ")}).join("\n"):o},t.prototype.toXml=function(t){var o,r,a,s=this,l=e.prototype.toXml.call(this,t),c=t.createElement("resource-list"),u=t.createElement("content"),p={},h=[];return s.forEach(function(e,o){var i=s.getCell(e,o),r=i?i.toXml(t,c,p):{},a=n.keys(r);1===a.length&&"value"===a[0]&&""===r.value&&(r={}),h.push(r)}),l.appendChild(c),r={cells:h,heights:[].concat(s.rowHeights),widths:[].concat(s.colWidths)},a=JSON.stringify(r),u.appendChild(t.createTextNode(a)),l.appendChild(u),o=t.createElement("styles"),i.toXml(s,o,t),l.appendChild(o),d.appendToXml(s.unknownTree,l),l},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=m.TABLE,this.setContentData(t.tableCells,t.rowHeights,t.colWidths),this.resourceMap=t.resourceMap,delete this.options,n.bindAll(this,"_onDetached","_onAttached","_onLockedChange"),this.on("detached",this._onDetached),this.on("attached",this._onAttached),this.on("locked-change",this._onLockedChange)},t.prototype._checkAndFixTableData=function(){var e,t,n=this.toJSON();try{(e=k(n.data)).errors.length&&(window.console.warn("Table data fix errors:  \n"+e.errors.join("\n")),f.log(n),t=e.fixedData,this.tableCells=u.cellsFromJSON({cellsJson:t.cells,height:t.heights.length,resourceList:n.resourceList,width:t.widths.length}),this.rowHeights=t.heights,this.colWidths=t.widths,this.trigger("content-change"))}catch(e){f.error("Table data fix failed",e)}},t.prototype._getCellAt=function(e,t){var n,o=this.tableCells;return o[e]&&o[e][t]&&(n=o[e][t]),n||f.warn("Failed to get cell at row/col",e,t),n},t.prototype._findMergePoint=function(e,t){var n,o=this._getCellAt(e,t);if(o&&o.isMergedCell()&&(e-=(n=o.getMergedCellAttr()).dy,t-=n.dx,o=this._getCellAt(e,t)),o)return{cell:o,col:t,row:e};f.warn("Failed to find merge point row/col",e,t)},t.prototype._getCellSize=function(e,t,o){if(e&&!e.isMergedCell()){var i,r,a=this,s=function(e,t){return e+t};if(e&&!e.isMergedCell())return e.isMergePoint()?(i=e.getMergePointAttr())&&i.width&&i.height&&(r={cols:[],heights:[],rows:[],widths:[]},h(function(e){var t=o+e,n=a.getColumnWidth(t);r.widths.push(n),r.cols.push(t)},!1,i.width),h(function(e){var n=t+e,o=a.getRowHeight(n);r.heights.push(o),r.rows.push(n)},!1,i.height)):r={cols:[o],heights:[a.getRowHeight(t)],rows:[t],widths:[a.getColumnWidth(o)]},r&&(r.width=n.reduce(r.widths,s,0),r.height=n.reduce(r.heights,s,0)),r}},t.prototype._onDetached=function(){},t.prototype._onAttached=function(){},t.prototype._onLockedChange=function(){},t}(y)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(7),n(34),n(9),n(17),n(1)],void 0===(i=function(e,t,n,o,i,r,a,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){if(e&&e.richText)return new t(e);l.warn("Failed to create Lines",e)},t.createBlank=function(e){return e?t.create({richText:r.createBlank(!1)}):new t({})},t.fromCollabJSON=function(e){var o=t.createBlank();return n.map(e,function(e){o.appendRichText(r.fromCollabJSON(e))}),o},t.fromJSON=function(e){var o=t.createBlank();return n.map(e,function(e){o.appendRichText(r.fromJSON(e))}),o},t.splitRichText=function(e){if(e){if(0===e.getLength()||!e.isKeepLineBreak())return[e];var t,o=e.getReadOnlyData(),i=[],a=[],s=0;for(s=0;s<o.length;s++)(t=o[s]).isLineBreak()?(i.push(a),a=[]):a.push(t);return a.length&&i.push(a),i=n.map(i,function(e){var t=r.create("",!1);return t.appendRichChars(e),t})}},t.prototype.appendLines=function(e){e&&(this.richTextList=this.richTextList.concat(e.getAsRichTextList()))},t.prototype.appendRichText=function(e){var n=t.splitRichText(e);n&&n.length&&(this.richTextList=this.richTextList.concat(n))},t.prototype.getAsRichTextList=function(){return[].concat(this.richTextList)},t.prototype.getCommonStyles=function(e,t,n){var o=this.toRichText();return e=e||0,t=t||o.getLength(),o.getCommonStyles(e,t,n)},t.prototype.getCommonStyle=function(e){var t;return n.some(this.richTextList,function(n){if(n&&!n.isEmpty()){var i=n.getCommonStyle(0,n.getLength(),e,!0);if(null==t)null!=i&&(t=i);else if(t!==i)return t=o.INTERM,!0}}),t===o.INTERM&&(t=null),t},t.prototype.getCount=function(){return this.richTextList.length},t.prototype.getStyle=function(e){var t=[];return n.each(this.richTextList,function(n){var o=n.getStyle(0,n.getLength(),e);t.push(o)}),t},t.prototype.isEmpty=function(){var e=this.richTextList;return!e||!e.length||n.every(e,function(e){return e&&e.isEmpty()})},t.prototype.setStyle=function(e,t){var o;n.isArray(t)?(o=t,n.each(this.richTextList,function(t,n){var i=o[n];t.setStyle(0,t.getLength(),e,i)})):n.each(this.richTextList,function(n){n.setStyle(0,n.getLength(),e,t)})},t.prototype.toCollabJSON=function(){return n.map(this.richTextList,function(e){return e.toCollabJSON()})},t.prototype.toJSON=function(){return n.map(this.richTextList,function(e){return e.toJSON()})},t.prototype.toHtml=function(e){var t=(e=n.defaults(e||{},{handleLineWrapper:function(e){e.className="table-cell-line"}})).styleRules,o=n.map(this.richTextList,function(n,o){var r=i.rich2html(n,{styleRules:t}),a=document.createElement("div");return e.handleLineWrapper(a,n,o),a.innerHTML=r,a.outerHTML});return o=o.join("")},t.prototype.toPlain=function(){return n.map(this.richTextList,function(e){return e?e.toString():""})},t.prototype.toRichText=function(){var e,t=this.getCount(),n=this.richTextList,o=r.create("",!0);for(e=0;e<t;e++)o.append(n[e]),e<t-1&&o.append(r.create("\n",!0));return o},t.prototype.toString=function(){return this.toRichText().toString()},t.prototype.initialize=function(e){e=n.defaults(e||{},{richText:null}),this.richTextList=[],this.appendRichText(e.richText)},t}(a)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.setUnderscore=function(e){t.underscoreInst=e},e.setLogger=function(e){t.loggerInst=e},e}();t.ExternalLibs=n}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(6),i=n(0),r=n(7),a=n(3),s=n(1),l=n(156),c=n(767),u=o('<div class="collab-editing-view-wrapper"><div class="collab-session-view"></div></div>');return t.View.extend({className:"block-view unknown-block-view",_isReadOnly:!1,_pageInfo:null,_$pageBreakContainer:null,PAGE_HEIGHT:null,_viewHeightInlastPaging:null,block:null,_getSelector:function(){var e=this.tagName,t=this.className.split(/\s+/),n=this.id,o=this.cid,r=".note-view ";return r+=e,n&&(r+="#"+n),i.each(t,function(e){e&&(r+="."+e)}),r+='[data-yne-cid="'+o+'"]'},initialize:function(e){this.block=e.block,this._isReadOnly=e.isReadOnly,i.bindAll(this,"_onLockedChange"),this.block.on("locked-change",this._onLockedChange),e.inlineStyleViewMapper&&(this._inlineStyleViewMapper=e.inlineStyleViewMapper),this._pageInfo={},this.PAGE_HEIGHT=e.pageSize.height,i.isNumber(this.PAGE_HEIGHT)||(s.debugAlert("invalid PAGE_HEIGHT:"+this.PAGE_HEIGHT),this.PAGE_HEIGHT=r.PAGE_TYPE_NONE_HEIGHT),this._$pageBreakContainer=e.pageBreakContainer,this.noteView=e.noteView},render:function(){this.$el.attr("data-yne-cid",this.cid),this._updateLockState(this.isLocked()),a.isListItem(this.block)||this.trigger("view-height-changed",this.cid)},convertToNativeRange:function(){s.error("convertToNativeRange() should be implemented by subclass!")},parseNativeRange:function(){s.error("parseNativeRange() should be implemented by subclass!")},bindSelectionEvents:function(){i.bindAll(this,"onDrawRange"),this.on("draw-range",this.onDrawRange)},onDrawRange:function(){throw"Method not implemented."},_onLockedChange:function(e){this._updateLockState(this.isLocked()),this._updateLockIndicator(this.block.isLocked(),e),this.trigger("locked-change"),this.trigger("view-height-changed",this.cid)},isCollabLocked:function(){var e=this.block,t=!1;return e&&(t=e.isLocked()),t},isLocked:function(){var e=this.block,t=this._isReadOnly;return e&&(t=e.isLocked()||this._isReadOnly),t},_updateLockIndicator:function(e,t){var n,o,i=t&&t.lockColor,r=t&&t.nickname;null!=(n=this.$el.find(".collab-editing-view-wrapper"))&&0!==n.length||(n=u.clone(),this.$el.prepend(n)),o=n.find(".collab-session-view"),e?(this.$el.addClass("collab-editing-view"),null!=r&&o.text(r),null!=i&&o.css("background-color",i)):(this.$el.removeClass("collab-editing-view"),this.$el.find(".collab-editing-view-wrapper").remove())},_updateLockState:function(e){e?this.$el.addClass("collab-locked"):this.$el.removeClass("collab-locked")},onDestroy:function(){l.warn("onDestroy() was not implemented by "+this.block.type+" view")},clearHighlight:function(){},clearPageBreaks:function(){var e=this;i.each(e._pageInfo,function(t){t&&t.pageBreak&&e._removePageBreak(t.pageBreak)}),e._pageInfo={}},coincideAllPageBreaks:function(){var e=this;e._pageInfo?i.each(e._pageInfo,function(t){t&&t.pageBreak&&e._coincidePageBreak(t.pageBreak)}):s.debugAlert("pageInfo should not be null when coincideAllPageBreaks")},disablePageMode:function(){this.clearPageBreaks(),this.PAGE_HEIGHT=r.PAGE_HEIGHT_NONE},enablePageMode:function(e){this.clearPageBreaks(),e===r.PAGE_TYPE_A4?this.PAGE_HEIGHT=r.PAGE_HEIGHT_A4:e===r.PAGE_TYPE_B5?this.PAGE_HEIGHT=r.PAGE_HEIGHT_B5:e===r.PAGE_TYPE_TEST?this.PAGE_HEIGHT=r.PAGE_HEIGHT_TEST:this.PAGE_HEIGHT=r.PAGE_HEIGHT_NONE},getBottomPosInPage:function(e){var t;return this._pageInfo[e]?this._pageInfo[e].pageBreak?t=-1:(t=this._pageInfo[e].topPosInPage+this._getHeightInPage(e))>this.PAGE_HEIGHT&&s.warn("Unsplitted Block whose Height is more than PAGE_HEIGHT",this._pageInfo[e].topPosInPage,t,this.PAGE_HEIGHT):(s.debugAlert("should NOT invoke the getBottomPosInPage when the view is NOT on the page"),t=0),t},getFirstTransPageIndex:function(){var e={};return this._pageInfo?(i.each(this._pageInfo,function(t){t&&(null==e.pageIndex?e=t:t.pageIndex<e.pageIndex&&(e=t))}),e.pageIndex):(s.debugAlert("pageInfo should not be null when getFirstTransPageIndex"),null)},getLastTransPageIndex:function(){var e={};return this._pageInfo?(i.each(this._pageInfo,function(t){t&&(null==e.pageIndex?e=t:t.pageIndex>e.pageIndex&&(e=t))}),e.pageIndex):(s.debugAlert("pageInfo should not be null when getLastTransPageIndex"),null)},isOnFloat:function(){return"none"!==(this.$el.css("float")||"none").toLowerCase()},resetPageInfo:function(e,t){var n,o,r,a=!1;return this._pageInfo?i.isNumber(t)?null==e?(s.debugAlert("pageIndex should NOT be null"),a):null==this._$pageBreakContainer?(s.debugAlert("pageBreakContainer should not be null"),a):(this._pageInfo[e]&&(n=this._pageInfo[e].topPosInPage),t=Math.ceil(t),this.clearPageBreaks(),this._updatePageInfo(e,t),this.$el.css("height","auto"),o=this.$el.find(".page-break-placeholder"),this.$el.hasClass("quote-view")&&o.length&&this.$el.find(".para-text").css("display","inline-block"),r=this.$el.outerHeight(!0),t!==n?a=!0:this._isViewHeightChanged(r)?a=!0:this._isPagingContinue()&&(a=!0),a&&(this._viewHeightInlastPaging=r),a):(s.debugAlert("topPosInPage should be a number:"+t),a):(s.debugAlert("pageInfo should not be null when resetPageInfo"),a)},_coincidePageBreak:function(e){e.coincide(),this.trigger("pageBreak-positionChanged",e.getPageBreak().attr("data-page-id")),this._showPageBreakInfo(e)},_createPageBreak:function(e,t,n,o){return new c({pageIndex:e,topBlankHeight:t,bottomBlankHeight:n,container:this._$pageBreakContainer,noteView:this.noteView,placeholder:o})},_getContentContainer:function(){return this.$el},_getContentContainerBottomInView:function(){return this._getOffsetTopPos(this._getContentContainer())+this._getContentContainer().outerHeight()-this._getOffsetTopPos(this.$el)},_getOffsetTopPos:function(e){return e.offset().top},_getHeightInPage:function(e){var t,n,o=this._pageInfo[e-1],i=this._pageInfo[e];return i?o&&!o.pageBreak?(s.debugAlert("previous pageBreak should NOT be null"),0):o&&0===o.pageBreak.getPlaceholder().next().length?0:a.isTable(this.block)&&0===this._getContentContainer().find("tbody").children().length?0:"none"!==this.$el.css("float")?0:o&&o.pageBreak&&i&&i.pageBreak?(s.debugAlert("_getHeightInPage: should NOT there when crossing previous/current page"),this.PAGE_HEIGHT):(t=o?this._getPageBreakBottomPosInView(e-1):0,i&&i.pageBreak?(s.debugAlert("_getHeightInPage: shoud not be there when current pageBreak ready"),n=this._getPageBreakTopPosInView(e)):n=this._getContentContainerBottomInView(),Math.ceil(n-t)):(s.debugAlert("should NOT invoke the method when not on the page"),0)},_getPageBreakBottomPosInView:function(e){var t,n;return(t=this._pageInfo[e])&&t.pageBreak?(n=t.pageBreak.getPlaceholder(),this._getOffsetTopPos(n)+n.height()-this._getOffsetTopPos(this.$el)):0},_getPageBreakTopPosInView:function(e){var t;return t=this._pageInfo[e].pageBreak.getPlaceholder(),this._getOffsetTopPos(t)-this._getOffsetTopPos(this.$el)},_getTopPosInPage:function(e){var t=0;return this._pageInfo[e-1]&&this._pageInfo[e-1].pageBreak?t=0:this._pageInfo[e]?t=this._pageInfo[e].topPosInPage:s.debugAlert("should NOT invoke the _getTopPosInPage when the view is NOT on the page"),t},_handlePageOverflow:function(e,t){var n,o,i=this._getHeightInPage(e),r=this._pageInfo[e-1];return o=this.PAGE_HEIGHT-t,r&&r.pageBreak&&0!==t?(s.debugAlert("toPosInPage should be 0 when crossing the previous page"),!1):(o<0&&(o=0),0===t||this.isOnFloat()||o>i?(this._setViewMaxHeight(e),n=!1):(this._insertPageBreak(e,o),n=!0),n)},_insertPageBreak:function(e,t){var n;(n=this._createPageBreak(e,t)).getPlaceholder().prependTo(this.$el),this._pageInfo[e].pageBreak=n,this.trigger("pageBreak-inserted",n.getPageBreak().attr("data-page-id")),this._coincidePageBreak(n)},_isInPageMode:function(){return this.PAGE_HEIGHT!==r.PAGE_HEIGHT_NONE},_isPagingContinue:function(){return!1},_isViewHeightChanged:function(e){var t=!1;return(!this._viewHeightInlastPaging||Math.round(Math.abs(e-this._viewHeightInlastPaging))>r.TOLERABLE_HEIGHT_CHANGE)&&(t=!0),t},_removePageBreak:function(e){e.destroy()},_setViewMaxHeight:function(){},_showPageBreakInfo:function(e){var t,n,o,i,r,a,l=e.getPageBreak();s.DEBUG&&((t=l.find(".bottomSpan")).css("border-bottom","2px dashed #b6b9b6"),(n=l.find(".topSpan")).css("border-top","2px dashed #b6b9b6"),r=l.attr("data-page-id"),o=this._getOffsetTopPos(l),i=this._getOffsetTopPos(e.getPlaceholder()),a="Page:"+r+" OffsetTop(mark/placeholder):("+Math.round(o)+"/"+Math.round(i)+") TopBlank:"+n.outerHeight(),n.text(a),r*=1,a="TopOnPage:"+this._pageInfo[r].pageIndex+" BottomBlank:"+t.outerHeight(),t.text(a))},_updatePageInfo:function(e,t){this._pageInfo[e]={pageIndex:e,topPosInPage:t},this._handlePageOverflow(e,t)&&this._updatePageInfo(e+1,0)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){"use strict";if(n(30)){var o=n(104),i=n(12),r=n(15),a=n(2),s=n(185),l=n(236),c=n(64),u=n(118),d=n(111),p=n(49),h=n(120),f=n(66),g=n(25),y=n(337),m=n(114),v=n(77),b=n(55),_=n(136),I=n(18),k=n(32),w=n(225),C=n(115),S=n(58),x=n(116).f,A=n(227),T=n(112),N=n(24),E=n(80),D=n(175),M=n(155),O=n(230),L=n(138),B=n(180),R=n(117),P=n(229),j=n(326),F=n(31),z=n(57),H=F.f,G=z.f,V=i.RangeError,U=i.TypeError,W=i.Uint8Array,J=Array.prototype,Z=l.ArrayBuffer,Y=l.DataView,Q=E(0),X=E(2),$=E(3),K=E(4),q=E(5),ee=E(6),te=D(!0),ne=D(!1),oe=O.values,ie=O.keys,re=O.entries,ae=J.lastIndexOf,se=J.reduce,le=J.reduceRight,ce=J.join,ue=J.sort,de=J.slice,pe=J.toString,he=J.toLocaleString,fe=N("iterator"),ge=N("toStringTag"),ye=T("typed_constructor"),me=T("def_constructor"),ve=s.CONSTR,be=s.TYPED,_e=s.VIEW,Ie=E(1,function(e,t){return xe(M(e,e[me]),t)}),ke=r(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),we=!!W&&!!W.prototype.set&&r(function(){new W(1).set({})}),Ce=function(e,t){var n=f(e);if(n<0||n%t)throw V("Wrong offset!");return n},Se=function(e){if(I(e)&&be in e)return e;throw U(e+" is not a typed array!")},xe=function(e,t){if(!(I(e)&&ye in e))throw U("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Te(M(e,e[me]),t)},Te=function(e,t){for(var n=0,o=t.length,i=xe(e,o);o>n;)i[n]=t[n++];return i},Ne=function(e,t,n){H(e,t,{get:function(){return this._d[n]}})},Ee=function(e){var t,n,o,i,r,a,s=k(e),l=arguments.length,u=l>1?arguments[1]:void 0,d=void 0!==u,p=A(s);if(null!=p&&!w(p)){for(a=p.call(s),o=[],t=0;!(r=a.next()).done;t++)o.push(r.value);s=o}for(d&&l>2&&(u=c(u,arguments[2],2)),t=0,n=g(s.length),i=xe(this,n);n>t;t++)i[t]=d?u(s[t],t):s[t];return i},De=function(){for(var e=0,t=arguments.length,n=xe(this,t);t>e;)n[e]=arguments[e++];return n},Me=!!W&&r(function(){he.call(new W(1))}),Oe=function(){return he.apply(Me?de.call(Se(this)):Se(this),arguments)},Le={copyWithin:function(e,t){return j.call(Se(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return K(Se(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return P.apply(Se(this),arguments)},filter:function(e){return Ae(this,X(Se(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return q(Se(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Se(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Se(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Se(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Se(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Se(this),arguments)},lastIndexOf:function(e){return ae.apply(Se(this),arguments)},map:function(e){return Ie(Se(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Se(this),arguments)},reduceRight:function(e){return le.apply(Se(this),arguments)},reverse:function(){for(var e,t=Se(this).length,n=Math.floor(t/2),o=0;o<n;)e=this[o],this[o++]=this[--t],this[t]=e;return this},some:function(e){return $(Se(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Se(this),e)},subarray:function(e,t){var n=Se(this),o=n.length,i=m(e,o);return new(M(n,n[me]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?o:m(t,o))-i))}},Be=function(e,t){return Ae(this,de.call(Se(this),e,t))},Re=function(e){Se(this);var t=Ce(arguments[1],1),n=this.length,o=k(e),i=g(o.length),r=0;if(i+t>n)throw V("Wrong length!");for(;r<i;)this[t+r]=o[r++]},Pe={entries:function(){return re.call(Se(this))},keys:function(){return ie.call(Se(this))},values:function(){return oe.call(Se(this))}},je=function(e,t){return I(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return je(e,t=v(t,!0))?d(2,e[t]):G(e,t)},ze=function(e,t,n){return!(je(e,t=v(t,!0))&&I(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(e,t,n):(e[t]=n.value,e)};ve||(z.f=Fe,F.f=ze),a(a.S+a.F*!ve,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:ze}),r(function(){pe.call({})})&&(pe=he=function(){return ce.call(this)});var He=h({},Le);h(He,Pe),p(He,fe,Pe.values),h(He,{slice:Be,set:Re,constructor:function(){},toString:pe,toLocaleString:Oe}),Ne(He,"buffer","b"),Ne(He,"byteOffset","o"),Ne(He,"byteLength","l"),Ne(He,"length","e"),H(He,ge,{get:function(){return this[be]}}),e.exports=function(e,t,n,l){var c=e+((l=!!l)?"Clamped":"")+"Array",d="get"+e,h="set"+e,f=i[c],m=f||{},v=f&&S(f),b=!f||!s.ABV,k={},w=f&&f.prototype,A=function(e,n){H(e,n,{get:function(){return function(e,n){var o=e._d;return o.v[d](n*t+o.o,ke)}(this,n)},set:function(e){return function(e,n,o){var i=e._d;l&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),i.v[h](n*t+i.o,o,ke)}(this,n,e)},enumerable:!0})};b?(f=n(function(e,n,o,i){u(e,f,c,"_d");var r,a,s,l,d=0,h=0;if(I(n)){if(!(n instanceof Z||"ArrayBuffer"==(l=_(n))||"SharedArrayBuffer"==l))return be in n?Te(f,n):Ee.call(f,n);r=n,h=Ce(o,t);var m=n.byteLength;if(void 0===i){if(m%t)throw V("Wrong length!");if((a=m-h)<0)throw V("Wrong length!")}else if((a=g(i)*t)+h>m)throw V("Wrong length!");s=a/t}else s=y(n),r=new Z(a=s*t);for(p(e,"_d",{b:r,o:h,l:a,e:s,v:new Y(r)});d<s;)A(e,d++)}),w=f.prototype=C(He),p(w,"constructor",f)):r(function(){f(1)})&&r(function(){new f(-1)})&&B(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=n(function(e,n,o,i){var r;return u(e,f,c),I(n)?n instanceof Z||"ArrayBuffer"==(r=_(n))||"SharedArrayBuffer"==r?void 0!==i?new m(n,Ce(o,t),i):void 0!==o?new m(n,Ce(o,t)):new m(n):be in n?Te(f,n):Ee.call(f,n):new m(y(n))}),Q(v!==Function.prototype?x(m).concat(x(v)):x(m),function(e){e in f||p(f,e,m[e])}),f.prototype=w,o||(w.constructor=f));var T=w[fe],N=!!T&&("values"==T.name||null==T.name),E=Pe.values;p(f,ye,!0),p(w,be,c),p(w,_e,!0),p(w,me,f),(l?new f(1)[ge]==c:ge in w)||H(w,ge,{get:function(){return c}}),k[c]=f,a(a.G+a.W+a.F*(f!=m),k),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*r(function(){m.of.call(f,1)}),c,{from:Ee,of:De}),"BYTES_PER_ELEMENT"in w||p(w,"BYTES_PER_ELEMENT",t),a(a.P,c,Le),R(c),a(a.P+a.F*we,c,{set:Re}),a(a.P+a.F*!N,c,Pe),o||w.toString==pe||(w.toString=pe),a(a.P+a.F*r(function(){new f(1).slice()}),c,{slice:Be}),a(a.P+a.F*(r(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!r(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Oe}),L[c]=N?T:E,o||N||p(w,fe,E)}}else e.exports=function(){}},function(e,t,n){var o=n(332),i=n(2),r=n(151)("metadata"),a=r.store||(r.store=new(n(335))),s=function(e,t,n){var i=a.get(e);if(!i){if(!n)return;a.set(e,i=new o)}var r=i.get(t);if(!r){if(!n)return;i.set(t,r=new o)}return r};e.exports={store:a,map:s,has:function(e,t,n){var o=s(t,n,!1);return void 0!==o&&o.has(e)},get:function(e,t,n){var o=s(t,n,!1);return void 0===o?void 0:o.get(e)},set:function(e,t,n,o){s(n,o,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),o=[];return n&&n.forEach(function(e,t){o.push(t)}),o},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(e){return e.replace(/\xA0/g," ")}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){var e=/</g,t=/>/g,n=/"/g,o=/&quot;/g,i=/&#([a-zA-Z0-9]*);?/gim,r=/&colon;?/gim,a=/&newline;?/gim,s=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,l=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,c=/u\s*r\s*l\s*\(.*/gi,u=/<!--[\s\S]*?-->/g;function d(n){return n.replace(e,"&lt;").replace(t,"&gt;")}function p(e){return e.replace(n,"&quot;")}function h(e){return e.replace(o,'"')}function f(e){return e.replace(i,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function g(e){return e.replace(r,":").replace(a," ")}function y(e){for(var t="",n=0,o=e.length;n<o;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return t.trim()}function m(e){return e=y(e=g(e=f(e=h(e))))}function v(e){return e=d(e=p(e))}var b={safeAttrValue:function(e,t){if(t=m(t),"href"===e||"src"===e){if("#"===(t=t.trim(t)))return"#";if("http://"!==t.substr(0,7)&&"https://"!==t.substr(0,8)&&"mailto:"!==t.substr(0,7)&&"#"!==t[0]&&"/"!==t[0])return""}else if("background"===e){if(s.lastIndex=0,s.test(t))return""}else if("style"===e){if(l.lastIndex=0,l.test(t))return"";if(c.lastIndex=0,c.test(t)&&(s.lastIndex=0,s.test(t)))return""}return t=v(t)},safeHref:function(e){return e=m(e),s.lastIndex=0,s.test(e)?"":e=v(e)}};return b.escapeHtml=d,b.escapeQuote=p,b.unescapeQuote=h,b.escapeHtmlEntities=f,b.escapeDangerHtml5Entities=g,b.clearNonPrintableCharacter=y,b.friendlyAttrValue=m,b.escapeAttrValue=v,b.onIgnoreTagStripAll=function(){return""},b.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),o=[],i=!1;return{onIgnoreTag:function(r,a,s){if(function(t){return!!n||-1!==e.indexOf(t)}(r)){if(s.isClosing){var l="[/removed]",c=s.position+l.length;return o.push([!1!==i?i:s.position,c]),i=!1,l}return i||(i=s.position),"[removed]"}return t(r,a,s)},remove:function(e){var t="",n=0;return o.forEach(function(o){t+=e.slice(n,o[0]),n=o[1]}),t+=e.slice(n)}}},b.stripCommentTag=function(e){return e.replace(u,"")},b.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)})).join("")},b}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(21),n(1)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.getBlockById=function(e,t){var n=t.getBlockById(e);return n||o.warn("Failed to find block",e),n},t.fromCollabJSON=function(e,n){var o=t.getBlockById(e.blockId,n);return o?new t({block:o}):null},t.prototype.isCollapsed=function(){throw new Error("isCollapsed () should be implemented by subclass")},t.prototype.getType=function(){return this.type},t.prototype.clone=function(e){throw new Error("Every subclass of BlockRange should implement the `clone` method")},t.prototype.collapse=function(e){throw new Error("Every subclass of BlockRange should implement the `collapse` method")},t.prototype.expandToStart=function(){},t.prototype.expandToEnd=function(){},t.prototype.getDataAsJSON=function(){throw new Error("toJSON() should be implemented by subclass!")},t.prototype.getDataAsHtml=function(e){throw new Error("toHtml() should be implemented by subclass!")},t.prototype.getDataAsPlain=function(){throw new Error("toPlain() should be implemented by subclass!")},t.prototype.canDrawedByNative=function(){throw new Error("canDrawedByNative() should be implemented by subclass!")},t.prototype.toNativeRange=function(e){if(e&&e.getBlockViewByBlock){var t=e.getBlockViewByBlock(this.block);if(t)return t.convertToNativeRange(this);o.warn("No blockView")}else o.error("note view is unvalid!")},t.prototype.extendToBlockEnd=function(){o.warn('Show sub block range do! "extendToBlockEnd"')},t.prototype.extendToBlockStart=function(){o.warn('Show sub block range do! "extendToBlockStart"')},t.prototype.getBlockId=function(){return this.block?this.block.getId():null},t.prototype.toCollabJSON=function(e){return{blockId:this.block.getId(),rangeType:this.type}},t.prototype.initialize=function(e){e=e||{block:null},this.type="block",this.block=e.block},t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(3),n(629),n(1),n(92)],void 0===(i=function(e,t,n,o,i,r,a){var l="1",c="2",u="3",d="4",p="5";return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){if(e&&e.block&&e.type){if(e.type!==l||t._isValidRect(e.rect))return new t(e);r.error("Failed to create TableRange, rect is NOT valid",e)}else r.error("Failed to create TableRange",e)},t.fromCollabJSON=function(e,n){var i=e.rangeType;if(i===o.TABLE){var s=a.getBlockById(e.blockId,n);return s?t.create({block:s,type:e.simpleValue2,rect:e.simpleValue1}):void 0}r.error("wrong block type:",i)},t._isValidRect=function(e){return e&&e.left>=0&&e.top>=0&&e.width>=1&&e.height>=1},t.prototype.getType=function(){return this.type},t.prototype.getAsRectRange=function(){var e,t=this.type,n=this.block;switch(t){case u:case d:e=i.create({table:n,width:1,height:1,top:t===u?0:n.getRowCount()-1,left:t===u?0:n.getColumnCount()-1});break;case c:e=i.create({table:n,top:0,left:0,width:n.getColumnCount(),height:n.getRowCount()});break;case l:if(!this.rect)return void r.warn("Bad range, please check code, range:",this);e=i.create({table:n,top:this.rect.top,left:this.rect.left,width:this.rect.width,height:this.rect.height});break;case p:return null;default:r.error("Failed to create RectRange",t)}return e},t.prototype.isCollapsed=function(){return this.type===p},t.prototype.isFullSelected=function(){return this.type===c},t.prototype.isOnCellEdit=function(){var e;return this.block.trigger("get-block-view",this.block,function(t){e=t}),e&&e.isOnCellEdit()},t.prototype.isInBlank=function(){return this.type===p},t.prototype.clone=function(){return t.create({block:this.block,type:this.type,rect:this.rect})},t.prototype.collapse=function(){},t.prototype.getDataAsJSON=function(e){var t=this.getAsRectRange();return t?t.getDataAsJSON(e):null},t.prototype.getDataAsHtml=function(){var e=this.getAsRectRange();return e?e.getDataAsHtml():null},t.prototype.getDataAsPlain=function(){var e=this.getAsRectRange();return e?e.getDataAsPlain():null},t.prototype.canDrawedByNative=function(){return!1},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.simpleValue1=this.getAsRectRange()||null,t.simpleValue2=this.getType()||null,t},t.prototype.initialize=function(i){e.prototype.initialize.call(this,i),i=n.defaults(i||{},{type:u,rect:null}),this.block=i.block,this.type=i.type||o.TABLE,this.type===l&&(t._isValidRect(i.rect)?this.rect=i.rect:this.type=u)},t.TYPES={NORMAL:"1",ALL:"2",FIRST_CELL:"3",LAST_CELL:"4",BLANK:"5"},t}(a)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(17),n(1)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromXml=function(e,t){o.error("fromXml() should be implemented by sub-class")},t.fromCollabJSON=function(e){return o.error("fromCollabJSON() should be implemented by sub-class"),null},t.prototype.getResId=function(){return this.resProps.resId||o.error("No resId"),this.resProps.resId},t.prototype.getType=function(){return this.resProps.type},t.prototype.isType=function(e){return this.resProps.type===e},t.prototype.toHtml=function(e){return o.error("toHtml() should be implemented by sub-class"),""},t.prototype.toJSON=function(){o.error("toJSON() should be implemented by sub-class")},t.prototype.toCollabJSON=function(){o.error("toCollabJSON() should be implemented by sub-class")},t.prototype.toPlain=function(){o.error("toPlain() should be implemented by sub-class")},t.prototype.toXml=function(e,t){o.error("toXml() should be implemented by sub-class")},t.prototype.initialize=function(e){this.resProps=e||{resId:"",type:t.TYPE_IMAGE}},t.TYPE_IMAGE="image",t.TYPE_ATTACHMENT="attachment",t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(45),n(4),n(3),n(139),n(9),n(84),n(42),n(17),n(1),n(70),n(61),n(94),n(108),n(60),n(125)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m,v){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.blockToCell=function(e){var n,o=t.blockToCellContent(e);return o&&(n=t.create({content:o})),n},t.blockToCellContent=function(e){if(e){var t,i,s,d,g,y,m=r.getType(e);switch(m){case r.PARAGRAPH:case r.QUOTE:case r.CATALOGUE:case r.CODE:case r.HEADING:i=c.create({richText:e.getText()});break;case r.IMAGE:case r.HANDWRITE:i=f.create({source:e.getSource()});break;case r.ATTACHMENT:i=h.create({fileLength:e.getFileLength(),fileName:e.getFileName(),resource:e.getResource(),source:e.getSource()});break;case r.LIST_ITEM:(t=e.getText()).getLength()&&(y={},n.each(t.getStylesAtIndex(0),function(e,t){a.isSupportedStyle(t)&&(y[t]=e)})),d=a.makePlainMarker(e,!1),d=l.create(d,!1),y&&d.setStyles(0,d.getLength(),y),d.append(l.create(" ",!1)),s=e.getLevel()||1,g=o.repeat(" ",4*(s-1)),(g=l.create(g,!1)).append(d),g.append(t),i=c.create({richText:g});break;case r.TODO:g=u.getMarker(e),g=l.create(g,!1),t=e.getText(),e.getChecked()&&t.setStyles(0,t.getLength(),{strike:!0}),g.append(t),i=c.create({richText:g});break;default:p.warn("Failed to handle block to cell",m,e)}return i}},t.create=function(e){if(e&&e.content){var n=e.content;if(n instanceof c||n instanceof g)return new t(e);p.warn("Failed to create TableCell",e)}else p.warn("Failed to create TableCell",e)},t.createByTable=function(e,n,o,i){var r=e.getId(),a=t.makeCellId(r,n,o);return t.create({cellId:a,content:i})},t.fromCollabJSON=function(e){var n={cellId:e.cellId,content:v.contentFromCollabJSON(e.content),styles:e.styles};return e.attr&&(n.mergeWidth=e.attr.width,n.mergeHeight=e.attr.height,n.mergePointDX=e.attr.dx,n.mergePointDY=e.attr.dy),t.create(n)},t.fromJSON=function(e,o,i){e||p.error("Bad json data!");var r={};return r.styles=n.pick(e,y.getAllStyleNames()),n.extend(r,n.pick(e,t.ATTRIBUTE_NAMES),{cellId:e.cellId,content:v.contentFromJSON(e.content,!1,i)||c.createBlank()}),o&&delete r.cellId,t.create(r)},t.fromXml=function(e){if(e&&e.tableBlockId&&null!=e.rowIndex&&null!=e.colIndex){var o,i={cellId:t.makeCellId(e.tableBlockId,e.rowIndex,e.colIndex)},r=e.cellRawData,a=e.resourceMap,s=t._resourceFromJSON(r,a),l=t.ATTRIBUTE_NAMES,u=y.getAllStyleNames(),d=["value","resource","inlineStyles"].concat(l,u);return s?i.content=s:(o=t._linesFromJSON(r),i.content=o||c.createBlank()),r=r||{},i.unknown=n.omit(r,d.concat(n.keys(v.oldStyleNameMap))),i.styles=n.pick(r,u),n.extend(i,n.pick(r,l)),t.create(i)}p.warn("Failed to create TableCell from JSON",e)},t.makeCellId=function(e,t,n){return[e,"cell",t,n].join("-")},t._linesFromJSON=function(e){var n=t._richTextFromJSON(e);return n?c.create({richText:n}):c.createBlank()},t._resourceFromJSON=function(e,t){if(e&&e.resource){var n=e.resource,o=t[n];return o&&o.getResId&&o.getResId()===n?o:void 0}},t._richTextFromJSON=function(e){if(e&&e.value){var t=e.value,o=new l({text:t}),i=v.oldStyleNameMap,r=o.getLength();return n.each(i,function(t,i){var a=t,s=e[i];null!=s&&("font-size"===a&&n.isString(s)&&(s=s.replace("px","")),o.setStyle(0,r,a,s))}),e.inlineStyles&&n.each(e.inlineStyles,function(e,t){n.each(e,function(e){o.setStyle(e.from,e.to,t,e.value)})}),o}},t.prototype.clearMergedCellAttr=function(){delete this.mergePointDX,delete this.mergePointDY},t.prototype.clearMergePointAttr=function(){delete this.mergeWidth,delete this.mergeHeight},t.prototype.clearStyles=function(){this.styles={}},t.prototype.clearStylesForEmpty=function(){this.stylesForEmpty={}},t.prototype.getBlockStyles=function(){return this.styles},t.prototype.getBlockStylesAsBulb=function(){var e=n.clone(this.styles);return y.tableStyles2BulbStyles(e)},t.prototype.getCellId=function(){return this.cellId},t.prototype.getCommonInlineStyle=function(e){var t=this.getContent();return this.isTextNoEmptyCell()&&t.getCommonStyle?t.getCommonStyle(e):this.stylesForEmpty[e]},t.prototype.getCommonInlineStyles=function(){var e=this.getContent();return this.isTextNoEmptyCell()&&e.getCommonStyles?e.getCommonStyles():this.stylesForEmpty},t.prototype.getContent=function(){return this.content},t.prototype.getInlineStyles=function(e){if(this.isTextNoEmptyCell()){var t=this.getContent(),n={};return e.forEach(function(e){n[e]=t.getStyle(e)}),n}},t.prototype.getMergedCellAttr=function(){return{dx:this.mergePointDX||0,dy:this.mergePointDY||0}},t.prototype.getMergePointAttr=function(){var e=this.mergeWidth||0;return{height:this.mergeHeight||0,width:e}},t.prototype.getStylesForEmpty=function(e){var t,o=this;return e?(t={},n.each(e,function(e){t[e]=o.stylesForEmpty[e]}),t):o.stylesForEmpty},t.prototype.getType=function(){var e=m.TEXT,t=this.getContent();if(t&&t.getType)switch(t.getType()){case g.TYPE_IMAGE:e=m.IMAGE;break;case g.TYPE_ATTACHMENT:e=m.ATTACHMENT}return e},t.prototype.isAttachmentCell=function(){return this.getType()===m.ATTACHMENT},t.prototype.isEmpty=function(){var e=this.getType(),t=this.content;return e===m.TEXT&&(!t||t.isEmpty())},t.prototype.isImageCell=function(){return this.getType()===m.IMAGE},t.prototype.isLocked=function(){return this.locked},t.prototype.isMergedCell=function(){var e=this.getMergedCellAttr();return e.dx>=1||e.dy>=1},t.prototype.isMergePoint=function(){var e=this.getMergePointAttr();return e.width>1||e.height>1},t.prototype.isTextNoEmptyCell=function(){var e=this.getContent();return!!e&&(this.getType()===t.TYPE_TEXT&&!e.isEmpty())},t.prototype.setBlockStyle=function(e,t){var o=y.getConfig(e);o&&(this.isLocked()||("Enum"===o.type?o.possible[t]||(t=o.default):"Number"!==o.type||n.isNumber(t)?"Boolean"!==o.type||n.isBoolean(t)?n["is"+o.type]&&(n["is"+o.type](t)||(t=t.default)):t="true"===t:(t=null===t||""===t?NaN:Number(t),!isNaN(t)&&t||(t=o.default)),t=t||o.default,this.styles[e]=t))},t.prototype.setBlockStyles=function(e){var t=this;if(!t.isLocked())return e?(n.each(e,function(e,n){t.setBlockStyle(n,e)}),!0):void 0},t.prototype.setInlineStyles=function(e){if(e&&this.isTextNoEmptyCell()){var t=this.getContent();n.each(e,function(e,n){t.setStyle(n,e)})}},t.prototype.setContent=function(e){var t=!1;if(!this.isLocked())return e instanceof c?(this.content=e,t=!0,this.isTextNoEmptyCell()&&this.clearStylesForEmpty()):e instanceof g&&(this.content=e,t=!0),t},t.prototype.setLocked=function(e){this.locked=!0===e},t.prototype.setMergedCellAttr=function(e,t){if(null!=e&&null!=t&&e>=0&&t>=0&&(e>0||t>0))return this.mergePointDX=e,this.mergePointDY=t,this.clearMergePointAttr(),!0},t.prototype.setMergePointAttr=function(e,t){return!(!e&&!t)&&(e>=1&&!t&&(p.warn("No valid mergeHeight, will set 1"),t=1),t>=1&&!e&&(p.warn("No valid mergeWidth, will set 1"),e=1),this.mergeWidth=e,this.mergeHeight=t,this.clearMergedCellAttr(),!0)},t.prototype.setStylesForEmpty=function(e){p.log("setStylesForEmpty",e),n.extend(this.stylesForEmpty,e)},t.prototype.setUnknown=function(e){e&&(this.unknown=e)},t.prototype.toCollabJSON=function(){var e,t={};return this.isMergedCell()&&(t=n.extend(t,this.getMergedCellAttr())),this.isMergePoint()&&(t=n.extend(t,this.getMergePointAttr())),e={cellId:this.getCellId(),content:v.contentToCollabJSON(this.content),styles:n.extend({},this.styles)},n.isEmpty(t)||(e.attr=t),e},t.prototype.toHtml=function(){p.error("Should not call TabelCell.toHtml()")},t.prototype.toJSON=function(e){var t,o={},i={};return this.isMergedCell()&&(o=n.extend(o,this.getMergedCellAttr()),n.extend(i,{mergePointDX:o.dx,mergePointDY:o.dy})),this.isMergePoint()&&(o=n.extend(o,this.getMergePointAttr()),n.extend(i,{mergeHeight:o.height,mergeWidth:o.width})),this.isTextNoEmptyCell()&&(i.value=this.content.toString(),e&&(t=this.content.getCommonStyles(null,null,!0),n.extend(i,v.inlineStyle2oldCell(t)))),e?n.extend(i,v.blockStyle2oldCell(this.styles)):n.extend(i,{cellId:this.getCellId(),content:v.contentToJSON(this.content)},v.blockStyle2oldCell(this.styles)),i},t.prototype.toPlain=function(e){return this.isMergedCell()?"":v.contentToPlain(this.content,e)},t.prototype.toXml=function(e,t,o){var i,r,a,s,l,c={};if(this.isMergedCell())return{mergePointDX:(i=this.getMergedCellAttr()).dx,mergePointDY:i.dy,value:""};switch(this.isMergePoint()&&(c={mergeHeight:(i=this.getMergePointAttr()).height,mergeWidth:i.width}),r=this.getType(),a=this.getContent(),n.isEmpty(this.styles)||n.extend(c,this.styles),n.isEmpty(this.unknown)||n.extend(c,this.unknown),r){case m.TEXT:s=a.toRichText().toJSON(!0),c.value=s.text,s.inlineStyles&&(c.inlineStyles=s.inlineStyles);break;case m.IMAGE:case m.ATTACHMENT:l=a.getResId(),c.value="",c.resource=l,l&&!0===o[l]?p.warn("resource has already in <resource-list>",l,a):(a.toXml(e,t),o[l]=!0);break;default:p.error("unvalid type",r)}return c},t.prototype.initialize=function(e){e=e||{},this.styles={},this.cellId=e.cellId||i.newGUID(),this.setContent(e.content),this.setBlockStyles(e.styles),this.setMergePointAttr(e.mergeWidth,e.mergeHeight),this.setMergedCellAttr(e.mergePointDX,e.mergePointDY),this.setUnknown(e.unknown),this.stylesForEmpty={}},t.TYPE_TEXT="text",t.ATTRIBUTE_NAMES=["mergeWidth","mergeHeight","mergePointDX","mergePointDY"],t}(d)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(69)],void 0===(i=function(e,t,n){return n({DEFAULT_ROW_HEIGHT:40,DEFAULT_COL_WIDTH:70,MIN_ROW_COUNT:1,MIN_COL_COUNT:1,MAX_ROW_COUNT:500,MAX_COL_COUNT:35,ATTACHMENT_MIN_WIDTH:285,ATTACHMENT_MIN_HEIGHT:64,DEFAULT_TABLE_WIDTH:620},!0)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(43),i=n(3),r=n(98),a=n(16),s=n(42),l=n(9),c=n(268),u=n(7),d=n(0),p=n(73),h=n(74),f=n(6),g=n(4);return t=null,o.extend({inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0,align:!0,"line-height":!0,indent:!0,"text-indent":!0},computeBulbStyles:function(){var e,n=this.el,o=n.getAttribute("yne-bulb-block");this.bulbBlock=o,o===i.PARAGRAPH?(e=n.style.marginLeft,e=parseInt(e,10),isNaN(e)||(e=Math.ceil(e/u.INDENT_WIDTH),this.styles.indent=(this.styles.indent||0)+e)):o===i.TODO&&(e=n.querySelector("[yne-bulb-todo-content]"))?n.innerHTML=e.innerHTML:("catalogue-wrap"===n.getAttribute("yne-bulb-type")||!t&&o===i.CATALOGUE)&&(t=new h({}))},setup:function(){this.block=null},capture:function(e){e&&!0===e.isBr?this.emitBlock(!0):e&&!0===e.isText?this._appendText(e):e&&!0===e.isEmptyPara?this.emitBlock():this.captureBlock(e),this._hasChild=!0},captureBlock:function(e){this.emitBlock(),this.emit(e)},finish:function(){this.emitBlock(),this._hasChild||this.emit({isEmptyPara:!0})},_getBlock:function(){return this.block||(this.block=this.createBlock()),this.block},createBlock:function(){var e,n=this.el;switch(this.bulbBlock){case i.HEADING:return new r({level:n.getAttribute("yne-bulb-level"),id:n.id});case i.CATALOGUE:return e=f(n).find("a").attr("href"),/#\w+$/.test(e)&&(e=e.match(/\w+$/)[0]),new p({id:g.newGUID(),href:e,ownerList:t});case i.TODO:return new s({id:g.newGUID(),checked:"true"===n.getAttribute("yne-bulb-checked")});default:return new a}},_appendText:function(e){this.txtList=this.txtList||[],this.txtList.push(e)},emitBlock:function(e){var t,n,o,r=this,a=r.txtList;n=r._getBlock(),a&&(r.options&&r.options.holdSpaces||(a=c(a)),d.each(a,function(e){r.bulbBlock===i.CATALOGUE&&(e.styles.href=""),e.text&&(o=new l({text:e.text}),t=o.getLength(),d.each(e.styles,function(e,n){o.setStyle(0,t,n,e)}),n.append(o))})),(e||n.getLength()>0)&&(n.setBlockStyles(r.styles),r.emit(n)),r.block=null,r.txtList=null}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(33),n(28),n(163),n(3),n(16),n(34),n(9)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlank=function(){return new t({})},t.fromCollabJSON=function(e){return this.generalFromJSON(e,!0)},t.fromJSON=function(e){return this.generalFromJSON(e,!1)},t.fromXml=function(e){var n=new t({});return n.parseIdFromXml(e),n.setText(u.fromXml(e)),t.fromXmlHelp(n,$(e)),$(e).children().each(function(e,t){switch(t.nodeName){case l.TAG_ID_NAME:case l.LEGACY_TAG_ID_NAME:case"text":case"inline-styles":break;case"styles":o.fromXml(n,t);break;default:i.appendToTree(n.unknownTree,t)}}),n},t.generalFromJSON=function(t,n){var o=e.generalFromJSON.call(this,t,n);return o&&t.level&&o.setLevel(t.level),o},t.toXmlHelp=function(e,t){var n=e.getLevel();n&&$(t).attr("level",n),$(t).attr("compat","true")},t.fromXmlHelp=function(e,t){var n=$(t).attr("level");e.setLevel(n)},t.prototype.getBlockStyle=function(t,n){return"heading"===t?this.level:e.prototype.getBlockStyle.call(this,t,n)},t.prototype.getDefaultBlockStyles=function(){return n.extend({},e.prototype.getDefaultBlockStyles.apply(this,[]),r.headingBlockStyles[this.level])},t.prototype.getDefaultInlineStyles=function(){return n.extend({},e.prototype.getDefaultInlineStyles.call(this),r.headingInlineStyles[this.level])},t.prototype.getInlineStylesForEmpty=function(){return n.extend({heading:this.level},this.getDefaultInlineStyles())},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){e&&(this.level=e,this.trigger("content-change",this))},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.richText=this.richText.toCollabJSON(),t.level=this.getLevel(),t},t.prototype.toHtml=function(e,t,n){var o,i,r,a=document.createElement("div"),s=$(a);return n=!0===n,s.attr("yne-bulb-block","heading").attr("yne-bulb-level",this.getLevel()).attr("id",this.getId()).css("white-space","pre-wrap"),this.applyBlockStylesOnElement(s),e=e||0,t=null==t?this.getEndOffset():t,o=this.sliceText(e,t,!1),i=c.rich2html(o,{withDefault:n}),s.html(i),r=a.outerHTML,a=s=null,r},t.prototype.toJSON=function(t,n){var o=this.sliceText(t,n,!1),i=e.prototype.toJSON.call(this,t,n);return i.richText=o.toJSON(),i.level=this.getLevel(),i},t.prototype.toXml=function(n){var o=e.prototype.toXml.apply(this,[n]);return t.toXmlHelp(this,o),o},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=a.HEADING,this.setLevel(t.level)},t}(l)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(43);return o.extend({inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0},inheritBlockStyles:{align:!0,"line-height":!0,indent:!0,"text-indent":!0},_computeInheritStyles:function(){o.prototype._computeInheritStyles.apply(this,arguments),this._computeInheritBlockStyles()},_computeInheritBlockStyles:function(){var e,n=this,o=n.parent,i=n.inheritBlockStyles;o&&o.styles&&(e=o.styles,t.each(i,function(t,o){if(!0===t){var i=e[o];i&&(n.styles[o]=i)}}))},capture:function(e){this.emit(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(33),n(28),n(1),n(20),n(3)],void 0===(i=function(e,t,n,o,i,r,a,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromCollabJSON=function(e){var t=this.fromJSON(e);return e.blockId&&t.setId(e.blockId),t},t.fromJSON=function(e){if(e&&e.type===l.HR){var o=new t({});return n.each(e.styles,function(e,t){o.setBlockStyle(t,e)}),o}r.error("invalid jsonObj")},t.fromXml=function(e){var n=new t({}),r=$(e);return n.parseIdFromXml(e),r.children().each(function(e,t){switch(t.nodeName){case a.TAG_ID_NAME:case a.LEGACY_TAG_ID_NAME:break;case"styles":o.fromXml(n,t);break;default:i.appendToTree(n.unknownTree,t)}}),n},t.prototype.countWords=function(){return 0},t.prototype.toCollabJSON=function(){return this.toJSON()},t.prototype.toHtml=function(){var e=document.createElement("div"),t=document.createElement("div"),o=$(e),i=this.getBlockStyles();return o.attr("yne-bulb-block","hr"),n.each(i,function(e,t){switch(t){case"back-color":o.css("background-color",e);break;case"padding":o.css("padding",e),"0px"===o.css("padding-top")&&o.css({"padding-top":"4px","padding-bottom":"4px"});break;default:o.attr("yne-style-"+t,e)}}),n.each(i,function(e,t){o.attr("yne-style-"+t,e)}),$(t).css({width:"100%",height:"1px","background-color":"rgb(200, 200, 200)"}),o.append(t),o.css("clear","both"),e.outerHTML},t.prototype.toJSON=function(){return e.prototype.toJSON.call(this)},t.prototype.toPlain=function(){return new Array(81).join("-")},t.prototype.toXml=function(t){var n=e.prototype.toXml.apply(this,[t]),r=t.createElement("styles");return o.toXml(this,r,t),n.appendChild(r),i.appendToXml(this.unknownTree,n),n},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=l.HR},t}(a)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(71),n(11),n(1),n(35),n(20),n(33),n(3),n(28)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromJSON=function(e){if(e&&e.type&&e.type===u.ATTACHMENT&&e.source&&e.resource){var n=new t({fakeLoading:!!e.fakeLoading,fileLength:e.fileLength,fileName:e.fileName,resource:e.resource,source:e.source});return e.styles&&n.setStyles(e.styles),e.blockId&&n.setId(e.blockId),n}r.warn("jsonObj or jsonObj.source/resource does NOT exist!")},t.fromXml=function(e){var n,o,i=$(e),r=$.trim(i.find("source").text()),a=$.trim(i.find("resource").text()),s=$.trim(i.find("filename").text())||"无文件名",u=$.trim(i.find("filelength").text());return o=parseInt(u,10),isNaN(o)&&(o=0),(n=new t({fakeLoading:!1,fileLength:o,fileName:s,resource:a,source:r})).parseIdFromXml(e),i.children().each(function(e,t){switch(t.nodeName){case l.TAG_ID_NAME:case l.LEGACY_TAG_ID_NAME:case"source":case"resource":case"filename":case"filelength":break;case"styles":c.fromXml(n,t);break;default:d.appendToTree(n.unknownTree,t)}}),n},t.prototype.countWords=function(){return 0},t.prototype.getFakeLoading=function(){return this.attachmentProps.fakeLoading},t.prototype.getFileLength=function(){return this.attachmentProps.fileLength},t.prototype.getFileName=function(){return this.attachmentProps.fileName},t.prototype.getResource=function(e){var t,n=this.attachmentProps.resource;return!0===e&&(t=this.getExtraInfo("pcResMap"))&&t[n]&&(n=t[n]),n},t.prototype.getSource=function(e){var t,n=this.attachmentProps.source;return!0===e&&(t=this.getExtraInfo("pcResMap"))&&t[n]&&(n=t[n]),n},t.prototype.getStyles=function(e){return e?this.getBlockStyle(e,!1):this.getBlockStyles()},t.prototype.setFakeLoading=function(e){this.attachmentProps.fakeLoading=e},t.prototype.setFileLength=function(e){var t=parseInt(e,10);return!isNaN(t)&&t!==this.attachmentProps.fileLength&&(this.attachmentProps.fileLength=t,this.trigger("content-change"),!0)},t.prototype.setFileName=function(e){return!(!(e=String(e||""))||e===this.attachmentProps.fileName)&&(this.attachmentProps.fileName=e,this.trigger("content-change"),!0)},t.prototype.setResource=function(e){return!(!(e=(e||"")+"")||e===this.attachmentProps.resource)&&(this.attachmentProps.resource=e,this.trigger("content-change"),!0)},t.prototype.setSource=function(e){return!(!(e=(e||"")+"")||e===this.attachmentProps.source)&&(this.attachmentProps.source=e,this.trigger("content-change"),!0)},t.prototype.setStyles=function(e,t){var o=this;return n.isString(e)?this.setBlockStyle(e,t):n.isObject(e)&&n.each(e,function(e,t){o.setBlockStyle(t,e)}),!0},t.prototype.toHtml=function(e,t,r){var s,l,c=this.getStyles(null),u=a("",document,!0,!0).ownerDocument,d=u.createElement("div"),p=$(d),h=$(u.createElement("img"));return p.attr("yne-bulb-block","attachment"),n.each(c,function(e,t){switch(t){case"align":p.css("text-align",e);break;case"float":p.css("float",e);break;case"back-color":p.css("background-color",e);break;case"padding":p.css("padding",e)}}),l=this.getSource(!0===r),i.IS_PC&&(l=o(l)),h.attr({alt:this.attachmentProps.fileName,"data-media-type":"attachment",filelength:this.attachmentProps.fileLength,filename:this.attachmentProps.fileName,path:this.getResource(!1),src:l,title:this.attachmentProps.fileName}),p.append(h),s=d.outerHTML,d=p=h=null,s},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.source=this.getSource(!1),t.resource=this.getResource(!1),t.fileName=this.getFileName(),t.fileLength=this.getFileLength(),t},t.prototype.toPlain=function(){return""},t.prototype.toXml=function(t){var o,i,r=this;if(r.getSource(!1))return o=e.prototype.toXml.apply(r,[t]),n.each(["Source","Resource","FileName","FileLength"],function(e){var n=t.createElement(e.toLowerCase()),i=r["get"+e](),a=t.createTextNode(i);n.appendChild(a),o.appendChild(n)}),i=t.createElement("styles"),c.toXml(r,i,t),o.appendChild(i),d.appendToXml(r.unknownTree,o),o},t.prototype.initialize=function(t){if(null==t||null==t.source||null==t.resource||null==t.fileLength||null==t.fileName)throw new Error("props or prop(source, resource, fileName, fileLength) in props cannot be null");e.prototype.initialize.call(this,t),this.attachmentProps=n.clone(t),this.attachmentProps.fakeLoading=!!t.fakeLoading,this.type=u.ATTACHMENT},t}(l)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{LEFT:1,RIGHT:2,UP:3,DOWN:4}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(1);function i(e){this.name=e.name,this.value=e.value,this.isNative=!0===e.isNative,this.tryNativeIfNeeded=!1!==e.tryNativeIfNeeded,this.stopSelectionChange=!0===e.stopSelectionChange,this.callback=t.isFunction(e.callback)?e.callback:null}return i.prototype.isCmdBall=!0,i.prototype.clone=function(){return new i(this)},i.create=function(e){return e&&e.isCmdBall?e:e&&e.name?new i(e):void o.warn("Failed to create cmdBall",e)},i}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t){e.exports=!1},function(e,t,n){var o=n(112)("meta"),i=n(18),r=n(55),a=n(31).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(15)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,o,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,o)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[o].i},getWeak:function(e,t){if(!r(e,o)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[o].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!r(e,o)&&u(e),e}}},function(e,t,n){var o=n(24)("unscopables"),i=Array.prototype;null==i[o]&&n(49)(i,o,{}),e.exports=function(e){i[o][e]=!0}},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{parseImgSource:function(e){var t=e.split("?")[0].replace(/^\//,"").split("/");return{resId:t[t.length-1]}},isNoteImageSource:function(e){return/(http|https):\/\/note.youdao.com\/([\w.]+\/?)\s*/.test(e)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(251)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.bulbStyles2TableStyles=function(e){return e.align&&(e.textAlign=e.align,delete e.align),e},e.getAllDefaults=function(){var t={};return n.each(e.STYLE_NAMES,function(n){t[n]=e.getDefault(n)}),t},e.getAllStyleNames=function(){return[].concat(e.STYLE_NAMES)},e.getConfig=function(t){var n;return e.isSupport(t)&&(n=o[t]),n},e.getDefault=function(t){return(e.getConfig(t)||{}).default},e.isSupport=function(t){return e.STYLE_NAMES.indexOf(t)>-1},e.tableStyles2BulbStyles=function(e){return e.textAlign&&(e.align=e.textAlign,delete e.textAlign),e},e.STYLE_NAMES=n.keys(o)||[],e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){for(var t=n(0),o=n(7),i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"ins",46:"del",106:"*",107:"+",109:"-",110:".",111:"/",144:"numlock",186:";",189:"-",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r=o.IS_MAC?{3:"enter",91:"meta",93:"meta",224:"meta"}:{91:"win",92:"win",93:"menu",224:"win",229:"ime"},a=function(e,n,o){return t.some(e,function(e,t){return e===n&&parseInt(t,10)===o})},s={},l="A".charCodeAt(0),c="Z".charCodeAt(0);l<=c;l++)i[l]=String.fromCharCode(l).toLowerCase();for(l=1;l<20;++l)i[111+l]="f"+l;for(l=0;l<=9;l++)i[48+l]=l+"";for(l=0;l<=9;++l)i[l+96]=l+"";return{isMatch:function(e,t){var n=e+"-"+t,o=s[n];return null==o&&(o=a(r,e,t)||a(i,e,t),s[n]=o),o},getKey:function(e){if(t.isNumber(e))return i[e+=""]||r[e]}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(9),a=n(4);return t=o.extend({name:"atom.DeleteBlockText",_textBlock:null,_start:null,_end:null,_deletedText:null,_inlineStyles:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._textBlock=this.options.block,this._start=this.options.start,this._end=this.options.end,this._inlineStyles=this.options.inlineStyles),t.__super__.initialize.apply(this)},apply:function(){var e=this._textBlock,t=e.sliceText(this._start,this._end);return!!t&&(this._deletedText=t,e.deleteText(this._start,this._end,this._inlineStyles),!0)},doUnapply:function(){var e=this._deletedText;this._textBlock&&this._deletedText&&this._textBlock.insertText(this._start,e)},fromCollabJSON:function(){var e=this.options.args,n=e.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),n&&(this._deletedText=r.fromCollabJSON(n.richText),this._textBlock=e.collabProperties.coreEditor.getBlockById(n.blockId),this._start=n.startPosition,this._end=n.endPosition)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._textBlock.getId(),e.richText=this._deletedText.toCollabJSON(),e.startPosition=this._start,e.endPosition=this._end,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t,n){var o=n(311),i=n(213);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){var o=n(66),i=Math.max,r=Math.min;e.exports=function(e,t){return(e=o(e))<0?i(e+t,0):r(e,t)}},function(e,t,n){var o=n(10),i=n(312),r=n(213),a=n(212)("IE_PROTO"),s=function(){},l=function(){var e,t=n(210)("iframe"),o=r.length;for(t.style.display="none",n(214).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;o--;)delete l.prototype[r[o]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=o(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var o=n(311),i=n(213).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},function(e,t,n){"use strict";var o=n(12),i=n(31),r=n(30),a=n(24)("species");e.exports=function(e){var t=o[e];r&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var o=n(64),i=n(324),r=n(225),a=n(10),s=n(25),l=n(227),c={},u={};(t=e.exports=function(e,t,n,d,p){var h,f,g,y,m=p?function(){return e}:l(e),v=o(n,d,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(r(m)){for(h=s(e.length);h>b;b++)if((y=t?v(a(f=e[b])[0],f[1]):v(e[b]))===c||y===u)return y}else for(g=m.call(e);!(f=g.next()).done;)if((y=i(g,v,f.value,t))===c||y===u)return y}).BREAK=c,t.RETURN=u},function(e,t,n){var o=n(50);e.exports=function(e,t,n){for(var i in t)o(e,i,t[i],n);return e}},function(e,t,n){var o=n(18);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0)],void 0===(i=function(e,t,n){var o,i;return function(e){e[e.major=1]="major",e[e.minor=0]="minor",e[e.revision=3]="revision"}(o||(o={})),function(e){e[e.GRETER=1]="GRETER",e[e.EQUAL=0]="EQUAL",e[e.LESS=-1]="LESS"}(i||(i={})),function(){function e(){}return e.getDefaultAsString=function(){return o.major+"."+o.minor+"."+o.revision},e.parse=function(t){if(t){var n=(t+"").split(".");return{major:e.getAsInt(n[0]),minor:e.getAsInt(n[1]),revision:e.getAsInt(n[2])}}},e.isLessThanDefault=function(t){if(!t)return!0;var n=e.parse(t);return e.compare(n,o)===i.LESS},e.isCompatible=function(t){if(!(t=t||"")||"true"===t)return!0;var n=e.parse(t);return e.compare(o,n)!==i.LESS},e.getAsInt=function(e){e=e||"";var t=parseInt(e+"",10);return isNaN(t)?0:t},e.compareInt=function(e,t){return e===t?i.EQUAL:e>t?i.GRETER:i.LESS},e.compare=function(t,o){var r=i.EQUAL;return n.some(["major","minor","revision"],function(n){var a=e.compareInt(t[n]||0,o[n]||0);if(a!==i.EQUAL)return r=a,!0}),r},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{getNamespace:function(){return"note.youdao.com"}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(161)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.checkValid=function(e){var t,i,r=e.length;if(!n.isString(e))return!1;for(t=0;t<r;t++)if(!(9===(i=o(e,t))||10===i||13===i||i>=32&&i<=55295||i>=57344&&i<=65533)){if(!(i>=65536&&i<=1114111))return!1;t++}return!0},e.clear=function(e){var t,i,r="",a=e.length;if(!n.isString(e))return e;for(t=0;t<a;t++)9===(i=o(e,t))||10===i||13===i||i>=32&&i<=55295||i>=57344&&i<=65533?r+=e[t]:i>=65536&&i<=1114111&&(r+=e[t],r+=e[++t]);return r},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(84),n(1),n(70),n(61),n(94),n(60)],void 0===(i=function(e,t,n,o,i,r,a,s,l){return function(){function e(){}return e.boolean2string=function(e){return n.isBoolean(e)?String(e):e},e.blockStyle2oldCell=function(t){var o={};return n.map(t,function(t,n){o[n]=e.boolean2string(t)}),o},e.contentFromCollabJSON=function(t){return e.contentFromJSON(t,!0)},e.contentFromJSON=function(e,t,n){if(e){var s,c=e.type,u=e.data;switch(c){case l.IMAGE:s=t?a.fromCollabJSON(u):a.fromJSON(u,n);break;case l.ATTACHMENT:s=t?r.fromCollabJSON(u):r.fromJSON(u,n);break;case l.TEXT:s=t?o.fromCollabJSON(u):o.fromJSON(u);break;default:i.error("do not support type",c)}return s}},e.contentToCollabJSON=function(t){return e.contentToJSON(t,!0)},e.contentToHtml=function(e,t){if(!e)return"";var n={resourceMap:t};return e instanceof o||e instanceof a||e instanceof r?e.toHtml(n):(i.warn("unvalid content",e),"")},e.contentToJSON=function(e,t){t=!0===t;var n=l.TEXT;if(e){if(e.getType)switch(e.getType()){case s.TYPE_IMAGE:n=l.IMAGE;break;case s.TYPE_ATTACHMENT:n=l.ATTACHMENT}return{data:t?e.toCollabJSON():e.toJSON(),type:n}}},e.contentToPlain=function(e,t){return e?e instanceof o?e.toPlain().join(t?"\n":""):e instanceof a?e.toPlain():e instanceof r?e.toPlain():(i.warn("unvalid content",e),""):""},e.inlineStyle2oldCell=function(t){var o=this.oldStyleNameMap,i={};return n.map(o,function(n,o){null==t[n]||(i[o]=e.boolean2string(t[n]))}),i},e.oldStyleNameMap={bold:"bold",italic:"italic",underline:"underline",lineThrough:"strike",fontName:"font-family",fontSize:"font-size",textColor:"color",link:"href"},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(1),n(95)],void 0===(i=function(e,t,n,o,i){return function(){function e(){}return e.cellsFromCollabJSON=function(e){return e?n.map(e,function(e){return n.map(e,function(e){return i.fromCollabJSON(e)})}):null},e.cellsFromJSON=function(e){var t,n,r,a=e.cellsJson,s=e.height,l=e.width,c=e.isUpdateCellId,u=e.resourceList,d=[];if(!a)return null;for(t=0;t<s;t++)for(d[t]=[],n=0;n<l;n++)a[r=t*l+n]||o.error("Bag json data, no cellData json, row, col: ",a,t,n),d[t][n]=i.fromJSON(a[r],c,u);return d},e.cellsToCollabJSON=function(e){return e?n.map(e,function(e){return n.map(e,function(e){return e.toCollabJSON?e.toCollabJSON():e})}):null},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(){return{value:""}}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.WS_OPENED="WS_OPENED",e.WS_MESSAGE="WS_MESSAGE",e.WS_CLOSED="WS_CLOSED",e.SESSION_CHNAGED="SESSION_CHNAGED",e.SESSION_JOINED="SESSION_JOINED",e.SESSION_QUIT="SESSION_QUIT",e.SESSION_PROP_UPDATE="SESSION_PROP_UPDATE",e.SESSION_LOCK_UPDATE="SESSION_LOCK_UPDATE",e.SESSION_INIT_DONE="SESSION_INIT_DONE",e.SESSION_INIT_BUILT="SESSION_INIT_BUILT",e.NONDATACMD_MODIFIERS_RESULT="NONDATACMD_MODIFIERS_RESULT",e.LOCK_RELEASED="LOCK_RELEASED",e.LOCK_LOCKED="LOCK_LOCKED",e.LOCK_PROP_UPDATE="LOCK_PROP_UPDATE",e.CONFLICT_LOCKED_BY_ME="CONFLICT_LOCKED_BY_ME",e.CONFLICT_LOCKED_BY_OTHERS="CONFLICT_LOCKED_BY_OTHERS",e.CONFLICT_BLOCK_CHANGED="CONFLICT_BLOCK_CHANGED",e.DATACMD_FAILURE="DATACMD_FAILURE",e.DATACMD_NO_PENDING="DATACMD_NO_PENDING",e.DATACMD_SUCCESS="DATACMD_SUCCESS",e.ENGINE_EXCEPTION="ENGINE_EXCEPTION",e}();t.default=n}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(3),n(22),n(93),n(41)],void 0===(i=function(e,t,n,o,i,r){return function(){function e(){}return e.buildNoteRangeFromJSON=function(e,t){return o.fromCollabJSON(e,t)},e.buildNoteRangeFromNonTextBlock=function(e){var t,a={};return a.block=e,n.isTable(e)&&(a.type=i.TYPES.ALL),t=r.createRangeByBlock(a),o.create({endRange:t,startRange:t})},e.buildNoteRangeFromParagraph=function(e,t,n){var i=r.createRangeByBlock({block:e,start:t,end:n});return o.create({endRange:i,startRange:i})},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(7),n(0),n(3),n(16),n(34),n(167)],void 0===(i=function(e,t,n,o,i,r,a,l){var c;return(c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlank=function(){return new t({})},t.prototype.getTextStylesAtIndex=function(e){return this.richText.getStylesAtIndex(e,this.getDefaultSetFont())},t.prototype.getInlineStyleForEmpty=function(e,t){return(this.getInlineStylesForEmpty(t)||this.getDefaultSetFont())[e]},t.prototype.getCommonInlineStyle=function(e,t){var n,o;return t?(n=t.start,o=t.end):(n=this.getStartOffset(),o=this.getEndOffset()),this.richText.getCommonStyle(n,o,e,l.getQuoteDefaultStyles())},t.prototype.getTextStyle=function(e,t,n){var i=this.richText;return o.isObject(t)&&null!=t.start&&(n=t.end,t=t.start),i.getStyle(t,n,e,this.getDefaultSetFont())},t.prototype.setTextStyle=function(e,t,n,i){var r=this.richText;o.isObject(n)&&null!=n.start&&(i=n.end,n=n.start),r.setStyle(n,i,e,t,this.getDefaultSetFont()),this.trigger("content-change")},t.prototype.toHtml=function(e,t,i){e=e||0,t=null==t?this.getEndOffset():t,i=!0===i;var r=document.createElement("div"),s=document.createElement("div"),l=$(r),c=$(s),u=this.getBlockStyles();return c.attr("yne-bulb-block","quote").css("white-space","pre-wrap").css("padding",n.QUOTE_PADDING).css("border-left",n.QUOTE_BORDER_LEFT).css("margin",n.QUOTE_MARGIN),u&&o.each(u,function(e,t){switch(t){case"back-color":e&&l.css("background-color",e);break;case"padding":e&&(c.css("padding",e),c.css("margin",e))}}),c.html(a.rich2html(this.sliceText(e,t,!1),{withDefault:i})),l.append(c),r.outerHTML},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=i.QUOTE},t}(r)).DEFAULT_STYLES={color:"#999999",bold:300,"font-family":"宋体","font-size":"14"},c}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6);return{isNoteLinkUrl:function(e){return/^note:\/\/[a-z0-9\-]+$/i.test(e)},getNoteId:function(e){if(e=t.trim(e||"")){var n=/^note:\/\/([a-z0-9\-]+)$/i.exec(e);if(n&&n[1])return n[1]}},fillAsUrl:function(e){if(e=t.trim(e||"")){if(this.isNoteLinkUrl(e)&&(e=this.getNoteId(e)),e)return"note://"+e}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onEditingStateChange:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(6),i=n(38),r=n(87),a=n(82),s=n(9),l=n(62),c=n(3),u=n(7),d=n(1),p=n(19),h=n(34),f=n(190),g=n(131),y=n(26),m=n(52),v=n(167);return r.extend({className:"block-view paragraph-view",_template:p.getTemplate("common","paragraph_view"),_tempPlaceholder:null,_selectToStartTimer:null,initialize:function(){r.prototype.initialize.apply(this,arguments);var e=this.block;t.bindAll(this,"_onContentChange","_onStyleChange","_onHighlight"),e.on("content-change",this._onContentChange),e.on("style-change",this._onStyleChange),e.on("high-light",this._onHighlight),this._tempPlaceholder=o("<div></div>"),this._tempPlaceholder.height(0),this._tempPlaceholder.width(this.$el.width()),this._tempPlaceholder.css("display","inline-block")},render:function(){this._renderTemplate(),this._renderText(),this._renderStyles(),r.prototype.render.apply(this,arguments)},_renderTemplate:function(){this.$el.html(this._template())},convertToNativeRange:function(e){if(e){var t,n;if(n=this._getCharacterInfo(e.start)){if((t=document.createRange()).setStart(n.node,n.offset),n=this._getCharacterInfo(e.end))return t.setEnd(n.node,n.offset),t;d.error("_getCharacterInfo blockRange.end error!")}else d.error("_getCharacterInfo blockRange.start error!")}else d.warn("block range is unvalid!")},parseNativeRange:function(e,t,n){var o,i,r;return clearTimeout(this._selectToStartTimer),n?new a({start:0,end:t.getEndOffset(),block:t}):((r=this.el.querySelector(".place-holder"))&&" "===r.innerText?(o=i=0,e.collapsed&&(this._selectToStartTimer=setTimeout(function(){e.setStart(e.startContainer,o),e.setEnd(e.endContainer,i)},150))):(o=this._getCharacterIndex(e.startContainer,e.startOffset,!0),-1===(i=this._getCharacterIndex(e.endContainer,e.endOffset,!1))&&(i=t.getEndOffset())),new a({start:o,end:i,block:t}))},_getCharacterInfo:function(e){var t,n=this.$el.find(".para-text").get(0),i=document.createNodeIterator(n,NodeFilter.SHOW_TEXT),r=i.nextNode(),a=0,s=0;if(0===e||!r)return o(n).children().first().hasClass("page-break-placeholder")&&(s=1),{node:r||n,offset:s};for(;r;){if((t=f(r.nodeValue)).length>0&&a<e&&a+t.length>=e)return{node:r,offset:t.slice(0,e-a).reduce(function(e,t){return e+t.length},0)};a+=t.length,r=i.nextNode()}},_getTextOfNode:function(e){if(l.isText(e))return e.nodeValue;var t,n=document.createNodeIterator(e,NodeFilter.SHOW_TEXT),o="";if(!n)return"";for(t=n.nextNode();t;)o+=t.nodeValue,t=n.nextNode();return o},_charArrayLengthOfNode:function(e){var t=this._getTextOfNode(e);return f(t).length},_charArrayOffset:function(e,t){var n,o=f(e);for(n=0;n<o.length&&t>0;n++)t-=o[n].length;return n},_getCharacterIndex:function(e,t,n){var i,r,a=this.$el.find(".para-text").get(0),s=0;if(!o.contains(a,e)&&e!==a)return n?0:-1;for(l.isText(e)?s+=this._charArrayOffset(e.nodeValue,t):l.isElement(e)&&t>0&&(s+=this._charArrayLengthOfNode(e)),i=e;i!==a;){for(r=i.previousSibling;r;)"page-break"!==r.className&&"page-break-placeholder"!==r.className&&(s+=this._charArrayLengthOfNode(r)),r=r.previousSibling;i=i.parentNode}return s},_createHtmlForBlankLine:function(e){var n,o,i,r=new s({text:" "}),a=document.createElement("span"),l={},c=function(e,t){["bold","italic","font-family","font-size"].indexOf(t)>-1&&(l[t]=e)};return e?t.each(e,c):t.each(this.block.getInlineStylesForEmpty(),c),n=h.rich2html(r),a.innerHTML=n,(o=a.getElementsByTagName("span"))&&o.length?1===o.length?((i=o[0]).setAttribute("class","place-holder"),n=i.outerHTML):(d.error("_createHtmlForBlankLine error",a),n='<span class="place-holder">&nbsp;</span>'):(a.setAttribute("class","place-holder"),n=a.outerHTML),n},_renderText:function(e){var n,r,s=this,l=s.block,c=l.getReadOnlyText(),u=c.getEntities(),d=s._inlineStyleViewMapper,p=s.$el.find(".para-text");if(n=c.isEmpty()?this._createHtmlForBlankLine(e):h.rich2html(c,{styleRules:{color:function(e){var t=e.color;return e.href!==y.getDefault("href")&&i.equals(e.color,"blue")?"#003884":null!=t&&d?d.valueToView("color",t):void 0},"font-family":function(e){var t,n=e["font-family"];return null!=n&&d&&(t=d.valueToView("font-family",n)),n!==t?t:m.getAllValueByFont(n)||n}}}),p.html(n),u&&u.length){var f=t.pluck(u,"type");setTimeout(function(){s.trigger("get-entity",l.blockId,f)})}r=l.getStyleRanges("href"),t.each(r,function(e){var t,n,i;t=new a({start:e.from,end:e.to,block:l}),n=s.convertToNativeRange(t),(i=s._findLinkNode(n.endContainer))&&(("file://"===i.origin||i.href.match(/calculator:\/\/.*/))&&o(i).click(function(){return!1}),o(i).off("hover"),o(i).hover(function(){g.isNoteLinkUrl(i.href)||s.isCollabLocked()||s.trigger("link-menu-show",{linkNode:i,range:t,block:l})},function(){s.trigger("link-menu-hide")}))})},_findLinkNode:function(e){for(var t=e;t&&"A"!==t.tagName;)t=t.parentNode;return t},_renderStyles:function(){var e=this,n=e.block.getBlockStyles();t.each(n,function(t,n){e._setStyle(n,t)}),e._renderStylesFix()},_renderStylesFix:function(){this.$el.find(".para-text").css("fontSize",h.getDefaultForHtml("font-size"))},_setStyle:function(e,t){var n=this.$el,o=n.find(".para-text");switch(e){case"align":o.css("text-align",t);break;case"line-height":t>0?o.css("line-height",String(t)):o.css("line-height","normal");break;case"indent":t=t>0?t:0,n.css("padding-left",t*u.INDENT_WIDTH||"");break;case"text-indent":t=t>0?t:0,o.css("text-indent",t*u.INDENT_WIDTH||"");break;case"back-color":(c.isParagraph(this.block)||c.isHeading(this.block))&&o.parent().css("background-color",t);break;case"padding":(c.isParagraph(this.block)||c.isHeading(this.block))&&o.css("padding",t);break;default:d.warn("unknown block style: "+e)}},_onContentChange:function(){var e,n=!1,o=this.block;t.some(this._pageInfo,function(e){return e&&e.pageBreak&&(n=!0),n}),n&&this.$el.css("height",this.$el.height()),c.isQuote(o)&&(e=v.getQuoteDefaultStyles()),c.isCode(o)||this._renderText(e),this.trigger("view-height-changed",this.cid),n&&this.$el.css("height","auto")},_onStyleChange:function(e,t){this._setStyle(e,t),this.trigger("view-height-changed",this.cid)},_convertToData:function(e,n){var o,i=this,r=i.block;t.each(e,function(e){o=new a({block:r,start:e.start,end:e.end}),n(i.convertToNativeRange(o))})},_onHighlight:function(e,t,n){var o=this.block.getHighlight(e,t);o&&this._convertToData(o,n)},_findOverflowSpan:function(e,t){var n,o,i,r,a,s=this._pageInfo[e-1];for(s?(o=s.pageBreak.isAtViewBeginning()?this.$el.find(".para-text").children().first():s.pageBreak.getPlaceholder().next(),r=this._getOffsetTopPos(s.pageBreak.getPlaceholder())+s.pageBreak.getPlaceholder().height()):(o=this.$el.find(".para-text").children().first(),r=this._getOffsetTopPos(this.$el)),o.is("span")||o.is("pre")||(o=o.find("span").first()),n=o,i=o;n.length>0&&(n.after(this._tempPlaceholder),a=this._getOffsetTopPos(this._tempPlaceholder)-r-t,n.outerHeight(!0)>0&&(i=n),!(a>0));)n=this._tempPlaceholder.next();return this._tempPlaceholder.remove(),{textSpan:i,overflowHeight:a,isFirstSpan:o===i}},_getContentContainer:function(){return this.$el.find(".para-text")},_handlePageOverflow:function(e,t){var n,o=this._getHeightInPage(e);return!((n=this.PAGE_HEIGHT-t)>o)&&(this._insertPageBreak(e,n),!0)},_insertPageBreak:function(e,t){var n,o,i,r,a,s;this.block.isEmpty()||t<=0||this._forcePageBreakBegin?n=this._insertPageBreakAtViewBeginning(e,0):(o=this._findOverflowSpan(e,t)).overflowHeight<=0?(n=this._createPageBreak(e,Math.abs(o.overflowHeight)),0===o.textSpan.height()?o.textSpan.before(n.getPlaceholder()):o.textSpan.parent().parent().after(n.getPlaceholder())):this._isSplitAvailable(o.textSpan,o.overflowHeight)?(r=o.textSpan.height()-o.overflowHeight,i=this._splitTextSpan(o.textSpan,r),n=this._createPageBreak(e,r-i[0].height()),i[0].after(n.getPlaceholder())):o.isFirstSpan?n=this._insertPageBreakAtViewBeginning(e,t):((s=(a=this._pageInfo[e-1])&&a.pageBreak?t-(this._getOffsetTopPos(o.textSpan)-this._getOffsetTopPos(a.pageBreak.getPlaceholder())-a.pageBreak.getPlaceholder().height()):t-(this._getOffsetTopPos(o.textSpan)-this._getOffsetTopPos(this.$el)))<0&&(s=0),n=this._createPageBreak(e,s),o.textSpan.before(n.getPlaceholder())),this._coincidePageBreak(n),this._pageInfo[e].pageBreak=n},_insertPageBreakAtViewBeginning:function(e,t){var n;return(n=this._createPageBreak(e,t)).setAtViewBeginning(!0),this.$el.prepend(n.getPlaceholder()),n},_isSplitAvailable:function(e,t){var n,o,i;if(0===e.length||""===e.text())return!1;for(o=e.height()-t,n=document.createRange(),i=e[0].firstChild;null!=i&&("#text"!==i.nodeName.toLowerCase()||0===i.textContent.length);)i=i.nextSibling;return null!=i&&(n.setStart(i,0),n.setEnd(i,1),!(n.getBoundingClientRect().height>o)&&(n.setEnd(i,i.textContent.length),!(n.getBoundingClientRect().height<o)))},_splitTextSpan:function(e,t){var n,o,i,r=e[0].firstChild,a=0,s=e.text().length,l=[];for((n=document.createRange()).setStart(r,0);s-a>1&&(i=Math.ceil((s+a)/2),n.setEnd(r,i),(o=n.getBoundingClientRect().height)!==t);)o>t?s=i:a=i;if(o<=t){for(;i<e.text().length&&o<=t;)i++,n.setEnd(r,i),o=n.getBoundingClientRect().height;i-=1}else for(;i>0&&o>t;)i--,n.setEnd(r,i),o=n.getBoundingClientRect().height;return l[0]=e.clone(),l[1]=e.clone(),l[0].text(e.text().substr(0,i)),l[1].text(e.text().substr(i)),e.before(l[0]),e.before(l[1]),e.remove(),l}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(9),a=n(4);return t=o.extend({name:"atom.InsertBlockText",_textBlock:null,_start:null,_insertedText:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._textBlock=this.options.block,this._start=this.options.start,this._insertedText=this.options.text),t.__super__.initialize.apply(this)},apply:function(){return!!this._insertedText&&(this._textBlock.insertText(this._start,this._insertedText),!0)},doUnapply:function(){this._textBlock&&this._insertedText&&this._textBlock.deleteText(this._start,this._start+this._insertedText.getLength())},fromCollabJSON:function(){var e=this.options.args,n=e.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),n&&(this._insertedText=r.fromCollabJSON(n.richText),this._textBlock=e.collabProperties.coreEditor.getBlockById(n.blockId),this._start=n.startPosition)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._textBlock.getId(),e.richText=this._insertedText.toCollabJSON(),e.startPosition=this._start,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(31).f,i=n(55),r=n(24)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,r)&&o(e,r,{configurable:!0,value:t})}},function(e,t,n){var o=n(65),i=n(24)("toStringTag"),r="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:r?o(t):"Object"==(a=o(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var o=n(2),i=n(78),r=n(15),a=n(216),s="["+a+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e,t,n){var i={},s=r(function(){return!!a[e]()||"​"!="​"[e]()}),l=i[e]=s?t(d):a[e];n&&(i[n]=l),o(o.P+o.F*s,"String",i)},d=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(1),n(0),n(159),n(26)],void 0===(i=function(e,t,n,o,i,r){return function(){function e(){}return e.convertToCssStyle=function(e,t){if(e){var n=o.pick(e,this.SUPPORTED_STYLES);return n=o.defaults(n,r.getAllDefault()),t&&o.each(n,function(e,o){null!=e&&(n[o]=t.valueToView(o,e))}),i.convertToCssStyle(n)}},e.isSupportedStyle=function(t){return e.SUPPORTED_STYLES.indexOf(t)>-1},e.makeHtmlMarker=function(t){if(t){var o,i,r=t.getLevel(),a=t.getText();return o=t.isOrdered()?e.ORDERED_STYLE_TYPES[r%3]:e.UNORDERED_STYLE_TYPES[r%3],a.getLength()&&(i=this.convertToCssStyle(a.getStylesAtIndex(0))),{listStyleType:o,markerStyles:i}}n.warn("Failed to create marker",t)},e.makePlainMarker=function(t,o){if(!t)return n.warn("Failed to create marker",t),"";o=!1!==o;var i,r="",a=t.getLevel();if(t.isOrdered()){switch(i=t.getIndex(),a%3){case 0:r=e.toRoman(i);break;case 2:r=e.toAlphabet(i);break;default:case 1:r=i}r+="."}else switch(a%3){case 0:r="■";break;case 2:r="○";break;default:case 1:r="●"}return o&&(r+=" "),r},e.toAlphabet=function(e){if(isNaN(e))return"";var t="a".charCodeAt(0),n="z".charCodeAt(0)-t+1,o="";for(e--;e>=0;)o=String.fromCharCode(e%n+t)+o,e=Math.floor(e/n)-1;return o},e.toRoman=function(e){if(isNaN(e))return"";for(var t=[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xcc"],["","c","cc","ccc","cd","d","dc","dcc","dcc","cm"]],n="",o=0,i=0,r=1e3;i<3;i++,r/=10)o=Math.floor(e%r/(r/10)),n+=t[2-i][o];return n},e.SUPPORTED_STYLES=["font-size","font-family","color","bold","italic"],e.ORDERED_STYLE_TYPES=["lower-roman","decimal","lower-alpha"],e.UNORDERED_STYLE_TYPES=["square","disc","circle"],e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};o=[n,r,n(3),n(92)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromCollabJSON=function(e,n){var i=o.getBlockById(e.blockId,n);return new t(l({block:i},e))},t.createSelectToEndRange=function(e,n,o){var i=e.toCodeLines();return new t({block:e,startLineIndex:n||1,endLineIndex:i.length,startLineCharIndex:o||0,endLineCharIndex:i.pop().length})},t.createBeginRange=function(e){return new t({block:e,startLineIndex:1,endLineIndex:1,startLineCharIndex:0,endLineCharIndex:0})},t.createNewRange=function(e){var t=e.preCodeRange,n=e.charOffset,o=e.lineOffset,i=e.needCollapse,r=void 0===i||i,a=t.clone();return o?(a.endLineIndex=t.startLineIndex+o,a.endLineCharIndex=0+n,r&&(a.startLineIndex=t.startLineIndex+o,a.startLineCharIndex=0+n)):(a.endLineCharIndex=t.startLineCharIndex+n,a.endLineIndex=t.startLineIndex,r&&(a.startLineCharIndex=t.startLineCharIndex+n,a.startLineIndex=t.startLineIndex)),a},t.prototype.convertToParaRangeStartEnd=function(){var e=this.block.toCodeLines(),t=function(t,n){return e.slice(0,t-1).join().length+n+t-1};return{start:t(this.startLineIndex,this.startLineCharIndex),end:t(this.endLineIndex,this.endLineCharIndex)}},t.prototype.isCollapsed=function(){return!this.selectWholeBlock&&(this.startLineIndex===this.endLineIndex&&this.startLineCharIndex===this.endLineCharIndex)},t.prototype.canDrawedByNative=function(){return!0},t.prototype.getDataAsJSON=function(){return this.block.toJSON(this.startLineIndex,this.startLineCharIndex,this.endLineIndex,this.endLineCharIndex)},t.prototype.getDataAsPlain=function(){return this.block.toPlain(this.startLineIndex,this.startLineCharIndex,this.endLineIndex,this.endLineCharIndex)},t.prototype.getDataAsHtml=function(){return this.block.toPlain(this.startLineIndex,this.startLineCharIndex,this.endLineIndex,this.endLineCharIndex)},t.prototype.collapse=function(e){void 0===e&&(e=!0),e?(this.startLineIndex=this.endLineIndex,this.startLineCharIndex=this.endLineCharIndex):(this.endLineIndex=this.startLineIndex,this.endLineCharIndex=this.startLineCharIndex)},t.prototype.clone=function(){return new t({startLineIndex:this.startLineIndex,endLineIndex:this.endLineIndex,startLineCharIndex:this.startLineCharIndex,endLineCharIndex:this.endLineCharIndex,selectWholeBlock:this.selectWholeBlock,block:this.block})},t.prototype.toCollabJSON=function(){var t=e.prototype.toCollabJSON.call(this);return t.selectWholeBlock=!!this.selectWholeBlock,t.startLineIndex=this.startLineIndex,t.startLineCharIndex=this.startLineCharIndex,t.endLineCharIndex=this.endLineCharIndex,t.endLineIndex=this.endLineIndex,t},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.CODE,this.selectWholeBlock=t.selectWholeBlock,this.startLineIndex=t.startLineIndex,this.startLineCharIndex=t.startLineCharIndex,this.endLineCharIndex=t.endLineCharIndex,this.endLineIndex=t.endLineIndex},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.NONDATACMD_BLOCKSELECTION="nb_BlkSelection",e.NONDATACMD_CLINTPONG="nb_clientPong",e.NONDATACMD_COLLABCLOSE="nb_CollabClose",e.NONDATACMD_COLLABINFO="nb_CollabInfo",e.NONDATACMD_DATACMDFAILED="nb_dataCmdFailed",e.NONDATACMD_GETMODIFIERS="nb_getModifiers",e.NONDATACMD_NOTESAVE="nb_noteSave",e.NONDATACMD_LOCKRELEASE="nb_lockRelease",e.NONDATACMD_SESSIONINITIALIZED="nb_sessionInitialized",e.NONDATACMD_SEVERPING="nb_serverPing",e}();t.CmdNames=n,function(e){e[e.EXCEPTION=0]="EXCEPTION",e[e.NO_ERROR=1]="NO_ERROR",e[e.TIME_OUT=100]="TIME_OUT",e[e.STOP_CALL=101]="STOP_CALL"}(t.CustomResultCode||(t.CustomResultCode={})),function(e){e[e.FAILED_RECEIVE_COLLAB_CMD=4001]="FAILED_RECEIVE_COLLAB_CMD",e[e.FAILED_SEND_LOCAL_CMD=4002]="FAILED_SEND_LOCAL_CMD",e[e.MESSAGE_TOO_BIG=4003]="MESSAGE_TOO_BIG",e[e.SESSION_NOT_OPENED=4004]="SESSION_NOT_OPENED",e[e.CLOSED_BY_HOST=4500]="CLOSED_BY_HOST",e[e.COLLAB_SERVER_UNREACHABLE=9e3]="COLLAB_SERVER_UNREACHABLE",e[e.COLLAB_SERVER_SHUTDOWN=9003]="COLLAB_SERVER_SHUTDOWN",e[e.COLLAB_SESSION_CLOSED=9004]="COLLAB_SESSION_CLOSED"}(t.WSCustomCode||(t.WSCustomCode={})),function(e){e[e.LOCAL_INVALID_STARTRANGE=5001]="LOCAL_INVALID_STARTRANGE",e[e.LOCAL_INVALID_CMDJSON=5002]="LOCAL_INVALID_CMDJSON",e[e.LOCAL_TARGET_BLOCK_LOCKED=5003]="LOCAL_TARGET_BLOCK_LOCKED",e[e.LOCAL_EMPTY_CMD=5004]="LOCAL_EMPTY_CMD",e[e.LOCAL_CMD_TOO_FAST=5005]="LOCAL_CMD_TOO_FAST",e[e.LOCAL_INVALID_FOR_COLLAB=5006]="LOCAL_INVALID_FOR_COLLAB",e[e.LOCAL_BLOCKS_MISSING=5008]="LOCAL_BLOCKS_MISSING",e[e.LOCAL_NOT_READY_APPLY=5009]="LOCAL_NOT_READY_APPLY",e[e.LOCAL_DIRTY_BLOCKS=5010]="LOCAL_DIRTY_BLOCKS",e[e.COLLAB_TARGET_BLOCK_LOCKED=5500]="COLLAB_TARGET_BLOCK_LOCKED",e[e.COLLAB_NOTEVERSION_MISMATCH=5507]="COLLAB_NOTEVERSION_MISMATCH",e[e.COLLAB_BLOCKS_MISSING=5508]="COLLAB_BLOCKS_MISSING",e[e.COLLAB_DIRTY_BLOCKS=5510]="COLLAB_DIRTY_BLOCKS"}(t.DataCmdFailureCode||(t.DataCmdFailureCode={}))}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(7);return{parseToBoolean:function(e,n){var o=null;return t.isBoolean(e)?o=e:t.isNumber(e)?0===e?o=!1:1===e&&(o=!0):t.isString(e)&&("0"===e.toLowerCase()||"false"===e.toLowerCase()?o=!1:"1"!==e.toLowerCase()&&"true"!==e.toLowerCase()||(o=!0)),null===o&&t.isBoolean(n)&&(o=n),o},parseToNumber:function(e,n){var o=null;return t.isNumber(e)?o=e:t.isString(e)&&(o=window.parseInt(e)),(isNaN(o)||null===o)&&t.isNumber(n)&&(o=n),o},parseToPageType:function(e){var t=o.PAGE_TYPE_NONE;return e&&(e.trim().toUpperCase()===o.PAGE_TYPE_B5?t=o.PAGE_TYPE_B5:e.trim().toUpperCase()===o.PAGE_TYPE_A4?t=o.PAGE_TYPE_A4:e.trim().toUpperCase()===o.PAGE_TYPE_TEST&&(t=o.PAGE_TYPE_TEST)),t}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(195),o=n(288),i=n(291),r=n(293),a=n(1);return{parseHtml:function(e){var n=t(e);return a.log("parseHtml OK",n),n},parsePlain:function(e,t,n,i){return o(e,t,n,i)},parseJSON:function(e,t){return i(e,t)},parseOCR:function(e,t){return r(e,t)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(45),o=n(7),i=n(0),r=n(267),a=["bold","bolder","700","800","900"],s=n(52),l={"xx-small":12,"x-small":12,small:13,medium:16,large:18,"x-large":24,"xx-large":32};return{bold:{inheritable:!0,action:function(e){var n=e.style.fontWeight;return(n=n&&t.trim(n).toLowerCase())&&"inherit"!==n?-1!==i.indexOf(a,n):null}},italic:{inheritable:!0,action:function(e){var t=e.style.fontStyle;return t?"italic"===t:null}},underline:{inheritable:!0,action:function(e,t,n){var o=e.style.textDecoration;return!!/(^|\s)underline($|\s)/i.test(o)||!(o&&!n)&&n}},strike:{inheritable:!0,action:function(e,t,n){var o=e.style.textDecoration;return!!/(^|\s)line-through($|\s)/i.test(o)||!(o&&!n)&&n}},"font-family":{inheritable:!0,action:function(e){var t=e.style.fontFamily;return 0===t.trim().indexOf("-apple-system")?s.DEFAULT_FONT:s.getFontFirstValue(t)}},"font-size":{inheritable:!0,action:function(e,n,o){var i=e.style.fontSize;if(i=t.trim(i+""),/^[\d.]+px$/.test(i)?i=parseInt(i,10):/^[\d.]+pt$/.test(i)?i=Math.floor(4*parseFloat(i,10)/3):/^[\d.]+em$/.test(i)?(i=parseFloat(i,10),i*=o||14,i=Math.floor(i)):/^[\d.]+rem$/.test(i)?(i=parseFloat(i,10),i*=10,i=Math.floor(i)):i=l[i],i&&!isNaN(i))return i}},color:{inheritable:!0,action:function(e){var t=e.style.color;return r(t,!1)}},"back-color":{inheritable:!0,action:function(e){var t=e.style.backgroundColor;return r(t,!0)}},align:{inheritable:!0,action:function(e){var n=e.style.textAlign||e.align;if((n=n&&t.trim(n).toLowerCase())&&"inherit"!==n)return n}},"line-height":{inheritable:!0,requireValues:["font-size"],action:function(e,n){var o=t.trim(e.style.lineHeight+""),i=n["font-size"]||14;if(/^[\d.]+$/.test(o)?o=parseFloat(o,10):/^[\d.]+px$/.test(o)?(o=parseFloat(o,10),o/=i):o=0,o&&!isNaN(o)&&o>1)return o}},indent:{inheritable:!0,action:function(e,t,n){var o=0;return"BLOCKQUOTE"===e.tagName&&(o=1),o+=n||0}},"text-indent":{inheritable:!0,action:function(e){var n=e.style.textIndent;if(n=t.trim(n+""),n=/^[\d.]+px$/.test(n)?parseFloat(n,10):/^[\d.]+pt$/.test(n)?4*parseFloat(n,10)/3:null)return(n=Math.floor(n/o.INDENT_WIDTH))||1}},width:{inheritable:!1,action:function(e){var n=e.style.width||e.width;if(n=t.trim(n+""),/^[\d.]+(px)?$/.test(n)&&(n=parseInt(n,10)),n&&!isNaN(n))return n}},float:{inheritable:!1,action:function(e){return e.style.float}},"white-space":{inheritable:!0,action:function(e){var t=e.style.whiteSpace;if(t&&"inherit"!==t)return t}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{test:function(e){return e=String(e),/(https?:\/\/|www\.|ssh:\/\/|ftp:\/\/)[a-z0-9&_+\-\?\/\.=\#,:,@]+$/i.test(e)||/[a-z0-9_+\-\.]+@[a-z0-9_+\-\.]+$/i.test(e)||!1},matchEnd:function(e){var t,n;return e=String(e),(t=/(https?:\/\/|www\.|ssh:\/\/|ftp:\/\/)[a-z0-9&_+\-\?\/\.=\#,:@%\(\)~]+$/i.exec(e))?{mail:!1,fullURI:0===(n=t[0]).toLowerCase().indexOf("www.")?"http://"+n:n,result:t}:(t=/[a-z0-9_+\-\.]+@[a-z0-9_+\-\.]+$/i.exec(e))?{mail:!0,fullURI:"mailto:"+(n=t[0]),result:t}:void 0}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(296),o=n(297),i=n(0),r=n(6);return t.extend({className:"tool-panel",buttonConfig:[],initialize:function(e){this._editor=e.editor,t.prototype.initialize.apply(this,arguments),this._shrinkOffset=e.shrinkOffset,this._addButtons(),this.hide(),this.render(),this._bindEvents()},_bindEvents:function(){var e=this,t=e._items;r(window).on("resize",i.throttle(function(){e.isRendered&&e._reShrink()},100)),i.each(t,function(t){t.on("re-shrink",i.throttle(e._reShrink.bind(e),100))})},_getShrinkOffset:function(){return i.isFunction(this._shrinkOffset)?this._shrinkOffset():this._shrinkOffset},_reShrink:function(){var e=this._items,t=this.$el;i.each(e,function(e){t.append(e.$el)}),this._shrink()},_shrink:function(){var e,t=this._items,n=this.$el.parent().width()+this._getShrinkOffset(),o=i.last(t).$el.outerWidth(!0),r=[];return i.each(t,function(i,a){e=i.isVisible,a!==t.length-1?(e&&(o+=i.$el.outerWidth(!0)),n<o&&r.push(i)):"showmore"===i.name&&(i.items=r,i.resetMenu())}),r},_addButtons:function(e){var t,n,r=this;t=i.map(r.buttonConfig,function(e){return new(o.get(e))({editor:r._editor})}),!1!==e&&r._editor.isLegacyHost()&&(n=o.get("showmore"),t.push(new n({editor:r._editor,items:[]}))),r.addItems(t)},show:function(){t.prototype.show.apply(this,arguments),this._reShrink()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(37);return t.extend({className:t.prototype.className+" toolbar-text-button",state:!0,editorEvents:null,render:function(){this.$el.addClass("text-button-"+this.name).text(this.text),this.setState(this.state)},setState:function(e){var t=this.$el;e=!0===e,this.state=e,e?t.addClass("active"):t.removeClass("active")},onClick:function(){this.trigger("on-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(170).extend({editorEvents:{"yne-selection-change":"onSelectionChange"},onChange:function(e){var t={};t[this.name]=e,this.editor.execCommandByToolbar("comp.ApplyStyles",{blockStyles:t})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(1),a=n(96),s=n(70),l=n(4),c=n(125);return t=o.extend({name:"atom.SetTableCellContent",_table:null,_cellRect:null,_oldContent:null,effected:!1,initialize:function(){var e=this.options.args;l.isCollabCommand(e)||(this._table=this.options.table,this._cellRect=this.options.cellRect,this._content=this.options.content),t.__super__.initialize.apply(this)},_computeSizeChange:function(e){if(e){var t=this._table.getCellSize(e.row,e.col),n={rowHeight:0,rowIndex:-1,colWidth:0,colIndex:-1};if(t)return t.height<a.ATTACHMENT_MIN_HEIGHT&&(n.rowHeight=t.heights[0]+a.ATTACHMENT_MIN_HEIGHT-t.height,n.rowIndex=t.rows[0]),t.width<a.ATTACHMENT_MIN_WIDTH&&(n.colWidth=t.widths[0]+a.ATTACHMENT_MIN_WIDTH-t.width,n.colIndex=t.cols[0]),n.rowHeight||n.colWidth?n:null}},apply:function(){var e,t=this._table,n=this._getCellInfo(this._cellRect)||{},o=this._contentInfo||t.getContentAt(n.row,n.col);return!!o&&(!!t.setCellContent(n.row,n.col,this._content)&&(this._content instanceof s&&(e=this._sizeChanged||this._computeSizeChange(n)),e&&e.rowHeight&&(this._oldSize={rowIndex:e.rowIndex,rowHeight:t.getRowHeight(e.rowIndex)},t.setRowHeight(e.rowIndex,e.rowHeight)),e&&e.colWidth&&(this._oldSize=this._oldSize||{},this._oldSize.colIndex=e.colIndex,this._oldSize.colWidth=t.getColumnWidth(e.colIndex),t.setColumnWidth(e.colIndex,e.colWidth)),this._sizeChanged=e,this._oldContent=o.content,this.effected=!0,this.effected))},doUnapply:function(){var e,t=this._table,n=this._getCellInfo(this._cellRect),o=this._oldSize;if(n)return e=t.setCellContent(n.row,n.col,this._oldContent),o&&o.rowHeight&&t.setRowHeight(o.rowIndex,o.rowHeight),o&&o.colWidth&&t.setColumnWidth(o.colIndex,o.colWidth),e},_getCellInfo:function(e){var t=this._table;if(null!=e.row&&null!=e.col)return{row:e.row,col:e.col,cell:t.getCell(e.row,e.col)};r.error("No cellRect!")},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._content=c.contentFromCollabJSON(o.simpleValue1),this._oldContent=c.contentFromCollabJSON(o.simpleValue2),this._sizeChanged=o.sizeChanged,this._oldSize=o.oldSize,this._cellRect=o.newBlkId)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=c.contentToCollabJSON(this._content),e.simpleValue2=c.contentToCollabJSON(this._oldContent),e.sizeChanged=this._sizeChanged,e.oldSize=this._oldSize,e.newBlkId=this._cellRect,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(63),i=n(12),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:n(104)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var o=n(65);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var o=n(10);e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var o=n(10),i=n(40),r=n(24)("species");e.exports=function(e,t){var n,a=o(e).constructor;return void 0===a||null==(n=o(a)[r])?t:i(n)}},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){var n=function(e,t,n,o,i){void 0===n&&(n="black"),void 0===o&&(o="white"),t&&1===t.length&&(t=t[0])};return{log:n,breakPointsLog:function(e,t){var o={fontColor:"white",backColor:"grey"};switch(e){case"execCommand":o.backColor="#3399FF";break;case"execEditorApi":o.backColor="#663399"}n(0,t,o.fontColor,o.backColor)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];1===e.length&&(e=e[0]),n(0,e,"#333333","#FFFF33")},error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];1===e.length&&(e=e[0]),n(0,e,"red","#FFCCCC")}}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return function(e){var t=0;return e?t=("string"==typeof e?e:e.toString()).replace(/(\s)/g,"").length:t}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(52)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.getRules=function(t){var o=t?n.clone(t):{};return n.defaults(o,e.DEFAULT_RULES),o},e.convertToCssStyle=function(t,o,i){var r={},a=e.getRules(i);return n.isArray(o)&&(a=n.pick(a,o)),n.isObject(t)&&n.each(a,function(e,n){r[n]=e(t)}),r},e.DEFAULT_RULES={"font-size":function(e){var t=e["font-size"];if(null!=t)return t+"px"},"font-family":function(e){var t=e["font-family"];return t=o.getAllValueByFont(t)||t},color:function(e){return e.color},"background-color":function(e){return e["back-color"]},"font-weight":function(e){return{true:"bold",false:"normal"}[e.bold+""]},"font-style":function(e){return{true:"italic",false:"normal"}[e.italic+""]},"text-decoration":function(e){if(!1===e.underline&&!1===e.strike)return"none";var t=[];return e.underline&&t.push("underline"),e.strike&&t.push("line-through"),t.join(" ")||""}},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(69)],void 0===(i=function(e,t,n){return n({DEFAULT_FONT:"Microsoft YaHei"})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(e,t){if(null!=String.prototype.codePointAt)return String.prototype.codePointAt.call(e,t);if(null==e)throw new TypeError("codePointAt第一个参数必须为String");var n,o,i=(e=String(e)).length,r=isNaN(t)?0:Number(t);return r<0||r>=i?void 0:(n=e.charCodeAt(r))>=55296&&n<=56319&&i>r+1&&(o=e.charCodeAt(r+1))>=56320&&o<=57343?1024*(n-55296)+o-56320+65536:n}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1);return{appendText:function(e,n,o,i){if(e&&n&&o&&i){var r=e.createElement(o),a=e.createTextNode(i);r.appendChild(a),n.appendChild(r)}else t.warn("unvalid parameters")}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o,i,r,a=n(0),s={};for(r in o=[(t={default:{name:"普通文本","font-size":14},a:{name:"标题","font-size":32,bold:!0},b:{name:"副标题","font-size":18,color:"#595959",bold:!0},1:{name:"标题1","font-size":28,bold:!0},2:{name:"标题2","font-size":20,bold:!0},3:{name:"标题3","font-size":16,bold:!0},4:{name:"标题4","font-size":14,bold:!0}}).default,t.a,t.b,t[1],t[2],t[3],t[4]],i={},t)"default"!==r&&(s[r]=a.clone(t[r]),delete s[r].name,delete s[r].align);return{headingMap:t,headingArray:o,headingBlockStyles:i,headingInlineStyles:s}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(99),i=n(53),r=n(101),a=n(165),s=n(42),l=n(0);return t=o.extend({inheritStyleHandlers:!1,uninheritStyleHandlers:{width:!0,float:!0},inheritBlockStyles:{align:!0},_handleNoteLink:function(){var e,t,n,o=this.el;e=o.getAttribute("data-attr-noteid"),t=o.getAttribute("alt"),e&&t&&((n=this.parent&&this.parent.styles?l.clone(this.parent.styles):{}).href="note://"+e,n.color="#003884",n.underline=!0,this.emit({text:t,styles:n,isText:!0}))},_handleNoteTodo:function(){var e=this.el.getAttribute("data-res-todo"),t=new s({legacyResId:e});this.emit(t)},finish:function(){var e,n,o,s,c,u=this,d=u.el,p=d.getAttribute("src")||d.getAttribute("data-src"),h=function(e,t){l.each(e,function(e,n){var o=t.style[e];o&&(u.styles[n]=o)})};t.isNoteLink(d)?u._handleNoteLink():t.isTodo(d)?u._handleNoteTodo():p&&((o=d.parentNode)&&(s=o.getAttribute("yne-bulb-block")),t.isAttachment(d)?(n=d.getAttribute("path"),e=new r({source:p,resource:n,fileName:t.getAttachmentFileName(d),fileLength:t.getAttachmentFileLength(d)}),"attachment"===s&&h({align:"textAlign",float:"float"},o)):t.isImage(d)?("image"===s&&h({align:"textAlign",width:"width",float:"float"},o),e=new i({source:p}),u.styles.width&&u.styles.width>620&&(u.styles.width=620)):t.isHandWrite(d)&&(e=(c=d.getAttribute("data-res-handwrite"))?new a({source:p,resource:c}):new i({source:p})),e&&(e.setStyles(u.styles),u.emit(e)))}},{isAttachment:function(e){var t=e.getAttribute("path"),n=e.dataset.mediaType;return t&&("attachment"===n||!n)},isImage:function(e){var t=e.dataset.mediaType;return!e.getAttribute("path")&&(!t||["image"].indexOf(t)>-1)},isHandWrite:function(e){return"handwrite"===e.dataset.mediaType},isNoteLink:function(e){return"notelink"===e.dataset.mediaType},isTodo:function(e){return"todo"===e.dataset.mediaType},getAttachmentFileName:function(e){return e.getAttribute("filename")||e.getAttribute("alt")||e.getAttribute("title")||""},getAttachmentFileLength:function(e){return e.getAttribute("filelength")||""}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(35),n(20),n(3)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.fromXml=function(e){throw new Error("HandWrite do NOT support fromXml till now")},t.fromJSON=function(e){if(!(e&&e.type&&e.type===r.HANDWRITE&&e.source&&e.resource))throw new Error("jsonObj or jsonObj.source/resource does NOT exist!");var n=new t({resource:e.resource,source:e.source});return e.blockId&&n.setId(e.blockId),n},t.prototype.getSource=function(e){var t,n=this.handWriteProps.source;return!0===e&&(t=this.getExtraInfo("pcResMap"))&&t[n]&&(n=t[n]),n},t.prototype.getResource=function(e){var t,n=this.handWriteProps.resource;return!0===e&&(t=this.getExtraInfo("pcResMap"))&&t[n]&&(n=t[n]),n},t.prototype.setStyles=function(){},t.prototype.toHtml=function(e,t,n){var i=o("",document,!0,!0).ownerDocument,r=i.createElement("div"),a=$(r),s=$(i.createElement("img"));return a.attr("yne-bulb-block","handwrite"),s.attr({"data-media-type":"handwrite","data-res-handwrite":this.handWriteProps.resource,src:this.getSource(n)}),a.append(s),r.outerHTML},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.source=this.getSource(!1),t.resource=this.getResource(!1),t},t.prototype.toPlain=function(){return""},t.prototype.toXml=function(){throw new Error("HandWrite do NOT support toXml till now")},t.prototype.initialize=function(t){if(null==t||null==t.source||null==t.resource)throw new Error("props and props.source and props.resource  cannot be null");e.prototype.initialize.apply(this,[t]),this.handWriteProps=n.clone(t),this.type=r.HANDWRITE},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(43),i=n(39),r=n(36),a=n(0),s=n(4);return t=o.extend({list:null,level:null,type:null,_itemCounter:null,prevSimilar:null,inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0,align:!0,"line-height":!0,indent:!0,"text-indent":!0},_parseTypeFromElement:function(){return"ul"===this.el.tagName.toLowerCase()?i.UNORDERED:i.ORDERED},_getStartIndexFromElement:function(){var e=this.type,t=this.el,n=-1;return e!==i.ORDERED?n:("list"===t.getAttribute("yne-block-type")&&(n=parseInt(t.getAttribute("start"),10),isNaN(n)&&(n=-1)),n)},increaseItemCounter:function(){var e,t=this.prevSimilar;t&&t.increaseItemCounter?t.increaseItemCounter():(e=this._itemCounter||0,e+=1,this._itemCounter=e)},getItemCounter:function(){var e=this.prevSimilar;return e?e.getItemCounter():this._itemCounter||0},setup:function(){var e,t,n,o=this._findParentListHandler();this.list=null,this.level=1,o&&(this.level=o.level+1),n=this._parseTypeFromElement(),this.type=n,(t=this._getStartIndexFromElement())>1&&(e=this._getPreviousSimilar())&&e.getItemCounter()===t-1&&(this.prevSimilar=e,this.list=e.list),this.list||(this.list=new i({type:n,listId:s.newGUID()}))},capture:function(e){var t=this.level;e instanceof r&&e.getLevel()<t&&e.setLevel(t),this.emit(e)},_findParentListHandler:function(){for(var e=this.parent;e;){if(e instanceof t)return e;e=e.parent}},_getPreviousSimilar:function(){var e,n=this.level,o=this.type,i=this.parent.children;return a.some(i,function(i){if(i instanceof t&&i.level===n&&i.type===o)return e=i,!0}),e}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){var e={color:"#999999",bold:300,"font-family":"宋体","font-size":"14"};return{getQuoteDefaultStyles:function(){return e},getQuoteSize:function(){return e["font-size"]},getQuoteColor:function(){return e.color}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(4),n(20),n(3)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromJSON=function(){},t.fromXml=function(e){var n=new t({xmlNode:e});return n.parseIdFromXml(e),n},t.prototype.countWords=function(){return 0},t.prototype.setBlockStyle=function(){},t.prototype.setBlockStyles=function(){},t.prototype.getBlockStyles=function(){return null},t.prototype.getBlockStyle=function(){return null},t.prototype.getDefaultBlockStyles=function(){return null},t.prototype.toJSON=function(){return null},t.prototype.toHtml=function(){return""},t.prototype.toPlain=function(){return""},t.prototype.toXml=function(e){var t,r,a=!1;return n.some(this.unknownProps.xmlNode.childNodes,function(e){return e.nodeName===i.TAG_ID_NAME&&(a=!0),a}),a||(t=e.createElement(i.TAG_ID_NAME),r=e.createTextNode(o.newGUID()),t.appendChild(r),this.unknownProps.xmlNode.appendChild(t)),this.unknownProps.xmlNode},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.unknownProps=n.clone(t),this.type=r.UNKNOWN},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0);return{getFileType:function(e){if(t.isUndefined(e))return null;var n=e.toLowerCase().split(".");return{table:"table",pdf:"pdf",txt:"txt",text:"txt",mht:"html",doc:"word",docx:"word",excel:"excel",xls:"excel",xlsx:"excel",csv:"excel",ppt:"ppt",pps:"ppt",pptx:"ppt",ppsx:"ppt",flash:"flash",swf:"flash",flv:"flash",compress:"compress",zip:"compress",rar:"compress","7z":"compress",audio:"audio",mp3:"music",aac:"music",ogg:"music",wav:"music",flac:"music",m4a:"music",ape:"music",wma:"music",video:"video",rm:"video",rmvb:"video",avi:"video",mkv:"video",mpg:"video",mpeg:"video",wmv:"video",ts:"video",m4v:"video",mp4:"video",image:"image",jpg:"image",jpeg:"image",gif:"image",png:"image",bmp:"image",md:"md",scan:"scan",html:"html",htm:"html"}[n[n.length-1]]||"other"},getSizeString:function(e){var t=0,n=parseInt(e);if(n=n||0,isNaN(n))return"未知大小";if(n<=0)return"";for(;n>=1024&&t<3;)t++,n/=1024;return String(Math.floor(100*n)/100)+["B","KB","MB","GB","TB"][t]},splitFileFullName:function(e){if(t.isUndefined(e))return null;var n,o,i=e.lastIndexOf(".");return i<0?(n=e,o=""):0===i?(n="",o=e):(n=e.substring(0,i-1),o=e.substring(i-1)),{fileName:n,fileType:o}},getFileIconByName:function(e){var t="src--svg--type_other_large",n=this.getFileType(e);return n&&(t="src--svg--type_"+n+"_large"),t}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(299),o=n(0),i=n(6),r=n(19);return t.extend({className:"toolbar-item toolbar-combo-box",events:{"click .combo-value-wrapper":"onValueWrapperElClick","click .combo-expand-wrapper":"onExpandWrapperElClick","click .combo-menu-wrapper":"onMenuWrapperClick","click .combo-display-wrapper":"onClickDisplayWrapper",mousedown:"onMouseDown"},name:"unknown",label:"unknown",defaultValue:"",items:{},value:"",templateName:"toolbar-combo-box-template",_isForceSelectWhenClick:!1,initialize:function(e){this.editor=e.editor,this.render(),this.defaultSetValue?this.select(this.defaultSetValue):this.select(this.defaultValue),this.bindEvents(),this.bindDocumentEvents(),this.bindEditorEvents()},render:function(){var e,t=this.$el;if(t.addClass("combo-box-"+this.name),e=r.render("pc",this.templateName,{name:this.name,label:this.label,defaultValue:this.defaultValue,items:this.items,text:!1}),t.html(e),this.valueWrapperEl=t.find(".combo-value-wrapper")[0],this.expandWrapperEl=t.find(".combo-expand-wrapper")[0],this.menuWrapperEl=t.find(".combo-menu-wrapper")[0],this.displayWrapperEl=t.find(".combo-display-wrapper")[0],i(this.displayWrapperEl).tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]}),this.isVisible||this.hide(),"heading"===this.name)for(var n=3;n<=6;n++)i(i(this.menuWrapperEl).find("li[data-value="+n+"]")[0]).tooltipster({animation:"",animationDuration:0,theme:["tooltipster-heading","tooltipster-heading-customized"],side:"right",delay:[800,300],content:"Ctrl+"+(n-2)})},bindEvents:function(){},bindDocumentEvents:function(){o.bindAll(this,"onDocumentMouseDown"),i(document).on("mousedown",this.onDocumentMouseDown)},bindEditorEvents:function(){var e=this,t=e.editor,n=e.editorEvents;n&&o.each(n,function(n,o){t.on(o,e[n].bind(e))})},onValueWrapperElClick:function(){this.toggleMenu()},onExpandWrapperElClick:function(){this.toggleMenu()},onClickDisplayWrapper:function(){this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")},onMenuWrapperClick:function(e){var t=e.target,n=i(t).closest(".combo-item")[0];n&&(this.hideMenu(),this.onItemClick(n))},onItemClick:function(e){var t=i(e).data("value"),n=this.editor.getNoteRange(),o=n.startRange,r=o.getAsRectRange?o.getAsRectRange():null,a=t!==this.value||this._isForceSelectWhenClick||n.isInMultiBlock(),s=n.isSingleTableSelected()&&r&&!r.onlyOneCell();(t&&a||s)&&(this.select(t),this.onChange(t)),t&&this._isForceSelectWhenClick&&(this._isForceSelectWhenClick=!1)},select:function(e){this.value=e,this.updateValueUI(e)},updateValueUI:function(){},onChange:function(){},showMenu:function(){var e=this.menuWrapperEl;i(e).removeClass("menu-position-fix"),i(e).addClass("show"),e.getBoundingClientRect().right>document.documentElement.offsetWidth&&i(e).addClass("menu-position-fix")},hideMenu:function(){i(this.menuWrapperEl).removeClass("show")},toggleMenu:function(){i(this.menuWrapperEl).hasClass("show")?this.hideMenu():this.showMenu()},onDocumentMouseDown:function(e){var t=e.target;i.contains(this.el,t)||this.hideMenu()},onMouseDown:function(e){e.preventDefault()},reset:function(){this.hideMenu(),this.defaultSetValue?this.select(this.defaultSetValue):this.select(this.defaultValue)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(170),o=n(6),i=n(0);return t.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onChange:function(e){var t={};t[this.name]=e,this.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:t})},updateValueUI:function(e){var t=o(this.valueWrapperEl).find(".combo-value")[0];this.items[e]?o(t).text(this.items[e]):o(t).text(this.getUnlistedText(e)||"")},getUnlistedText:function(){return""},onEditingStateChange:function(e,t){this._isForceSelectWhenClick=!1,i.has(e,this.name)&&(t&&i.has(t,this.name)&&e[this.name]!==t[this.name]&&(this._isForceSelectWhenClick=!0),this.select(e[this.name]))}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1);return{_getHref:function(e,t){if(!(t<0||t>=e.getLength()))return(e.getTextStylesAtIndex(t)||{}).href},_hasHref:function(e,t,n){var o=this._getHref(e,t);return n?o===n:o&&o.length>0},isAtHrefBorder:function(e,t,n){var o=n?t-1:t,i=this._getHref(e,o),r=this._getHref(e,n?o+1:o-1);return i&&i.length>0&&i!==r},findHrefBorder:function(e,n,o){if(!e||!e.getText)return t.error("param is not valid!"),-1;var i,r,a,s=-1,l=e.getText().getLength();if(n>l)return-1;if(o){if(i=n-1,!(a=this._getHref(e,i)))return-1;for(r=i-1;r>=-1;r--)if(!this._hasHref(e,r,a)){s=r+1;break}}else{if(i=n,!(a=this._getHref(e,i)))return-1;for(r=i+1;r<=l;r++)if(!this._hasHref(e,r,a)){s=r-1;break}}return s},completeUrl:function(e){return!e||/\:\/\//.exec(e)?e:"http://"+e}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(9),a=n(4);return t=o.extend({name:"atom.InsertCodeText",_textBlock:null,_startLineIndex:null,_insertedText:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._textBlock=this.options.block,this._startLineIndex=this.options.startBlockRange.startLineIndex,this._startLineCharIndex=this.options.startBlockRange.startLineCharIndex,this._insertedText=this.options.text),t.__super__.initialize.apply(this)},apply:function(){return!!this._insertedText&&(this._textBlock.insertText(this._startLineIndex,this._startLineCharIndex,this._insertedText),!0)},doUnapply:function(){this._textBlock&&this._insertedText&&this._textBlock.deleteText(this._startLineIndex,this._startLineCharIndex,this._startLineIndex,this._startLineCharIndex+this._insertedText.getLength())},fromCollabJSON:function(){var e=this.options.args,n=e.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),n&&(this._insertedText=r.fromCollabJSON(n.richText),this._textBlock=e.collabProperties.coreEditor.getBlockById(n.blockId),this._start=n.startPosition)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._textBlock.getId(),e.richText=this._insertedText.toCollabJSON(),e.startPosition=this._start,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(3),a=n(23),s=n(1),l=n(48),c=n(110),u=n(4);return t=o.extend({name:"abstract.comp.InsertResource",_cmdArgs:null,_note:null,_newStartBlkId:null,_newEndBlkId:null,_resourceBlock:null,_retainStartBlock:null,insertResource:function(e,t,n){throw s.error("Method not implemented with:",e,t,n),"Method not implemented"},initialize:function(){var e;this._note=this.options.note,e=this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),u.isCollabCommand(e)||(this._newStartBlkId=u.newGUID(),this._newEndBlkId=u.newGUID(),1===e.retainStartBlock||"1"===e.retainStartBlock||!0===e.retainStartBlock?this._retainStartBlock=!0:this._retainStartBlock=!1)},apply:function(){var e=this._cmdArgs.range,t=e.getStartBlockRange().block;return e?(e.isCollapsed()||e.isSingleTableSelected()||r.isCode(t)||a.deleteSelectedContent(this,this._note,e),e.isInMultiBlock()?this._handleMultiBlockSelection(e):r.isTable(t)?this._handleSingleTableSelection(e,t):this._handleSingleBlockSelection(e)):(s.error(this.name+":note range should NOT be null"),!1)},_deleteBlocks:function(e){this.executeAtomicCommand(new l({note:this._note,blocks:e}))},_deleteBlockText:function(e,t,n){var o="";return t<n&&(o=e.sliceText(t,n),this.executeAtomicCommand(new c({block:e,start:t,end:n}))),o},_handleMultiBlockSelection:function(e){var t,n,o,i,s,l,c,u,d=[],p=[];return t=e.getStartBlockRange().block,s=(i=e.getEndBlockRange()).block,r.isListItem(t)?(u=this._note.getNextBlock(s),i.start!==s.getLength()?(c=s.getText?s.getText():"",l=a.createNewListItem(t,s.getId(),c),p.push(l.getId())):r.isTextBlock(u)||(l=a.createNewParagraph(s,s.getId(),"")),this._deleteBlocks([s]),this._resourceBlock=this.insertResource(t,null,l),p.push(s.getId(),this._resourceBlock.getId()),l||(l=u)):r.isTextBlock(t)?r.isListItem(s)||!r.isTextBlock(s)?(c=s.getText?s.getText():"",l=a.createNewParagraph(s,s.getId(),c),this._deleteBlocks([s]),this._resourceBlock=this.insertResource(t,null,l),p.push(s.getId(),this._resourceBlock.getId())):(l=s,this._resourceBlock=this.insertResource(t),p.push(this._resourceBlock.getId())):(o=this._note.getPreBlock(t),r.isTextBlock(o)&&!r.isCode(o)||(n=a.createNewParagraph(o,this._newStartBlkId,""),p.push(this._newStartBlkId)),d.push(t),p.push(t.getId()),r.isTextBlock(s)||(d.push(s),l=a.createNewParagraph(s,s.getId(),""),p.push(s.getId())),this._deleteBlocks(d),this._resourceBlock=this.insertResource(o,n,l),p.push(this._resourceBlock.getId()),l||(l=s)),a.setTextBlockAsEndingRange(this,l,0,0),this.pushAffectedBlockIds(p),!0},_handleSingleBlockSelection:function(e){var t,n,o,i,s,l,c=[];if(n=(t=e.getStartBlockRange()).block,e.getEndBlockRange().block,!r.isTextBlock(n,t)||n.isEmpty()&&!r.isCode(n))i=this._note.getPreBlock(n),(s=this._note.getNextBlock(n))&&r.isTextBlock(s)||(l=a.createNewParagraph(n,this._newEndBlkId,""),c.push(this._newEndBlkId)),this._retainStartBlock&&(r.isTable(n)||r.isAttachment(n)||r.isImage(n))||r.isCatalogue(n)?(i=n,o=a.createNewParagraph(n,this._newStartBlkId,""),c.push(this._newStartBlkId)):(i&&r.isTextBlock(i)&&!r.isCode(i)||(o=a.createNewParagraph(n,this._newStartBlkId,""),c.push(this._newStartBlkId)),this._deleteBlocks([n]),c.push(n.getId())),this._resourceBlock=this.insertResource(i,o,l);else{if(r.isCode(n))return;s=this._note.getNextBlock(n),t.start!==n.getLength()?l=this._handleSingleParaBlock(t,n):r.isTextBlock(s)||(l=a.createNewParagraph(n,this._newEndBlkId,"")),c.push(this._newEndBlkId),this._resourceBlock=this.insertResource(n,null,l)}return c.push(this._resourceBlock.getId()),l||(l=s),a.setTextBlockAsEndingRange(this,l,0,0),this.pushAffectedBlockIds(c),!0},_handleSingleParaBlock:function(e,t){var n;return n=this._deleteBlockText(t,e.start,t.getLength()),r.isHeading(t)?a.createNewHeading(t,this._newEndBlkId,n,t.getLevel()):r.isCatalogue(t)?a.createNewCatalogue(t,{paraId:this._newEndBlkId,text:n,href:t.getHref()}):r.isListItem(t)?a.createNewListItem(t,this._newEndBlkId,n):r.isQuote(t)?a.createNewQuote(t,{id:this._newEndBlkId,text:n}):r.isTodo(t)?a.createNewTodo(t,{id:this._newEndBlkId,text:n,checked:!1}):a.createNewParagraph(t,this._newEndBlkId,n)},_handleSingleTableSelection:function(e,t){return this._resourceBlock=this.insertResource(t),this.setEndingRange(e),!0},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._newStartBlkId=e.newStartBlkId,this._newEndBlkId=e.newEndBlkId,this._retainStartBlock=e.abstractSimpleValue1)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newStartBlkId=this._newStartBlkId,e.newEndBlkId=this._newEndBlkId,e.abstractSimpleValue1=this._retainStartBlock),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(56),i=n(25),r=n(114);e.exports=function(e){return function(t,n,a){var s,l=o(t),c=i(l.length),u=r(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var o=n(65);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,n){var o=n(66),i=n(78);e.exports=function(e){return function(t,n){var r,a,s=String(i(t)),l=o(n),c=s.length;return l<0||l>=c?e?"":void 0:(r=s.charCodeAt(l))<55296||r>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):r:e?s.slice(l,l+2):a-56320+(r-55296<<10)+65536}}},function(e,t,n){var o=n(18),i=n(65),r=n(24)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==i(e))}},function(e,t,n){var o=n(24)("iterator"),i=!1;try{var r=[7][o]();r.return=function(){i=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var r=[7],a=r[o]();a.next=function(){return{done:n=!0}},r[o]=function(){return a},e(r)}catch(e){}return n}},function(e,t,n){"use strict";var o=n(136),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==o(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(328);var o=n(50),i=n(49),r=n(15),a=n(78),s=n(24),l=n(231),c=s("species"),u=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),h=!r(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),f=h?!r(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t}):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var g=/./[p],y=n(a,p,""[e],function(e,t,n,o,i){return t.exec===l?h&&!i?{done:!0,value:g.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),m=y[0],v=y[1];o(String.prototype,e,m),i(RegExp.prototype,p,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},function(e,t,n){var o=n(12).navigator;e.exports=o&&o.userAgent||""},function(e,t,n){"use strict";var o=n(12),i=n(2),r=n(50),a=n(120),s=n(105),l=n(119),c=n(118),u=n(18),d=n(15),p=n(180),h=n(135),f=n(217);e.exports=function(e,t,n,g,y,m){var v=o[e],b=v,_=y?"set":"add",I=b&&b.prototype,k={},w=function(e){var t=I[e];r(I,e,"delete"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(m||I.forEach&&!d(function(){(new b).entries().next()}))){var C=new b,S=C[_](m?{}:-0,1)!=C,x=d(function(){C.has(1)}),A=p(function(e){new b(e)}),T=!m&&d(function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)});A||((b=t(function(t,n){c(t,b,e);var o=f(new v,t,b);return null!=n&&l(n,y,o[_],o),o})).prototype=I,I.constructor=b),(x||T)&&(w("delete"),w("has"),y&&w("get")),(T||S)&&w(_),m&&I.clear&&delete I.clear}else b=g.getConstructor(t,e,y,_),a(b.prototype,n),s.NEED=!0;return h(b,e),k[e]=b,i(i.G+i.W+i.F*(b!=v),k),m||g.setStrong(b,e,y),b}},function(e,t,n){for(var o,i=n(12),r=n(49),a=n(112),s=a("typed_array"),l=a("view"),c=!(!i.ArrayBuffer||!i.DataView),u=c,d=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(o=i[p[d++]])?(r(o.prototype,s,!0),r(o.prototype,l,!0)):u=!1;e.exports={ABV:c,CONSTR:u,TYPED:s,VIEW:l}},function(e,t,n){"use strict";e.exports=n(104)||!n(15)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(12)[e]})},function(e,t,n){"use strict";var o=n(2);e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var o=n(2),i=n(40),r=n(64),a=n(119);e.exports=function(e){o(o.S,e,{from:function(e){var t,n,o,s,l=arguments[1];return i(this),(t=void 0!==l)&&i(l),null==e?new this:(n=[],t?(o=0,s=r(l,arguments[2],2),a(e,!1,function(e){n.push(s(e,o++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){var o=n(157);(e.exports=n(68)(!1)).push([e.i,".svg-common {\n  background-image: url("+o(n(237))+");\n  background-repeat: no-repeat;\n}\n.src--svg--align_center {\n  background-position: 58.11965811965812% 63.06306306306306%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--align_justify {\n  background-position: 67.52136752136752% 63.06306306306306%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--align_left {\n  background-position: 81.19658119658119% 0;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--align_right {\n  background-position: 81.19658119658119% 9.90990990990991%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--attachment {\n  background-position: 81.19658119658119% 19.81981981981982%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--attacthment_download {\n  background-position: 65.54621848739495% 51.81818181818182%;\n  width: 18px;\n  height: 24px;\n}\n.src--svg--auto_wrap {\n  background-position: 81.19658119658119% 29.72972972972973%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--bold {\n  background-position: 81.19658119658119% 39.63963963963964%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--border_color {\n  background-position: 81.19658119658119% 49.549549549549546%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--catalogue {\n  background-position: 56.90376569037657% 44.54148471615721%;\n  width: 17px;\n  height: 15px;\n}\n.src--svg--catalogue-refresh {\n  background-position: 52.58620689655172% 34.54545454545455%;\n  width: 24px;\n  height: 24px;\n}\n.src--svg--catalogue_remove {\n  background-position: 37.93103448275862% 17.272727272727273%;\n  width: 24px;\n  height: 24px;\n}\n.src--svg--checked {\n  background-position: 81.19658119658119% 59.45945945945946%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--clean_format {\n  background-position: 81.19658119658119% 69.36936936936937%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--clean_format_active {\n  background-position: 0 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--code {\n  background-position: 56.90376569037657% 51.541850220264315%;\n  width: 17px;\n  height: 17px;\n}\n.src--svg--combo_expand {\n  background-position: 70.44534412955466% 55.27426160337553%;\n  width: 9px;\n  height: 7px;\n}\n.src--svg--export {\n  background-position: 9.401709401709402% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--fixed_top {\n  background-position: 18.803418803418804% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--format_painter {\n  background-position: 28.205128205128204% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--hr {\n  background-position: 37.60683760683761% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--image {\n  background-position: 47.00854700854701% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--image_error {\n  background-position: 0 0;\n  width: 54px;\n  height: 64px;\n}\n.src--svg--indent {\n  background-position: 56.41025641025641% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--inline_height {\n  background-position: 65.8119658119658% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--italic {\n  background-position: 75.21367521367522% 80.18018018018019%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--line_through {\n  background-position: 90.5982905982906% 0;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--link {\n  background-position: 90.5982905982906% 9.90990990990991%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--list_ol {\n  background-position: 90.5982905982906% 19.81981981981982%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--list_ul {\n  background-position: 90.5982905982906% 29.72972972972973%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--normal_mode {\n  background-position: 72.5% 50.220264317180614%;\n  width: 16px;\n  height: 17px;\n}\n.src--svg--note_background {\n  background-position: 27.615062761506277% 97.79735682819383%;\n  width: 17px;\n  height: 17px;\n}\n.src--svg--outdent {\n  background-position: 90.5982905982906% 39.63963963963964%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--page_mode {\n  background-position: 34.583333333333336% 97.79735682819383%;\n  width: 16px;\n  height: 17px;\n}\n.src--svg--quote {\n  background-position: 43.220338983050844% 28.571428571428573%;\n  width: 20px;\n  height: 20px;\n}\n.src--svg--read_mode {\n  background-position: 90.5982905982906% 49.549549549549546%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--redo {\n  background-position: 90.5982905982906% 59.45945945945946%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--redo_active {\n  background-position: 90.5982905982906% 69.36936936936937%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--reference {\n  background-position: 90.5982905982906% 79.27927927927928%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--resize_view {\n  background-position: 0 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--screenshot {\n  background-position: 9.401709401709402% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--screenshot_x {\n  background-position: 18.803418803418804% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--sync {\n  background-position: 28.205128205128204% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table {\n  background-position: 37.60683760683761% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_align_bottom {\n  background-position: 47.00854700854701% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_align_mid {\n  background-position: 56.41025641025641% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_align_top {\n  background-position: 65.8119658119658% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_border_all {\n  background-position: 75.21367521367522% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_border_left {\n  background-position: 84.61538461538461% 90.09009009009009%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_border_none {\n  background-position: 100% 0;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_border_out {\n  background-position: 100% 9.90990990990991%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_border_right {\n  background-position: 100% 19.81981981981982%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_border_top {\n  background-position: 100% 29.72972972972973%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_broder_bottom {\n  background-position: 100% 39.63963963963964%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_cell_merge {\n  background-position: 23.275862068965516% 17.117117117117118%;\n  width: 24px;\n  height: 22px;\n}\n.src--svg--table_hide_border {\n  background-position: 100% 49.549549549549546%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--table_insert_delete {\n  background-position: 100% 59.45945945945946%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--text_background {\n  background-position: 100% 69.36936936936937%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--text_color {\n  background-position: 100% 79.27927927927928%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--todo {\n  background-position: 42.857142857142854% 37.00440528634361%;\n  width: 18px;\n  height: 17px;\n}\n.src--svg--toggle_tab {\n  background-position: 100% 89.1891891891892%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--type_audio_large {\n  background-position: 24.324324324324323% 0;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_compress_large {\n  background-position: 39.63963963963964% 0;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_csv_large {\n  background-position: 0 31.067961165048544%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_excel_large {\n  background-position: 15.315315315315315% 31.067961165048544%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_flash_large {\n  background-position: 30.63063063063063% 31.067961165048544%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_html_large {\n  background-position: 54.95495495495496% 0;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_image_large {\n  background-position: 54.95495495495496% 18.446601941747574%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_md_large {\n  background-position: 0 49.51456310679612%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_music_large {\n  background-position: 15.315315315315315% 49.51456310679612%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_note_large {\n  background-position: 30.63063063063063% 49.51456310679612%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_other_large {\n  background-position: 45.945945945945944% 49.51456310679612%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_pdf_large {\n  background-position: 70.27027027027027% 0;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_ppt_large {\n  background-position: 70.27027027027027% 18.446601941747574%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_scan_large {\n  background-position: 70.27027027027027% 36.89320388349515%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_table_large {\n  background-position: 0 67.96116504854369%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_txt_large {\n  background-position: 15.315315315315315% 67.96116504854369%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_video_large {\n  background-position: 30.63063063063063% 67.96116504854369%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--type_word_large {\n  background-position: 45.945945945945944% 67.96116504854369%;\n  width: 34px;\n  height: 38px;\n}\n.src--svg--underline {\n  background-position: 0 100%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--undo {\n  background-position: 9.401709401709402% 100%;\n  width: 22px;\n  height: 22px;\n}\n.src--svg--undo_active {\n  background-position: 18.803418803418804% 100%;\n  width: 22px;\n  height: 22px;\n}\n/**\n* z-index 的级别：\n*  普通元素 normal: 0\n*  普通设为上层元素 medium: 9\n*  设为最上层元素 top: 99\n*  设为绝对最上层元素 absolute top: 999\n**/\n.attachment-container {\n  margin: 5px 0;\n  display: inline-block;\n  position: relative;\n  outline: none;\n  width: 280px;\n  height: 64px;\n  border-radius: 4px;\n  background-color: #ffffff !important;\n  border: solid 1px #e0e1e5;\n  vertical-align: middle;\n  font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', Helvetica, Tahoma, Arial, 'Hiragino Sans GB', 'Microsoft YaHei', '\\5FAE\\8F6F\\96C5\\9ED1', SimSun, '\\5B8B\\4F53', Heiti, '\\9ED1\\4F53', sans-serif;\n}\n.attachment-container .attachment-icon {\n  margin: 13px 17px 15px 15px;\n  float: left;\n  -webkit-print-color-adjust: exact;\n}\n.attachment-container .attachment-title {\n  height: 18px;\n  font-size: 12px;\n  font-weight: 500;\n  font-style: normal;\n  font-stretch: normal;\n  text-align: justify;\n  color: #393939;\n  margin-top: 16px;\n  width: 166px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  cursor: default;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.attachment-container .attachment-title .attachment-title-name {\n  max-width: 115px;\n  display: inline-block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  margin: 0;\n}\n.attachment-container .attachment-title .attachment-title-type {\n  display: inline-block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  margin: 0;\n}\n.attachment-container .attachment-size {\n  font-size: 12px;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  text-align: justify;\n  color: #797979;\n  cursor: default;\n  height: 14px;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.img-title {\n  margin-top: 7px;\n  min-height: 18px;\n  font-size: 12px;\n  line-height: 1.29;\n  color: #595959;\n  word-break: break-word;\n  white-space: pre-wrap;\n  font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', Helvetica, Tahoma, Arial, 'Hiragino Sans GB', 'Microsoft YaHei', '\\5FAE\\8F6F\\96C5\\9ED1', SimSun, '\\5B8B\\4F53', Heiti, '\\9ED1\\4F53', sans-serif;\n}\n[yne-bulb-block=\"catalogue\"] {\n  border-left: 1px solid #f2f2f2;\n  border-right: 1px solid #f2f2f2;\n  background: rgba(255, 255, 255, 0.7);\n  line-height: 1.75;\n  padding: 0 20px;\n}\n[yne-bulb-block=\"catalogue\"] > a {\n  padding: 8px 0;\n  text-decoration: none;\n  border-bottom: 1px dashed #e6e6e6;\n  display: block;\n  color: #003884;\n  background: initial;\n}\n[yne-bulb-order=\"first\"] {\n  border-top: 1px solid #f2f2f2;\n  margin-top: 20px;\n}\n[yne-bulb-order=\"last\"] {\n  border-bottom: 1px solid #f2f2f2;\n  margin-bottom: 20px;\n}\n[yne-bulb-order=\"last\"] > a {\n  border-bottom: 0px;\n}\n[yne-bulb-order=\"firstlast\"] {\n  border-top: 1px solid #f2f2f2;\n  margin-top: 20px;\n  border-bottom: 1px solid #f2f2f2;\n  margin-bottom: 20px;\n}\n[yne-bulb-order=\"firstlast\"] > a {\n  border-bottom: 0px;\n}\n",""])},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(161)],void 0===(i=function(e,t,n){return function(e){var t,o=[];for(t=0;t<e.length;t++)n(e,t)>65535?(o.push(e.slice(t,t+2)),t++):o.push(e[t]);return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(26)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.add=function(t){t&&!o.isSupport(t)&&(n.contains(e.unknownInlineStyleNames,t)||e.unknownInlineStyleNames.push(t))},e.get=function(){return e.unknownInlineStyleNames},e.reset=function(){e.unknownInlineStyleNames=[]},e.unknownInlineStyleNames=[],e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(92)],void 0===(i=function(e,t,n,o){return function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.isHeaderFooterRange=function(e){return n.isHeaderFooter(e.block)},t.prototype.collapse=function(e){void 0===e&&(e=!0),e?this.end=this.start:this.start=this.end},t.prototype.isCollapsed=function(){return this.start===this.end},t.prototype.clone=function(){return new t({block:this.block,end:this.end,start:this.start})},t.prototype.getDataAsPlain=function(){return""},t.prototype.canDrawedByNative=function(){return!0},t.prototype.toNativeRange=function(e){return null},t.prototype.toCollabJSON=function(){var e=this.block.toCollabJSON();return e.rangeType=this.type,e.blockId=this.block.getId(),e},t.prototype.countWords=function(){return this.end-this.start},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.HEADER_FOOTER,this.start=t.start||0,this.end=t.end||0,this.block=t.block},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(11),n(1),n(92)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromCollabJSON=function(e,o){var a,s=e.rangeType;if(s===n.ATTACHMENT)return(a=r.getBlockById(e.blockId,o))?new t({block:a}):void 0;i.error("wrong block range type:",s)},t.prototype.canDrawedByNative=function(){return!1},t.prototype.clone=function(){return new t({block:this.block})},t.prototype.collapse=function(e){},t.prototype.getDataAsHtml=function(e){return this.block.toHtml(null,null,e)},t.prototype.getDataAsJSON=function(){var e=this.block.toJSON();return(o.IS_WEB_NOTE||o.IS_WEB_GROUP)&&e.resource&&!/^http/i.test(e.resource)&&(e.resource=location.protocol+"//"+location.hostname+e.resource),e},t.prototype.getDataAsPlain=function(){return this.block.toPlain()},t.prototype.isCollapsed=function(){return!1},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.ATTACHMENT},t}(r)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(1),n(3),n(92)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromCollabJSON=function(e,r){var a=e.rangeType;if(a===o.IMAGE){var s=i.getBlockById(e.blockId,r);return s?new t({block:s}):void 0}n.error("wrong block range type:",a)},t.prototype.isCollapsed=function(){return!1},t.prototype.clone=function(){return new t({block:this.block})},t.prototype.collapse=function(){},t.prototype.getDataAsJSON=function(){return this.block.toJSON()},t.prototype.getDataAsHtml=function(e){return this.block.toHtml(null,null,e)},t.prototype.getDataAsPlain=function(){return this.block.toPlain()},t.prototype.canDrawedByNative=function(){return!1},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=o.IMAGE},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(264),i=n(198),r=n(287);return function(e,n){return t||(t=new o(i)).define(".MsoListParagraph",r,o.PRIORITY.HIGH),t.parse(e,n)}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(277),i=n(278),r=n(279),a={a:r.AnchorHandler,abbr:r.InlineHandler,acronym:r.InlineHandler,address:r.ParagraphHandler,applet:!1,area:!1,article:r.ParagraphHandler,aside:r.ParagraphHandler,audio:!1,b:r.InlineHandler,base:!1,basefont:!1,bdi:r.InlineHandler,bdo:r.InlineHandler,bgsound:!1,big:r.InlineHandler,blink:r.InlineHandler,blockquote:r.ParagraphHandler,body:r.ParagraphHandler,br:r.BreakHandler,button:!1,canvas:!1,center:r.ParagraphHandler,cite:r.InlineHandler,code:r.InlineHandler,command:!1,content:!1,data:!1,datalist:!1,dd:r.ParagraphHandler,del:r.InlineHandler,details:r.ParagraphHandler,dfn:r.InlineHandler,dialog:!1,dir:r.InlineHandler,div:r.ParagraphHandler,dl:r.ParagraphHandler,dt:r.ParagraphHandler,element:!1,em:r.InlineHandler,embed:!1,fieldset:r.ParagraphHandler,figcaption:r.ParagraphHandler,figure:r.ParagraphHandler,font:r.InlineHandler,footer:r.ParagraphHandler,form:r.ParagraphHandler,frame:!1,frameset:!1,h1:r.ParagraphHandler,h2:r.ParagraphHandler,h3:r.ParagraphHandler,h4:r.ParagraphHandler,h5:r.ParagraphHandler,h6:r.ParagraphHandler,header:r.ParagraphHandler,hgroup:r.ParagraphHandler,hr:r.HrHandler,html:r.ParagraphHandler,i:r.InlineHandler,iframe:!1,image:!1,img:r.ImageHandler,input:r.TodoHandler,ins:r.InlineHandler,isindex:!1,kbd:r.InlineHandler,keygen:!1,label:r.InlineHandler,legend:r.ParagraphHandler,li:r.ListItemHandler,link:!1,listing:!1,main:r.ParagraphHandler,map:!1,mark:r.InlineHandler,marquee:r.ParagraphHandler,menu:!1,menuitem:!1,meta:!1,meter:r.InlineHandler,multicol:r.ParagraphHandler,nav:r.ParagraphHandler,nobr:r.InlineHandler,noembed:!1,noframes:!1,noscript:!1,object:!1,ol:r.ListHandler,optgroup:!1,option:!1,output:r.InlineHandler,p:r.ParagraphHandler,param:!1,picture:!1,plaintext:r.ParagraphHandler,pre:r.ParagraphHandler,progress:!1,q:r.InlineHandler,rp:r.InlineHandler,rt:r.InlineHandler,rtc:r.InlineHandler,ruby:r.ParagraphHandler,s:r.InlineHandler,samp:r.InlineHandler,script:!1,section:r.ParagraphHandler,select:!1,shadow:!1,small:r.InlineHandler,source:!1,spacer:!1,span:r.InlineHandler,strike:r.InlineHandler,strong:r.InlineHandler,style:!1,sub:r.InlineHandler,summary:r.ParagraphHandler,sup:r.InlineHandler,table:r.TableHandler,template:!1,textarea:r.ParagraphHandler,time:r.InlineHandler,title:!1,track:!1,tt:r.InlineHandler,u:r.InlineHandler,ul:r.ListHandler,var:r.InlineHandler,video:!1,wbr:!1,xmp:!1},s=function(e,n){e&&e.length&&t.each(e,function(e){null==n[e]&&(n[e]=!1)})};return s(o,a),s(i,a),a}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(1),i=n(3),r=function(e){var t=document.createElement("CANVAS"),n=t.getContext("2d"),i=null;if(!e)return null;t.height=e.naturalHeight,t.width=e.naturalWidth,n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.drawImage(e,0,0);try{i=t.toDataURL("image/jpeg",1)}catch(e){o.warn(e.message)}return i};return{getBase64Data:function(e){if(!e)return{};var n,o={data:{}},i=o.data;return t.each(e,function(e){(n=r(e.img))&&(i[e.source]={base64:n})}),o},parseImageJson:function(e){var t=null;if(!e)return null;try{t=JSON.parse(e)}catch(e){return o.error("no imagejson or parse imagejson error"),null}return t},base64ToBlob:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),i=o.length,r=new Uint8Array(i);i--;)r[i]=o.charCodeAt(i);return new Blob([r],{type:n})},imgToBase64:r,setBlockIds:function(e,n){var o=[];return t.each(e,function(e){if(i.isImage(e)){var t=e.getSource(),r=n[t];r&&r.base64&&(o.push(e),r.imgBlockIds?r.imgBlockIds.push(e.getId()):r.imgBlockIds=[e.getId()])}}),o}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(28),n(20),n(3)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createBlank=function(e){return new t({content:"",isFooter:!0===e})},t.format=function(e,t){return e?(null!=(t=t||{}).pageIndex&&(e=e.replace(/:p/,t.pageIndex+1)),t.pageCount&&(e=e.replace(/:n/,t.pageCount)),e):e},t.fromXml=function(e){var o=$(e),i=o.find(">text").text(),r=new t({align:o.find("styles>align").text(),content:i,isFooter:"footer"===e.nodeName});return o.children().each(function(e,t){switch(t.nodeName){case"text":break;case"styles":$(t).children().each(function(e,o){"align"!==o.nodeName&&n.appendToTree(r.unknownStyles,t)});break;default:n.appendToTree(r.unknownTree,t)}}),r},t.parse=function(e,t){return e.replace(/\d+/,function(e){return parseInt(e,10)===t.pageIndex+1?":p":e}).replace(/\d+/,function(e){return parseInt(e,10)===t.pageCount?":n":e})},t.prototype.getAlign=function(){return this.align},t.prototype.getBlockStyle=function(e){if("align"===e)return this.getAlign()||"center"},t.prototype.getContent=function(e,n){return t.format(this.content,n)},t.prototype.getInfo=function(){return{align:this.getAlign(),content:this.getContent(),isFooter:this.isFooter}},t.prototype.setAlign=function(e){this.align=e},t.prototype.setContent=function(e){this.content=e},t.prototype.setContentAndStyle=function(e,t){null!=e&&(this.content=e),null!=t&&(this.align=t),this.trigger("change",e,t)},t.prototype.toCollabJSON=function(){return{headerFooterInfo:this.getInfo()}},t.prototype.toXml=function(e){var t,o=this.isFooter?"footer":"header",i=e.createElement(o),r=e.createElement("styles"),a=e.createElement("text"),s=e.createTextNode(this.getContent());return a.appendChild(s),i.appendChild(a),(t=e.createElement("align")).appendChild(e.createTextNode(this.getAlign())),r.appendChild(t),n.appendToXml(this.unknownStyles,r),i.appendChild(r),n.appendToXml(this.unknownTree,i),i.setAttribute("compat","true"),i},t.prototype.initialize=function(t){t=t||{isFooter:!1,content:"",align:"center"},e.prototype.initialize.call(this,t),this.type=i.HEADER_FOOTER,this.blockId=t.isFooter?"footer-fixed-id":"header-fixed-id",this.content=t.content||"",this.align=t.align||"center",this.isFooter=!0===t.isFooter,this.unknownTree={},this.unknownStyles={}},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6),o=n(0),i=n(169);return{processHtmlContent:function(e){var n=e.attr("title")||e.attr("filename");if(n){var r=e.attr("filelength"),a=t('<div class="attachment-container"></div>'),s=i.getFileType(n),l=i.getSizeString(r),c=i.splitFileFullName(n),u=t('<div class="attachment-icon svg-common '+(s?"src--svg--type_"+s+"_large":"src--svg--type_other_large")+'"></div>'),d=t('<div class="attachment-title"><p class="attachment-title-name">'+o.escape(c.fileName)+'</p><p class="attachment-title-type">'+o.escape(c.fileType)+"</p></div>"),p=t('<div class="attachment-size">'+l+"</div>");return a.append(u).append(d).append(p),e.replaceWith(a),a}},getAttachStyle:function(e,t){this._loadAttachCssFile(t,function(t){e.innerTag="<style>"+t.css+"</style>"})}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(157);(e.exports=n(68)(!1)).push([e.i,"#presenter .demo-page {\n  position: absolute;\n  display: block;\n  z-index: 10099;\n  visibility: visible;\n  background-color: #f9f9f9;\n  cursor: url("+o(n(238))+'), auto;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n}\n#presenter .demo-page .note-content {\n  display: block;\n  width: 100%;\n  font-family: "Microsoft YaHei", "\\5FAE\\8F6F\\96C5\\9ED1", "Microsoft JhengHei", "\\534E\\6587\\9ED1\\4F53", arial, sans-serif, STHeiti, sans-serif;\n  font-size: 17px;\n  line-height: 3rem;\n  height: 100%;\n  overflow-y: scroll;\n  -webkit-user-select: text;\n  overflow-x: hidden;\n  word-break: break-all;\n}\n#presenter .demo-page .note-content.lsize {\n  font-size: 19px;\n}\n#presenter .demo-page .note-content.ssize {\n  font-size: 15px;\n}\n#presenter .demo-page .tool-bar {\n  position: fixed;\n  top: 30px;\n  right: 30px;\n}\n#presenter .demo-page .tool-bar .demo-mode-icon {\n  display: block;\n  width: 48px;\n  height: 48px;\n}\n#presenter .demo-page .tool-bar i {\n  display: block;\n}\n#presenter .demo-page .tool-bar .zoom-in-icon {\n  height: 48px;\n  width: 48px;\n  background-image: url('+o(n(239))+");\n}\n#presenter .demo-page .tool-bar .zoom-in-icon:hover {\n  background-image: url("+o(n(240))+");\n}\n#presenter .demo-page .tool-bar .zoom-out-icon {\n  height: 48px;\n  width: 48px;\n  background-image: url("+o(n(241))+");\n}\n#presenter .demo-page .tool-bar .zoom-out-icon:hover {\n  background-image: url("+o(n(242))+");\n}\n#presenter .demo-page .tool-bar .esc-icon {\n  height: 48px;\n  width: 48px;\n  background-image: url("+o(n(243))+");\n}\n#presenter .demo-page .tool-bar .esc-icon:hover {\n  background-image: url("+o(n(244))+");\n}\n#presenter .demo-page .tool-bar.show {\n  opacity: 0.2;\n}\nbody.presentation {\n  overflow: hidden !important;\n}\n.mixin-common-font {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: normal;\n  color: #41464b;\n}\n.mixin-token-font {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: 500;\n  color: #41464b;\n}\n.code-view.yne-code-theme-default {\n  /* page-break affect */\n}\n.code-view.yne-code-theme-default pre:first-child {\n  border-top: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-default pre:last-child {\n  border-bottom: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-default pre {\n  border-left: 1px solid rgba(208, 212, 217, 0.5);\n  border-right: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-default pre {\n  background-color: #f7f7f7;\n  line-height: 1.3;\n}\n.code-view.yne-code-theme-default .yne-plain {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: normal;\n  color: #41464b;\n}\n.code-view.yne-code-theme-default .yne-token {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: 500;\n  color: #41464b;\n}\n.code-view.yne-code-theme-default .yne-token.yne-comment,\n.code-view.yne-code-theme-default .yne-token.yne-prolog,\n.code-view.yne-code-theme-default .yne-token.yne-doctype,\n.code-view.yne-code-theme-default .yne-token.yne-cdata {\n  color: slategray;\n}\n.code-view.yne-code-theme-default .yne-token.yne-punctuation {\n  color: #999;\n}\n.code-view.yne-code-theme-default .yne-token .namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-default .yne-token.yne-property,\n.code-view.yne-code-theme-default .yne-token.yne-tag,\n.code-view.yne-code-theme-default .yne-token.yne-boolean,\n.code-view.yne-code-theme-default .yne-token.yne-number,\n.code-view.yne-code-theme-default .yne-token.yne-constant,\n.code-view.yne-code-theme-default .yne-token.yne-symbol,\n.code-view.yne-code-theme-default .yne-token.yne-deleted {\n  color: #905;\n}\n.code-view.yne-code-theme-default .yne-token.yne-selector,\n.code-view.yne-code-theme-default .yne-token.yne-attr-name,\n.code-view.yne-code-theme-default .yne-token.yne-string,\n.code-view.yne-code-theme-default .yne-token.yne-char,\n.code-view.yne-code-theme-default .yne-token.yne-builtin,\n.code-view.yne-code-theme-default .yne-token.yne-inserted {\n  color: #690;\n}\n.code-view.yne-code-theme-default .yne-token.yne-operator,\n.code-view.yne-code-theme-default .yne-token.yne-entity,\n.code-view.yne-code-theme-default .yne-token.yne-url {\n  color: #9a6e3a;\n  background: rgba(255, 255, 255, 0.5);\n}\n.code-view.yne-code-theme-default .yne-token.yne-atrule,\n.code-view.yne-code-theme-default .yne-token.yne-attr-value,\n.code-view.yne-code-theme-default .yne-token.yne-keyword {\n  color: #07a;\n}\n.code-view.yne-code-theme-default .yne-token.yne-function,\n.code-view.yne-code-theme-default .yne-token.yne-class-name {\n  color: #DD4A68;\n}\n.code-view.yne-code-theme-default .yne-token.yne-regex,\n.code-view.yne-code-theme-default .yne-token.yne-important,\n.code-view.yne-code-theme-default .yne-token.yne-variable {\n  color: #e90;\n}\n.code-view.yne-code-theme-default .yne-token.yne-important,\n.code-view.yne-code-theme-default .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-default .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-default .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-coy {\n  /* page-break affect */\n}\n.code-view.yne-code-theme-coy pre:first-child {\n  border-top: 1px solid transparent;\n}\n.code-view.yne-code-theme-coy pre:last-child {\n  border-bottom: 1px solid transparent;\n}\n.code-view.yne-code-theme-coy pre {\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n.code-view.yne-code-theme-coy pre {\n  color: black;\n  background: none;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  word-wrap: normal;\n  line-height: 1.6;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-coy pre {\n  border-left: 10px solid #358ccb;\n  box-shadow: -1px 0px 0px 0px #358ccb, 0px 0px 0px 0px #dfdfdf;\n  background-color: #fdfdfd;\n  background-image: linear-gradient(transparent 50%, rgba(69, 142, 209, 0.04) 50%);\n  background-size: 3em 3em;\n  background-origin: content-box;\n  background-attachment: local;\n}\n.code-view.yne-code-theme-coy pre {\n  background-color: #fdfdfd;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  padding-bottom: 0;\n  padding-top: 0;\n  padding-left: 1em;\n  position: relative;\n}\n.code-view.yne-code-theme-coy pre:nth-child(2n+1) {\n  background-color: #f6fafe;\n}\n.code-view.yne-code-theme-coy pre:before,\n.code-view.yne-code-theme-coy pre:after {\n  content: '';\n  z-index: -2;\n  display: block;\n  position: absolute;\n  bottom: 0.75em;\n  left: 0.18em;\n  width: 40%;\n  height: 20%;\n  max-height: 13em;\n  box-shadow: 0px 13px 8px #979797;\n  -webkit-transform: rotate(-2deg);\n  -moz-transform: rotate(-2deg);\n  -ms-transform: rotate(-2deg);\n  -o-transform: rotate(-2deg);\n  transform: rotate(-2deg);\n}\n.code-view.yne-code-theme-coy .yne-plain {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: normal;\n  color: #41464b;\n}\n.code-view.yne-code-theme-coy .yne-token {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: 500;\n  color: #41464b;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-comment,\n.code-view.yne-code-theme-coy .yne-token.yne-block-comment,\n.code-view.yne-code-theme-coy .yne-token.yne-prolog,\n.code-view.yne-code-theme-coy .yne-token.yne-doctype,\n.code-view.yne-code-theme-coy .yne-token.yne-cdata {\n  color: #7D8B99;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-punctuation {\n  color: #5F6364;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-property,\n.code-view.yne-code-theme-coy .yne-token.yne-tag,\n.code-view.yne-code-theme-coy .yne-token.yne-boolean,\n.code-view.yne-code-theme-coy .yne-token.yne-number,\n.code-view.yne-code-theme-coy .yne-token.yne-function-name,\n.code-view.yne-code-theme-coy .yne-token.yne-constant,\n.code-view.yne-code-theme-coy .yne-token.yne-symbol,\n.code-view.yne-code-theme-coy .yne-token.yne-deleted {\n  color: #c92c2c;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-selector,\n.code-view.yne-code-theme-coy .yne-token.yne-attr-name,\n.code-view.yne-code-theme-coy .yne-token.yne-string,\n.code-view.yne-code-theme-coy .yne-token.yne-char,\n.code-view.yne-code-theme-coy .yne-token.yne-function,\n.code-view.yne-code-theme-coy .yne-token.yne-builtin,\n.code-view.yne-code-theme-coy .yne-token.yne-inserted {\n  color: #2f9c0a;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-operator,\n.code-view.yne-code-theme-coy .yne-token.yne-entity,\n.code-view.yne-code-theme-coy .yne-token.yne-url,\n.code-view.yne-code-theme-coy .yne-token.yne-variable {\n  color: #a67f59;\n  background: rgba(255, 255, 255, 0.5);\n}\n.code-view.yne-code-theme-coy .yne-token.yne-atrule,\n.code-view.yne-code-theme-coy .yne-token.yne-attr-value,\n.code-view.yne-code-theme-coy .yne-token.yne-keyword,\n.code-view.yne-code-theme-coy .yne-token.yne-class-name {\n  color: #1990b8;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-regex,\n.code-view.yne-code-theme-coy .yne-token.yne-important {\n  color: #e90;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-style,\n.code-view.yne-code-theme-coy .yne-token.yne-string {\n  color: #a67f59;\n  background: rgba(255, 255, 255, 0.5);\n}\n.code-view.yne-code-theme-coy .yne-token.yne-important {\n  font-weight: normal;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-tomorrow {\n  /* page-break affect */\n}\n.code-view.yne-code-theme-tomorrow pre {\n  color: #ccc;\n  background: none;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  word-wrap: normal;\n  line-height: 1.3;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-tomorrow pre {\n  background: #2d2d2d;\n  caret-color: white;\n}\n.code-view.yne-code-theme-tomorrow pre:first-child {\n  border-top: 1px solid transparent;\n}\n.code-view.yne-code-theme-tomorrow pre:last-child {\n  border-bottom: 1px solid transparent;\n}\n.code-view.yne-code-theme-tomorrow pre {\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-comment,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-block-comment,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-prolog,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-doctype,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-cdata {\n  color: #999;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-punctuation {\n  color: #ccc;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-tag,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-attr-name,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-namespace,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-deleted {\n  color: #e2777a;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-function-name {\n  color: #6196cc;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-boolean,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-number,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-function {\n  color: #f08d49;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-property,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-class-name,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-constant,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-symbol {\n  color: #f8c555;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-selector,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-important,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-atrule,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-keyword,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-builtin {\n  color: #cc99cd;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-string,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-char,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-attr-value,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-regex,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-variable {\n  color: #7ec699;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-operator,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-entity,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-url {\n  color: #67cdcc;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-important,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-inserted {\n  color: green;\n}\n.code-view.yne-code-theme-okaidia {\n  /* Code blocks */\n  /* page-break affect */\n}\n.code-view.yne-code-theme-okaidia pre {\n  color: #f8f8f2;\n  background: none;\n  text-shadow: 0 1px rgba(0, 0, 0, 0.3);\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  word-wrap: normal;\n  line-height: 1.3;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-okaidia pre {\n  background: #272822;\n  caret-color: white;\n}\n.code-view.yne-code-theme-okaidia pre:first-child {\n  border-top: 1px solid transparent;\n}\n.code-view.yne-code-theme-okaidia pre:last-child {\n  border-bottom: 1px solid transparent;\n}\n.code-view.yne-code-theme-okaidia pre {\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-comment,\n.code-view.yne-code-theme-okaidia .yne-token.yne-prolog,\n.code-view.yne-code-theme-okaidia .yne-token.yne-doctype,\n.code-view.yne-code-theme-okaidia .yne-token.yne-cdata {\n  color: slategray;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-punctuation {\n  color: #f8f8f2;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-property,\n.code-view.yne-code-theme-okaidia .yne-token.yne-tag,\n.code-view.yne-code-theme-okaidia .yne-token.yne-constant,\n.code-view.yne-code-theme-okaidia .yne-token.yne-symbol,\n.code-view.yne-code-theme-okaidia .yne-token.yne-deleted {\n  color: #f92672;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-boolean,\n.code-view.yne-code-theme-okaidia .yne-token.yne-number {\n  color: #ae81ff;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-selector,\n.code-view.yne-code-theme-okaidia .yne-token.yne-attr-name,\n.code-view.yne-code-theme-okaidia .yne-token.yne-string,\n.code-view.yne-code-theme-okaidia .yne-token.yne-char,\n.code-view.yne-code-theme-okaidia .yne-token.yne-builtin,\n.code-view.yne-code-theme-okaidia .yne-token.yne-inserted {\n  color: #a6e22e;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-operator,\n.code-view.yne-code-theme-okaidia .yne-token.yne-entity,\n.code-view.yne-code-theme-okaidia .yne-token.yne-url,\n.code-view.yne-code-theme-okaidia .yne-token.yne-language-css .string,\n.code-view.yne-code-theme-okaidia .yne-token.yne-style .string,\n.code-view.yne-code-theme-okaidia .yne-token.yne-variable {\n  color: #f8f8f2;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-atrule,\n.code-view.yne-code-theme-okaidia .yne-token.yne-attr-value,\n.code-view.yne-code-theme-okaidia .yne-token.yne-function,\n.code-view.yne-code-theme-okaidia .yne-token.yne-class-name {\n  color: #e6db74;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-keyword {\n  color: #66d9ef;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-regex,\n.code-view.yne-code-theme-okaidia .yne-token.yne-important {\n  color: #fd971f;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-important,\n.code-view.yne-code-theme-okaidia .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-Ateliersulphurpool {\n  /* Code blocks */\n  /* page-break affect */\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre {\n  font-family: Consolas, Menlo, Monaco, \"Andale Mono WT\", \"Andale Mono\", \"Lucida Console\", \"Lucida Sans Typewriter\", \"DejaVu Sans Mono\", \"Bitstream Vera Sans Mono\", \"Liberation Mono\", \"Nimbus Mono L\", \"Courier New\", Courier, monospace;\n  font-size: 14px;\n  line-height: 1.375;\n  direction: ltr;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n  background: #f5f7ff;\n  color: #5e6687;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre::-moz-selection,\n.code-view.yne-code-theme-Ateliersulphurpool pre::-moz-selection {\n  text-shadow: none;\n  background: #dfe2f1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre::selection,\n.code-view.yne-code-theme-Ateliersulphurpool pre::selection {\n  text-shadow: none;\n  background: #dfe2f1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre {\n  margin: 0;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre:first-child {\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre:last-child {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre {\n  border-left: 1px solid rgba(0, 0, 0, 0.05);\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-comment,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-prolog,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-doctype,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-cdata {\n  color: #898ea4;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-punctuation {\n  color: #5e6687;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-operator,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-boolean,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-number {\n  color: #c76b29;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-property {\n  color: #c08b30;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-tag {\n  color: #3d8fd1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-string {\n  color: #22a2c9;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-selector {\n  color: #6679cc;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-attr-name {\n  color: #c76b29;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-entity,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-url,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-string,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-string {\n  color: #22a2c9;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-attr-value,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-keyword,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-control,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-directive,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-unit {\n  color: #ac9739;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-statement,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-regex,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-atrule {\n  color: #22a2c9;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-placeholder,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-variable {\n  color: #3d8fd1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-deleted {\n  text-decoration: line-through;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-inserted {\n  border-bottom: 1px dotted #202746;\n  text-decoration: none;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-important,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-important {\n  color: #c94922;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-vs {\n  /* Code blocks */\n  /* page-break affect */\n}\n.code-view.yne-code-theme-vs pre {\n  color: #393A34;\n  font-family: \"Consolas\", \"Bitstream Vera Sans Mono\", \"Courier New\", Courier, monospace;\n  direction: ltr;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  font-size: 0.95em;\n  line-height: 1.6em;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-vs pre::-moz-selection,\n.code-view.yne-code-theme-vs pre::-moz-selection {\n  background: #C1DEF1;\n}\n.code-view.yne-code-theme-vs pre::selection,\n.code-view.yne-code-theme-vs pre::selection {\n  background: #C1DEF1;\n}\n.code-view.yne-code-theme-vs pre {\n  padding: 0;\n  margin: 0;\n  background-color: white;\n}\n.code-view.yne-code-theme-vs pre:first-child {\n  border-top: 1px solid #dddddd;\n}\n.code-view.yne-code-theme-vs pre:last-child {\n  border-bottom: 1px solid #dddddd;\n}\n.code-view.yne-code-theme-vs pre {\n  border-left: 1px solid #dddddd;\n  border-right: 1px solid #dddddd;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-comment,\n.code-view.yne-code-theme-vs .yne-token.yne-prolog,\n.code-view.yne-code-theme-vs .yne-token.yne-doctype,\n.code-view.yne-code-theme-vs .yne-token.yne-cdata {\n  color: #008000;\n  font-style: italic;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-string {\n  color: #A31515;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-punctuation,\n.code-view.yne-code-theme-vs .yne-token.yne-operator {\n  color: #393A34;\n  /* no highlight */\n}\n.code-view.yne-code-theme-vs .yne-token.yne-url,\n.code-view.yne-code-theme-vs .yne-token.yne-symbol,\n.code-view.yne-code-theme-vs .yne-token.yne-number,\n.code-view.yne-code-theme-vs .yne-token.yne-boolean,\n.code-view.yne-code-theme-vs .yne-token.yne-variable,\n.code-view.yne-code-theme-vs .yne-token.yne-constant,\n.code-view.yne-code-theme-vs .yne-token.yne-inserted {\n  color: #36acaa;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-function {\n  color: #00009f;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-deleted,\n.code-view.yne-code-theme-vs .yne-token.yne-tag {\n  color: #9a050f;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-selector,\n.code-view.yne-code-theme-vs .yne-token.yne-keyword {\n  color: #00009f;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-important,\n.code-view.yne-code-theme-vs .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-class-name,\n.code-view.yne-code-theme-vs .yne-token.yne-property {\n  color: #2B91AF;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-tag,\n.code-view.yne-code-theme-vs .yne-token.yne-selector {\n  color: #800000;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-attr-name,\n.code-view.yne-code-theme-vs .yne-token.yne-property,\n.code-view.yne-code-theme-vs .yne-token.yne-regex,\n.code-view.yne-code-theme-vs .yne-token.yne-entity {\n  color: #ff0000;\n}\n.platform-pc .code-view {\n  width: calc(100vw - 60px);\n}\n.page-A4 .code-view,\n.read-mode .code-view {\n  width: 622px;\n}\n.page-A4 .code-view pre,\n.read-mode .code-view pre {\n  min-width: 605px;\n}\n.share .code-view {\n  width: 600px;\n}\n.share .code-view .para-text pre {\n  min-width: 590px;\n}\n.code-view .para-text.selectAll pre {\n  border-color: #4C98EF;\n}\n.combo-box-code-language .combo-menu-wrapper .combo-menu.combo-menu-code-language {\n  max-height: 300px;\n  overflow-y: scroll;\n}\n.code-view {\n  width: calc(100vw - 68px);\n  white-space: pre;\n  overflow-x: auto;\n  overflow-y: hidden;\n  counter-reset: lineNumber;\n  margin: 0 20px;\n}\n.code-view .para-text {\n  cursor: pointer;\n  margin: 0 auto;\n  padding: .5em .2em 0 .2em;\n  width: max-content;\n}\n.code-view .page-break-placeholder {\n  user-select: none;\n}\n.code-view pre {\n  counter-increment: lineNumber;\n  padding: .25em 0;\n  margin: 0;\n  min-width: calc(100vw - 77px);\n  cursor: auto;\n}\n.code-view pre:before {\n  content: counter(lineNumber);\n  width: 36px;\n  padding: 0 1em;\n  font-size: 12px;\n  color: grey;\n  user-select: none;\n}\n.note-view-wrapper .block-view.collab-editing-view.code-view {\n  margin: 0 20px;\n  padding-left: 0;\n}\n.note-view-wrapper .block-view.collab-editing-view.code-view {\n  pointer-events: initial;\n}\n",""])},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(37),o=n(0);return t.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onEditingStateChange:function(e){o.has(e,this.name)&&this.setState(e[this.name])},onClick:function(){var e={};e[this.name]=!this.state,this.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:e}),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(21),o=n(6),i=n(0),r=n(7),a=n(109),s=["shift","alt","ctrl","meta"],l={return:"enter",escape:"esc",plus:"+"},c={mod:r.IS_MAC?"meta":"ctrl",option:"alt",command:"meta"};return t.extend({initialize:function(e){(e=e||{}).el&&(i.bindAll(this,"_onKeyDown"),this.el=e.el,this._beforeMatch=e.beforeMatch,this._afterMatch=e.afterMatch,this._hasBindEvents=!1)},_bindEvents:function(){this._hasBindEvents||(o(this.el).on("keydown",this._onKeyDown),this._hasBindEvents=!0)},_unbindEvents:function(){this._hasBindEvents&&(o(this.el).off("keydown",this._onKeyDown),this._hasBindEvents=!1)},_prepareForBindKey:function(){this._hasBindEvents||this._bindEvents(),this._keyMap||(this._keyMap={}),this._matchCache||(this._matchCache={})},_formatKey:function(e){e=(e=(e=o.trim(e)).toLowerCase()).replace(/\s+/g,""),i.each(c,function(t,n){e=e.replace(n+"+",t+"+")});var t={},n=e.split(/\+/),r=i.last(n),a=[];return r=l[r]||r,t.key=r,i.each(s,function(n){e.indexOf(n)>-1&&(t[n]=!0,a.push(n))}),a.push(r),t.mark=a.join("-"),t},isEventMatchKey:function(e,t){var n=this._extractEventInfo(e),o=this._formatKey(t);return this._isMatch(n,o)},_extractEventInfo:function(e){var t={},n=[];return i.each(s,function(o){e[o+"Key"]&&(t[o]=!0,n.push(o))}),n.push(e.keyCode),t.keyCode=e.keyCode,t.mark=n.join("-"),t},_isMatch:function(e,t){return!(!t||!event)&&(i.every(s,function(n){return t[n]===e[n]})&&a.isMatch(t.key,e.keyCode))},_onKeyDown:function(e){var t,n,o=this,r=o._keyMap,a=o._extractEventInfo(e),s=a.mark,l=o._matchCache,c=l[s];o._beforeMatch&&o._beforeMatch(e),c||(c=l[s]={eventInfo:a},t={},n=!1,i.each(r,function(e,i){o._isMatch(a,e.keyInfo)&&(t[i]=e,n=!0)}),n&&(c.handlers=t)),i.each(c.handlers,function(t){t.callback.apply(null,[e])}),o._afterMatch&&o._afterMatch(e,n)},bind:function(e,t){var n,o,r=this,a=r._formatKey(e);a&&(r._prepareForBindKey(),o=r._keyMap["key-"+e]={keyInfo:a,callback:t},n=r._matchCache,i.each(n,function(e){if(e&&e.eventInfo){var t,n=e.handlers;n?t=!0:(n={},t=!1),r._isMatch(e.eventInfo,a)&&(n[a.mark]=o,t=!0),t&&(e.handlers=n)}}))},unbind:function(e){var t=this._keyMap,n=this._matchCache,o="key-"+e;t&&t[o]&&delete t[o],i.each(n,function(e){var t=e.handlers;t&&t[o]&&delete t[o]})},unbindAll:function(){this._unbindEvents(),this._keyMap={},this._matchCache={}},clearCache:function(){this._matchCache={}}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(9),a=n(4);return t=o.extend({name:"atom.DeleteCodeText",_textBlock:null,_startLineIndex:null,_startLineCharIndex:null,_endLineIndex:null,_endLineCharIndex:null,_deletedText:null,_inlineStyles:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._textBlock=this.options.block,this.options.startBlockRange.hasOwnProperty("startLineCharIndex")?(this._startLineIndex=this.options.startBlockRange.startLineIndex,this._startLineCharIndex=this.options.startBlockRange.startLineCharIndex):(this._startLineIndex=this.options.endBlockRange.startLineIndex,this._startLineCharIndex=this.options.endBlockRange.startLineCharIndex),this.options.endBlockRange.hasOwnProperty("endLineCharIndex")?(this._endLineIndex=this.options.endBlockRange.endLineIndex,this._endLineCharIndex=this.options.endBlockRange.endLineCharIndex):(this._endLineIndex=this.options.startBlockRange.endLineIndex,this._endLineCharIndex=this.options.startBlockRange.endLineCharIndex),this._inlineStyles=this.options.inlineStyles),t.__super__.initialize.apply(this)},apply:function(){var e=this._textBlock,t=e.sliceText(this._startLineIndex,this._startLineCharIndex,this._endLineIndex,this._endLineCharIndex);return!!t&&(this._deletedText=t,e.deleteText(this._startLineIndex,this._startLineCharIndex,this._endLineIndex,this._endLineCharIndex),!0)},doUnapply:function(){var e=this._deletedText;this._textBlock&&this._deletedText&&this._textBlock.insertText(this._startLineIndex,this._startLineCharIndex,e)},fromCollabJSON:function(){var e=this.options.args,n=e.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),n&&(this._deletedText=r.fromCollabJSON(n.richText),this._textBlock=e.collabProperties.coreEditor.getBlockById(n.blockId),this._start=n.startPosition,this._end=n.endPosition)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._textBlock.getId(),e.richText=this._deletedText.toCollabJSON(),e.startPosition=this._start,e.endPosition=this._end,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(101),n(3),n(73),n(98),n(100),n(53),n(36),n(16),n(83),n(42),n(130)],void 0===(i=function(e,t,n,o,i,r,a,s,l,c,u,d,p){return function(){function e(){}return e.buildBlockFromJSON=function(e,t){var h=null,f=e.type;switch(f){case o.PARAGRAPH:h=c.fromCollabJSON(e);break;case o.IMAGE:h=s.fromJSON(e);break;case o.ATTACHMENT:h=n.fromJSON(e);break;case o.LIST_ITEM:h=l.fromCollabJSON(e);break;case o.TABLE:h=u.fromJSON(e);break;case o.HR:h=a.fromCollabJSON(e);break;case o.HEADING:h=r.fromCollabJSON(e);break;case o.CATALOGUE:h=i.fromCollabJSON(e);break;case o.TODO:h=d.fromCollabJSON(e);break;case o.QUOTE:h=p.fromCollabJSON(e);break;default:throw new Error("unsupported type [ "+f+"] in buildBlockFromJSON")}return h},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(29),r=n(5),a=n(93),s=n(4);return t=i.extend({name:"atom.SetTableCellBlockStyle",_table:null,_rect:null,_type:null,effected:!1,_oldStyles:{},_styles:null,initialize:function(){var e=this.options.args;this._oldStyles={},s.isCollabCommand(e)||(this._table=this.options.table,this._styles=this.options.styles,this._toggle=this.options.toggle,this._rect=this.options.rect,this._type=this.options.type,this._default=this.options.default),this.type===a.TYPES.ALL&&(this._rect=this._rect||{top:0,left:0,width:this._table.getColumnCount(),height:this._table.getRowCount()}),t.__super__.initialize.apply(this)},apply:function(){var e,t,n,i,r,s,l,c,u=this._table,d=this._rect,p=this._styles||{},h=this._toggle,f=!1;if(!d)return this.effected;if(e=d.top+d.height,t=d.left+d.width,h){if(!(r=a.create({block:u,type:a.TYPES.NORMAL,rect:d})))return this.effected;if(!(s=r.getAsRectRange()))return this.effected;n=u.getCommonBlockStyle(h,s),p[h]=null!=n?!n:null==this._default||!this._default}for(i=o.keys(p),l=d.top;l<e;l++)for(c=d.left;c<t;c++)this._oldStyles[l+"-"+c]=u.getCellBlockStyles({row:l,col:c,names:i}),u.setCellBlockStyles({row:l,col:c,styles:p})&&(f=!0);return this.effected=f,this.effected},doUnapply:function(){var e,t,n=this._table,o=this._rect,i=o.top+o.height,r=o.left+o.width;for(e=o.top;e<i;e++)for(t=o.left;t<r;t++)n.setCellBlockStyles({row:e,col:t,styles:this._oldStyles[e+"-"+t]})},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._styles=o.styleNameValues,this._oldStyles=o.oldStyleNameValues,this._rect=o.simpleValue1,this._type=o.simpleValue2,this._toggle=o.newBlkId)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.styleNameValues=this._styles||null,e.oldStyleNameValues=this._oldStyles,e.simpleValue1=this._rect,e.simpleValue2=this._type,e.newBlkId=this._toggle||null,e}}),r.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(4);return t=o.extend({name:"atom.SetListItemLevel",_listItems:null,_newLevels:null,_oldLevels:null,initialize:function(){var e=this,n=e.options,o=n.args;a.isCollabCommand(o)||(e._listItems=n.listItems,e._newLevels={},n.newLevel?r.each(e._listItems,function(t,o){e._newLevels[o]=n.newLevel}):n.deltaLevel&&r.each(e._listItems,function(t,o){e._newLevels[o]=t.getLevel()+n.deltaLevel})),t.__super__.initialize.apply(e)},apply:function(){var e=this;return e._oldLevels={},r.each(e._newLevels,function(t,n){e._oldLevels[n]=e._listItems[n].getLevel(),e._listItems[n].setLevel(t)}),!0},doUnapply:function(){var e=this;return r.each(e._oldLevels,function(t,n){e._listItems[n].setLevel(t)}),!0},fromCollabJSON:function(){var e,n=this,o=n.options.args,i=o.collabProperties.cmdJSON;i&&(e=o.collabProperties.coreEditor.getNote(),i.oldLevels&&(n._oldLevels=i.oldLevels),n._newLevels=i.newLevels,n._listItems=[],r.each(i.listItemIds,function(t){n._listItems.push(e.getBlockById(t))})),t.__super__.fromCollabJSON.apply(n)},toCollabJSON:function(){var e=[],n=t.__super__.toCollabJSON.apply(this);return this._oldLevels&&(n.oldLevels=this._oldLevels),n.newLevels=this._newLevels,r.each(this._listItems,function(t){e.push(t.getId())}),n.listItemIds=e,n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(35);return function(e,n){if(!e||!n)return e;var i=o(e),r=i.querySelectorAll("img[data-media-type=attachment]"),a=i.querySelectorAll("img[data-media-type=image]"),s=function(e,n){t.each(e,function(e,t){e&&n.setAttribute(t,e)})};return t.each(r,function(e){var t=e.getAttribute("src"),o=e.getAttribute("path"),i=e.getAttribute("filelength"),r=e.getAttribute("filename"),a={"data-res-id":o,src:n[t],"data-attr-org-src-id":t,"data-attr-org-img-file":n[t],"data-file-name":r,"data-file-length":i,class:"editor-attachment"};s(a,e)}),t.each(a,function(e){var t=e.getAttribute("src"),o={src:n[t],"data-attr-org-src-id":t};s(o,e)}),i.innerHTML}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o=n(18),i=n(12).document,r=o(i)&&o(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){var o=n(12),i=n(63),r=n(104),a=n(310),s=n(31).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var o=n(151)("keys"),i=n(112);e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var o=n(12).document;e.exports=o&&o.documentElement},function(e,t,n){var o=n(18),i=n(10),r=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{(o=n(64)(Function.call,n(57).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:r}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var o=n(18),i=n(215).set;e.exports=function(e,t,n){var r,a=t.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&o(r)&&i&&i(e,r),e}},function(e,t,n){"use strict";var o=n(66),i=n(78);e.exports=function(e){var t=String(i(this)),n="",r=o(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";var o=n(104),i=n(2),r=n(50),a=n(49),s=n(138),l=n(222),c=n(135),u=n(58),d=n(24)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,f,g,y,m){l(n,t,f);var v,b,_,I=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",w="values"==g,C=!1,S=e.prototype,x=S[d]||S["@@iterator"]||g&&S[g],A=x||I(g),T=g?w?I("entries"):A:void 0,N="Array"==t&&S.entries||x;if(N&&(_=u(N.call(new e)))!==Object.prototype&&_.next&&(c(_,k,!0),o||"function"==typeof _[d]||a(_,d,h)),w&&x&&"values"!==x.name&&(C=!0,A=function(){return x.call(this)}),o&&!m||!p&&!C&&S[d]||a(S,d,A),s[t]=A,s[k]=h,g)if(v={values:w?A:I("values"),keys:y?A:I("keys"),entries:T},m)for(b in v)b in S||r(S,b,v[b]);else i(i.P+i.F*(p||C),t,v);return v}},function(e,t,n){"use strict";var o=n(115),i=n(111),r=n(135),a={};n(49)(a,n(24)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=o(a,{next:i(1,n)}),r(e,t+" Iterator")}},function(e,t,n){var o=n(179),i=n(78);e.exports=function(e,t,n){if(o(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var o=n(24)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var o=n(138),i=n(24)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||r[i]===e)}},function(e,t,n){"use strict";var o=n(31),i=n(111);e.exports=function(e,t,n){t in e?o.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var o=n(136),i=n(24)("iterator"),r=n(138);e.exports=n(63).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||r[o(e)]}},function(e,t,n){var o=n(471);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,n){"use strict";var o=n(32),i=n(114),r=n(25);e.exports=function(e){for(var t=o(this),n=r(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:i(l,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var o=n(106),i=n(327),r=n(138),a=n(56);e.exports=n(221)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";var o,i,r=n(154),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,c=(o=/a/,i=/b*/g,a.call(o,"a"),a.call(i,"a"),0!==o.lastIndex||0!==i.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,n,o,i,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),c&&(t=l.lastIndex),o=a.call(l,e),c&&o&&(l.lastIndex=l.global?o.index+o[0].length:t),u&&o&&o.length>1&&s.call(o[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)}),o}),e.exports=l},function(e,t,n){"use strict";var o=n(178)(!0);e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},function(e,t,n){var o,i,r,a=n(64),s=n(317),l=n(214),c=n(210),u=n(12),d=u.process,p=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,g=u.Dispatch,y=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){v.call(e.data)};p&&h||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){s("function"==typeof e?e:Function(e),t)},o(y),y},h=function(e){delete m[e]},"process"==n(65)(d)?o=function(e){d.nextTick(a(v,e,1))}:g&&g.now?o=function(e){g.now(a(v,e,1))}:f?(r=(i=new f).port2,i.port1.onmessage=b,o=a(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):o="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:p,clear:h}},function(e,t,n){var o=n(12),i=n(233).set,r=o.MutationObserver||o.WebKitMutationObserver,a=o.process,s=o.Promise,l="process"==n(65)(a);e.exports=function(){var e,t,n,c=function(){var o,i;for(l&&(o=a.domain)&&o.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,o&&o.enter()};if(l)n=function(){a.nextTick(c)};else if(!r||o.navigator&&o.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(c)}}else n=function(){i.call(o,c)};else{var d=!0,p=document.createTextNode("");new r(c).observe(p,{characterData:!0}),n=function(){p.data=d=!d}}return function(o){var i={fn:o,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var o=n(40);function i(e){var t,n;this.promise=new e(function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o}),this.resolve=o(t),this.reject=o(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var o=n(12),i=n(30),r=n(104),a=n(185),s=n(49),l=n(120),c=n(15),u=n(118),d=n(66),p=n(25),h=n(337),f=n(116).f,g=n(31).f,y=n(229),m=n(135),v="prototype",b="Wrong index!",_=o.ArrayBuffer,I=o.DataView,k=o.Math,w=o.RangeError,C=o.Infinity,S=_,x=k.abs,A=k.pow,T=k.floor,N=k.log,E=k.LN2,D=i?"_b":"buffer",M=i?"_l":"byteLength",O=i?"_o":"byteOffset";function L(e,t,n){var o,i,r,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,c=l>>1,u=23===t?A(2,-24)-A(2,-77):0,d=0,p=e<0||0===e&&1/e<0?1:0;for((e=x(e))!=e||e===C?(i=e!=e?1:0,o=l):(o=T(N(e)/E),e*(r=A(2,-o))<1&&(o--,r*=2),(e+=o+c>=1?u/r:u*A(2,1-c))*r>=2&&(o++,r/=2),o+c>=l?(i=0,o=l):o+c>=1?(i=(e*r-1)*A(2,t),o+=c):(i=e*A(2,c-1)*A(2,t),o=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(o=o<<t|i,s+=t;s>0;a[d++]=255&o,o/=256,s-=8);return a[--d]|=128*p,a}function B(e,t,n){var o,i=8*n-t-1,r=(1<<i)-1,a=r>>1,s=i-7,l=n-1,c=e[l--],u=127&c;for(c>>=7;s>0;u=256*u+e[l],l--,s-=8);for(o=u&(1<<-s)-1,u>>=-s,s+=t;s>0;o=256*o+e[l],l--,s-=8);if(0===u)u=1-a;else{if(u===r)return o?NaN:c?-C:C;o+=A(2,t),u-=a}return(c?-1:1)*o*A(2,u-t)}function R(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function P(e){return[255&e]}function j(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return L(e,52,8)}function H(e){return L(e,23,4)}function G(e,t,n){g(e[v],t,{get:function(){return this[n]}})}function V(e,t,n,o){var i=h(+n);if(i+t>e[M])throw w(b);var r=e[D]._b,a=i+e[O],s=r.slice(a,a+t);return o?s:s.reverse()}function U(e,t,n,o,i,r){var a=h(+n);if(a+t>e[M])throw w(b);for(var s=e[D]._b,l=a+e[O],c=o(+i),u=0;u<t;u++)s[l+u]=c[r?u:t-u-1]}if(a.ABV){if(!c(function(){_(1)})||!c(function(){new _(-1)})||c(function(){return new _,new _(1.5),new _(NaN),"ArrayBuffer"!=_.name})){for(var W,J=(_=function(e){return u(this,_),new S(h(e))})[v]=S[v],Z=f(S),Y=0;Z.length>Y;)(W=Z[Y++])in _||s(_,W,S[W]);r||(J.constructor=_)}var Q=new I(new _(2)),X=I[v].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||l(I[v],{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},!0)}else _=function(e){u(this,_,"ArrayBuffer");var t=h(e);this._b=y.call(new Array(t),0),this[M]=t},I=function(e,t,n){u(this,I,"DataView"),u(e,_,"DataView");var o=e[M],i=d(t);if(i<0||i>o)throw w("Wrong offset!");if(i+(n=void 0===n?o-i:p(n))>o)throw w("Wrong length!");this[D]=e,this[O]=i,this[M]=n},i&&(G(_,"byteLength","_l"),G(I,"buffer","_b"),G(I,"byteLength","_l"),G(I,"byteOffset","_o")),l(I[v],{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return R(V(this,4,e,arguments[1]))},getUint32:function(e){return R(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return B(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return B(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){U(this,1,e,P,t)},setUint8:function(e,t){U(this,1,e,P,t)},setInt16:function(e,t){U(this,2,e,j,t,arguments[2])},setUint16:function(e,t){U(this,2,e,j,t,arguments[2])},setInt32:function(e,t){U(this,4,e,F,t,arguments[2])},setUint32:function(e,t){U(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){U(this,4,e,H,t,arguments[2])},setFloat64:function(e,t){U(this,8,e,z,t,arguments[2])}});m(_,"ArrayBuffer"),m(I,"DataView"),s(I[v],a.VIEW,!0),t.ArrayBuffer=_,t.DataView=I},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHdpZHRoPSIyNTYiIGhlaWdodD0iMjQ0IiB2aWV3Qm94PSIwIDAgMjU2IDI0NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLWFsaWduX2NlbnRlciIgeD0iMTM2IiB5PSIxNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNNS41ODMgN0gxMlY2SDV2MWguNTgzek01LjU4MyAxMUgxMnYtMUg1djFoLjU4M3pNNS4zMTggMTVIMTJ2LTFINXYxaC4zMTh6TTIuNTkgMTNIMTV2LTFIMnYxaC41OXpNMi41OSA5SDE1VjhIMnYxaC41OXpNNS41ODMgM0gxMlYySDV2MWguNTgzek0yLjU5IDVIMTVWNEgydjFoLjU5eiIvPjwvZz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLWFsaWduX2p1c3RpZnkiIHg9IjE1OCIgeT0iMTQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgZmlsbD0iIzUyNUM2RiI+PHBhdGggZD0iTTMuMDgzIDlIMTVWOEgydjFoMS4wODN6TTMuMDgzIDEzSDE1di0xSDJ2MWgxLjA4M3pNMi41OSAxNUgxNXYtMUgydjFoLjU5ek0yLjU5IDExSDE1di0xSDJ2MWguNTl6TTIuNTkgN0gxNVY2SDJ2MWguNTl6TTMuMDgzIDVIMTVWNEgydjFoMS4wODN6TTIuNTkgM0gxNVYySDJ2MWguNTl6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tYWxpZ25fbGVmdCIgeD0iMTkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgZmlsbD0iIzUyNUM2RiI+PHBhdGggZD0iTTIuNTgzIDlIOVY4SDJ2MWguNTgzek0yLjU4MyAxM0g5di0xSDJ2MWguNTgzek0yLjU5IDE1SDE1di0xSDJ2MWguNTl6TTIuNTkgMTFIMTV2LTFIMnYxaC41OXpNMi41OSA3SDE1VjZIMnYxaC41OXpNMi41ODMgNUg5VjRIMnYxaC41ODN6TTIuNTkgM0gxNVYySDJ2MWguNTl6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tYWxpZ25fcmlnaHQiIHg9IjE5MCIgeT0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNOC41ODMgOUgxNVY4SDh2MWguNTgzek04LjU4MyAxM0gxNXYtMUg4djFoLjU4M3pNMi41OSAxNUgxNXYtMUgydjFoLjU5ek0yLjU5IDExSDE1di0xSDJ2MWguNTl6TTIuNTkgN0gxNVY2SDJ2MWguNTl6TTguNTgzIDVIMTVWNEg4djFoLjU4M3pNMi41OSAzSDE1VjJIMnYxaC41OXoiLz48L2c+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1hdHRhY2htZW50IiB4PSIxOTAiIHk9IjQ0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTMuMzYzIDE1LjM2NGwtLjAwNi0uMDA1YTMuMDkgMy4wOSAwIDAgMS0uMzc0LTQuMzRsNS4yNDQtNi4yNWMxLjUxMi0xLjgwMiA0LjE2MS0yLjA3OSA1LjkwNS0uNjE1IDEuNzI0IDEuNDQ2IDEuODk2IDQuMDkuMzg0IDUuODkxbC0zLjgyIDQuNTUyYS40OC40OCAwIDEgMS0uNzM3LS42MTlsMy44Mi00LjU1MWMxLjE5LTEuNDIgMS4wNzQtMy40MTItLjI2Ni00LjUzNi0xLjMzNi0xLjEyMi0zLjM3OC0uOS00LjU0OS40OTZsLTUuMjQ0IDYuMjVhMi4xMjYgMi4xMjYgMCAwIDAgLjI1NyAyLjk4NmwuMDA1LjAwNGMuNDM2LjM2Ni45OTIuNTQxIDEuNTY0LjQ5MmEyLjEzIDIuMTMgMCAwIDAgMS40Ni0uNzU3bDUuMjIzLTYuMjI1Yy4xOTktLjIzNy4yOTMtLjUzNi4yNjYtLjg0M2ExLjE0IDEuMTQgMCAwIDAtLjQwNy0uNzgybC0uMDAyLS4wMDJhMS4xNDcgMS4xNDcgMCAwIDAtLjg0My0uMjYyIDEuMTQ1IDEuMTQ1IDAgMCAwLS43ODMuNDFMNi4yNjQgMTEuNjlhLjQ4Mi40ODIgMCAwIDEtLjc0LS42MTZMOS43MjMgNi4wNGEyLjEgMi4xIDAgMCAxIDEuNDM1LS43NTJjLjU2My0uMDUgMS4xMTEuMTIxIDEuNTQ2LjQ4M2wuMDA0LjAwM2MuNDMyLjM2My42OTcuODcyLjc0NiAxLjQzNWEyLjA5OSAyLjA5OSAwIDAgMS0uNDg2IDEuNTQ3TDcuNzQzIDE0Ljk4YTMuMDg2IDMuMDg2IDAgMCAxLTIuMTE1IDEuMDk2IDMuMDg1IDMuMDg1IDAgMCAxLTIuMjY1LS43MTMiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMjQiIHZpZXdCb3g9Ii0yIC0yIDE4IDI0IiBpZD0ic3JjLS1zdmctLWF0dGFjdGhtZW50X2Rvd25sb2FkIiB4PSIxNTYiIHk9IjExNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOCA5VjBINnY5SDJsNSA1Ljg3TDEyIDlIOHptLTggOWgxNHYySDB2LTJ6IiBmaWxsPSIjNTU1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tYXV0b193cmFwIiB4PSIxOTAiIHk9IjY2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzUyNUM2RiIgZD0iTTIgMmgxNHYxSDJ6TTggMTUuMDAxdjFoMXYxaDFWMTJIOXYxLjAwMUg4djFIN3YxaDF6TTIgNmgxNHYxSDJ6TTIgMTBoMTJ2MUgyek0yIDE0aDN2MUgyek0xMCAxNGg0djFoLTR6Ii8+PHBhdGggZmlsbD0iI0JEQzFDOCIgZD0iTTE1IDEwaDF2MWgtMXpNMTUgMTRoMXYxaC0xeiIvPjxwYXRoIGZpbGw9IiM2ODZGN0UiIGQ9Ik0xNCAxMGgxdjFoLTF6Ii8+PHBhdGggZmlsbD0iIzZFNzc4OSIgZD0iTTE0IDE0aDF2MWgtMXoiLz48cGF0aCBmaWxsPSIjNTI1QzZGIiBkPSJNMTUgMTFoMXYxaC0xek0xNSAxMmgxdjFoLTF6TTE1IDEzaDF2MWgtMXoiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLWJvbGQiIHg9IjE5MCIgeT0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNSAxNFYzaDUuMDRjMS4xIDAgMS45MzkuMjU4IDIuNTY0Ljc5LjYwNi41MTIuODcyIDEuMjMuODcyIDIuMTkyIDAgMS40MjctMS4xIDIuMDczLTEuNDE5IDIuMjU3LjQ4OC4xNyAxLjA2NS42ODkgMS4zNSAxLjAzMy4zODUuNDY2LjU1IDEuMDM5LjU1IDEuOCAwIDEuMTItLjMxNCAxLjgyMi0xLjEgMi4zNjgtLjY1Ny40MzctMS42NTQuNTYtMi44MTcuNTZINXoiIGZpbGw9IiM1MjVDNkYiLz48cGF0aCBkPSJNNi41MTcgMTNoMy40MTVjLjc0Mi4wMSAyLjcyNS0uMjI0IDIuNzI1LTIuMDYyQzEyLjY1NyA5LjEwMSAxMC42NyA5IDkuOTMyIDlINi41MTd2NHpNNi41MTcgNy43MDFoMy4xNmMuNjg3LjAwOSAyLjUyMi0uMjA3IDIuNTIyLTEuOTA3UzEwLjM1OSA0IDkuNjc3IDRoLTMuMTZ2My43MDF6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1ib3JkZXJfY29sb3IiIHg9IjE5MCIgeT0iMTEwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE0IDEzSDNWM2g3VjJIMnYxM2gxM3YtMmgtMXYxaDFWN2gtMXY2eiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGZpbGw9IiM1MjVDNkYiIGQ9Ik0yIDEzaDEzdjJIMnoiLz48cGF0aCBmaWxsPSIjQUNCNEM0IiBkPSJNMTQgMmgxdjFoLTF6Ii8+PHBhdGggZmlsbD0iIzUyNUM2RiIgZD0iTTExIDRoM3YxaC0zek0xMCA1aDN2MWgtM3pNOSA2aDN2MUg5ek04IDdoM3YxSDh6TTcgOGgzdjFIN3pNNyA5aDJ2MUg3eiIvPjxwYXRoIGQ9Ik0xNCAzVjJoLTF2MWgtMXYxaDF2MWgxVjRoMVYzaC0xeiIgZmlsbD0iIzUyNUM2RiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNSIgdmlld0JveD0iLTIgLTIgMTcgMTUiIGlkPSJzcmMtLXN2Zy0tY2F0YWxvZ3VlIiB4PSIxMzYiIHk9IjEwMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjNTI1QzZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xIDF2MmgyVjFIMXpNMCAwaDR2NEgwVjB6bTAgN2g0djRIMFY3em0xIDF2MmgyVjhIMXoiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik01IDBoOHYxSDV6TTUgM2g1djFINXpNNSA3aDh2MUg1ek01IDEwaDV2MUg1eiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iLTIgLTIgMjQgMjQiIGlkPSJzcmMtLXN2Zy0tY2F0YWxvZ3VlLXJlZnJlc2giIHg9IjEyMiIgeT0iNzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE1LjkzIDlBNy4wMDIgNy4wMDIgMCAwIDAgMiAxMGE3IDcgMCAwIDAgMTAuNjI0IDUuOTlsMS4wMzggMS43MUE5IDkgMCAxIDEgMTcuOTQ1IDlIMjBsLTMgMy45NjFMMTQgOWgxLjkzeiIgZmlsbD0iIzU5NTk1OSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9Ii0yIC0yIDI0IDI0IiBpZD0ic3JjLS1zdmctLWNhdGFsb2d1ZV9yZW1vdmUiIHg9Ijg4IiB5PSIzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTAuMzY0IDguOTVMNS40MTQgNCA0IDUuNDE0bDQuOTUgNC45NUw0IDE1LjMxNGwxLjQxNCAxLjQxNCA0Ljk1LTQuOTUgNC45NSA0Ljk1IDEuNDE0LTEuNDE0LTQuOTUtNC45NSA0Ljk1LTQuOTVMMTUuMzE0IDRsLTQuOTUgNC45NXoiIGZpbGw9IiM1OTU5NTkiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1jaGVja2VkIiB4PSIxOTAiIHk9IjEzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNiA0bC04Ljg0NyA5LjcxOEwzIDguOTQ4aC42NzJsMy40ODEgMi4wMzFMMTUuMTQ3IDRIMTZ6IiBmaWxsPSIjNTI1QzZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1jbGVhbl9mb3JtYXQiIHg9IjE5MCIgeT0iMTU0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE2LjYwOCAzaC02LjQ5Yy0uMjcyIDAtLjYxNi4xOTEtLjc1NC40MjdMMi4xMiAxNC4xMzdjLS4yNzkuNDc3LS4wNTUuODYzLjUuODYzaDYuNDljLjI3MSAwIC42MTUtLjE5MS43NTItLjQyN2w3LjI0NS0xMC43MWMuMjgtLjQ3Ny4wNTUtLjg2My0uNDk5LS44NjN6IiBmaWxsPSIjQ0JDQkNCIi8+PHBhdGggZD0iTTkuMDMgMTRIMy40NWwzLjM4Mi01aDUuNjAzTDkuMDMgMTR6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1jbGVhbl9mb3JtYXRfYWN0aXZlIiB5PSIxNzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTYuNjA4IDNoLTYuNDljLS4yNzIgMC0uNjE2LjE5MS0uNzU0LjQyN0wyLjEyIDE0LjEzN2MtLjI3OS40NzctLjA1NS44NjMuNS44NjNoNi40OWMuMjcxIDAgLjYxNS0uMTkxLjc1Mi0uNDI3bDcuMjQ1LTEwLjcxYy4yOC0uNDc3LjA1NS0uODYzLS40OTktLjg2M3oiIGZpbGw9IiM1MjVDNkYiLz48cGF0aCBkPSJNOS4wMyAxNEgzLjQ1bDMuMzgyLTVoNS42MDNMOS4wMyAxNHoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+PHN2ZyBjbGFzcz0iYXBpY29uIiB2aWV3Qm94PSItMiAtMiAxMTAyIDEwMjgiIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNyIgaWQ9InNyYy0tc3ZnLS1jb2RlIiB4PSIxMzYiIHk9IjExNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48c3R5bGUvPjwvZGVmcz48cGF0aCBkPSJNMzUyLjU0OSA3OTkuNDUxbC0yOC42IDI4LjZxLTUuNzA0IDUuNzA0LTEzLjE2NSA1LjcwNHQtMTMuMTY2LTUuNzA1TDMxLjMwNSA1NjEuNzM3cS01LjcwNS01LjcwNS01LjcwNS0xMy4xNjZ0NS43MDUtMTMuMTY1bDI2Ni4zMTMtMjY2LjMxM3E1LjcwNS01LjcwNiAxMy4xNjYtNS43MDZ0MTMuMTY2IDUuNzA2bDI4LjU5OSAyOC41OThxNS43MDUgNS43MDYgNS43MDUgMTMuMTY2dC01LjcwNSAxMy4xNjZMMTI4IDU0OC41NyAzNTIuNTQ5IDc3My4xMnE1LjcwNSA1LjcwNSA1LjcwNSAxMy4xNjZ0LTUuNzA1IDEzLjE2NXptMzM3Ljc3My02MDkuNzE4TDQ3Ny4xODQgOTI3LjQ1cS0yLjI2NyA3LjQ2MS04Ljg1IDExLjExOHQtMTMuNDU5IDEuNDYzbC0zNS40LTkuNzI4cS03LjQ2MS0yLjI2Ny0xMS4xMTgtOC44NXQtMS40NjMtMTMuOTdsMjEzLjEzOC03MzcuNzJxMi4yNjctNy40NiA4Ljg1LTExLjExN3QxMy40NTktMS40NjNsMzUuNCA5LjcyOHE3LjQ2MSAyLjI2NyAxMS4xMTggOC44NXQxLjQ2MyAxMy45N3ptMzc1LjM3IDM3Mi4wMDRMNzk5LjM3NyA4MjguMDVxLTUuNzA1IDUuNzA1LTEzLjE2NSA1LjcwNXQtMTMuMTY2LTUuNzA1bC0yOC41OTktMjguNTk5cS01LjcwNS01LjcwNS01LjcwNS0xMy4xNjV0NS43MDUtMTMuMTY2bDIyNC41NDktMjI0LjU0OS0yMjQuNTQ5LTIyNC41NDhxLTUuNzA1LTUuNzA1LTUuNzA1LTEzLjE2NnQ1LjcwNS0xMy4xNjZsMjguNTk5LTI4LjU5OHE1LjcwNS01LjcwNiAxMy4xNjYtNS43MDZ0MTMuMTY1IDUuNzA2bDI2Ni4zMTMgMjY2LjMxM3E1LjcwNiA1LjcwNSA1LjcwNiAxMy4xNjV0LTUuNzA2IDEzLjE2NnoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz48c3ZnIHdpZHRoPSI5IiBoZWlnaHQ9IjciIHZpZXdCb3g9Ii0yIC0yIDkgNyIgaWQ9InNyYy0tc3ZnLS1jb21ib19leHBhbmQiIHg9IjE3NCIgeT0iMTMxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTMgMWgyVjBIMHYxaDItMXYxaDF2MWgxVjJoMVYxSDN6IiBmaWxsPSIjOTA5OEE4Ii8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1leHBvcnQiIHg9IjIyIiB5PSIxNzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1YzZmIj48cGF0aCBkPSJNMTQgOS42NDdsLS4wMDItMi4yOEwxMC42MTYgNEg0Yy4wMDMgMCAwIDExLjAwMSAwIDExLjAwMUM0IDE0Ljk5OCA5IDE1IDkgMTV2MUg0LjAxQzMuNDUxIDE2IDMgMTUuNTUzIDMgMTUuMDAxVjRDMyAzLjQ0NyAzLjQ1NSAzIDQgM2g3LjAyN0wxNSA2Ljk1NHYyLjY5M2gtMXoiLz48cGF0aCBkPSJNNyAxMmg1djJIN3pNMTEgM2w0IDRoLTRWM3pNMTIgMTBWMTZoMXYtLjg1N2gxdi0uODU3aDF2LS44NTdoMXYtLjg1N2gtMXYtLjg1OGgtMXYtLjg1N2gtMVYxMGgtMXoiLz48L2c+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1maXhlZF90b3AiIHg9IjQ0IiB5PSIxNzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjNTI1QzZGIiBkPSJNMyAyaDExdjFIM3pNMTEgOXY2SDZWOWgxbC4wMDQgNSAyLjk5Ni4wMTJWOWgxek05IDZoMVY1SDl2MXpNNyA2aDFWNUg3djF6Ii8+PHBhdGggZD0iTTYgN2gxLjAwMVY1Ljk5OUg2Vjd6TTggNWgxVjRIOHYxeiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik04IDZoMVY1SDh2MXpNOSA3aDFWNkg5djF6TTEwIDhoMVY3aC0xdjF6TTExIDloMVY4aC0xdjF6TTcgN2gxVjZIN3Yxek02IDhoMVY3SDZ2MXpNNSA5aDFWOEg1djF6IiBmaWxsPSIjOTU5REFCIi8+PHBhdGggZD0iTTUgOGgxVjdINXYxek00IDloMVY4SDR2MXpNMyAxMGg0VjlIM3Yxek0xMCA3aDFWNS45OTloLTFWN3pNMTEgOGgxVjdoLTF2MXpNMTIgOWgxVjhoLTF2MXpNMTAgMTBoNFY5aC00djF6IiBmaWxsPSIjNTI1QzZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1mb3JtYXRfcGFpbnRlciIgeD0iNjYiIHk9IjE3OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zIDJ2NWgxMFYySDN6IiBmaWxsPSIjNTI1QzZGIi8+PHBhdGggZD0iTTQgM2g4djNINFYzeiIgZmlsbD0iI0ZGRiIvPjxwYXRoIGQ9Ik00IDZoOFY1SDR2MXoiIGZpbGw9IiNCQUJGQ0EiLz48cGF0aCBkPSJNMTQgNXYzSDh2Mkg3djZoM3YtNkg5VjloNlY1aC0xeiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik04IDExaDF2NEg4di00eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0taHIiIHg9Ijg4IiB5PSIxNzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjNTI1QzZGIiBkPSJNMiA5aDE0djFIMnoiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLWltYWdlIiB4PSIxMTAiIHk9IjE3OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zLjAwNyAzQzIuNDUgMyAyIDMuNDQ5IDIgNHYxMS4wMDNjMCAuNTUuNDUxLjk5OCAxLjAwNy45OThoMTEuOTg2Yy41NTcgMCAxLjAwNy0uNDQ3IDEuMDA3LS45OThWMy45OTlDMTYgMy40NDggMTUuNTQ5IDMgMTQuOTkzIDNIMy4wMDd6IiBmaWxsPSIjNTI1QzZGIi8+PHBhdGggZD0iTTE1IDE1LjAwMkMxNSAxNC45OTggMy4wMDcgMTUgMy4wMDcgMTUgMy4wMDEgMTUgMyAzLjk5OCAzIDMuOTk4IDMgNCAxNC45OTMgNCAxNC45OTMgNCAxNC45OTkgNCAxNSAxNS4wMDMgMTUgMTUuMDAzeiIgZmlsbD0iI0ZGRiIvPjxwYXRoIGQ9Ik0xMy45NzcgMTFhMi44MDcgMi44MDcgMCAwIDEtMS44MzEuNjg3QTIuODMgMi44MyAwIDAgMSA5LjUxIDkuODc2Yy0uMDA2LjAwMi0uMDExLjAwNy0uMDE4LjAwOUEyLjgyNSAyLjgyNSAwIDAgMCA2LjgzMiA4IDIuODMzIDIuODMzIDAgMCAwIDQgMTAuODMzYzAgLjA1Ny4wMTQuMTExLjAxNy4xNjdINHYzaDEwdi0zaC0uMDIzek0xMiA5YTEuNSAxLjUgMCAxIDAtLjAwMS0zLjAwMUExLjUgMS41IDAgMCAwIDEyIDkiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iNTQiIGhlaWdodD0iNjQiIHZpZXdCb3g9Ii0yIC0yIDU0IDY0IiBpZD0ic3JjLS1zdmctLWltYWdlX2Vycm9yIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9IiNERURFREUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTQyLjA5MSA0MS4xNjFsLTUuMDU1IDUuMDUyLTUuMDU2LTUuMDUyLTUuMDU1IDUuMDUyLTUuMDU2LTUuMDUyLTUuMDU2IDUuMDUyLTUuMDU1LTUuMDUyLTUuMDU1IDUuMDUyLTUuMDU2LTUuMDUydjE1LjM0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWg0Mi41YTEuNSAxLjUgMCAwIDAgMS41LTEuNVY0Ni4yMTJsLTUuMDU2LTUuMDUyek0yMS44NyA0Mi41NzVsNC4zNSA0LjM0Ni43MDYuNzA2LjcwNy0uNzA2IDQuMzQ4LTQuMzQ2IDQuMzUgNC4zNDYuNzA2LjcwNi43MDctLjcwNiA0LjM0OC00LjM0NiA0LjA1NiA0LjA1M1Y1Ni41YS41LjUgMCAwIDEtLjUuNWgtNDIuNWEuNS41IDAgMCAxLS41LS41VjQzLjU3NGwzLjM0OSAzLjM0Ny43MDcuNzA2LjcwNy0uNzA2IDQuMzQ4LTQuMzQ2IDQuMzQ5IDQuMzQ2LjcwNi43MDYuNzA3LS43MDYgNC4zNDktNC4zNDZ6Ii8+PHBhdGggZD0iTTQ1LjY0NyAxLjVoLTQyLjVhMS41IDEuNSAwIDAgMC0xLjUgMS41djMzLjM5bDUuMDU1IDUuMDUyIDUuMDU2LTUuMDUyIDUuMDU1IDUuMDUyIDUuMDU2LTUuMDUyIDUuMDU2IDUuMDUyIDUuMDU1LTUuMDUyIDUuMDU1IDUuMDUyIDUuMDU2LTUuMDUyIDUuMDU2IDUuMDUyVjNhMS41IDEuNSAwIDAgMC0xLjUtMS41bTAgMWEuNS41IDAgMCAxIC41LjV2MzYuMDNsLTMuMzQ5LTMuMzQ4LS43MDctLjcwNi0uNzA3LjcwNi00LjM0OSA0LjM0Ni00LjM0OC00LjM0Ni0uNzA3LS43MDYtLjcwNy43MDYtNC4zNDggNC4zNDYtNC4zNS00LjM0Ni0uNzA2LS43MDYtLjcwNy43MDYtNC4zNDkgNC4zNDYtNC4zNDgtNC4zNDYtLjcwNy0uNzA2LS43MDcuNzA2LTQuMzQ5IDQuMzQ2LTQuMDU1LTQuMDUzVjNhLjUuNSAwIDAgMSAuNS0uNWg0Mi41Ii8+PHBhdGggZD0iTTE4LjIxOCAxNS44ODdhMy4xMTIgMy4xMTIgMCAxIDEgMC02LjIyMyAzLjExMiAzLjExMiAwIDAgMSAwIDYuMjIzTTQwLjAyOCAyNy44NzdMMjkuOTMxIDE1Ljc0YTEuMTIgMS4xMiAwIDAgMC0xLjcyMyAwbC02LjY3NSA4LjAyNGExLjEyIDEuMTIgMCAwIDEtMS43MjMgMGwtMi4zNjItMi44NGExLjEyIDEuMTIgMCAwIDAtMS43MjMgMEw5Ljk0IDI3Ljg3N2EuOTEyLjkxMiAwIDAgMCAuNzAxIDEuNDk1aDI4LjY4NmEuOTEyLjkxMiAwIDAgMCAuNzAxLTEuNDk1Ii8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1pbmRlbnQiIHg9IjEzMiIgeT0iMTc4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgZmlsbD0iIzUyNUM2RiI+PHBhdGggZD0iTTkuNDE3IDEySDE0di0xSDl2MWguNDE3ek0yLjU5IDE1SDE1di0xSDJ2MWguNTl6TTkuMjI3IDEwSDE0VjlIOXYxaC4yMjd6TTkuNDE3IDZIMTRWNUg5djFoLjQxN3pNOS40MTcgOEgxNFY3SDl2MWguNDE3ek0yLjU5IDNIMTVWMkgydjFoLjU5ek0zIDZWMTFoMXYtLjk5OWgxdi0xaDF2LTFINXYtMUg0VjZIM3oiLz48L2c+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1pbmxpbmVfaGVpZ2h0IiB4PSIxNTQiIHk9IjE3OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiM1MjVDNkYiPjxwYXRoIGQ9Ik04LjY2NyAxM0gxNnYtMUg4djFoLjY2N3pNMyAydjFIMnYxSDF2MWgydjdIMXYxaDF2MWgxdjFoMXYtMWgxdi0xaDEuMDAxdi0xSDRWNWgyLjAwMVY0SDVWM0g0VjJIM3pNOC42NjcgMTFIMTZ2LTFIOHYxaC42Njd6TTguNjY3IDlIMTZWOEg4djFoLjY2N3pNOC4xODIgMTVIMTJ2LTFIOHYxaC4xODJ6TTguMzY0IDdIMTZWNkg4djFoLjM2NHpNOC42NjcgNUgxNlY0SDh2MWguNjY3ek04LjM2NCAzSDE2VjJIOHYxaC4zNjR6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0taXRhbGljIiB4PSIxNzYiIHk9IjE3OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik04LjIzOSAzbC0uMTg2Ljk5NWgxLjM4NUw3LjY3NSAxMy4wMWgtMS4yMWwtLjE5Mi45OUgxMC4wNDNsLjIxNy0uOTlIOC44NGwxLjc3My05LjAxNWgxLjI1OEwxMi4wODIgM0g4LjIzOXoiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLWxpbmVfdGhyb3VnaCIgeD0iMjEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTEwLjk2NyAzLjgxNmMuNzEyLjU2MyAxLjExMyAxLjQwOCAxLjIxNiAyLjUyaC0xLjJjLS4xMzQtLjc3LS40My0xLjMzNC0uODktMS43MDUtLjQ3NS0uMzg1LTEuMTQxLS41NjMtMi4wMDItLjU2My0uNzg1IDAtMS4zOTMuMTE4LTEuODM3LjM4NS0uNTA0LjI5Ny0uNzU2Ljc0MS0uNzU2IDEuMzUgMCAuNTMzLjI5Ni45NjMuOTAzIDEuMjg5LjI2Ny4xNDguOTIuMzcgMS45NDIuNjY2IDEuMzk0LjQxNiAyLjMxMy43NTcgMi43NTggMS4wMjQuODc0LjUzNCAxLjMyIDEuMjc1IDEuMzIgMi4yMzggMCAuOTItLjM3MiAxLjY2LTEuMTEyIDIuMTk0LS43NDIuNTItMS43MzUuNzg1LTIuOTk1Ljc4NS0xLjI0NiAwLTIuMjIzLS4yNjYtMi45MzUtLjgtLjgzLS42MzctMS4yOS0xLjYwMS0xLjM4LTIuOTA1aDEuMjAyYy4xMDMuOTIuNDMgMS42Ljk2MyAyLjAzLjQ5LjM4NiAxLjIuNTk0IDIuMTUuNTk0Ljg2IDAgMS41NzItLjE2MyAyLjEwNS0uNDkuNTMzLS4zMjYuOC0uNzcuOC0xLjMzNCAwLS42NjctLjM1Ni0xLjE4NS0xLjA1Mi0xLjU1Ni0uMjk3LS4xNzgtMS4wNTMtLjQzLTIuMjM5LS43Ny0xLjI3NS0uMzg2LTIuMDktLjY4My0yLjQzLS44Ni0uODE2LS40NzUtMS4yMTYtMS4xNTgtMS4yMTYtMi4wNDcgMC0uOTE5LjM4NS0xLjY0NSAxLjE3MS0yLjE1QzYuMTQ5IDMuMjM4IDcuMDU0IDMgOC4xNTEgM2MxLjE4NiAwIDIuMTM0LjI2NyAyLjgxNi44MTYiIGZpbGw9IiM1MjVDNkYiLz48cGF0aCBmaWxsPSIjNTI1QzZGIiBkPSJNMiA4aDEzdjFIMnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMyA5aDkuOTgzdi41SDN6Ii8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1saW5rIiB4PSIyMTIiIHk9IjIyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgZmlsbD0iIzUyNUM2RiI+PHBhdGggZD0iTTcuMTI1IDEzLjJINS42QTMuNjA0IDMuNjA0IDAgMCAxIDIgOS42QzIgNy42MTUgMy42MTUgNiA1LjYgNmgyYzEuOTg1IDAgMy42IDEuNjE1IDMuNiAzLjZhLjYuNiAwIDEgMS0xLjIgMGMwLTEuMzIzLTEuMDc3LTIuNC0yLjQtMi40aC0yYTIuNDAzIDIuNDAzIDAgMCAwLTIuNCAyLjRjMCAxLjMyMyAxLjA3NyAyLjQgMi40IDIuNGgxLjUyNWEuNi42IDAgMSAxIDAgMS4yIi8+PHBhdGggZD0iTTEyLjYgMTMuMmgtMkEzLjYwNCAzLjYwNCAwIDAgMSA3IDkuNmEuNi42IDAgMSAxIDEuMiAwYzAgMS4zMjMgMS4wNzcgMi40IDIuNCAyLjRoMmMxLjMyMyAwIDIuNC0xLjA3NyAyLjQtMi40cy0xLjA3Ny0yLjQtMi40LTIuNGgtMS41MjVhLjYuNiAwIDAgMSAwLTEuMkgxMi42YzEuOTg1IDAgMy42IDEuNjE1IDMuNiAzLjZzLTEuNjE1IDMuNi0zLjYgMy42Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tbGlzdF9vbCIgeD0iMjEyIiB5PSI0NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yIDd2MWgxdjFIMnYxaDNWOUg0VjhoMVY3SDJ6TTIgMnYxaDF2MmgxVjJIMnpNMiAxMnYxaDJ2MUgydjFoM3YtM0gyeiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGZpbGw9IiNBOUFFQjciIGQ9Ik0zIDEzaDF2MUgzeiIvPjxwYXRoIGZpbGw9IiM1MjVDNkYiIGQ9Ik03IDhoOHYxSDd6TTcgMTNoOHYxSDd6TTcgM2g4djFIN3oiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLWxpc3RfdWwiIHg9IjIxMiIgeT0iNjYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNMiAxMmgydjJIMnpNMiA3aDJ2Mkgyek0yIDJoMnYySDJ6TTYgM2g5djFINnpNNiA4aDl2MUg2ek02IDEzaDl2MUg2eiIvPjwvZz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTciIHZpZXdCb3g9Ii0yIC0yIDE2IDE3IiBpZD0ic3JjLS1zdmctLW5vcm1hbF9tb2RlIiB4PSIxNzQiIHk9IjExNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMSAxMi4wMDFMMTAuOTk4IDEyQzEwLjk5NiAxMiAxMSAuOTk5IDExIC45OTlMMS4wMDIgMUMxLjAwNCAxIDEgMTIuMDAxIDEgMTIuMDAxek0xLjAwMiAwaDkuOTk2QTEgMSAwIDAgMSAxMiAuOTk5VjEyYzAgLjU1Mi0uNDU2Ljk5OS0xLjAwMi45OTlIMS4wMDJBMSAxIDAgMCAxIDAgMTIuMDAxVjFDMCAuNDQ3LjQ1NiAwIDEuMDAyIDB6TTMuNSAzSDlWMkgzdjFoLjV6bTAgMkg5VjRIM3YxaC41em0wIDJIOVY2SDN2MWguNXptMCAySDlWOEgzdjFoLjV6bTAgMkg5di0xSDN2MWguNXoiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzUyNUM2RiIvPjwvc3ZnPjxzdmcgd2lkdGg9IjE3IiBoZWlnaHQ9IjE3IiB2aWV3Qm94PSItMiAtMiAxNyAxNyIgaWQ9InNyYy0tc3ZnLS1ub3RlX2JhY2tncm91bmQiIHg9IjY2IiB5PSIyMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNiAxaDF2MUg2VjF6TTUgMmgxdjFINVYyek00IDNoMXYxSDRWM3pNMyA0aDF2MUgzVjR6TTIgNWgxdjFIMlY1ek0xIDZoMXYxSDFWNnpNMCA3aDF2MUgwVjd6bTQtN2gxdjFINFYwek0zIDFoMXYxSDNWMXpNMiAyaDF2MUgyVjJ6TTEgM2gxdjFIMVYzek0wIDRoMXYxSDBWNHptNC01SDNoMXpNMSAwaDF2MUgxVjB6TTAgMWgxdjFIMFYxem04IDFoMXYxSDhWMnptMS0xaDF2MUg5VjF6bTEtMWgxdjFoLTFWMHpNNyAzaDF2MUg3VjN6TTYgNGgxdjFINlY0ek01IDVoMXYxSDVWNXpNNCA2aDF2MUg0VjZ6TTMgN2gxdjFIM1Y3ek0xIDloMXYxSDFWOXptLTEgMWgxdjFIMHYtMXptNC0xaDF2MUg0Vjl6bTItMmgxdjFINlY3em0xLTFoMXYxSDdWNnptLTQgNGgxdjFIM3YtMXptLTEgMWgxdjFIMnYtMXptNS0yaDF2MUg3Vjl6bS0xIDFoMXYxSDZ2LTF6bS0xIDFoMXYxSDV2LTF6bTQtNGgxdjFIOVY3em0xLTFoMXYxaC0xVjZ6bTEtMWgxdjFoLTFWNXpNOSA0aDF2MUg5VjR6bTEtMWgxdjFoLTFWM3ptMS0xaDF2MWgtMVYyem0wIDdoMXYxaC0xVjl6bS0xIDFoMXYxaC0xdi0xem0tMSAxaDF2MUg5di0xek0yIDhoMXYxSDJWOHoiIGZpbGw9IiNCOUJFQzkiLz48cGF0aCBkPSJNMSAxdjExaDExVjFIMXpNMCAwaDEzdjEzSDBWMHoiIGZpbGw9IiM1MjVDNkYiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGZpbGw9IiM1MjVDNkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTggMHYxMmgxVjB6Ii8+PHBhdGggZmlsbD0iIzUyNUM2RiIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMCA5aDEzVjhIMHoiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLW91dGRlbnQiIHg9IjIxMiIgeT0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNMy40MTcgMTJIOHYtMUgzdjFoLjQxN3pNMi41OSAxNUgxNXYtMUgydjFoLjU5ek0zLjIyNyAxMEg4VjlIM3YxaC4yMjd6TTMuNDE3IDZIOFY1SDN2MWguNDE3ek0zLjQxNyA4SDhWN0gzdjFoLjQxN3pNMi41OSAzSDE1VjJIMnYxaC41OXpNMTQgNlYxMWgtMXYtLjk5OWgtMXYtMWgtMXYtMWgxdi0xaDFWNmgxeiIvPjwvZz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTciIHZpZXdCb3g9Ii0yIC0yIDE2IDE3IiBpZD0ic3JjLS1zdmctLXBhZ2VfbW9kZSIgeD0iODMiIHk9IjIyMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMSAuOTk5VjEyTDEuMDAyIDEyaDkuOTk2Yy0uMDAyIDAgLjAwMi0uMDA0LjAwMi4wMDFWMUwxMC45OTggMUgxLjAwMkMxLjAwNCAxIDEgMS4wMDQgMSAuOTk5bS0xIDBDMCAuNDQ3LjQ1NiAwIDEuMDAyIDBoOS45OTZBMSAxIDAgMCAxIDEyIC45OTlWMTJjMCAuNTUyLS40NTYuOTk5LTEuMDAyLjk5OUgxLjAwMkExIDEgMCAwIDEgMCAxMi4wMDFWMU0zIDN2N2g2VjNNMiAyaDh2OUgyVjJtMi41IDNINFY0aDR2MUg0LjV6bTAgMkg0VjZoNHYxSDQuNXptMCAySDRWOGg0djFINC41eiIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjNTI1QzZGIi8+PC9zdmc+PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9Ii0yIC0yIDIwIDIwIiBpZD0ic3JjLS1zdmctLXF1b3RlIiB4PSIxMDIiIHk9IjY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9IiM1MjVDNkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTMgOGg0djRIM3pNOSA4aDR2NEg5ek0zIDVoMXYzSDN6TTQgNGgydjFINHoiLz48Zz48cGF0aCBkPSJNOSA1aDF2M0g5ek0xMCA0aDJ2MWgtMnoiLz48L2c+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1yZWFkX21vZGUiIHg9IjIxMiIgeT0iMTEwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik00IDMuOTk5VjE1TDQuMDAyIDE1aDkuOTk2Yy0uMDAyIDAgLjAwMi0uMDA0LjAwMi4wMDFWNEwxMy45OTggNEg0LjAwMkM0LjAwNCA0IDQgNC4wMDQgNCAzLjk5OW0tMSAwQzMgMy40NDcgMy40NTYgMyA0LjAwMiAzaDkuOTk2QTEgMSAwIDAgMSAxNSAzLjk5OVYxNWMwIC41NTItLjQ1Ni45OTktMS4wMDIuOTk5SDQuMDAyQTEgMSAwIDAgMSAzIDE1LjAwMVY0TTYgNnY3aDZWNk01IDVoOHY5SDVWNW0yLjUgM0gxMVY3SDd2MWguNXptMCAySDExVjlIN3YxaC41em0wIDJIMTF2LTFIN3YxaC41eiIgZmlsbD0iIzUyNWM2ZiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXJlZG8iIHg9IjIxMiIgeT0iMTMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTguNzQxIDUuNzE0YzIuMjgxIDAgNC4zNDYuOTI1IDUuODQgMi40MkwxNyA1LjcxM3Y3LjI5M0g5Ljc3MWwyLjU0NS0yLjYwN0MxMC44OTUgOS4xODYgOS4wNzUgOC40MjUgNy4wNiA4LjQyNWMtMi40MjEgMC00LjU3IDEuMzY2LTYuMDYgMy4wNDQgMS4xNDgtMy4xODIgNC4xNjUtNS43NTUgNy43NDEtNS43NTV6IiBmaWxsPSIjQ0JDQkNCIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1yZWRvX2FjdGl2ZSIgeD0iMjEyIiB5PSIxNTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNOC43NDEgNS43MTRjMi4yODEgMCA0LjM0Ni45MjUgNS44NCAyLjQyTDE3IDUuNzEzdjcuMjkzSDkuNzcxbDIuNTQ1LTIuNjA3QzEwLjg5NSA5LjE4NiA5LjA3NSA4LjQyNSA3LjA2IDguNDI1Yy0yLjQyMSAwLTQuNTcgMS4zNjYtNi4wNiAzLjA0NCAxLjE0OC0zLjE4MiA0LjE2NS01Ljc1NSA3Ljc0MS01Ljc1NXoiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXJlZmVyZW5jZSIgeD0iMjEyIiB5PSIxNzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzUyNUM2RiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNSAzaDEwdjFINXpNNSA4aDEwdjFINXpNNSAxM2gxMHYxSDV6TTIgMmgxdjEzSDJ6Ii8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS1yZXNpemVfdmlldyIgeT0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMiAyKSI+PHBhdGggZD0iTTguMDAxIDEzaDF2LTFoLTF2MXoiIGZpbGw9IiM1MjVDNkYiLz48cmVjdCBmaWxsPSIjNTI1QzZGIiB5PSI3IiB3aWR0aD0iNiIgaGVpZ2h0PSI2IiByeD0iMSIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xIDhoNHY0SDF6Ii8+PHBhdGggZmlsbD0iIzUyNUM2RiIgZD0iTTUgN2gxdjFINXpNNiA2aDF2MUg2ek03IDVoMXYxSDd6Ii8+PHBhdGggZD0iTTcgM3YxaDF2MWgxdjFoMVYzSDd6TTEwIDEzaDF2LTFoLTF2MXpNMTIuNSAxMi4wMDFIMTJWMTNoMS4wMDF2LS45OTloLS41ek0xMiAxMS4wMDFoMS4wMDF2LTFIMTJ2MXpNMTIgOS4wMDFoMS4wMDFWOEgxMnYxLjAwMXpNMTIgN2gxLjAwMVY2SDEydjF6TTEyIDVoMS4wMDFWNEgxMnYxek0wIDVoMVY0SDB2MXpNMTIgMy4wMDFoMS4wMDF2LTFIMTJ2MXpNMCAzLjAwMWgxdi0xSDB2MXpNMTIgMHYxaDFWMGgtMXpNMTAgMHYxaDFWMGgtMXpNOCAwdjFoMVYwSDh6TTYgMHYxaDFWMEg2ek00IDB2MWgxVjBINHpNMiAwdjFoMVYwSDJ6TTAgMHYxaDFWMEgweiIgZmlsbD0iIzUyNUM2RiIvPjwvZz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXNjcmVlbnNob3QiIHg9IjIyIiB5PSIyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1YzZmIj48cGF0aCBkPSJNNCAzdjJIMnYxaDEwdjZoMVY1SDVWM0g0eiIvPjxwYXRoIGQ9Ik00IDd2N2g4djJoMXYtMmgzdi0xSDVWN0g0eiIvPjwvZz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXNjcmVlbnNob3RfeCIgeD0iNDQiIHk9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00IDd2N2g4djJoMXYtMmgzdi0xSDVWN0g0ek00IDN2MkgydjFoM1YzSDR6IiBmaWxsPSIjNTI1YzZmIi8+PHBhdGggZD0iTTYgNmgxVjVINnYxek04IDZoMVY1SDh2MXpNMTAgNmgxLjAwMVY1SDEwdjF6TTEyIDZoMVY1aC0xdjF6TTEyIDhoMVY2Ljk5OWgtMVY4ek0xMiAxMGgxVjloLTF2MXpNMTIgMTJoMXYtMWgtMXYxeiIgZmlsbD0iIzhjOGY5NCIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tc3luYyIgeD0iNjYiIHk9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMzk4REVFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0yLjAwNCA4Ljc2MmE3IDcgMCAwIDAgMTMuMzEzIDMuMjU4bC0xLjAwNy0uMzA4QTYgNiAwIDAgMSAyLjk1NyA5LjA1M2wtLjk1My0uMjkxem0xLjA0My0zLjQ0NkE3IDcgMCAwIDEgMTUuOTggOC40NThsLTEuMDg2LS4zMzJBNi4wMDEgNi4wMDEgMCAwIDAgNC4wMDYgNS42MWwtLjk2LS4yOTR6Ii8+PHBhdGggZD0iTTEgOS4wODRoM0wyLjUgN3pNMTQgOGgzbC0xLjUgMi4wODR6Ii8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS10YWJsZSIgeD0iODgiIHk9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zLjAwNyAzQzIuNDUgMyAyIDMuNDQ5IDIgNHYxMS4wMDNjMCAuNTUuNDUxLjk5OCAxLjAwNy45OThoMTEuOTg2Yy41NTcgMCAxLjAwNy0uNDQ3IDEuMDA3LS45OThWMy45OTlDMTYgMy40NDggMTUuNTQ5IDMgMTQuOTkzIDNIMy4wMDd6IiBmaWxsPSIjNTI1QzZGIi8+PHBhdGggZD0iTTE1IDE1LjAwMkMxNSAxNC45OTggMy4wMDcgMTUgMy4wMDcgMTUgMy4wMDEgMTUgMyAzLjk5OCAzIDMuOTk4IDMgNCAxNC45OTMgNCAxNC45OTMgNCAxNC45OTkgNCAxNSAxNS4wMDMgMTUgMTUuMDAzeiIgZmlsbD0iI0ZGRiIvPjxwYXRoIGQ9Ik0yLjUzOCA4SDE2VjdIMnYxaC41Mzh6TTIuNTM4IDEySDE2di0xSDJ2MWguNTM4eiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik02IDMuNTlWMTZoMVYzSDZ2LjU5ek0xMSAzLjU5VjE2aDFWM2gtMXYuNTl6IiBmaWxsPSIjNTI1QzZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS10YWJsZV9jZWxsX2FsaWduX2JvdHRvbSIgeD0iMTEwIiB5PSIyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNMiAxNWgxM3YtMUgyek04IDEydi0xSDd2LTFINlY5aDJWMmgxdjdoMi4wMDF2MUgxMHYxSDl2MUg4eiIvPjwvZz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXRhYmxlX2NlbGxfYWxpZ25fbWlkIiB4PSIxMzIiIHk9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiM1MjVDNkYiPjxwYXRoIGQ9Ik0yIDhoMTN2MUgyek04IDEwdjFIN3YxSDZ2MWgydjNoMXYtM2gyLjAwMXYtMUgxMHYtMUg5di0xSDh6TTggN1Y2SDdWNUg2VjRoMlYxaDF2M2gyLjAwMXYxSDEwdjFIOXYxSDh6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfY2VsbF9hbGlnbl90b3AiIHg9IjE1NCIgeT0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgZmlsbD0iIzUyNUM2RiI+PHBhdGggZD0iTTIgMmgxM3YxSDJ6TTggNXYxSDd2MUg2djFoMnY3aDFWOGgyLjAwMVY3SDEwVjZIOVY1SDh6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfY2VsbF9ib3JkZXJfYWxsIiB4PSIxNzYiIHk9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiM1MjVDNkYiIGQ9Ik0yIDJoMTN2MTNIMnoiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMyAzaDExdjExSDN6Ii8+PHBhdGggZD0iTTggMi41VjE1aDFWMkg4di41eiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik0yLjUgOUgxNVY4SDJ2MWguNXoiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXRhYmxlX2NlbGxfYm9yZGVyX2xlZnQiIHg9IjE5OCIgeT0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTQgMTR2MWgxdi0xSDR6TTYgMTR2MWgxdi0xSDZ6TTQgMnYxaDFWMkg0ek02IDJ2MWgxVjJINnpNMTIgMnYxaDFWMmgtMXpNMTAgMnYxaDFWMmgtMXpNOCAydjFoMVYySDh6TTEwIDE0djFoMXYtMWgtMXpNMTIgMTR2MWgxdi0xaC0xek0xNCAxNHYxaDF2LTFoLTF6TTggMTR2MWgxdi0xSDh6TTggMTJ2MWgxdi0xSDh6TTggMTB2MWgxdi0xSDh6TTEyIDh2MWgxVjhoLTF6TTEwIDh2MWgxVjhoLTF6TTggNHYxaDFWNEg4ek04IDZ2MWgxVjZIOHpNNCA4djFoMVY4SDR6TTYgOHYxaDFWOEg2ek0xNCAydjFoMVYyaC0xek0xNCAxMnYxaDF2LTFoLTF6TTE0IDEwdjFoMXYtMWgtMXpNMTQgNHYxaDFWNGgtMXpNMTQgNnYxaDFWNmgtMXpNMTQgOHYxaDFWOGgtMXpNOCA4djFoMVY4SDh6IiBmaWxsPSIjOEM4Rjk0Ii8+PHBhdGggZD0iTTIgMnYxM2gxVjJIMnoiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXRhYmxlX2NlbGxfYm9yZGVyX25vbmUiIHg9IjIzNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiM4QzhGOTQiPjxwYXRoIGQ9Ik0xMyAxNHYxaC0xdi0xaDF6TTExIDE0djFoLTF2LTFoMXpNMTUgMTB2MWgtMXYtMWgxeiIvPjxwYXRoIGQ9Ik0xNSAxMHYxaC0xdi0xaDF6TTE1IDE0djFoLTF2LTFoMXpNMTUgMTJ2MWgtMXYtMWgxeiIvPjxwYXRoIGQ9Ik0xNSAxMHYxaC0xdi0xaDF6TTE1IDh2MWgtMVY4aDF6TTE1IDZ2MWgtMVY2aDF6TTE1IDR2MWgtMVY0aDF6TTE1IDJ2MWgtMVYyaDF6TTEzIDJ2MWgtMVYyaDF6TTExIDJ2MWgtMVYyaDF6TTUgMnYxSDRWMmgxek03IDJ2MUg2VjJoMXpNOSAydjFIOFYyaDF6TTcgMTR2MUg2di0xaDF6TTUgMTR2MUg0di0xaDF6TTMgMTR2MUgydi0xaDF6TTkgMTR2MUg4di0xaDF6TTkgMTJ2MUg4di0xaDF6TTkgMTB2MUg4di0xaDF6TTUgOHYxSDRWOGgxek03IDh2MUg2VjhoMXpNOSA0djFIOFY0aDF6TTkgNnYxSDhWNmgxek0xMyA4djFoLTFWOGgxek0xMSA4djFoLTFWOGgxek0zIDJ2MUgyVjJoMXpNMyAxMnYxSDJ2LTFoMXpNMyAxMHYxSDJ2LTFoMXpNMyA0djFIMlY0aDF6TTMgNnYxSDJWNmgxek0zIDh2MUgyVjhoMXpNOSA4djFIOFY4aDF6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfY2VsbF9ib3JkZXJfb3V0IiB4PSIyMzQiIHk9IjIyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTMgMnYxM0gyVjJoMXoiIGZpbGw9IiM1MjVDNkYiLz48cGF0aCBmaWxsPSIjNTI1QzZGIiBkPSJNMTUgMTR2MUgydi0xek0xNSAydjFIMlYyeiIvPjxwYXRoIGQ9Ik0xNSAydjEzaC0xVjJoMXoiIGZpbGw9IiM1MjVDNkYiLz48cGF0aCBkPSJNOSAxMnYxSDh2LTFoMXpNOSAxMHYxSDh2LTFoMXpNNSA4djFINFY4aDF6TTcgOHYxSDZWOGgxek05IDR2MUg4VjRoMXpNOSA2djFIOFY2aDF6TTEzIDh2MWgtMVY4aDF6TTExIDh2MWgtMVY4aDF6TTkgOHYxSDhWOGgxeiIgZmlsbD0iIzhDOEY5NCIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfY2VsbF9ib3JkZXJfcmlnaHQiIHg9IjIzNCIgeT0iNDQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTUgMnYxM2gtMVYyaDF6IiBmaWxsPSIjNTI1QzZGIi8+PHBhdGggZD0iTTEzIDE0djFoLTF2LTFoMXpNMTEgMTR2MWgtMXYtMWgxek0xMyAydjFoLTFWMmgxek0xMSAydjFoLTFWMmgxek01IDJ2MUg0VjJoMXpNNyAydjFINlYyaDF6TTkgMnYxSDhWMmgxek03IDE0djFINnYtMWgxek01IDE0djFINHYtMWgxek0zIDE0djFIMnYtMWgxek05IDE0djFIOHYtMWgxek05IDEydjFIOHYtMWgxek05IDEwdjFIOHYtMWgxek01IDh2MUg0VjhoMXpNNyA4djFINlY4aDF6TTkgNHYxSDhWNGgxek05IDZ2MUg4VjZoMXpNMTMgOHYxaC0xVjhoMXpNMTEgOHYxaC0xVjhoMXpNMyAydjFIMlYyaDF6TTMgMTJ2MUgydi0xaDF6TTMgMTB2MUgydi0xaDF6TTMgNHYxSDJWNGgxek0zIDZ2MUgyVjZoMXpNMyA4djFIMlY4aDF6TTkgOHYxSDhWOGgxeiIgZmlsbD0iIzhDOEY5NCIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfY2VsbF9ib3JkZXJfdG9wIiB4PSIyMzQiIHk9IjY2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE0IDRoMXYxaC0xVjR6TTE0IDZoMXYxaC0xVjZ6TTIgNGgxdjFIMlY0ek0yIDZoMXYxSDJWNnpNMiAxMmgxdjFIMnYtMXpNMiAxMGgxdjFIMnYtMXpNMiA4aDF2MUgyVjh6TTE0IDEwaDF2MWgtMXYtMXpNMTQgMTJoMXYxaC0xdi0xek0xNCAxNGgxdjFoLTF2LTF6TTE0IDhoMXYxaC0xVjh6TTEyIDhoMXYxaC0xVjh6TTEwIDhoMXYxaC0xVjh6TTggMTJoMXYxSDh2LTF6TTggMTBoMXYxSDh2LTF6TTQgOGgxdjFINFY4ek02IDhoMXYxSDZWOHpNOCA0aDF2MUg4VjR6TTggNmgxdjFIOFY2ek0yIDE0aDF2MUgydi0xek0xMiAxNGgxdjFoLTF2LTF6TTEwIDE0aDF2MWgtMXYtMXpNNCAxNGgxdjFINHYtMXpNNiAxNGgxdjFINnYtMXpNOCAxNGgxdjFIOHYtMXpNOCA4aDF2MUg4Vjh6IiBmaWxsPSIjOEM4Rjk0Ii8+PHBhdGggZD0iTTIgMmgxM3YxSDJWMnoiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9Ii0yIC0yIDIyIDIyIiBpZD0ic3JjLS1zdmctLXRhYmxlX2NlbGxfYnJvZGVyX2JvdHRvbSIgeD0iMjM0IiB5PSI4OCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xNCAxM2gxdi0xaC0xdjF6TTE0IDExaDF2LTFoLTF2MXpNMiAxM2gxdi0xSDJ2MXpNMiAxMWgxdi0xSDJ2MXpNMiA1aDFWNEgydjF6TTIgN2gxVjZIMnYxek0yIDloMVY4SDJ2MXpNMTQgN2gxVjZoLTF2MXpNMTQgNWgxVjRoLTF2MXpNMTQgM2gxVjJoLTF2MXpNMTQgOWgxVjhoLTF2MXpNMTIgOWgxVjhoLTF2MXpNMTAgOWgxVjhoLTF2MXpNOCA1aDFWNEg4djF6TTggN2gxVjZIOHYxek00IDloMVY4SDR2MXpNNiA5aDFWOEg2djF6TTggMTNoMXYtMUg4djF6TTggMTFoMXYtMUg4djF6TTIgM2gxVjJIMnYxek0xMiAzaDFWMmgtMXYxek0xMCAzaDFWMmgtMXYxek00IDNoMVYySDR2MXpNNiAzaDFWMkg2djF6TTggM2gxVjJIOHYxek04IDloMVY4SDh2MXoiIGZpbGw9IiM4QzhGOTQiLz48cGF0aCBkPSJNMiAxNWgxM3YtMUgydjF6IiBmaWxsPSIjNTI1QzZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjI0IiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyNCAyMiIgaWQ9InNyYy0tc3ZnLS10YWJsZV9jZWxsX21lcmdlIiB4PSI1NCIgeT0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNOSA4SDhWN0g3VjZINnYySDN2MWgzdjIuMDAxaDFWMTBoMVY5aDFWOHpNMTEgOGgxVjdoMVY2aDF2MmgzdjFoLTN2Mi4wMDFoLTFWMTBoLTFWOWgtMVY4eiIvPjxwYXRoIGQ9Ik05IDQuODgyVjJIMXYxM2g4di0yLjQ5OEg4VjE0SDJWM2g2djEuODgyaDF6TTExIDQuODgyVjJoOHYxM2gtOHYtMi40OThoMVYxNGg2VjNoLTZ2MS44ODJoLTF6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfaGlkZV9ib3JkZXIiIHg9IjIzNCIgeT0iMTEwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTE1IDJ2MTNIMlYyaDEzeiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik0zIDE0aDEwLjk5OEwxNCAzSDMuMDE0TDMgMTR6IiBmaWxsPSIjRkZGIi8+PHBhdGggZmlsbD0iI0I5QkVDOSIgZD0iTTggM2gxdjFIOHpNNyAzaDF2Mkg3ek02IDNoMXYzSDZ6TTUgNGgxdjNINXpNNCA1aDF2M0g0ek0zIDZoMXYzSDN6TTEzIDloMXYzaC0xek0xMiAxMGgxdjNoLTF6TTExIDExaDF2M2gtMXoiLz48cGF0aCBmaWxsPSIjQjlCRUM5IiBkPSJNMTAgMTJoMnYyaC0yeiIvPjxwYXRoIGZpbGw9IiNCOUJFQzkiIGQ9Ik05IDEzaDN2MUg5ek0xMyAzaDF2MmgtMXpNMTIgM2gxdjNoLTF6TTExIDRoMXYzaC0xek0xMCA1aDF2M2gtMXpNOSA2aDF2M0g5ek04IDdoMXYzSDh6TTcgOGgxdjNIN3pNNiA5aDF2M0g2ek01IDEwaDF2M0g1ek00IDExaDF2M0g0ek0zIDEyaDF2MkgzeiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGFibGVfaW5zZXJ0X2RlbGV0ZSIgeD0iMjM0IiB5PSIxMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDIpIj48cGF0aCBkPSJNMy45OTkgM0gxNWMuNTUyIDAgLjk5OS40NTYuOTk5Ljk5NXY4LjAxYzAgLjU1LS40NDcuOTk1LS45OTkuOTk1SDRDMy40NDcgMTMgMyAxMi41NDQgMyAxMi4wMDV2LTguMDFjMC0uNTUuNDQ3LS45OTUuOTk5LS45OTV6IiBmaWxsPSIjNTI1QzZGIi8+PHBhdGggZD0iTTQgMTIuMDA1QzQgMTEuOTk2IDE1LjAwMSAxMiAxNS4wMDEgMTJMMTUgMy45OTVDMTUgNC4wMDQgMy45OTkgNCAzLjk5OSA0TDQgMTIuMDA1eiIgZmlsbD0iI0ZGRiIvPjxwYXRoIGQ9Ik00LjUgMTBIMTZWOUg0djFoLjV6TTQuNSA3SDE2VjZINHYxaC41eiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik0xMSAzLjVWMTNoMVYzaC0xdi41ek03IDMuNVYxM2gxVjNIN3YuNXoiIGZpbGw9IiM1MjVDNkYiLz48cmVjdCBmaWxsPSIjRDVEN0RDIiB3aWR0aD0iMTMiIGhlaWdodD0iNCIgcng9IjEiLz48cGF0aCBkPSJNLjk5OSAwSDEyYy41NTIgMCAuOTk5LjQ0My45OTkgMS4wMXYxLjk4YzAgLjU1OC0uNDQ3IDEuMDEtLjk5OSAxLjAxSDFBLjk5OS45OTkgMCAwIDEgMCAyLjk5VjEuMDFDMCAuNDUxLjQ0NyAwIC45OTkgMHoiIGZpbGw9IiM1MjVDNkYiLz48cGF0aCBkPSJNMSAyLjk5QzEgMy4wMDQuOTk4IDMgLjk5OSAzSDEyQzExLjk5OCAzIDEyIDIuOTk4IDEyIDIuOTlWMS4wMWMwLS4wMTMuMDAyLS4wMS4wMDEtLjAxSDFjLjAwMyAwIC4wMDEuMDAyLjAwMS4wMXYxLjk4eiIgZmlsbD0iI0Q1RDdEQyIvPjxwYXRoIGZpbGw9IiM1MjVDNkYiIGQ9Ik00IDFoMXYySDR6TTggMWgxdjJIOHoiLz48L2c+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiB2aWV3Qm94PSItMiAtMiAyMiAyMiIgaWQ9InNyYy0tc3ZnLS10ZXh0X2JhY2tncm91bmQiIHg9IjIzNCIgeT0iMTU0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTIgMTNoMXYxSDJ6TTMgMTRoM3YxSDN6Ii8+PHBhdGggZD0iTTcuOTk4IDUuMDUzTDkuMDk0IDMuOTcgOS4yMzEgM0gxNHY1LjQxbC0xLjAyOS42MS0xLjQyOSAxLjMzLS45NjcuMTk0LTQuMDI0LTQuMDYyIDEuNDQ3LTEuNDN6IiBmaWxsPSIjRDVEN0RDIi8+PHBhdGggZD0iTTUgMTFoMXYzSDV2LTN6IiBmaWxsPSIjNDE0QzYyIi8+PHBhdGggZD0iTTUgOHY0LjAwMUg0VjEzSDN2MWgzdi0xaDR2LS45OTloLS45OTl2LTFoLTF2LTFIN3YxSDZ2LTFoMVY5SDZWOEg1eiIgZmlsbD0iIzUyNUM2RiIvPjxwYXRoIGQ9Ik05IDloMXYxSDlWOXpNNyA3aDF2MUg3Vjd6TTggOGgxdjFIOFY4ek0xMyA4aDF2MWgtMVY4ek0xMiA5aDF2MWgtMVY5ek0xMCAxMGgydjFoLTJ2LTF6TTYgNmgxdjFINlY2ek03IDVoMXYxSDdWNXpNOCA0aDF2MUg4VjR6TTkgM2gxdjFIOVYzeiIgZmlsbD0iIzQxNEM2MiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdGV4dF9jb2xvciIgeD0iMjM0IiB5PSIxNzYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNNy42NjUgM0wzIDE0aDEuNDYxbDEuMjYyLTMuMDgxaDUuNDQ2bDEuMjYxIDMuMDhoMS40NzdMOS4yNDMgM0g3LjY2NXoiIGZpbGw9IiM0MTRDNjIiLz48cGF0aCBkPSJNOC40MjkgNC4zNTZoLjA2N2wyLjI0MSA1LjVINi4xNTVsMi4yNzQtNS41eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxNyIgdmlld0JveD0iLTIgLTIgMTggMTciIGlkPSJzcmMtLXN2Zy0tdG9kbyIgeD0iMTAyIiB5PSI4NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiM1MjVDNkYiIGQ9Ik0xMS45MzcgMy4yOGwtNS42NDMgNi44My0zLjEyNi00LjQ0NGguNTE2bDIuNjEgMiA0Ljk4Ny00LjM4NnoiLz48cmVjdCB3aWR0aD0iMTMiIGhlaWdodD0iMTIiIHg9Ii41IiB5PSIuNSIgc3Ryb2tlPSIjNTI1QzZGIiByeD0iMSIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdG9nZ2xlX3RhYiIgeD0iMjM0IiB5PSIxOTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsLW9wYWNpdHk9IjAiIGZpbGw9IiNEOEQ4RDgiIGQ9Ik0wIDBoMTh2MThIMHoiLz48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNNSAxMS41MzZMOC41MzYgOGwuNzA3LjcwNy0zLjUzNiAzLjUzNnoiLz48cGF0aCBkPSJNMTEuMzY0IDEyLjI0M0w3LjgyOCA4LjcwNyA4LjUzNiA4bDMuNTM1IDMuNTM2eiIvPjwvZz48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNNSA3LjUzNkw4LjUzNiA0bC43MDcuNzA3LTMuNTM2IDMuNTM2eiIvPjxwYXRoIGQ9Ik0xMS4zNjQgOC4yNDNMNy44MjggNC43MDcgOC41MzYgNGwzLjUzNSAzLjUzNnoiLz48L2c+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjM0IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSItMiAtMiAzNCAzOCIgaWQ9InNyYy0tc3ZnLS10eXBlX2F1ZGlvX2xhcmdlIiB4PSI1NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDJDMCAuODk1Ljg5IDAgMS45OTEgMEgyMmw4IDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGw9IiNCQ0E1RkYiLz48cGF0aCBkPSJNMTYgMjZ2LTIuMDVhOS45OTYgOS45OTYgMCAwIDAgNy42MDItNC44NDdsLTEuNzItMS4wMjJBNy45OTQgNy45OTQgMCAwIDEgMTUgMjJhNy45OTQgNy45OTQgMCAwIDEtNi44NjgtMy44OTVsLTEuNzE2IDEuMDI3QTkuOTk1IDkuOTk1IDAgMCAwIDE0IDIzLjk1VjI2aC0yLjAwM2MtLjU0NCAwLS45OTcuNDQ4LS45OTcgMSAwIC41NTYuNDQ2IDEgLjk5NyAxaDYuMDA2Yy41NDQgMCAuOTk3LS40NDguOTk3LTEgMC0uNTU2LS40NDYtMS0uOTk3LTFIMTZ6bS02LTE1LjAwNWE1LjAwMSA1LjAwMSAwIDAgMSAxMCAwdjQuMDFhNS4wMDEgNS4wMDEgMCAwIDEtMTAgMHYtNC4wMXptMiAwdjQuMDFhMy4wMDEgMy4wMDEgMCAwIDAgNiAwdi00LjAxYTMuMDAxIDMuMDAxIDAgMCAwLTYgMHoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNMSAydjMwYzAgLjU1NS40NDMgMSAuOTkyIDFoMjYuMDE2YS45OTguOTk4IDAgMCAwIC45OTItLjk5N1Y4bC4yOTMuNzA3LTgtOEwyMiAxSDEuOTkxQS45OTQuOTk0IDAgMCAwIDEgMnpNMCAyQzAgLjg5NS44OSAwIDEuOTkxIDBIMjJsOCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6IiBmaWxsLW9wYWNpdHk9Ii4wNSIgZmlsbD0iIzAwMCIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjEiIGZpbGw9IiMwMDAiIGQ9Ik0yMyA3aDYuMDI0TDMwIDguMDM2VjE0eiIvPjxwYXRoIGQ9Ik0yMiAwbDggOC02LjAwMi4wMDNBMS45OTIgMS45OTIgMCAwIDEgMjIgNi4wMDVWMHoiIGZpbGw9IiNEREQyRkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfY29tcHJlc3NfbGFyZ2UiIHg9Ijg4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXRoIGlkPSJja2EiIGQ9Ik0wIDJDMCAuODk1Ljg5IDAgMS45OSAwaDIwLjAwMkwzMCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBmaWxsPSIjRDQ5NjVBIiB4bGluazpocmVmPSIjY2thIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2w3IDF2NmwtNy03eiIgZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMiAwbDggOGgtNi4wMDJBMS45OTMgMS45OTMgMCAwIDEgMjIgNi4wMDJWMHoiIGZpbGw9IiNFNkMxOUUiLz48cGF0aCBkPSJNMTMgOWgydjJoLTJWOXptMiAyaDJ2MmgtMnYtMnptLTIgMmgydjJoLTJ2LTJ6bTIgMmgydjJoLTJ2LTJ6bS0yIDJoMnYyaC0ydi0yem0wIDRoMnY0aC0ydi00em0yLTJoMnYyaC0ydi0yem0wIDRoMnYyaC0ydi0yeiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIzNCIgaGVpZ2h0PSIzOCIgdmlld0JveD0iLTIgLTIgMzQgMzgiIGlkPSJzcmMtLXN2Zy0tdHlwZV9jc3ZfbGFyZ2UiIHk9IjY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTAgMkMwIC44OTUuODkgMCAxLjk5MSAwSDIybDggOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbD0iIzVCQ0I4QSIvPjxwYXRoIGQ9Ik0xIDJ2MzBjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3VjhsLjI5My43MDctOC04TDIyIDFIMS45OTFBLjk5NC45OTQgMCAwIDAgMSAyek0wIDJDMCAuODk1Ljg5IDAgMS45OTEgMEgyMmw4IDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGwtb3BhY2l0eT0iLjA1IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIgZD0iTTIzIDdoNi4wMjRMMzAgOC4wMzZWMTR6Ii8+PHBhdGggZD0iTTIyIDBsOCA4LTYuMDAyLjAwM0ExLjk5MiAxLjk5MiAwIDAgMSAyMiA2LjAwNVYweiIgZmlsbD0iIzlBRTJCOCIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBcmlhbC1Cb2xkTVQsIEFyaWFsIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI0ZGRiI+PHRzcGFuIHg9IjQiIHk9IjIxIj5jc3Y8L3RzcGFuPjwvdGV4dD48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfZXhjZWxfbGFyZ2UiIHg9IjM0IiB5PSI2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDJDMCAuODk1Ljg5MiAwIDEuOTk2IDBIMjIuMDZMMzAgNy45NjJWMzJhMiAyIDAgMCAxLTEuOTkyIDJIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6IiBmaWxsPSIjNEVDNzgxIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2w3IDF2NmwtNy03eiIgZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMiAwbDggOGgtNi4wMDJBMS45OTMgMS45OTMgMCAwIDEgMjIgNi4wMDJWMHoiIGZpbGw9IiM5QUUyQjgiLz48cGF0aCBkPSJNMTcgMTBsLTIgMy0yLTNIOWw0IDYtNSA4aDd2LTJoLTJsMi0zIDIgNWg0bC00LTggNC02aC00eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIzNCIgaGVpZ2h0PSIzOCIgdmlld0JveD0iLTIgLTIgMzQgMzgiIGlkPSJzcmMtLXN2Zy0tdHlwZV9mbGFzaF9sYXJnZSIgeD0iNjgiIHk9IjY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXRoIGlkPSJjbmEiIGQ9Ik0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMjFMMzAgNy45NjJWMzJhMiAyIDAgMCAxLTEuOTkyIDJIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBmaWxsPSIjRkE1RDVEIiB4bGluazpocmVmPSIjY25hIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2w3IDF2NmwtNy03eiIgZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMiAwbDggOGgtNi4wMDJBMS45OTMgMS45OTMgMCAwIDEgMjIgNi4wMDJWMHoiIGZpbGw9IiNGRkE3QTciLz48cGF0aCBkPSJNOC4xOSAyMi40NVYyNWM0LjktLjMyNiA3LjAyLTIuMzc2IDcuOTItNi4wOTFoNC4wMjh2LTIuNTRIMTYuNTVjLjYzNi00LjE2IDQuNDUtNC43NSA0LjQ1LTQuODJWOWMtMS4xNjUuMDgyLTYuMzg3IDEuNjYzLTcuMDM1IDcuMzUzLS42MjMgNS40NTYtMy40NDYgNS45NTktNS43NzUgNi4wOTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjM0IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSItMiAtMiAzNCAzOCIgaWQ9InNyYy0tc3ZnLS10eXBlX2h0bWxfbGFyZ2UiIHg9IjEyMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iY29hIiBkPSJNMCAyQzAgLjg5NS44OSAwIDEuOTk0IDBoMjAuMDM3TDMwIDcuOTYyVjMyYTIgMiAwIDAgMS0xLjk5MiAySDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjx1c2UgZmlsbD0iIzY1QTZGMyIgeGxpbms6aHJlZj0iI2NvYSIvPjxwYXRoIGQ9Ik0xIDMyYzAgLjU1NS40NDMgMSAuOTkyIDFoMjYuMDE2YS45OTguOTk4IDAgMCAwIC45OTItLjk5N3MuMDg5LTIzLjUtLjAxMy0yMy42MDJDMjYuNDI1IDUuODM2IDIxLjczMyAxIDIxLjU5NSAxSDEuOTkyQS45OTUuOTk1IDAgMCAwIDEgMnYzMHpNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBoMjAuMDE2TDMwIDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGwtb3BhY2l0eT0iLjA1IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIzIDdsNyAxdjZsLTctN3oiIGZpbGwtb3BhY2l0eT0iLjEiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjIgMGw4IDhoLTYuMDAyQTEuOTkzIDEuOTkzIDAgMCAxIDIyIDYuMDAyVjB6IiBmaWxsPSIjQTNDQkZBIi8+PHBhdGggZD0iTTIxLjA4MSA5Ljc1NWMtLjY3MS0uNjIxLTEuNTI3LS42OC0yLjI5Ny0uNjg0LS44MjEuMDMyLTEuNjUxLjIyLTIuMzYuNTI2YTcuMDUgNy4wNSAwIDAgMC0xLjE4OC41NGMtLjA5NS4wNDktLjE4LjEyOS0uMjY4LjJhNy43MjggNy43MjggMCAwIDAtLjU4Ni0uMDI3Yy0uODQ5IDAtMS42NTMuMTU3LTIuNDEyLjQ2N2E2LjAyMiA2LjAyMiAwIDAgMC0yIDEuMzMgNi4yOTYgNi4yOTYgMCAwIDAtMS4zNSAyLjAyOCA2LjQ3MyA2LjQ3MyAwIDAgMC0uNDkxIDIuNTRjMCAuMTMuMDIzLjI0MS4wMjguMzY4LS40OTkuOC0uODcgMS41NzUtMS4xMTUgMi4zMy0uMzYyIDEuMTItLjUyIDIuMDItLjQ5NiAyLjgzLjAzNCAxLjE5Ny4zMTYgMi4wODYuODY3IDIuNzIuNTAxLjU2NyAxLjE2My44NTQgMS45NjQuODU0LjE0IDAgLjI3NS0uMDA4LjQtLjAyMy42MjgtLjA3IDEuMTEyLS4yNCAxLjUzMi0uNC43NjktLjMyIDEuMTYxLS42MDQgMS4yMDMtLjYzNmwtLjQ4OC0uOThjLS4wMDQuMDAyLS40MDIuMTQ3LTEuMDk1LjI4Mi0uNDU1LjA5Mi0uNzkzLjEyNi0xLjIuMDk3LS40LS4wMjUtLjc2My0uMTg0LS45MDUtLjM5OS0uMjAxLS4zLS4yODgtLjgwMy0uMjYtMS40OS4wMzMtLjU3LjE4Ni0xLjIyLjQ1Mi0xLjk2LjI0LjQwOS41MTUuNzkxLjg1NSAxLjEyNSAxLjE2IDEuMTQzIDIuNjk0IDEuNzEzIDQuNiAxLjcxMyAxLjM4NSAwIDIuNjEtLjMzNiAzLjY3NC0xLjAxMiAxLjA2NC0uNjc2IDEuNzYtMS43OTcgMi4wODgtMy4xMThoLTMuNTUxYy0uMTc5LjQyLS40NjUuODY4LS44NiAxLjEwMi0uMzk0LjIzMi0uODMuMzUtMS4zMDYuMzUtLjc5IDAtMS40MTEtLjI0OS0xLjg2NC0uNzQ4LS40NTUtLjQ5NS0uNjk3LTEuMTY0LS43MjctMi4wMDNoOC41MzJjMC0uOTc3LS4xMzItMi4zNzItLjM5Mi0zLjIwNGE2LjQ5NSA2LjQ5NSAwIDAgMC0xLjE2LTIuMTljLS4zMTgtLjM5LS43MDEtLjcwNS0xLjExNS0uOTg0bC4yNTgtLjA4NmMuMjA5LS4wOTEuNDY2LS4xNC43MTQtLjE4OGwuMTItLjAyNWMuMTc3LS4wMjIuMzUtLjAzNi41MTItLjAzNi4zNzEgMCAuNTM4LjA3NS41OTUuMTEyLjI0Ny4xNzQuNDI1LjQ5Ni40Ny43MDguMTIyLjY2OC4wOTQgMS4wODYuMDkzIDEuMDlsMS4wNDYuMTk2LjEwMy0uNDI5Yy4wNDMtLjIyNi4xMDYtLjU2OS4wOS0xLjAzNC0uMDI4LS40NC0uMDc4LTEuMTc4LS43MS0xLjg1MnptLTkuMTU2IDUuNjU2Yy4xMi0uNzQ2LjM5NS0xLjI5My44MjYtMS43NDQuNDMyLS40NDkuOTc2LS42NzUgMS42MzEtLjY3NS42MjUgMCAxLjE1LjIzNyAxLjU3NC43MS40MjQuNDc0LjY1MSAxLjAxLjY4IDEuNzA5aC00LjcxeiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIzNCIgaGVpZ2h0PSIzOCIgdmlld0JveD0iLTIgLTIgMzQgMzgiIGlkPSJzcmMtLXN2Zy0tdHlwZV9pbWFnZV9sYXJnZSIgeD0iMTIyIiB5PSIzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iY3BhIiBkPSJNMCAyQzAgLjg5NS44OTIgMCAxLjk5NyAwaDIwLjA2NUwzMCA3Ljk2MlYzMmEyIDIgMCAwIDEtMS45OTIgMkgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIHN0cm9rZS1vcGFjaXR5PSIuMDUiIHN0cm9rZT0iIzAwMCIgZmlsbD0iIzY3Q0NCQSIgeGxpbms6aHJlZj0iI2NwYSIvPjxwYXRoIGQ9Ik0xIDMyYzAgLjU1NS40NDMgMSAuOTkyIDFoMjYuMDE2YS45OTguOTk4IDAgMCAwIC45OTItLjk5N3MuMDg5LTIzLjUtLjAxMy0yMy42MDJDMjYuNDI1IDUuODM2IDIxLjczMyAxIDIxLjU5NSAxSDEuOTkyQS45OTUuOTk1IDAgMCAwIDEgMnYzMHpNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBoMjAuMDE2TDMwIDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGwtb3BhY2l0eT0iLjA1IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIzIDdsNyAxdjdsLTctOHoiIGZpbGwtb3BhY2l0eT0iLjEiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjIgMGw4IDguMDA4aC02LjAwMmExLjk5NCAxLjk5NCAwIDAgMS0xLjk5OC0yVjB6IiBmaWxsPSIjQThFMEQ2Ii8+PHBhdGggZD0iTTEwLjAzIDEzLjk3NWMxLjExNiAwIDIuMDItLjkgMi4wMi0yLjAxIDAtMS4xMS0uOTA0LTIuMDEtMi4wMi0yLjAxcy0yLjAyLjktMi4wMiAyLjAxYzAgMS4xMS45MDQgMi4wMSAyLjAyIDIuMDFtMi42NjQgNy41MmwtMS43NjctMi40NThjLS42NDUtLjg5Ni0xLjY4Ny0uODk1LTIuMzMgMEw2LjMwOCAyMi4yMmMtLjY0NS44OTYtLjI0OCAxLjc4MS44ODQgMS43ODFoNS4xMzdjLjEzOSAwIC4yNjctLjAxLjM4My0uMDMyLjExNi4wMjEuMjQzLjAzMi4zODIuMDMyaDkuNzA3YzEuMTI1IDAgMS41MzUtLjg5NS44OTYtMS44bC00LjU5NC02LjUyMWMtLjYzNy0uOTA0LTEuNjczLS45MDYtMi4zMTIgMGwtNC4wOTggNS44MTYiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfbWRfbGFyZ2UiIHk9IjEwMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBkPSJNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBIMjIuMDFMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgaWQ9ImNxYSIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjx1c2UgZmlsbD0iI0Y3OEEwOSIgeGxpbms6aHJlZj0iI2NxYSIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0yMCAxMGwtNSA1LjQ4M0wxMCAxMEg3djE0aDNWMTMuNzZMMTMuNzQzIDE4aDIuNTQ2TDIwIDEzLjc2VjI0aDNWMTB6Ii8+PHBhdGggZD0iTTEgMnYzMGMwIC41NTUuNDQzIDEgLjk5MiAxaDI2LjAxNmEuOTk4Ljk5OCAwIDAgMCAuOTkyLS45OTdWOGwuMjkyLjcwNy03Ljk5LThMMjIuMDEgMUgxLjk5MkEuOTk1Ljk5NSAwIDAgMCAxIDJ6TTAgMkMwIC44OTUuODkgMCAxLjk5MiAwSDIyLjAxTDMwIDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGwtb3BhY2l0eT0iLjA1IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIgZD0iTTMwIDE0bC04LTdoOHoiLz48cGF0aCBkPSJNMjIgMGw4IDhoLTYuMDAyQTEuOTkzIDEuOTkzIDAgMCAxIDIyIDYuMDAyVjB6IiBmaWxsPSIjRkZCRjgxIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjM0IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSItMiAtMiAzNCAzOCIgaWQ9InNyYy0tc3ZnLS10eXBlX211c2ljX2xhcmdlIiB4PSIzNCIgeT0iMTAyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXRoIGlkPSJjcmEiIGQ9Ik0wIDJDMCAuODk1Ljg5MyAwIDEuOTk4IDBIMjIuMDhMMzAgNy45NjJWMzJhMiAyIDAgMCAxLTEuOTkyIDJIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBmaWxsPSIjRjI4RjY2IiB4bGluazpocmVmPSIjY3JhIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2w3IDF2NmwtNy03eiIgZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMiAwbDggOGgtNi4wMDJBMS45OTMgMS45OTMgMCAwIDEgMjIgNi4wMDJWMHoiIGZpbGw9IiNGREIyOTMiLz48cGF0aCBkPSJNOS45ODIgMTAuODM2Yy0uNTQyLjA5LS45ODIuNjEtLjk4MiAxLjE2MlYyMGMtMS4wODIuMjU4LTIgMS4yMTItMiAyLjM4OWEyLjIzNyAyLjIzNyAwIDAgMCAyLjI0MiAyLjIzIDIuMjMxIDIuMjMxIDAgMCAwIDIuMjI4LTIuMDc3bC4wMTQtLjEzNmMuMDAxLS4wMjYtLjAxNS05LjA5NS0uMDE1LTkuMDk1bDcuMzAzLTEuMTc3djUuMDc1Yy0uMDE2IDAtLjAzLS4wMDQtLjA0Ny0uMDA0YTIuMjM3IDIuMjM3IDAgMCAwLTIuMjQzIDIuMjMxIDIuMjM3IDIuMjM3IDAgMCAwIDIuMjQzIDIuMjMxYzEuMiAwIDIuMTctLjkzOCAyLjI3NS0xLjY2N1Y5Ljk5NmMwLS41NS0uNDQxLS45MjItLjk4Mi0uODMyTDkuOTgyIDEwLjgzNnoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfbm90ZV9sYXJnZSIgeD0iNjgiIHk9IjEwMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iY3NhIiBkPSJNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBoMjAuMDE5TDMwIDcuOTYyVjMyYTIgMiAwIDAgMS0xLjk5MiAySDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjx1c2UgZmlsbD0iIzVDOURGNCIgeGxpbms6aHJlZj0iI2NzYSIvPjxwYXRoIGQ9Ik0xIDMyYzAgLjU1NS40NDMgMSAuOTkyIDFoMjYuMDE2YS45OTguOTk4IDAgMCAwIC45OTItLjk5N3MuMDg5LTIzLjUtLjAxMy0yMy42MDJDMjYuNDI1IDUuODM2IDIxLjczMyAxIDIxLjU5NSAxSDEuOTkyQS45OTUuOTk1IDAgMCAwIDEgMnYzMHpNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBoMjAuMDE2TDMwIDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGwtb3BhY2l0eT0iLjA1IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIzIDdsNyAxdjZsLTctN3oiIGZpbGwtb3BhY2l0eT0iLjEiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjIgMGw4IDhoLTYuMDAyQTEuOTkzIDEuOTkzIDAgMCAxIDIyIDYuMDAyVjB6IiBmaWxsPSIjOURDREZGIi8+PHBhdGggZD0iTTIyLjEzMSAxNS40NmwtNS4wNjItNS4wN2MtLjM4My0uMzg0LS44NjgtLjM4NC0xLjI1MSAwbC02LjM5IDYuNDAyYy0uMjk4LjI2LS40ODcuNjQyLS40ODcgMS4wNjlsLS40MDEgNS4wNTVjMCAuNzgzLjIzMSAxLjAxNSAxLjAxMiAxLjAxNWw1LjE4OC0uNDAyYy4xNzQgMCAuMzQtLjAzMi40OTQtLjA5YS45NzQuOTc0IDAgMCAwIC40MzctLjI1Mmw2LjQ2LTYuNDczYy4zODMtLjM4NC4zODMtLjg3IDAtMS4yNTQiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNMTkuNTkzIDEyLjkxN0w4Ljc3NyAyMy43MzNsLS4wNTctLjA2Yy4xNTEuMTg1LjQxMi4yNTIuODMyLjI1Mmw1LjE4OC0uNDAzYy4xNzQgMCAuMzQtLjAzMS40OTQtLjA4OWEuOTcyLjk3MiAwIDAgMCAuNDM3LS4yNTNsNi40Ni02LjQ3MmMuMTktLjE5MS4yODYtLjQwOC4yODctLjYyNCAwLS4yMTctLjA5Ni0uNDMzLS4yODctLjYyNGwtMi41MzgtMi41NDMiIGZpbGw9IiNEOUVDRkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfb3RoZXJfbGFyZ2UiIHg9IjEwMiIgeT0iMTAyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXRoIGlkPSJjdGEiIGQ9Ik0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMEgyMi4wMUwzMCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBzdHJva2Utb3BhY2l0eT0iLjA1IiBzdHJva2U9IiMwMDAiIGZpbGw9IiNCNUJCQkUiIHhsaW5rOmhyZWY9IiNjdGEiLz48cGF0aCBkPSJNMSAzMmMwIC41NTUuNDQzIDEgLjk5MiAxaDI2LjAxNmEuOTk4Ljk5OCAwIDAgMCAuOTkyLS45OTdzLjA4OS0yMy41LS4wMTMtMjMuNjAyQzI2LjQyNSA1LjgzNiAyMS43MzMgMSAyMS41OTUgMUgxLjk5MkEuOTk1Ljk5NSAwIDAgMCAxIDJ2MzB6bS45OTItMzJoMjAuMDE2TDMwIDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMkMwIC44OTUuODkgMCAxLjk5MiAweiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2w3IDF2NmwtNy03eiIgZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMiAwbDggOGgtNi4wMDJBMS45OTMgMS45OTMgMCAwIDEgMjIgNi4wMDJWMHoiIGZpbGw9IiNFM0U1RTUiLz48cGF0aCBkPSJNMTUuNTI3IDI1aC0xLjA1NGMtLjI2IDAtLjQ3My0uMTk3LS40NzMtLjQ0MnYtMS4xMTZjMC0uMjQ0LjIxMi0uNDQyLjQ3My0uNDQyaDEuMDU0Yy4yNiAwIC40NzMuMTk4LjQ3My40NDJ2MS4xMTZjMCAuMjQ1LS4yMTIuNDQyLS40NzMuNDQyem0tNS41MjUtMTEuNTM1Yy4wNTgtLjcxNC4xNzctMS4zNjQuMzU2LTEuNzgyLjIzLS41MzguNTk5LTEuMDIgMS4xMDYtMS40NDRhNS4wNDEgNS4wNDEgMCAwIDEgMS42OTMtLjkzOEE2LjM0OCA2LjM0OCAwIDAgMSAxNS4xMjcgOWMxLjM5OCAwIDIuNTYzLjM4NCAzLjQ5MSAxLjE1NC45My43NjggMS4zOTYgMS43OTIgMS4zOTYgMy4wNzIgMCAuNTc0LS4xMiAxLjA5NS0uMzU5IDEuNTYyLS4yMzguNDY4LS43NDUgMS4wNS0xLjUyIDEuNzQ2LS43NzYuNjk4LTEuMjkxIDEuMTk0LTEuNTQzIDEuNDlhMi45NTQgMi45NTQgMCAwIDAtLjU3OCAxLjA1NWMtLjA5Mi4yODkuMDIgMS44NzYgMCAyLjMwNi0uMDE0LjMxOC0uMzAyLjU3LS42NDMuNTdoLS43MjZjLS4zNzUgMC0uNjY1LS4zMDEtLjY0Ni0uNjUxLjAyOC0uNTA5LS4wNzctMi4xNjEuMDIzLTIuNTA2LjEzOC0uNDgxLjM0NC0uOS42MjMtMS4yNi4yNzYtLjM2Ljc3NC0uODg3IDEuNDk2LTEuNTg1LjcyMi0uNjk3IDEuMTg3LTEuMjA0IDEuMzk1LTEuNTIuMjA2LS4zMTYuMzEtLjc4OC4zMS0xLjQxM3MtLjIzOC0xLjE3OC0uNzE0LTEuNjZjLS40NzctLjQ4Mi0xLjE2Ny0uNzIyLTIuMDc0LS43MjItMS44NzIgMC0yLjg4OCAxLjA0LTMuMDQ0IDIuOTQ4LS4wMjUuMzEyLS4zMjIuNTQ0LS42NTYuNTQ0aC0uNzExYy0uMzgxIDAtLjY3NC0uMzEtLjY0NS0uNjY1eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIzNCIgaGVpZ2h0PSIzOCIgdmlld0JveD0iLTIgLTIgMzQgMzgiIGlkPSJzcmMtLXN2Zy0tdHlwZV9wZGZfbGFyZ2UiIHg9IjE1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDJDMCAuODk1Ljg5MiAwIDEuOTk3IDBoMjAuMDY3TDMwIDh2MjQuMDAzQTEuOTk4IDEuOTk4IDAgMCAxIDI4LjAwOCAzNEgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiIGZpbGw9IiNGQTVDNDciLz48cGF0aCBkPSJNMSAzMmMwIC41NTUuNDQzIDEgLjk5MiAxaDI2LjAxNmEuOTk4Ljk5OCAwIDAgMCAuOTkyLS45OTdzLjA4OS0yMy41LS4wMTMtMjMuNjAyQzI2LjQyNSA1LjgzNiAyMS43MzMgMSAyMS41OTUgMUgxLjk5MkEuOTk1Ljk5NSAwIDAgMCAxIDJ2MzB6TTAgMkMwIC44OTUuODkgMCAxLjk5MiAwaDIwLjAxNkwzMCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6IiBmaWxsLW9wYWNpdHk9Ii4wNSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMyA3aDZsMSAxdjZsLTctN3oiIGZpbGwtb3BhY2l0eT0iLjEiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjIgMGw4IDhoLTZjLTEuMTA1IDAtMi0uODg2LTItMlYweiIgZmlsbD0iI0ZFOUQ4RiIvPjxwYXRoIGQ9Ik0yMi4zMzcgMTguNjc1YTIuMDgxIDIuMDgxIDAgMCAwLTEuNjQtMS4wNzVjLS43NzUtLjA3NC0xLjg1OS4wMDUtMy4zNzcuMjM3YTEyNS40NiAxMjUuNDYgMCAwIDAtLjYxOC0uNTY2Yy0xLjA0LS45NDItMS45NTgtMi4zMDMtMi4xODMtMi42NDQuMjg2LTIuNjg5LjE1NC0zLjUwOC0uMDE0LTMuOTVDMTQuMTA1IDkuNjI3IDEzLjMzIDkgMTIuNDMyIDljLS42OSAwLTEuMzM0LjM5LTEuNjgyIDEuMDE4LS40MDIuNzI0LS4zNiAxLjYzMy4xMTkgMi40OS4yNTIuNDU0LjU5LjgyMyAxLjAxOCAxLjI5LjMwNS4zMzQuNjc1LjczNyAxLjExMiAxLjI4LS4wNTkuNTA1LS4xMjIuOTktLjE3OCAxLjQxNy0uMTM4IDEuMDU2LS4zMjQgMS44NjctLjUyIDIuNzI2bC0uMDE5LjA4MWMtLjE1Ni4wNjktLjMxNi4xMzctLjQ3OS4yMDYtLjg3LjM2Ny0xLjg1NS43ODQtMi42MjUgMS41MS0xLjQzMyAxLjM0OC0xLjIyMyAyLjQ3OC0xLjA2NiAyLjkwMUM4LjM1OSAyNC41ODYgOC45NjggMjUgOS43IDI1Yy43MzQgMCAxLjQ4MS0uNDI0IDIuMDUtMS4xNjdhMTAuOTY5IDEwLjk2OSAwIDAgMCAxLjc1Mi0zLjQyYy45MDQtLjM2NSAyLjM0Mi0uNzg2IDMuMDItLjkwNWwuMzQyLS4wNTkuMjI3LjIxMmMuNzIuNjcyIDEuNDI3IDEuMzMgMS45NDcgMS43NzQuNDI0LjM2Ljk2LjU1OCAxLjUxLjU1OGguMDAyYy44NjYgMCAxLjYzLS40OSAxLjk0Ny0xLjI0NS4yNjItLjYyOC4xOTktMS40NC0uMTYtMi4wNzN6bS0xMS41NDYgNC4wMDRjLS4yODIuMzY2LS42MTguNTg2LS44OTYuNTg2LS4wNTUgMC0uMTg3LS4wMS0uMjIzLS4xMDgtLjA2NC0uMTcyLjA2My0uNjM3LjY3My0xLjIxMi4zOTQtLjM3Mi45MDItLjY0OSAxLjQzNS0uODk1YTkuMTUgOS4xNSAwIDAgMS0uOTg5IDEuNjI5em0yLjU0NC05LjcxNWE1OC4zODUgNTguMzg1IDAgMCAwLS4yNDUtLjI2OGMtLjM2OS0uNDA0LS42MzYtLjY5NS0uOC0uOTktLjIwNi0uMzctLjI0OC0uNzE4LS4xMTYtLjk1N2EuNDc4LjQ3OCAwIDAgMSAuNDEyLS4yNTVjLjI3NiAwIC41MzMuMjU5LjcwNC43MDguMDM4LjA5OC4xMjYuNDc1LjA0NSAxLjc2MnptLjc0MSA1LjUzOGwuMDMyLS4xMzMtLjAyNC4wMTJjLjExLS41MTguMjEyLTEuMDc1LjI5OC0xLjcwOS4zNDcuNDQxLjc2Ny45MzIgMS4yMjUgMS4zNzYtLjQ2Ny4xMjEtMS4wMTQuMjgyLTEuNTMuNDU0em03LjEwNCAxLjQ3NGMtLjA4My4xOTgtLjMxOC4zMjgtLjU5OS4zMjhhLjg5MS44OTEgMCAwIDEtLjU3Ny0uMjEzIDM5LjAwOCAzOS4wMDggMCAwIDEtMS4xODctMS4wNjhjLjc1My0uMDgyIDEuMzMzLS4xMSAxLjc3NC0uMDYzLjIzMi4wMjEuNC4xMy41MTIuMzMuMTM3LjIzOS4xNDIuNTMyLjA3Ny42ODZ6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjM0IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSItMiAtMiAzNCAzOCIgaWQ9InNyYy0tc3ZnLS10eXBlX3BwdF9sYXJnZSIgeD0iMTU2IiB5PSIzOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iY3ZhIiBkPSJNMCAyQzAgLjg5NS44OSAwIDEuOTkxIDBIMjJsOCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBmaWxsPSIjRTdBNzREIiB4bGluazpocmVmPSIjY3ZhIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2g2bDEgMXY2bC03LTd6IiBmaWxsLW9wYWNpdHk9Ii4xIiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIyIDBsOCA4aC02Yy0xLjEwNSAwLTItLjg4Ni0yLTJWMHoiIGZpbGw9IiNGM0NBOTEiLz48cGF0aCBkPSJNMTEgMTB2MTVoM3YtNWwyLjAxNy4wMjZjMi4xNDEgMCA0LjIxLS44MjMgNC4yMS00Ljk4IDAtMy41MDgtMS4wNTYtNS4wNDgtNC43NTUtNS4wNDZIMTF6bTMgN3YtMy45OThoMS4yMjJjMS42NjYtLjA0NyAxLjc3NS42MTkgMS43NzUgMS45MTQuMDQ0IDEuNDQtLjQ0NiAyLjA4NC0xLjc3NSAyLjA4NEgxNHoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfc2Nhbl9sYXJnZSIgeD0iMTU2IiB5PSI3NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBkPSJNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBIMjIuMDFMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgaWQ9ImN3YSIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjx1c2UgZmlsbD0iIzQzRDlBRCIgeGxpbms6aHJlZj0iI2N3YSIvPjxwYXRoIGQ9Ik05IDExLjk5OWMwLS41NTIuNDU2LS45OTkgMS4wMDItLjk5OWg5Ljk5NmExIDEgMCAwIDEgMS4wMDIuOTk5VjIzYzAgLjU1Mi0uNDU2Ljk5OS0xLjAwMi45OTloLTkuOTk2QTEgMSAwIDAgMSA5IDIzLjAwMVYxMnoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNMTIuNSAxNC41aDVNMTIuNSAxNy41aDVNMTIuNSAyMC41aDUiIHN0cm9rZT0iIzQzRDlBRCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xMCA5VjhINnY0aDFWOXpNMjAgOVY4aDR2NGgtMVY5ek0xMCAyNnYxSDZ2LTRoMXYzek0yMCAyNnYxaDR2LTRoLTF2M3oiLz48cGF0aCBkPSJNMSAydjMwYzAgLjU1NS40NDMgMSAuOTkyIDFoMjYuMDE2YS45OTguOTk4IDAgMCAwIC45OTItLjk5N1Y4bC4yOTIuNzA3LTcuOTktOEwyMi4wMSAxSDEuOTkyQS45OTUuOTk1IDAgMCAwIDEgMnpNMCAyQzAgLjg5NS44OSAwIDEuOTkyIDBIMjIuMDFMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBmaWxsLW9wYWNpdHk9Ii4xIiBmaWxsPSIjMDAwIiBkPSJNMzAgOHY2bC03LjUwNi02LjY3IDYuNTItLjMzeiIvPjxwYXRoIGQ9Ik0yMiAwbDggOGgtNi4wMDJBMS45OTMgMS45OTMgMCAwIDEgMjIgNi4wMDJWMHoiIGZpbGw9IiM4MEVGQ0UiLz48L2c+PC9zdmc+PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzgiIHZpZXdCb3g9Ii0yIC0yIDM0IDM4IiBpZD0ic3JjLS1zdmctLXR5cGVfdGFibGVfbGFyZ2UiIHk9IjE0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iY3hhIiBkPSJNMCAyQzAgLjg5NS44OTIgMCAxLjk5NiAwaDIwLjA1NkwzMCA3Ljk2MlYzMmEyIDIgMCAwIDEtMS45OTIgMkgxLjk5MkMuODkyIDM0IDAgMzMuMTA4IDAgMzJWMnoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIGZpbGw9IiNFMTkyQjUiIHhsaW5rOmhyZWY9IiNjeGEiLz48cGF0aCBkPSJNMSAzMmMwIC41NTUuNDQzIDEgLjk5MiAxaDI2LjAxNmEuOTk4Ljk5OCAwIDAgMCAuOTkyLS45OTdzLjA4OS0yMy41LS4wMTMtMjMuNjAyQzI2LjQyNSA1LjgzNiAyMS43MzMgMSAyMS41OTUgMUgxLjk5MkEuOTk1Ljk5NSAwIDAgMCAxIDJ2MzB6TTAgMkMwIC44OTUuODkgMCAxLjk5MiAwaDIwLjAxNkwzMCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6IiBmaWxsLW9wYWNpdHk9Ii4wNSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMyA3bDcgMXY2bC03LTd6IiBmaWxsLW9wYWNpdHk9Ii4xIiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIyIDBsOCA4aC02LjAwMkExLjk5MyAxLjk5MyAwIDAgMSAyMiA2LjAwMlYweiIgZmlsbD0iI0YzQkRENCIvPjxwYXRoIGQ9Ik0xMyAxNkg5di00aDEydjRoLTZ2LTRoLTJ2NHptMCAySDl2NGgxMnYtNGgtNnY0aC0ydi00em0tNi02Ljk5M0M3IDEwLjQ1IDcuNDQ1IDEwIDggMTBoMTRjLjU1MiAwIDEgLjQ1IDEgMS4wMDd2MTEuOTg2QzIzIDIzLjU1IDIyLjU1NSAyNCAyMiAyNEg4Yy0uNTUyIDAtMS0uNDUtMS0xLjAwN1YxMS4wMDd6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjM0IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSItMiAtMiAzNCAzOCIgaWQ9InNyYy0tc3ZnLS10eXBlX3R4dF9sYXJnZSIgeD0iMzQiIHk9IjE0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iY3lhIiBkPSJNMCAyQzAgLjg5NS44OSAwIDEuOTkxIDBIMjJsOCA4djI0LjAwM0ExLjk5OCAxLjk5OCAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBmaWxsPSIjOUJCMUM1IiB4bGluazpocmVmPSIjY3lhIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2g2bDEgMXY2bC03LTd6IiBmaWxsLW9wYWNpdHk9Ii4xIiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIyIDBsOCA4aC02Yy0xLjEwNSAwLTItLjg4Ni0yLTJWMHoiIGZpbGw9IiNEM0RBRTEiLz48cGF0aCBkPSJNOSAxMy42OTFoMS44NDZzLjAyMy0uNDk5LjkyMy0uODQ1IDEuODQ2LjEzNSAxLjg0Ni4xMzV2Ny45MTNoLTEuODk4VjIzaDYuNTg3di0yLjEwNmgtMS45MnYtNy45MTNzLjc3LS41OTYgMS43OS0uMTM1YzEuMDIuNDYyIDEuMDIuODQ1IDEuMDIuODQ1SDIxVjExSDl2Mi42OTF6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPjxzdmcgd2lkdGg9IjM0IiBoZWlnaHQ9IjM4IiB2aWV3Qm94PSItMiAtMiAzNCAzOCIgaWQ9InNyYy0tc3ZnLS10eXBlX3ZpZGVvX2xhcmdlIiB4PSI2OCIgeT0iMTQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxwYXRoIGlkPSJjemEiIGQ9Ik0wIDJhMiAyIDAgMCAxIDIuMDAzLTJoMjAuMTI2TDMwIDcuOTYyVjMyYTIgMiAwIDAgMS0xLjk5MiAySDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIvPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjx1c2Ugc3Ryb2tlLW9wYWNpdHk9Ii4wNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSIjOTk5QUVGIiB4bGluazpocmVmPSIjY3phIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2w3IDF2N2wtNy04eiIgZmlsbC1vcGFjaXR5PSIuMSIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yMiAwbDggOC4wMDhoLTYuMDAyYTEuOTk0IDEuOTk0IDAgMCAxLTEuOTk4LTJWMHoiIGZpbGw9IiNDMkMzRjgiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMTAuOTkgMTEuMTQybDkuODQ0IDYuMTI1LTkuODQ0IDYuMTM3eiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIzNCIgaGVpZ2h0PSIzOCIgdmlld0JveD0iLTIgLTIgMzQgMzgiIGlkPSJzcmMtLXN2Zy0tdHlwZV93b3JkX2xhcmdlIiB4PSIxMDIiIHk9IjE0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0iZGFhIiBkPSJNMCAyQzAgLjg5NS44ODkgMCAyLjAwOCAwaDE5Ljk2NkwzMCA4LjAyNXYyMy45OEExLjk5NyAxLjk5NyAwIDAgMSAyOC4wMDggMzRIMS45OTJDLjg5MiAzNCAwIDMzLjEwOCAwIDMyVjJ6Ii8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHVzZSBmaWxsPSIjNUJCQUVGIiB4bGluazpocmVmPSIjZGFhIi8+PHBhdGggZD0iTTEgMzJjMCAuNTU1LjQ0MyAxIC45OTIgMWgyNi4wMTZhLjk5OC45OTggMCAwIDAgLjk5Mi0uOTk3cy4wODktMjMuNS0uMDEzLTIzLjYwMkMyNi40MjUgNS44MzYgMjEuNzMzIDEgMjEuNTk1IDFIMS45OTJBLjk5NS45OTUgMCAwIDAgMSAydjMwek0wIDJDMCAuODk1Ljg5IDAgMS45OTIgMGgyMC4wMTZMMzAgOHYyNC4wMDNBMS45OTggMS45OTggMCAwIDEgMjguMDA4IDM0SDEuOTkyQy44OTIgMzQgMCAzMy4xMDggMCAzMlYyeiIgZmlsbC1vcGFjaXR5PSIuMDUiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJNMjMgN2g2bDEgMXY2bC03LTd6IiBmaWxsLW9wYWNpdHk9Ii4xIiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTIyIDBsOCA4aC02Yy0xLjEwNSAwLTItLjg4Ni0yLTJWMHoiIGZpbGw9IiM4QUQ1RkYiLz48cGF0aCBkPSJNMTguNjkgMTFjLS4wOSAwLS4xNjQuMDYzLS4xNjQuMTM5djEuNjY1YzAgLjA3Ni4wNzUuMTM4LjE2NC4xMzhoMS44NjJjLjEwMiAwIC4xOC4wOC4xNjEuMTY2bC0xLjQzIDYuNjA2aC0uNDk3bC0yLjA0OC04LjYwMmMtLjAxNC0uMDY0LS4wODItLjExMi0uMTYxLS4xMTJoLTIuOTU4Yy0uMDc2IDAtLjE0NC4wNDUtLjE2LjExbC0yLjMgOC42MDRoLS40NDdsLTEuNzg4LTguNTk4Yy0uMDEzLS4wNjctLjA4Mi0uMTE2LS4xNjEtLjExNkg2LjE2NWMtLjEwNCAwLS4xODMuMDgtLjE2Mi4xNjdMOS4xNiAyMy44OWMuMDE2LjA2NS4wODMuMTExLjE2Mi4xMTFoMi45NThjLjA3NyAwIC4xNDQtLjA0Ni4xNi0uMTFsMi4zODUtOS4xODljLjAzNy0uMTQ4LjI4OC0uMTQ3LjMyMS4wMDJsMi4xODUgOS4xODVjLjAxNi4wNjUuMDg0LjExMi4xNjIuMTEyaDIuODg1Yy4wNzcgMCAuMTQ1LS4wNDYuMTYtLjExbDMuMjk4LTEyLjcyMmMuMDIyLS4wODYtLjA1Ni0uMTY4LS4xNi0uMTY4SDE4LjY5eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdW5kZXJsaW5lIiB5PSIyMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjNTI1QzZGIj48cGF0aCBkPSJNNCAxNmgxMXYtMUg0djF6TTYuMjY0IDN2NS41NzZjMCAxLjA4LjIzMSAxLjg5Ni43MjQgMi40NTEuNTEuNTcgMS4zMS44NjMgMi40MDQuODYzIDEuMDggMCAxLjg4LS4yOTMgMi40MDUtLjg2My40NzctLjU1NS43MjQtMS4zNzIuNzI0LTIuNDVWM2gxLjI2NHY1LjU2MWMwIDEuNDMzLS4zNyAyLjUyOC0xLjA5NSAzLjI4My0uNzU1Ljc3LTEuODQ5IDEuMTU2LTMuMjk4IDEuMTU2LTEuNDQ4IDAtMi41NDMtLjM4Ni0zLjI4Mi0xLjE0QzUuMzcgMTEuMDkgNSA5Ljk5MyA1IDguNTZ2LTUuNTZoMS4yNjR6Ii8+PC9nPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdW5kbyIgeD0iMjIiIHk9IjIyMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik05LjI1OSA1LjcxNGE4LjIzMyA4LjIzMyAwIDAgMC01Ljg0IDIuNDJMMSA1LjcxM3Y3LjI5M2g3LjIyOUw1LjY4NCAxMC40YzEuNDIxLTEuMjE0IDMuMjQxLTEuOTc1IDUuMjU2LTEuOTc1IDIuNDIxIDAgNC41NyAxLjM2NiA2LjA2IDMuMDQ0LTEuMTQ4LTMuMTgyLTQuMTY1LTUuNzU1LTcuNzQxLTUuNzU1eiIgZmlsbD0iI0NCQ0JDQiIvPjwvZz48L3N2Zz48c3ZnIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgdmlld0JveD0iLTIgLTIgMjIgMjIiIGlkPSJzcmMtLXN2Zy0tdW5kb19hY3RpdmUiIHg9IjQ0IiB5PSIyMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNOS4yNTkgNS43MTRhOC4yMzMgOC4yMzMgMCAwIDAtNS44NCAyLjQyTDEgNS43MTN2Ny4yOTNoNy4yMjlMNS42ODQgMTAuNGMxLjQyMS0xLjIxNCAzLjI0MS0xLjk3NSA1LjI1Ni0xLjk3NSAyLjQyMSAwIDQuNTcgMS4zNjYgNi4wNiAzLjA0NC0xLjE0OC0zLjE4Mi00LjE2NS01Ljc1NS03Ljc0MS01Ljc1NXoiIGZpbGw9IiM1MjVDNkYiLz48L2c+PC9zdmc+PC9zdmc+"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAABOUlEQVR42mL8//8/g/G8DwxIgA2IS4F4DxCfZCABnE0SYGDCIu4MxC1AvAOIVRhIBNgM1IDSAkC8AYj5KTVQE4mtDcSLgJiRWgaCgB8QN1HTQBCoBuIQcgwUA2JhLOpAXl4IxHqkGqiBRy0XEG8EYlFSDNQi4AAFIF4FxKzEGqhJRDA5AHEfNbyMDHKAOIVaLoSBqUBsjc9AXiCWJcFAUJ5fC8QyuAzUYCAdiAPxemgKwDBQk4E8YALEs0kx8C+09JkJxHdxqIkC4iwQg4WAgSDD4oB4GZKYIhC7QLETEItAxYOAeBo+A38BcTQQr0ETvw/14myoDw2ght9DdiE7ECujGRYKxJsIhN8/ID4HxQzIBqoBMTOU/R3q/B3kxBDMQB4o/Q1a/u0lM8bhsXwCmj/dKTEMBAACDAA6Oi9O6DlyWwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAmVBMVEVVVVVVVVVVVVVTU1NSUlJTU1NRUVFQT1BPT09OTk5MS0xKSkpJSEhgYGBdXFxycHFycXKBgYF+fn6VlJWRkJCRkJGQj4+NjY2KiYmhoaGtra2qqqqpqKimpqanpqa0s7O0tLSzs7O9vb2+vb3Hx8fR0NDR0dHZ2dnk4+Pj4+Pi4uLr6+vq6enq6urx8fH4+Pj5+Pj5+fn///++amiSAAAAMnRSTlMlc4CBgoKDhIWGiImLj5KXl5+io6amp6mrq7O1t7i4vr6/xcXN1NTc4eLj6erq8fj4+MKLdMMAAADeSURBVEjH7dTJbsJADAbgxJ7FpqG0bF1IFwoFhiVD/vd/uB7ChUNJ5lap+U8zkj/J9kiTZTklJM/S6onyjBLTgx78JWAdJwE7O0gS8N+Y2wTAD8DWJwC3isCIuwM9PwNfrjMwi3C3RaWX/kS4BUhYSAmUprkBchvwY7zXImLf1Cmgt4HfxBBCMzaLFkCh111dAx7G9+ls+gasHQkukd+B+6zUstUT4pC7AK0+HBG5JVCa9pZYnjD2ROTHwHFgWoc2O6B+ZeKXGkA94ba1slcVQ0RGtDl1eLj+1+jBfwY/i3slL0LG/YYAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAolBMVEVVVVVVVVVVVVVUVFRVVVVTU1NUVFRRUVFSUlJQUFBPTk9MTExNTU1dXV1aWlpraWpramt3dnd1dXWGhoaEg4OEg4SBgYGDgoJ/f3+RkZGdnZ2amZmbmpqbm5uZmJinp6elpaWmpaWwsLC7urrFxMTFxcXPz8/Pz8/b29vZ2dna2trk5OTi4uLs7Ozt7Oz29vb39vb39/f29fX29fb29vb///8BtdBsAAAANXRSTlNYt7jAwMHBwsLDxMXFx8nLy8/R0dPT1NTW1trb29vc3t/f4ubq6u3u8PHx9PX4+Pv7+/z8/FS6DEgAAADfSURBVEjH7dRJU8JAEAXgYC+PNiKK4B4XXBMRjPD+/1/zEC4cJJmbVead5tBfTU931WTZQBMyyNLqVQ8yTUwPevCXgJsnAZ99IAngmReeAOSEfEUCGM7X5Fi6g/i6JOfWGVhRHb3xM7YDALwFoCpQkEVzBUjsB366Oo78m2VTF2TsB3jZlFW5JseujsjJPHa72gUyWt1MZ9M78mmo4Db4Hdj9Mtw9FtyMpAuI5aOpqj2Qt9bekuCcE6gqJuTi0Fofbe9kfS0qVzXJ+kzaxiqIgKmqIZpTh8X1v0YP/jP4AUh9Nkgxwp+OAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAh1BMVEVVVVVTU1NSUlJTU1NRUVFQT1BOTk5PT09OTk5MTExKSkpJSUlycnJycHFycXJwcHCGhoaCgYKRkJGQj4+NjY2Mi4udnZ2qqampqKinpqakpKSzsrK/v7+8u7vLy8vJyMjHx8fT09PR0NDPz8/a2trk4+Pj4+Pi4uLq6ury8vLx8fH4+Pj///8RUosEAAAALHRSTlOAgYKCg4SFhYaHiYqWl5eYm56mp6mqr7a3uLq/xMfKzM3S1NXb4eLj6vDx+I8LeUsAAACxSURBVEjH7ZPJEoMgEEQdRMCY1SRmMzGLcaP///sCVs4Kd955uug3U0RRIBCYgBgjrwAvS+4VUINWPvNxAZyZRyCpNVrpobzUV2BFHspVpvF011b9Trzhrh0X3SI9jtok1YicrCeboWlaWG2JP1MboDUOeb7/WG2nAK9qQcQ2MNpOlVJ9sjcTnZs2iRsyEyB1By5y/hbsC/Rbs6qHrf6K519IlErMGHFhunMKXz0QmOYHEpYPZARp1wIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAmVBMVEVVVVVVVVVVVVVUVFRVVVVTU1NUVFRRUVFSUlJPT09QUFBMTExNTU1raWpramtpaWl6enp4d3iEg4SBgYGDgoKBgICPj4+amZmbm5uXl5elpKSysrKxsLCvrq69vL27urq8u7u8vLzHx8fExMTFxMTPz8/Q0NDb29vZ2dna2dna2trj4+Pi4uLs7Ozt7e329vb19fX29vb///8rOHeJAAAAMnRSTlOevb7AwMHBwsLDw8XFy8vMzc/T1NTV19vb3eDh4uPl5ubm6erq7e3w8fHx9PX4+Pv8/PE+aukAAADGSURBVEjH7dTJEoIwEATQQJgMREXFXdxXXACd//84CXqxLCC5eUhfcnqV7kpVGHM8gziMuZ5RXOYZxgIL/glwAG4EII7BCMj0KU2AGBNNwQDg8UEJ6gMe5jOijtAGsNi2nrT2tYHM+vJA1bPZz+RbOxiVswXKMijqACbp5ZqQmo30CdYAEdIgioZ7NVsL+JuTFAK6VMzWqhTk5ZvJe+XsL8DlnFqgziXRBHkjgDNR1iuWrFT1nWi+Ad+Nua+6+9x+AhZYUJ8XXfYyh6P7eHAAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABAlBMVEVVVVVVVVVVVVVVVVVVVVVTU1NSUlJTU1NRUVFQT1BOTk5PT09OTk5MTExMSktMS0xKSkpJSUlKSUlJSEhtbW1HR0dsa2xra2tqamppZ2hpaGlpaWlmZmZmZmaCgoKAgICBgYGAgIBhYGB+fn59fX17eXmSkpKTk5OSkpKQkJCPj4+ioqKgoKCgn5+gn6Cfn5+enZ2dnZ2cm5uvr6+sq6upqam5uLm3t7e2trbLy8vKysrLysrKysrJycnU1NTU09PU1NTS0tLc3Nzb29va2dna2trj4+Pi4uLj4uLi4eHp6enp6eno6Ojp6Ojp6eno6Ojw8PDv7+/09PT19fX6+vr////xn5ujAAAAVXRSTlMlcnN0gIGCgoOEhYWGh4iIiYqKi4uMjI2Oj4+PkJGTlJSVlpeYm5ycnZ6fpKWmpqeoqaqrr7G1t7jExcXGx8vMzM7S1NXV2tvb3OHi4+Pj5Onq8fH4zYRYuQAAAWJJREFUSMft1FlTwjAQB/Aq2bQhqeCB4gkKIirQiidQUQHPHlJgv/9XMY0vMNMyw6Mj+5BpOvubyf6bqUYWLG0JluD/AoA5ACgQnXFZhmqTC70swiyaBke9PK26qhiJmrcIxxbVKxU9HmwPP4SFTdtuopBbjg0Q2DbYr48BemlybqHT6TgKCLQU4L7PE2ZgBTYDbJZFR5heAtCrVo1NHUngoO3gt+OMgvgj0S9E00IvCLzwQo4pXN/1cCSXp3gAbBMzFub6LyehSwm9uzf5Bj6a6XKnAPEfTkQgWw7x1QSiwomGhjrWE0H2Bm+fr8JwH4gKRwFLxhWf0hrm3jHsHu8Ne7oEnmlEKTE7AUC+j58Pp+sZIQ52DcKCkSMD9trtQQKgb8PD1nisrsbkGoxu9OD7rhsmzABnO9Tg+VpDVtUgYKh7yHm61CrCnOsNqmbe6LD8CSzBnwSri/WnNC21SP+K9gMWPFrvajbpcQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAA3lBMVEVVVVVVVVVVVVVVVVVVVVVVVVVUVFRVVVVTU1NUVFRRUVFSUlJPT09QUFBOTU5PTU5PTk9MTExNTExNTU1LS0tlZWVmZmZlZWVjYWJjYmNhYGBhYWF2dnZeXV10c3R1dHV1dXVzc3NycXGGhoaEhISFhYWDg4OTk5ORkZGSkZGSkZKQkJCRkJCRkZGPjo6fn5+dnJycnJyrqqqpqamoqKi/v7++vb2+vr69vb3Hx8fIyMjS0dLQ0NDa2trZ2dna2dni4uLh4eHi4eHi4uLp6enq6urp6enx8fH5+fn///8EyOYYAAAASXRSTlOSnrm6vb7AwMHBwsLDw8TExMXFxcbGxsfIyMnJysvLy8vMzc3Ozs/S09PT1NTU1dbY2drb3OHi4uPm5unq7O3t8PHx8fT09fj7OSuUwgAAAWBJREFUSMft1FtPwjAYBuBx6gmKQ0FEUeZhKozh2c0xcWWw8f3/P2Q7biBZSXanyd6LJU2+J2nfNjMqdVwg9YrRwIXSMHDBlKAEfxYgdABQgjBlKs1sTH7IwxDto10wnPeJHcdRFEcMq+FTzMAj1LZpPuitf7gLM8eZAZdLBhPKJWBxzDRbGm3upuB7np8BDu4WCKEBiFlsDzisDT43dYDajxO2syUOoaTi0081gEQALReETHIvj8mXYikglcsgHyDWAdOFbvh1mUQEk9e3FjsG3+TXnoXyL46DOYWTqxWELYqzctSh6RjGVAfaz/ASOMlqgHBWTgZcWVd+S0fQXcAqsAbrOVXAJKol5mgA7YeweL/pmJxfnDUlSH3VkueFGkC+1+demqqnEW+eEAmEiGVFS5FozkBve4Sw/kTFJhgRtg0ffQzRgedNVfYeNdpdlj+BEvwjUC02XzOMWpH5qvELML9rtx8tx8AAAAAASUVORK5CYII="},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(3),n(69),n(1)],void 0===(i=function(e,t,n,o,i,r){var a={align:{type:"Enum",possible:{left:!0,right:!0,center:!0,justify:!0},default:"left"},"line-height":{type:"Number",default:1.75},indent:{type:"Number",default:0},"text-indent":{type:"Number",default:0},width:{type:"Number",default:null},float:{type:"Enum",possible:{none:!0,left:!0,right:!0},default:"none"},height:{type:"Number",default:1},color:{type:"String",default:"#999999"},"back-color":{type:"String",default:""},padding:{type:"String",default:""}},s={},l={},c={};return s[o.HR]={width:{type:"Number",default:100},margin:{type:"String",default:"none"}},l[o.PARAGRAPH]=["align","indent","text-indent","line-height","back-color","padding"],l[o.LIST_ITEM]=["align","indent","text-indent","line-height","back-color","padding"],l[o.HEADING]=["align","indent","text-indent","line-height","back-color","padding"],l[o.CATALOGUE]=["align","indent","text-indent","line-height","back-color","padding"],l[o.TODO]=["align","indent","text-indent","line-height","back-color","padding"],l[o.IMAGE]=["align","width","float","height","back-color","padding"],l[o.ATTACHMENT]=["align","float","back-color","padding"],l[o.HR]=["align","width","height","color","back-color","padding","margin"],l[o.TABLE]=["back-color","padding"],l[o.QUOTE]=["line-height","back-color","padding"],l[o.CODE]=["back-color"],n.each(o.getAllBlockTypes(),function(e){l[e]||r.warn("no block style config for block["+e+"]")}),n.each(o.getAllBlockTypes(),function(e){var t={},o=l[e]||[],i=s[e];n.each(o,function(e){i&&i[e]?t[e]=i[e]:a[e]?t[e]=a[e]:r.error("no config for style named ["+e+"]")}),c[e]=t}),r.log("xml block style config",c),i(c)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(59),n(1),n(124),n(26)],void 0===(i=function(e,t,n,o,i,r,a){return function(){function e(e){o(r.checkValid(e)),this.char=e,this.length=e.length,this.styles={}}return e.fromJSON=function(t){if(t&&t.char){var o=new e(t.char);return n.each(t.styles,function(e,t){o.setStyle(t,e)}),o}},e.prototype.clone=function(){var t=new e(this.char);return t.styles=n.clone(this.styles),this.unknownStyles&&(t.unknownStyles=n.clone(this.unknownStyles)),t},e.prototype.getStyle=function(e,t,o){void 0===t&&(t=!0);var r,s=t&&o&&void 0!==o[e]?o[e]:null,l=a.getConfig(e);return o&&o[e]&&!this.styles[e]?r=o[e]:l?null==(r=this.styles[e])?t?null===s?l.default:s:null:(n["is"+l.type](r)||(i.warn("The value `"+r+"` of `"+e+"` is not valid type!"),r=null),t?null==r?null===s?l.default:s:r:r===l.default?l.default:r):null},e.prototype.getStyles=function(e){var t=this,o={},i=a.getAllConfig();return n.each(i,function(n,i){o[i]=t.getStyle(i,!0,e)}),o},e.prototype.getUnknownStyle=function(e){var t=this.unknownStyles;if(t)return t[e]},e.prototype.isLineBreak=function(){return"\r"===this.char||"\n"===this.char},e.prototype.removeStyles=function(){this.styles={}},e.prototype.setStyle=function(e,t,o){var r=this.styles,s=a.getConfig(e);if(s){if(t&&!n["is"+s.type](t))switch(s.type){case"Number":t=Number(t),t=isNaN(t)?s.default:t;break;case"Boolean":t=t+""=="true";break;default:i.warn("The value `"+t+"` of `"+e+"` is not valid type!"),t=null}!t||(s.equalDefault?s.equalDefault(t):t===s.default)?(delete r[e],o&&o[e]&&(r[e]=t)):r[e]=t}else i.warn("The RichText does not support `"+e+"` style!")},e.prototype.setUnknownStyle=function(e,t){a.isSupport(e)?i.warn("The RichText supports `"+e+"` style!"):(this.unknownStyles||(this.unknownStyles={}),this.unknownStyles[e]=t)},e.prototype.toJSON=function(){var e=this,t={char:e.char},o={},i=!1,r=a.getAllConfig();return n.each(r,function(t,n){var r=e.getStyle(n,!1);r&&(o[n]=r,i=!0)}),i&&(t.styles=o),t},e.prototype.toString=function(){return this.char},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(160),n(69),n(38)],void 0===(i=function(e,t,n,o,i){var r="transparent",a="#000000";return o({bold:{key:"b",default:!1,type:"Boolean"},italic:{key:"i",default:!1,type:"Boolean"},underline:{key:"u",default:!1,type:"Boolean"},strike:{key:"s",default:!1,type:"Boolean"},"font-family":{key:"ff",default:n.DEFAULT_FONT,type:"String"},"font-size":{key:"fs",default:14,type:"Number"},color:{key:"cl",default:a,type:"String",equalDefault:function(e){return e===a||i.equals(e,a)}},"back-color":{key:"bc",default:r,type:"String",equalDefault:function(e){return e===r||i.equals(e,r)}},href:{key:"href",default:"",type:"String"}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(92),n(3),n(11)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fromXml=function(e){throw new Error("HandWrite do NOT support fromXml till now")},t.prototype.canDrawedByNative=function(){return!1},t.prototype.clone=function(){return new t({block:this._rangeProps.block})},t.prototype.collapse=function(){},t.prototype.getDataAsJSON=function(){var e=this._rangeProps.block.toJSON();return(i.IS_WEB_NOTE||i.IS_WEB_GROUP)&&e.resource&&!/^http/i.test(e.resource)&&(e.resource=location.protocol+"//"+location.hostname+e.resource),e},t.prototype.getDataAsHtml=function(e){return this._rangeProps.block.toHtml(null,null,e)},t.prototype.getDataAsPlain=function(){return this._rangeProps.block.toPlain()},t.prototype.isCollapsed=function(){return!1},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=o.HANDWRITE,this._rangeProps={block:t.block}},t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(92)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.clone=function(){return new t({block:this.block})},t.prototype.collapse=function(){},t.prototype.isCollapsed=function(){return!1},t.prototype.getDataAsHtml=function(){return this.block.toHtml()},t.prototype.getDataAsJSON=function(){return this.block.toJSON()},t.prototype.getDataAsPlain=function(){return this.block.toPlain()},t.prototype.canDrawedByNative=function(){return!0},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.HR},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(1),n(125)],void 0===(i=function(e,t,n,o,i){return function(){function e(){}return e.renderTable=function(t,n,o){var i,r,a,s,l=t.getRowCount(),c=t.getColumnCount();for(i=(n=n||e._createTableEl()).querySelector("tbody"),e.table=t,a=0;a<l;a++){for(r=document.createElement("tr"),s=0;s<c;s++)t.getCell(a,s).isMergedCell()||r.appendChild(e._renderCell(a,s,null,{resourceMap:o}));r.style.height=t.getRowHeight(a)+"px",i.appendChild(r)}return e._renderColumns(n.querySelector("colgroup")),e.table=null,$(n).css({"border-collapse":"collapse","table-layout":"fixed","white-space":"nowrap",width:0}),n},e._createTableEl=function(){var e=document.createElement("table");return e.innerHTML="<colgroup></colgroup><tbody></tbody>",e},e._handleMergePointIfNeeded=function(e,t){if(t.isMergePoint()){var n=t.getMergePointAttr();n.width>0&&e.setAttribute("colspan",n.width),n.height>0&&e.setAttribute("rowspan",n.height)}},e._renderCell=function(t,o,r,a){r=r||document.createElement("td"),$(r).css({"font-size":14,color:"#393939",border:"1px solid #a7a7a7",overflow:"hidden","vertical-align":"middle","word-wrap":"break-word","background-color":"rgba(255, 255, 255, 0.3)"}),a=n.defaults(a||{},{withCellId:!0,resourceMap:null});var s,l=e.table.getCell(t,o),c=l.getContent();return a.withCellId&&r.setAttribute("data-cell-id",l.getCellId()),e._handleMergePointIfNeeded(r,l),e._setCellStyles(r,l.getBlockStyles(),!0),s=i.contentToHtml(c,a.resourceMap),r.innerHTML=s,r},e._renderColumns=function(t){var n=e.table;t?(t.innerHTML="",n.forEachColumn(function(e){var o=n.getColumnWidth(e),i=document.createElement("col");i.style.width=o+"px",t.appendChild(i)})):o.warn("parameter is not valid",t)},e._setCellStyles=function(e,t,n){var o;n=!1!==n,o=t.textAlign,e.style.textAlign="center"===o||"right"===o||"left"===o?o:"",o=t.verticalAlign,e.style.verticalAlign="top"===o||"middle"===o||"bottom"===o?o:"",n||"true"===t.wrap?e.style.whiteSpace="pre-wrap":e.style.whiteSpace="nowrap",o=t.backColor,e.style.backgroundColor=o&&"inherit"!==o&&"transparent"!==o?o:""},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(69)],void 0===(i=function(e,t,n){return n({textAlign:{type:"Enum",possible:{left:!0,right:!0,center:!0,justify:!0},default:"left"},verticalAlign:{type:"Enum",possible:{top:!0,middle:!0,bottom:!0},default:"left"},wrap:{type:"Boolean",default:!1},backColor:{type:"String",default:"transparent"},"border|vertical":{type:"String",default:"1px solid #a7a7a7"},"border|horizontal":{type:"String",default:"1px solid #a7a7a7"}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return function(e,t,n,o){var i,r,a;for(i=0;i<n;i++)if(a=t?n-i-1:i,null==o){if(!1===e(a))return}else for(r=0;r<o;r++)if(!1===e(a,t?o-r-1:r))return}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(70),n(61)],void 0===(i=function(e,t,n,o){return{attach:n,image:o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(255),n(256),n(257),n(258)],void 0===(i=function(e,t,n,o,i,r,a){var s=[o,i,r,a];return function(e){e=e||{};var t,o,i,r=JSON.parse(JSON.stringify(e)),a=s.length,l=r,c=[],u=function(e){c.push(o.name+".js: "+e)};for(t=0;t<a;t++){if(i=(o=s[t]).checkAndFix(l),n.each(i.errors,u),!0===i.stopCheck)return{errors:c,fixedData:i.fixedData};l=i.fixedData}return{errors:c,fixedData:l}}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(127)],void 0===(i=function(e,t,n,o){return function(){function e(){}return e.checkAndFix=function(e){var t,i,r,a=e.cells,s=a.length,l=!1,c=!1,u=[];for(t=0;t<s;t++)i=a[t],n.isObject(i)?null==(r=i.value)||n.isString(r)||(c=!0,i.value=r+""):(l=!0,a[t]=o());return l&&u.push("Some cell is NOT Object type"),c&&u.push("The value of some cell is not String type"),{errors:u,fixedData:e,stopCheck:!1}},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0)],void 0===(i=function(e,t,n){return function(){function e(){}return e.checkAndFix=function(t){var o=t.cells,i=t.heights,r=t.widths,a=e.IS_VALID(o,i.length,r.length),s=[];return!0!==a&&(s.push(a),n.each(o,function(e){delete e.mergeWidth,delete e.mergeHeight,delete e.mergePointDX,delete e.mergePointDY})),{errors:s,fixedData:t,stopCheck:!1}},e.IS_VALID=function(e,t,o){var i={},r="";return n.some(e,function(t,a){if(!i[a+""]){var s,l,c,u,d,p,h,f,g,y,m;if(t.mergeWidth||t.mergeHeight){if(t.mergeWidth&&!n.isNumber(t.mergeWidth))return r="The mergeWidth is not Number type",!0;if(t.mergeHeight&&!n.isNumber(t.mergeHeight))return r="The mergeHeight is not Number type",!0;if(null!=t.mergePointDX||null!=t.mergePointDY)return r="The cell data is not valid, index: "+a,!0;for(s=t.mergeWidth||1,l=t.mergeHeight||1,c=Math.floor(a/o),u=a%o,f=0;f<l;f++)for(d=c+f,h=0;h<s;h++)if(f>0||h>0){if((g=e[p=d*o+(u+h)]).mergeWidth||g.mergeHeight)return r="The merged cell should not have `mergeWidth` or `mergeHeight`, merge point cell index: "+a+", merged cell index: "+p,!0;if(g.value)return r="The `value` of merged cell should be empty string,merge point cell index: "+a+", index: "+p,!0;if(y=g.mergePointDX||0,m=g.mergePointDY||0,y!==h||m!==f)return r="The `mergePointDX` or `mergePointDY` of mergedCell is not valid, merge point cell index: "+a+",  merged cell index: "+p,!0;i[p+""]=!0}}i[a+""]=!0}}),r||!0},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0)],void 0===(i=function(e,t,n){return function(){function e(){}return e.checkAndFix=function(e){var t=e.cells,o=!1,i=[];return n.each(t,function(e){e.mergeWidth&&!e.mergeHeight?(e.mergeHeight=1,o=!0):e.mergeHeight&&!e.mergeWidth&&(e.mergeWidth=1,o=!0)}),o&&i.push("Some cell has no default value for mergeHeight or mergeWidth"),{errors:i,fixedData:e,stopCheck:!1}},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(96),n(127),n(259)],void 0===(i=function(e,t,n,o,i,r){return function(){function e(){}return e.checkAndFix=function(e){if(!e.cells||!n.isArray(e.cells))return{errors:["The `cells` property is not Array type!"],fixedData:r(),stopCheck:!0};var t,a,s=e.cells,l=e.widths,c=e.heights,u=!0,d=!0,p=[];for(l&&n.isArray(l)||(u=!1,p.push("The `widths` property is not Array type!")),c&&n.isArray(c)||(d=!1,p.push("The `heights` property is not Array type!")),u||d?u?d||(c=[],0===l.length&&(l.length=5),c.length=Math.ceil(s.length/l.length)):(l=[],0===c.length&&(c.length=5),l.length=Math.ceil(s.length/c.length)):((l=[]).length=5,(c=[]).length=Math.ceil(s.length/l.length)),t=l.length*c.length,a=!1;t<s.length;)c.push(o.DEFAULT_ROW_HEIGHT),t=l.length*c.length,a=!0;for(a&&p.push("The widths.length * heights.length is less than cells.length"),t=l.length*c.length,a=!1;t>s.length;)s.push(i()),a=!0;return a&&p.push("The widths.length * heights.length is greater than cells.length"),a=!1,l=n.map(l,function(e){return e&&n.isNumber(e)?e:(a=!0,o.DEFAULT_COL_WIDTH)}),a&&p.push("The `widths` has unvalid value"),a=!1,c=n.map(c,function(e){return e&&n.isNumber(e)?e:(a=!0,o.DEFAULT_ROW_HEIGHT)}),a&&p.push("The `heights` has unvalid value"),{errors:p,fixedData:{cells:s,heights:c,widths:l},stopCheck:!1}},e}()}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(96),n(127)],void 0===(i=function(e,t,n,o){return function(e,t){var i,r=[],a=[],s=[],l=(e=e||1)*(t=t||1);for(i=0;i<e;i++)a.push(n.DEFAULT_ROW_HEIGHT);for(i=0;i<t;i++)r.push(n.DEFAULT_COL_WIDTH);for(i=0;i<l;i++)s.push(o());return{cells:s,heights:a,widths:r}}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{contains:function(e,t){if(!e||!t)return!1;var n=e.left+e.width,o=e.top+e.height,i=t.left+t.width,r=t.top+t.height;return e.left<=t.left&&e.top<=t.top&&n>=i&&o>=r},union:function(e,t){if(e&&t){var n=Math.min(e.left,t.left),o=Math.min(e.top,t.top);return e={left:n,top:o,width:Math.max(e.left+e.width,t.left+t.width)-n,height:Math.max(e.top+e.height,t.top+t.height)-o}}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(92)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.canDrawedByNative=function(){return!1},t.prototype.clone=function(){return new t({block:this.block})},t.prototype.collapse=function(){},t.prototype.getDataAsHtml=function(){return this.block.toHtml()},t.prototype.getDataAsJSON=function(){return this.block.toJSON()},t.prototype.getDataAsPlain=function(){return this.block.toPlain()},t.prototype.isCollapsed=function(){return!1},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.UNKNOWN},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isCmdVersionMatchNoteVersion=function(e,t){return e-t==1},e.isMessageTooLarge=function(e){return e>5e3},e.newGUID=function(){var e="";return e+=Math.floor(10*Math.random()).toString().substr(0,1),e+=Math.floor(10*Math.random()).toString().substr(0,1),e+="-",e+=Date.now().toString()},e}();t.Utils=n}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(45),n(4),n(46),n(17),n(1),n(143),n(7),n(124),n(294),n(122),n(20),n(295),n(3),n(74),n(200),n(39),n(36),n(16),n(9),n(26),n(168),n(123)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m,v,b,_,I,k,w,C,S){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.entityCache={},t}return s(t,e),t.createBlank=function(e,n){var o=I.createBlank(e);return n||(n=new t({})),n.append(o),n},t.fromHtml=function(e,o,i,r){var a,s=c.parseHtml(e);return o||(o=new t({})),a=(r=n.defaults(r||{},{isAsync:!1,progressCallBack:function(){}})).progressCallBack,t._parseHTMLInBatch(s,0,o,i,a,r.isAsync)?o:null},t.fromOCR=function(e,o,i){var r=c.parseOCR(e,i),a=0;return o=o||new t({}),n.each(r,function(e){e&&(o.append(e),a++)}),a?o:null},t.fromXml=function(e,o,i,r){var a,s,c,p,f,g,y={},_={};return o||(o=new t({})),g=(r=n.defaults(r||{},{isAsync:!1,progressCallBack:function(){}})).progressCallBack,n.isString(e)?(e=d.clear(e),a=$.parseXML(e)):a=e,g({percent:.1}),o.setContentStatus(!0),l.log(a),(c=(s=$(a).find("note:first")).attr("schema-version"))&&o.setSchemaVersion(c),p=parseInt(s.attr("file-version"),10),isNaN(p)&&(p=0),o.setFileVersion(p),s&&s.get(0)?(s.find("head").children().each(function(e,t){var n;switch(t.nodeName){case"list":n=b.fromXml(t),y[$(t).attr("id")]=n;break;case"catalogue-wrap":n=m.fromXml(t),_[$(t).attr("id")]=n;break;case"header":n=v.fromXml(t),o.setHeaderFooter(n,!1,!0);break;case"footer":n=v.fromXml(t),o.setHeaderFooter(n,!0,!0);break;default:n=$(t).attr(u.COMPAT),h.isCompatible(n)&&(n=t.cloneNode(!0),o.headUnknownNodeList.push(n))}}),g({percent:.15}),f=s.find("body").children(),t._parseXMLBodyInBatch(f,0,o,y,_,i,g,r.isAsync),o):(o.isBlank()&&o.append(I.createBlank()),g({percent:1}),o.setContentStatus(!1),o.updateContentParseTimer(null),o)},t.unescape=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent},t._parseHTMLInBatch=function(e,o,i,r,a,s){var l,c,u,d=Date.now(),p=!1,h=i.getExtraInfo("pcTodoMap");if(null==e&&0===e.length)return a({percent:1}),i.updateContentParseTimer(null),!1;for(;o<e.length;)if(l=e[o],y.isImage(l)&&r&&r.length>0&&n.each(r,function(e){e.resId!==l.getResId()||l.setImageInfo(e)}),y.isTodo(l)&&l.isFromOldTodo()&&((u=l.getLegacyResId())&&h&&h[u]?(l.setText(t.unescape(JSON.parse(h[u]).content)),l.setChecked(JSON.parse(JSON.parse(h[u]).checked))):l=null),l&&(i.append(l),p=!0),++o>=e.length?(a({percent:1}),i.updateContentParseTimer(null)):a({percent:.15+o/e.length*.85}),s&&Date.now()-d>100){c=setTimeout(t._parseHTMLInBatch.bind(null,e,o,i,r,a,s),10),i.updateContentParseTimer(c);break}return p},t._parseXMLBodyInBatch=function(e,o,r,a,s,l,c,d){var p,m,v,b,_,I,k,w,S=Date.now();if(null==e||0===e.length)return c({percent:1}),r.updateContentParseTimer(null),void r.setContentStatus(!1);for(;o<e.length;){if(m=(p=e[o]).nodeName,v=g[m],b=$(p).attr(u.COMPAT),(!v&&h.isCompatible(b)||v&&b&&!h.isCompatible(b))&&(v=C),v&&v.fromXml){if(!(_=v.fromXml(p)))throw r.updateContentParseTimer(null),new Error("Failed to parse block from xml node!");for(I=f.parseResourceList(p),_.setResourceIds(I),y.isListItem(_)&&_.setOwnerList(a[$(p).attr("list-id")]),y.isImage(_)&&l&&l.length>0&&n.each(l,function(e){e.resId!==_.getResId()||_.setImageInfo(e)}),y.isCatalogue(_)&&_.setOwnerList(s[$(p).attr("catalogue-id")]),r.append(_),_.isValidForCollab()||r.setValidForCollab(!1),w=_.getId();r.originalBlockIds.indexOf(w)>-1;)w=i.newGUID();w!==_.getId()&&(r.setValidForCollab(!1),_.setId(w)),r.originalBlockIds.push(w)}if(++o>=e.length)c({percent:1}),r.setContentStatus(!1),r.updateContentParseTimer(null);else if(c({percent:.15+o/e.length*.85}),d&&Date.now()-S>100){k=setTimeout(t._parseXMLBodyInBatch.bind(null,e,o,r,a,s,l,c,d),10),r.updateContentParseTimer(k);break}}},t.prototype.append=function(e){this.insert(this.blocks.length,e)},t.prototype.clearHighlight=function(){this.trigger("clear-high-light")},t.prototype.countWords=function(e,t){var n,o,i=function(e){return!y.isHr(e)};return e&&(n=!0,o=this._parseWordCountInfo(e.getDataAsPlain(this,i))),(!e||!o.all&&t)&&(n=!1,o=this._parseWordCountInfo(this.toPlain(i))),{count:o.all,detail:o,isSelected:n}},t.prototype.findAttachmentByResource=function(e,t){return n.filter(this.blocks,function(n){return y.isAttachment(n)&&n.getResource(t)===e})},t.prototype.getAllBlocks=function(){return this.blocks},t.prototype.getAllResouceIds=function(){var e=[];return n.each(this.blocks,function(t){var n=t.getResourceIds();n&&n.length&&(e=e.concat(n))}),e=n.uniq(e)},t.prototype.getAllResourceInfo=function(e,t){var o,i,r,a,s=[];return e=e||this.blocks,t=t||[y.IMAGE,y.ATTACHMENT,y.HANDWRITE,y.TABLE],n.each(this.blocks,function(e){y.isAttachment(e)&&t.indexOf(y.ATTACHMENT)>-1||y.isHandWrite(e)&&t.indexOf(y.HANDWRITE)>-1?(o=e.getSource(!1),i=e.getSource(!0),r=e.getResource(!1),a=e.getResource(!0),o&&i&&r&&a&&s.push({extraResource:a,extraSource:i,resource:r,source:o})):y.isImage(e)&&t.indexOf(y.IMAGE)>-1?(o=e.getSource(!1),i=e.getSource(!0),o&&i&&s.push({blockId:e.getId(),extraSource:i,source:o})):y.isTable(e)&&(s=s.concat(e.getAllResourceInfo()))}),s},t.prototype.getAttachmentByResource=function(e,t){return n.filter(this.blocks,function(n){return y.isAttachment(n)&&n.getResource(t)===e})},t.prototype.getBlockAt=function(e){return this.blocks[e]},t.prototype.getBlockById=function(e){return this.header&&e===this.header.getId()?this.header:this.footer&&e===this.footer.getId()?this.footer:n.find(this.blocks,function(t){return e===t.getId()})},t.prototype.getBlockIndex=function(e){return n.indexOf(this.blocks,e)},t.prototype.getBlockIndexById=function(e){var t,n=-1;return(t=this.getBlockById(e))&&(n=this.getBlockIndex(t)),n},t.prototype.getCommonInlineStyle=function(e,t){var o=this;if(e&&t){var i,r=e.getStartBlockRange(),a=e.getEndBlockRange(),s=r.block,l=a.block,c=null,d=[],p=!0;return this.isNonEmptyParaTable(s)&&(d.push(s.getCommonInlineStyle(t,r)),p=!1),s!==l&&(i=this.getInterBlocks(s,l),n.each(i,function(e){o.isNonEmptyParaTable(e)&&(d.push(e.getCommonInlineStyle(t)),p=!1)}),this.isNonEmptyParaTable(l)&&(d.push(l.getCommonInlineStyle(t,a)),p=!1)),p?(y.isTextBlock(s)&&(c=s.getInlineStyleForEmpty(t,!0)),c||w.getDefault(t)):(n.some(d,function(e){if(null===c)c=e;else if(null!=e&&c!==e)return c=u.INTERM,!0}),c)}},t.prototype.getExtraInfo=function(e){return e?(this.extraInfo||{})[e]:this.extraInfo},t.prototype.getHeaderFooter=function(e){return e?this.footer:this.header},t.prototype.getFileVersion=function(){return this.fileVersion},t.prototype.getEntityCache=function(e){var t=this.entityCache;return n.pick(t,e)},t.prototype.entityExistInCache=function(e){var t=this.getEntityCache(e);return n.keys(t).length===e.length},t.prototype.getImageBySource=function(e,t){return n.filter(this.blocks,function(n){return y.isImage(n)&&n.getSource(t)===e})},t.prototype.getInterBlocks=function(e,t,n){var o=this.blocks,i=this.getBlockIndex(e),r=this.getBlockIndex(t);return n?o.slice(i,r+1):o.slice(i+1,r)},t.prototype.getLastBlock=function(){return n.last(this.blocks)},t.prototype.getNextBlock=function(e){var t=this.getBlockIndex(e);if(t>=0)return this.getBlockAt(t+1)},t.prototype.getNoteId=function(){return this.noteId},t.prototype.getPreBlock=function(e){var t=this.getBlockIndex(e);if(t>0)return this.getBlockAt(t-1)},t.prototype.getRangeBlockStyle=function(e,t){if(e&&t){var o=e.getStartBlockRange(),i=e.getEndBlockRange(),r=o.block,a=i.block,s=this.getInterBlocks(r,a,!0),c=null;return e.isSingleTableSelected()?s[0]?s[0].getCommonBlockStyle(t,o):void l.warn("No table block find, need update noteRange"):(n.each(s,function(e){var n=e.getBlockStyle(t);c=null===c?n:c===n?c:u.INTERM}),c)}},t.prototype.getSchemaVersion=function(){return this.schemaVersion||h.getDefaultAsString()},t.prototype.hasHandWriteBlock=function(){var e=!1;return n.some(this.blocks,function(t){return y.isHandWrite(t)&&(e=!0),e}),e},t.prototype.highlight=function(e,t){var o,i,r=[];t=n.defaults(t||{},{ignoreCase:!1}),e&&e.length&&(o=[],n.each(e,function(e){if(e&&!/\s/.test(e)){var t=new k({text:e});o.push(t)}}),o=o.length?o:null),i=this.blocks.slice(),this.header&&i.unshift(this.header),this.footer&&i.push(this.footer),n.each(i,function(e){(null!=o||null!=t.images&&t.images.length>0&&(y.isImage(e)||y.isTable(e)))&&e.highlight(o,t,function(e){r.push(e)})}),this.trigger("high-light",r),n.isFunction(t.callback)&&t.callback(r.length)},t.prototype.insert=function(e,t){if(!t)throw new Error("cannot insert null block");this.blocks.splice(e,0,t),this._bindEventsForBlock(t),t.trigger("attached",this),this.trigger("insert-block",e,t)},t.prototype.isBlank=function(){return!this.blocks||0===this.blocks.length},t.prototype.isEmptyContent=function(){var e,t=this.blocks;return!!(t&&1===t.length&&(e=t[0])&&e.isEmptyContent)&&e.isEmptyContent()},t.prototype.isParsingData=function(){return null!=this.contentParseTimer},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.isSameNote=function(e){return e===this.noteId},t.prototype.isDragProhibited=function(){return this.dragProhibited},t.prototype.isCopyProhibited=function(){return this.copyProhibited},t.prototype.isSameList=function(e,t){var n,o,i,r,a,s,c,u,d,p;if(!e)return l.error("isSameList:noteRange should not be null"),!1;for(n=e.getStartBlockRange(),o=e.getEndBlockRange(),i=n.block,r=o.block,p=(a=this.getInterBlocks(i,r,!0)).length,s=0;s<p;s++)if((c=a[s])instanceof I){if(!(c instanceof _))return!1;if((u=c.getOwnerList()).getType()!==t)return!1;if(d){if(d!==c.getOwnerList())return!1}else d=u}return!!d},t.prototype.isValidForCollab=function(){return this.validForCollab},t.prototype.lastBlockIsEasyInput=function(){var e=this.getLastBlock();return y.isTextBlock(e)},t.prototype.lockBlock=function(e,t){this._setBlockLocked(e,!0,t)},t.prototype.nextHighlight=function(){this.trigger("next-high-light")},t.prototype.preHighlight=function(){this.trigger("pre-high-light")},t.prototype.remove=function(e,t){var n=this.blocks.splice(e,1)[0];n&&(n.trigger("detached",this),this._unbindEventsForBlock(n),this.trigger("remove-block",e,t))},t.prototype.removeBlock=function(e){this.remove(this.getBlockIndex(e))},t.prototype.removeBlockById=function(e,t){this.remove(this.getBlockIndexById(e),t)},t.prototype.replace=function(e,t){var n=this.blocks.splice(e,1,t)[0];return n?(n.trigger("detached",this),this._unbindEventsForBlock(n)):l.warn("oldBlock should not be null"),t&&(this._bindEventsForBlock(t),t.trigger("attached",this)),this.trigger("replace-block",e,t,n),n},t.prototype.reset=function(){this.destroy(),this.noteId=i.newGUID(),this.headUnknownNodeList=[],this.blocks=[],this.originalBlockIds=[],null!=this.contentParseTimer&&(clearTimeout(this.contentParseTimer),this.contentParseTimer=null),this.header=null,this.footer=null},t.prototype.setExtraInfo=function(e){this.extraInfo=e,this._triggerExtraInfoChange()},t.prototype.setEntityCache=function(e){this.entityCache=Object.assign(this.entityCache,e)},t.prototype.removeEntityCache=function(){this.entityCache={}},t.prototype.setEntity=function(e,t){var n;t&&(n=this.getBlockById(t))&&n instanceof I&&n.setEntity(e)},t.prototype.setExtraInfoWithKey=function(e,t,n,o){var i=this.extraInfo,r=i[e];i||(i={},o=!0),r||(i[e]=r={}),r[t]=n,!0===o?this.setExtraInfo(i):this.extraInfo=i},t.prototype.setFileVersion=function(e){this.fileVersion=e},t.prototype.setDragProhibited=function(e){e!==this.dragProhibited&&(this.dragProhibited=e)},t.prototype.setCopyProhibited=function(e){e!==this.copyProhibited&&(this.copyProhibited=e,this.trigger("copy-prohibited",e))},t.prototype.setHeaderFooter=function(e,t,n){t?this.footer=e:this.header=e,n&&this.trigger("header-footer-changed",t)},t.prototype.setReadOnly=function(e){(e=!!e)!==this.readOnly&&(this.readOnly=e,this.trigger("read-only-change",e),n.each(this.blocks,function(t){t.setReadOnly(e)}))},t.prototype.setContentStatus=function(e){this.contentStart=e},t.prototype.getContentStatus=function(){return this.contentStart},t.prototype.setSchemaVersion=function(e){h.isLessThanDefault(e)?l.warn("schema version is older than current, need upgrade!"):this.schemaVersion=e||h.getDefaultAsString()},t.prototype.setValidForCollab=function(e){this.validForCollab=e},t.prototype.toHtml=function(e,t){var n,o,i,r,a,s,l,c,u,d,p,h,f,g,m,v=this.blocks,b=v.length,_=[],I=[];for(t=!0===t,e?(s=e.getStartBlockRange(),l=e.getEndBlockRange(),c=s.block,u=l.block,d=this.getBlockIndex(c),p=this.getBlockIndex(u),m=e.isInSingleBlock()):(d=0,p=b-1),o=d;o<=p;o++)g=null,h=o===d,f=o===p,n=v[o],h&&s?(g=s,m||(g=g.clone()).expandToEnd()):f&&l&&(g=l,m||(g=g.clone()).expandToStart()),y.isListItem(n)||y.isCatalogue(n)?(a=n.getOwnerList(),r&&r!==a&&I.length&&(i=this._toHtmlWithSameOwnerList(I,t),_.push(i),I=[]),I.push({block:n,range:g||null}),r=a):(r=null,I.length&&(i=this._toHtmlWithSameOwnerList(I,t),_.push(i),I=[]),i=g?g.getDataAsHtml(t):n.toHtml(null,null,t),_.push(i));return I.length&&(i=this._toHtmlWithSameOwnerList(I,t),_.push(i)),_.join("")},t.prototype.toPlain=function(e){var t=e?n.filter(this.blocks,e):this.blocks;return n.map(t,function(e){return e.toPlain()}).join("\n")},t.prototype.toXml=function(){var e,t,i,r,a,s,c="http://"+S.getNamespace(),u=this._createXMLDocument(c,"note"),d=u.createElement("head"),p=u.createElement("body"),h={},f=this.getSchemaVersion(),g=this.getFileVersion(),y=u.documentElement,m=[];return y.appendChild(d),y.appendChild(p),f&&y.setAttribute("schema-version",f),y.setAttribute("file-version",g.toString()),n.each(this.blocks,function(e){var t,o,i,r,a,s;e&&e.toXml&&(t=e.toXml(u)),t?t.listItem?(o=t,p.appendChild(o.listItem),r=o.listId,h[r]||(h[r]=!0,i=u.createElement("list"),a=o.ownerList.unknownAttrs,n.each(a,function(e){var t=e.cloneNode(!0);i.setAttributeNode(t)}),i.setAttribute("id",r),i.setAttribute("type",o.listType),d.appendChild(i))):("catalogue"===t.tagName&&(s=t.getAttribute("catalogue-id"),-1===m.indexOf(s)&&m.push(s)),p.appendChild(t)):l.warn("block.toXml() failed!")}),n.each(this.headUnknownNodeList,function(e){if(e&&e.cloneNode){var t=e.cloneNode(!0);d.appendChild(t)}}),s=d.querySelectorAll("catalogue-wrap"),n.each(s,function(e){d.removeChild(e)}),n.each(m,function(e){e&&((a=u.createElement("catalogue-wrap")).setAttribute("id",e),a.setAttribute("compat","true"),d.appendChild(a))}),t=this.getHeaderFooter(!1),i=this.getHeaderFooter(!0),t&&(e=t.toXml(u))&&d.appendChild(e),i&&(e=i.toXml(u))&&d.appendChild(e),r=(new XMLSerializer).serializeToString(u),o.startsWith(r,"<?xml")||(r='<?xml version="1.0"?>\n'+r),r},t.prototype.unlockBlock=function(e){this._setBlockLocked(e,!1)},t.prototype.updateContentParseTimer=function(e){this.contentParseTimer!==e&&(clearTimeout(this.contentParseTimer),this.contentParseTimer=e),null==e&&this.trigger("content-parse-done")},t.prototype.initialize=function(){this.extraInfo={},this.noteId=i.newGUID(),this.blocks=[],this.originalBlockIds=[],this.headUnknownNodeList=[],this.schemaVersion=h.getDefaultAsString(),this.fileVersion=0},t.prototype.destroy=function(){var e=this;n.each(e.blocks,function(t){e._unbindEventsForBlock(t)}),e.blocks=null,e.readOnly=!1,e.validForCollab=!0},t.prototype.isNonEmptyParaTable=function(e){return e instanceof I&&!e.isEmpty()||y.isTable(e)&&!e.isEmptyContent()},t.prototype._bindEventsForBlock=function(e){var t;e&&(this._unbindEventsForBlock(e),t=this._listenerEventsForBlock(),r.addListeners(t,e,this),t=this._bubbleEventsForBlock(e),r.bubble(t,e,this))},t.prototype._bubbleEventsForBlock=function(e){var t={};return y.isTable(e)&&(t=n.extend(t,{"color-picker-show":!0,"get-block-view":!0,"yne-user-action-collection":!0})),t},t.prototype._listenerEventsForBlock=function(){return{"get-default-set-font":"_onGetDefaultSetFont","get-extra-info":"_onGetExtraInfo"}},t.prototype._onGetDefaultSetFont=function(e){this.trigger("get-default-set-font",function(t){e(t)})},t.prototype._onGetExtraInfo=function(e,t){t(this.getExtraInfo(e))},t.prototype._parseCataloguesToHtml=function(e){var t,n,o=document.createElement("div"),i=document.createElement("div"),r="";for(n=0;n<e.length;n++)r+=(t=e[n].block).toHtml();return o.innerHTML=r,i.setAttribute("yne-bulb-type","catalogue-wrap-container"),i.style.backgroundColor=t.getBlockStyle("back-color"),i.appendChild(o),i.outerHTML},t.prototype._parseWordCountInfo=function(e){var t=/[A-z0-9~!@#$%^&*()_+{}|:"<>?`\-=[\]\\;',./]+/g,n=e.match(t),o=e.match(/[\u4e00-\u9fa5\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g),i=e.replace(t,"").replace(/\s+/g,"").length,r=o?o.length:0,a=n?n.length:0,s=i-r;return{all:r+a+s,chinese:r,nonChinese:a+s}},t.prototype._parseListItemsToTree=function(e){var t,n,o,i,r,a,s,l,c,u=new p(0),d=e.length;for(r=u,t=0;t<d;t++){if(o=(n=e[t]).block,i=n.range||{},l=o.getLevel(),s=new p(l,o,i.start,i.end),(c=l-r.getLevel())>1)for(;l-r.getLevel()>1;)a=new p(r.getLevel()+1),r.addChildNodes([a]),r=a;else if(c<1)for(;l-r.getLevel()<1;)r=r.getParentNode();r.addChildNodes([s]),r=s}return u},t.prototype._setBlockLocked=function(e,t,o){var i,r=this;i=n.isArray(e)?e:[e],n.each(i,function(i){var a;(a=n.isString(i)?r.getBlockById(i):i)?a.setLocked(t,o):l.log("BlockLock: skip non-existing block",e)})},t.prototype._toHtmlWithSameOwnerList=function(e,t){var o,i,r=n.first(e).block;if(y.isListItem(r)){if(o=this._parseListItemsToTree(e)){i=o.toHtml(!0===t);var a=document.createElement("div");r&&r.getBlockStyle("back-color")&&(a.style.backgroundColor=r.getBlockStyle("back-color")),a.innerHTML=i,i=a.outerHTML}}else y.isCatalogue(r)&&(i=this._parseCataloguesToHtml(e));return i||""},t.prototype._triggerExtraInfoChange=function(){n.each(this.blocks,function(e){e.trigger("extra-info-change")})},t.prototype._unbindEventsForBlock=function(e){if(e){var t=function(t){t&&n.each(t,function(t,n){e.off(n)})};t(this._listenerEventsForBlock()),t(this._bubbleEventsForBlock(e))}},t.prototype._createXMLDocument=function(e,t){var n=document.implementation.createDocument(e,t,null);return n.createElement=function(e){return this.createElementNS(this.documentElement.namespaceURI,e)},n},t}(a)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(21),r=n(265),a=n(269),s=n(35),l=n(270);return t=i.extend({_mapper:{},_blackTagList:{},constructor:function(e){var t=this;t._mapper={},t._blackTagList={},o.each(e,function(e,n){!1===e?t._blackTagList[n]=!0:e&&o.isObject(e)&&t.define(n,e)})},parse:function(e,t){var n,i,a,c=new l,u=/<html[\S\s]*<\/html>/i;return e=e.replace(/<!--[\w\W]*?-->/i,""),u.test(e)&&(e=e.match(u)[0]),(n=s(e,document,!0))?i=new r(n):((n=document.createElement("div")).innerHTML=e,i=new r(n)),(a=n.getElementsByTagName("style"))&&o.each(a,function(e){c.parse(e.innerText)}),i.internalStylesParser=c,this._parseRecursively(i,this,t),i.blocks},_shouldBreak:function(e){return!e||!e.style||("none"===e.style.display||"hidden"===e.style.visibility)},_parseRecursively:function(e,t,n){var i,r,s,l,c,u=e.el;if(!0!==this._shouldBreak(u)){if(e.setup(),!0!==e.handleChildrenBySelf())for(i=u.firstChild;i;)1===i.nodeType?(c=i.tagName.toLowerCase(),this._blackTagList[c]||(s=this._findHandlers(i),l=new(s=o.isFunction(s)?s:a)(i,e,e.internalStylesParser,t,n),this._parseRecursively(l,t,n))):3===i.nodeType&&(r=i.textContent)&&e.capture({text:r,styles:e.styles,isText:!0}),i=i.nextSibling;e.finish()}},define:function(e,n,o){this._mapper[e]={Class:n,priority:o||t.PRIORITY.DEFAULT}},_findHandlers:function(e){var t=[];if(o.each(this._mapper,function(n,o){(function(e,t){if(e)return e.matches?e.matches(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0})(e,o)&&t.push(n)}),0!==t.length)return t.sort(function(e,t){return t.priority-e.priority}),t[0].Class}},{PRIORITY:{HIGH:1,DEFAULT:0,LOW:-1}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(97),o=n(20);return t.extend({constructor:function(e){t.call(this,e,null),this.blocks=[]},setup:function(){t.prototype.setup.apply(this),this.blocks=[]},emit:function(e){e&&e instanceof o&&this.blocks.push(e)},finish:function(){this.emitBlock()},getRoot:function(){return this}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(1),i={1:12,2:13,3:16,4:18,5:24,6:32,7:48},r={b:function(e){e.bold=!0},i:function(e){e.italic=!0},u:function(e){e.underline=!0},strike:function(e){e.strike=!0},code:function(e){e["font-family"]="monospace"},mark:function(e){e["back-color"]="#ffff00",e.color="#000000"},font:function(e,t){var n,o=t.getAttribute("color"),r=t.getAttribute("face"),a=t.getAttribute("size");o&&(e.color=o),r&&(e["font-family"]=r),a&&(n=i[a])&&(e["font-size"]=n)},pre:function(e){e["white-space"]="pre"},a:function(e,t){t&&t.href&&(e.color="#003884",e.underline=!0)}},a=function(e,n){var i=r[e];i?t.each(n,function(e){r[e]||(r[e]=i)}):o.error("The tag handler for `"+e+"` does not exist!")};return t.each({h1:32,h2:24,h3:18,h4:16,h5:13,h6:12},function(e,t){r[t]=function(t){t.bold=!0,t["font-size"]=e}}),a("b",["strong"]),a("i",["em","cite","var","address","dfn"]),a("strike",["s","del"]),a("u",["ins"]),a("code",["tt","kbd","samp","pre","xmp","plaintext","listing"]),r}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(38),o=n(45),i={};return function(e,n){var r,a;if((e=o(e).trim().toLowerCase().value())&&"inherit"!==e){if(n&&"transparent"===e)return e;if(r=i[e])return"null"===r?void 0:r;if((a=t(e)).isValid())return 0===a.getAlpha()?void(i[e]="null"):(r=a.toHexString(),i[e]=r,r);i[e]="null"}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(45),i=["normal","nowrap","pre-line"],r=function(e,t){return t&&"normal"!==t&&"nowrap"!==t?"pre-line"===t?e.replace(/[ \t]+$/g,""):e:e.replace(/[ \t\r\n]+$/g,"")},a=function(e){var n=e.styles["white-space"];return!n||t.contains(i,n)};return function(e){var n,i,s,l,c,u,d,p;for(t.each(e,function(e){var t,n;e.text=(t=e.text,(n=e.styles["white-space"])&&"normal"!==n&&"nowrap"!==n?"pre-line"===n?t.replace(/[ \t]+/g," "):t:t.replace(/[ \t\r\n]+/g," "))}),s=e.length,n=0;n<s&&((l=e[n]).text=(d=l.text,(p=l.styles["white-space"])&&"normal"!==p&&"nowrap"!==p?"pre-line"===p?d.replace(/^[ \t]+/g,""):d:d.replace(/^[ \t\r\n]+/g,"")),!l.text);n++);for(n=0,i=1;i<s;i++)c=e[n],u=e[i],a(c)&&a(u)&&(o.endsWith(c.text," ")&&o.startsWith(u.text," ")&&(u.text=u.text.slice(1)),""===u.text)||(n=i);for(n=s-1;n>=0&&((l=e[n]).text=r(l.text,l.styles["white-space"]),!l.text);n--);return e}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(43).extend({_computeStyles:function(){var e=this.parent;e&&(this.styles=e.styles)},capture:function(e){this.emit(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(21),i=n(346),r=n(355),a=n(6),s=n(1);return o.extend({_internalStyles:{},constructor:function(){this._internalStyles={}},parse:function(e){var n,o,r,a={},l={};if(!0===s.DEBUG)n=i.parse(e);else try{n=i.parse(e)}catch(e){return{}}return n.cssRules?(t.each(n.cssRules,function(e){e.selectorText&&e.style&&(l={},o=e.style,t.each(o,function(e){l[e]=o[e]}),-1!==e.selectorText.indexOf(",")?(r=e.selectorText.split(","),t.each(r,function(e){e=e.trim(),a[e]={selectorText:e,style:l}})):(e.selectorText=e.selectorText.trim(),a[e.selectorText]={selectorText:e.selectorText,style:l}))}),this._internalStyles=t.extend(this._internalStyles,a),a):{}},getInternalStyles:function(){return this._internalStyles},getStylesBySpecificity:function(e,n){var o=this,i={},r=o._internalStyles,s=[],l=0;return r?(t.each(r,function(t){try{a(e).is(t.selectorText)&&s.push(t)}catch(e){}}),s.sort(function(e,t){return-1*o._specificityCompare(e.selectorText,t.selectorText)}),t.some(s,function(e){if(e.style&&t.some(e.style,function(e,o){if(l===n.length)return!0;o in i||-1===t.indexOf(n,o)||(i[o]=e,l++)}),l===n.length)return!0}),i):{}},_specificityCompare:function(e,t){return r.compare(e,t)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,,,,,,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return["maction","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msubsup","msup","mtable","mtd","mtext","mtr","munder","munderover","semantics"]}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return{AnchorHandler:n(280),BreakHandler:n(281),HrHandler:n(282),ImageHandler:n(164),InlineHandler:n(99),ListHandler:n(166),ListItemHandler:n(283),ParagraphHandler:n(97),TableHandler:n(284),TodoHandler:n(286)}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(43);return t.extend({inheritStyleHandlers:{bold:!0,italic:!0,underline:!0,strike:!0,"font-family":!0,"font-size":!0,color:!0,"back-color":!0,"white-space":!0},constructor:function(e,n,o){t.call(this,e,n,o)},capture:function(e){var t=this.el.getAttribute("href");t&&"#"!==t&&0!==t.indexOf("javascript")&&e&&!0===e.isText?(e.styles.href=e.styles.href||t,this.emit(e)):this.emit(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(99).extend({inheritStyleHandlers:!1,inheritBlockStyles:{"line-height":!0,indent:!0,"text-indent":!0},finish:function(){this.emit({isBr:!0,styles:this.styles})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(43),o=n(100),i=n(0),r=n(81),a=n(3);return t.extend({computeBulbStyles:function(){var e,t=this,n=t.el;"hr"===n.getAttribute("yne-bulb-block")&&(e=r.getStyleNamesOfBlock(a.HR),i.each(e,function(e){var o=n.getAttribute("yne-style-"+e);o&&(t.styles[e]=o)}))},finish:function(){var e=new o;this.styles&&e.setBlockStyles(this.styles),this.emit(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(97),o=n(36),i=n(166);return t.extend({setup:function(){this.ownerListHandler=this._findOwnerListHandler()},captureBlock:function(e){var t=null;this.emitBlock(),!this._listed&&e.getType&&"paragraph"===e.getType()?((t=this.createBlock()).append(e.getText()),this.emit(t)):this.emit(e)},emit:function(e){e instanceof o&&(this._listed=!0),t.prototype.emit.call(this,e)},createBlock:function(){var e,n,i=this.ownerListHandler;return!this._listed&&i&&i.list?(i.increaseItemCounter(),n=i.list,e=new o({list:n}),n&&n.addItem&&n.addItem(e),e):t.prototype.createBlock.call(this)},_findOwnerListHandler:function(){for(var e=this.parent;e;){if(e instanceof i)return e;e=e.parent}}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(43),o=n(83),i=n(95),r=n(84),a=n(61),s=n(70),l=n(108),c=n(164),u=n(1),d=n(6),p=n(0),h=n(285),f=n(144),g=n(3),y=function(e,t,n){if(!e)return n;var o=e.getAttribute(t);return o=parseInt(o||n,10),isNaN(o)&&(o=n),o},m=function(e,t,n){if(!e)return n;var o=e.style[t];return o=parseInt(o||n,10),isNaN(o)&&(o=n),o};return t.extend({DEFAULT_HEIGHT:40,DEFAULT_WIDTH:70,_styleHandlers:{bold:{tagList:["b","strong"],styleHandler:function(e){return f.bold.action(e,{},null)}},lineThrough:{tagList:["strike","s","del"],styleHandler:function(e){return f.strike.action(e,{},null)}},underline:{tagList:["u","ins"],styleHandler:function(e){return f.underline.action(e,{},null)}},italic:{tagList:["i","em","cite","var","address","dfn"],styleHandler:function(e){return f.italic.action(e,{},null)}},fontName:function(e){var t=f["font-family"].action(e,{},null);return t||("FONT"===e.tagName?(t=e.getAttribute("face"))||null:void 0)},fontSize:function(e){var t=f["font-size"].action(e,{},null);if(t)return t+"px"},textColor:function(e){var t=f.color.action(e,{},null);return t||("FONT"===e.tagName?(t=e.getAttribute("color"))||null:void 0)},backColor:function(e){return f["back-color"].action(e,{},null)},textAlign:function(e){return f.align.action(e,{},null)}},_tableStyleHandlers:{verticalAlign:function(e){if(e)return e.style.verticalAlign||e.getAttribute("valign")||(e.tagName&&p.contains(["THEAD","TBODY","TFOOT"],e.tagName)?"middle":void 0)},textAlign:function(e){if(e)return e.style&&e.style.textAlign?e.style.textAlign:e.getAttribute("align")},textColor:function(e){return f.color.action(e,{},null)},backColor:function(e){return e.style.backgroundColor||null},bold:function(e){return e&&e.tagName&&"TH"===e.tagName?"true":f.bold.action(e,{},null)?"true":void 0},italic:function(e){if(f.italic.action(e,{},null))return"true"},underline:function(e){if(f.underline.action(e,{},null))return"true"},lineThrough:function(e){if(f.strike.action(e,{},null))return"true"},fontName:function(e){return f["font-family"].action(e,{},null)},fontSize:function(e){var t=f["font-size"].action(e,{},null);if(t)return t+"px"}},constructor:function(e,t,n,o){this.el=e,this.parent=t,this.internalStylesParser=n,this._parser=o},handleChildrenBySelf:function(){return!0},_inheritStyles:function(e,t,n){var o={};return n=n||{},p.each(this._styleHandlers,function(i,r){var a;!1!==e[r]&&(p.isFunction(i)?a=i(t):(i.styleHandler&&(a=i.styleHandler(t)),!a&&i.tagList&&(a=function(e,t){var n;if(e&&e.tagName){if((n=(e.tagName+"").toLowerCase())===t+"")return!0;if(p.contains(t,n))return!0}}(t,i.tagList))),a&&"inherit"!==a||(a=n[r]),o[r]=a)}),o},_mergeStyles:function(e,t){var n=d.trim(e.value).length;p.each(this._styleHandlers,function(o,i){0===n?t[i]?e[i]=t[i]:e[i]=!1:e[i]&&t[i]!==e[i]&&(e[i]=!1)})},_inheritTableStyles:function(e,t){var n={};return p.contains(["TABLE","THEAD","TBODY","TFOOT","TR","TD","TH"],e.tagName+"")?(t=t||{},p.each(this._tableStyleHandlers,function(o,i){var r=o(e);null!=r&&"inherit"!==r||(r=t[i]),null!=r&&(n[i]=r)}),n):{}},_parseImage:function(e,t){var n,o,i=e.getAttribute("src");if(c.isNoteLink(e))return o=e.getAttribute("alt")||"",void(t.value+=o);i&&(c.isAttachment(e)?(n=e.getAttribute("path"),t.value=s.create({source:i,resource:n,fileLength:c.getAttachmentFileLength(e),fileName:c.getAttachmentFileName(e)})):c.isImage(e)&&(t.value=a.create({source:i})))},_shouldAddLineBreak:function(e){e=(e+"").toLowerCase();return p.contains(["article","aside","blockquote","br","button","caption","col","colgroup","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","map","ol","output","p","pre","progress","section","textarea","tfoot","ul","video"],e)},_isLinkCell:function(e){if(!e)return!1;var t,n,o,i,r,a,s=e.querySelectorAll("a"),l=function(e){return!e||(1===e.nodeType?""===d.trim(e.textContent||""):3!==e.nodeType||""===d.trim(e.nodeValue||""))};if(!s||!s.length||1!==s.length)return!1;for(t=(n=s[0]).parentNode;t&&t!==e;){for(i=(o=t.childNodes).length,r=0;r<i;r++)if((a=o[r])!==n&&!l(a))return!1;t=(n=t).parentNode}return!0},_parseCell:function(e,t,n){var o,i,l,c,u,d=this,f={value:""},m=d.internalStylesParser,v=r.createBlank(),b=!1;return u=d._parser.parse(e.innerHTML),p.any(u,g.isTextBlock.bind(g))?p.each(u,function(e){g.isTextBlock(e)?v.appendRichText(e.getText()):(g.isImage(e)||g.isAttachment(e)||g.isTable(e)||g.isHr(e))&&d._blockList.push(e)}):p.each(u,function(e){(g.isTable(e)||g.isHr(e))&&d._blockList.push(e),b?(g.isImage(e)||g.isAttachment(e))&&d._blockList.push(e):g.isImage(e)?(v=a.create({source:e.getSource(),width:e.getStyles("width"),height:e.getStyles("height")}),b=!0):g.isAttachment(e)&&(v=s.create({source:e.getSource(),resource:e.getResource(),fileLength:e.getFileLength(),fileName:e.getFileName()}),b=!0)}),(o={value:v}).value&&f.link&&(o.link=f.link),n===d.DEFAULT_HEIGHT&&(o.wrap="true"),p.each(d._styleHandlers,function(e,t){!0===f[t]?o[t]="true":f[t]&&(o[t]=f[t])}),(i=y(e,"colspan",1))>1&&(o.mergeWidth=i,o.mergeHeight=o.mergeHeight||1),(i=y(e,"rowspan",1))>1&&(o.mergeHeight=i,o.mergeWidth=o.mergeWidth||1),l=d._inheritTableStyles(e,t),p.each(l,function(e,t){null==o[t]&&e&&(o[t]=e)}),c=m.getStylesBySpecificity(e,["font-size","font-family","font-style","font-weight","color","background-color","background","text-decoration","text-align","vertical-align","white-space","word-wrap","word-space"]),p.each(c,function(t,n){var o=e.style.getPropertyValue(n);null!=o&&""!==o||e.style.setProperty(n,t)}),p.each(d._tableStyleHandlers,function(t,n){var i=t(e);null==o[n]&&null!=i&&(o[n]=i)}),h(o.backColor)&&delete o.backColor,o},_isArrayFull:function(e,t){var n;if(0===t)return!1;for(n=0;n<t;n++)if(null==e[n])return!1;return!0},_parseTbodyCells:function(e,t,n){var o,i=this,a=p.filter(t.children,i._isTableRow),s=[],l=e.widths.length,c=e.heights.length,u=0;return o=i._inheritTableStyles(t,n),p.each(a,function(t){var n=p.filter(t.children,i._isTableCell),a=i._inheritTableStyles(t,o),d=u,h=s[d];if(0!==n.length){for(;h&&i._isArrayFull(h,l);)u++,h=s[++d];for(h||(h=s[d]=[]),p.each(n,function(t){for(var n,o,l,u,p,f,g,m,v,b=0,_=h[b];_;)_=h[++b];for(n=b,u=i._parseCell(t,a,e.heights[d]),h[n]=u,o=y(t,"rowspan",1),l=y(t,"colspan",1),o>c-d&&(o=c-d,u.mergeHeight=o),p=0;p<o;p++)for((v=s[g=d+p])||(v=s[g]=[]),f=0;f<l;f++)v[m=n+f]||(v[m]={mergePointDX:f,mergePointDY:p,value:r.createBlank(!0)})});h.length<l;)h.push({value:""});u++}}),s},_isTableCell:function(e){if(!e||!e.tagName)return!1;var t=e.tagName||"";return p.contains(["TD","TH"],t)},_isTableRow:function(e){return!(!e||!e.tagName)&&"TR"===e.tagName},_getTbodySize:function(e){var t,n,o,i,r,a,s=this,l=[],c=0,u=0,d=[];for(p.each(e,function(t){var n,o,i=u,r=l[i];if(0!==(n=p.filter(t.children,s._isTableCell)).length){for(;r&&s._isArrayFull(r,c);)r=l[++i];u=i,r||(r=l[i]=[],d[i]=e[i]),p.each(n,function(t,n){var a,c,u,p,h,f=y(t,"colspan",1),g=y(t,"rowspan",1),v=m(t,"width",0)||y(t,"width",0);for(o+=f,v=Math.max(Math.round(v/f),s.DEFAULT_WIDTH),p=n;null!=r[p];)p++;for(u=0;u<f;u++)r[p+u]=v;for(a=1;a<g;a++)for((h=l[c=i+a])||(h=l[c]=[],d[c]=e[c]),u=0;u<f;u++)h[p+u]=v}),o=r.length,c<o&&(c=o)}}),t=l.length,a=[],n=0;n<c;n++){for(i=(l[0]||[])[n]||s.DEFAULT_WIDTH,o=1;o<t;o++)(r=(l[o]||[])[n])&&r>i&&(i=r);a.push(i)}return{rows:t,columns:c,columnWidthList:a,compactTrList:p.compact(d)}},_createBlankRow:function(e){for(var t=[];e>0;)t.push({value:""}),e--;return t},_parseColgroup:function(e){var t=p.filter(e.children,this._isCol);return p.map(t,function(e){return parseFloat(e.style.width)})},_isCol:function(e){return!(!e||!e.tagName)&&"COL"===e.tagName},_parseTbody:function(e,t,n){var o,i,r,a,s=this,l=p.filter(e.children,s._isTableRow),c=0,u={},d=[],h=0;for(l=(a=s._getTbodySize(l)).compactTrList,u.heights=p.map(l,function(e){if(e.style.height)return parseFloat(e.style.height);var t=p.filter(e.children,s._isTableCell),n=0;return p.some(t,function(e){if(!e.getAttribute("rowspan")){var t=m(e,"height",0)||y(e,"height",0);if(t)return n=t,!0}}),n=Math.max(n,s.DEFAULT_HEIGHT)});u.heights.length<a.rows;)u.heights.push(s.DEFAULT_HEIGHT);if(h=0,p.each(a.columnWidthList,function(e){h+=e}),h<n?(i=Math.ceil((n-h)/a.columns),d=p.map(a.columnWidthList,function(e){return e+i})):d=a.columnWidthList,u.widths=d,r=(o=s._parseTbodyCells(u,e,t)).length,(c=u.heights.length)>r)for(;r<c;)o.push(s._createBlankRow(a.columns)),r++;else if(c<r)for(;c<r;)u.heights.push(s.DEFAULT_HEIGHT),c++;return u.cells=o,u},_extendBodyInfo:function(e,t){var n,o,i,r=e.cells,a=e.heights.length;if(!(e.widths.length>=t))for(n=0;n<a;n++)for(i=(o=r[n]).length;i<t;i++)o.push({value:""})},_convertToTableCells:function(e,t){var n,o,a,s,c=e.length,d=[];for(n=0;n<c;n++)for(o=e[n],d[n]=[],a=0;a<t;a++)(s=o[a])?d[n].push(i.create({content:s.value||r.createBlank(),mergeWidth:s.mergeWidth,mergeHeight:s.mergeHeight,mergePointDX:s.mergePointDX,mergePointDY:s.mergePointDY,styles:p.pick(s,l.getAllStyleNames())})):u.error("No tdInfo  at row, col: "+n+", "+a);return d},_mergeTbody:function(e){if(e&&e.length){var t,n=this,o=0,i=[],r=[],a={};return p.each(e,function(e){var n=e.widths.length;n>o&&(o=n,t=e.widths)}),p.each(e,function(e){n._extendBodyInfo(e,o)}),p.each(e,function(e){i=i.concat(e.heights),r=r.concat(e.cells)}),r=n._convertToTableCells(r,o),a.widths=t,a.heights=i,a.cells=r,a}},_parseTable:function(e){var t,n,o=this,i=p.toArray(e.children),r=["thead","tbody","tfoot"],a={thead:[],tbody:[],tfoot:[]},s=[],l=o._blockList.length,c=o._inheritTableStyles(e,{}),u=m(e,"width",0)||y(e,"width",0);o._blockList.push(0),p.each(i,function(e){var t,i=(e.tagName||"").toLowerCase();"colgroup"===i&&(n=o._parseColgroup(e)),p.contains(r,i)&&(t=o._parseTbody(e,c,u),p.extend(t.widths,n),a[i].push(t))}),p.each(r,function(e){var t=a[e];t&&t.length&&(s=s.concat(t))}),(t=o._mergeTbody(s))&&(o._blockList[l]=t)},setup:function(){this._blockList=[]},finish:function(){var e=this;e._parseTable(e.el),p.each(e._blockList,function(t){var n;t&&t.heights&&t.cells&&t.cells.length>0?n=new o({tableCells:t.cells,rowHeights:t.heights,colWidths:t.widths}):t&&(n=t),n&&e.emit(n)})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(38);return function(e){return!!e&&t.equals(e,"white")}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(42);return n(99).extend({finish:function(){var e,n,i=this.el;"todo"===i.getAttribute("data-media-type")&&(e=i.getAttribute("data-attr-content"),n=i.getAttribute("data-attr-checked"),t.isUndefined(e)&&t.isUndefined(n)||this.emit(new o({text:e||"",checked:"true"===n})))}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(97),o=n(39),i=n(36),r=n(1),a=n(0),s=n(4);return t.extend({setup:function(){var e,n,i,r,a,l,c=this.getRoot();t.prototype.setup.call(this),(e=this.el.getAttribute("style"))&&(n=/mso-list:(l\d+) (level\d+)/.exec(e))&&(r=n[1],a=n[2],(i=this._getStyles()["list "+r+":"+a])&&((l=c["mso-"+r])||(l=c["mso-"+r]=new o({type:"bullet"===i["mso-level-number-format"]?o.UNORDERED:o.ORDERED,listId:s.newGUID()})),this.list=l,this.level=Number(a.replace("level","")),this.el.querySelector('[style="mso-list:Ignore"]').remove()))},createBlock:function(){if(!this.list)return t.prototype.createBlock.call(this);var e=this.list,n=new i({list:e,level:this.level});return e&&e.addItem&&e.addItem(n),n},_getStyles:function(){var e,t=this.getRoot(),n=this.el.ownerDocument,o={};return t.msoStyles?t.msoStyles:(e=n.querySelectorAll("style"),a.each(e,function(e){var t,n,i;1===e.childNodes.length&&3===e.firstChild.nodeType&&(t=e.firstChild.textContent,n=o,null!==(i=t.match(/(@[\w_\-:\s]+)\n\s*\{(.|\n)*?\}/gm))&&i.forEach(function(e){var t=/@([\w_\-:\s]+)/.exec(e)[1].trim(),o=e.substring(e.indexOf("{")+1,e.indexOf("}")).trim(),i={};o.split(";").forEach(function(e){var t;-1!==e.indexOf(":")&&(t=e.split(":"),i[t[0].trim()]=t[1].trim())}),n[t]||(n[t]={}),a.extend(n[t],i)}))}),r.log(o),t.msoStyles=o,o)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1),o=n(0),i=n(289);return function(e,n,r,a){var s,l=[];if(e){if((s=e.split(/\r\n?|\n/))&&s.length)return o.each(s,function(e){var t=i(e,o.clone(n),o.clone(r),a);t&&l.push(t)}),t.log("to paste text",l),l;t.warn("lines do not exist or lines.length is 0!")}else t.warn("no text when paste plain text!")}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(290),o=n(16),i=n(146),r=n(0);return function(e,n,a,s){if(null!=e){var l,c,u=new o;return s||(l=i.matchEnd(e))&&0===l.result.index&&r.extend(n||(n={}),{href:l.fullURI,underline:!0,color:"#003884"}),c=t(e,n),u.setText(c),a&&r.each(a,function(e,t){u.setBlockStyle(t,e)}),u}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(9);return function(e,n){var o;return e=(e+="").replace(/[\r\n]/g,""),o=new t({text:e}),n&&o.setStyles(0,o.getLength(),n),o}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1),o=n(0),i=n(39),r=n(74),a=n(3),s=n(292),l=n(4);return function(e,n){var c,u,d,p=[],h={},f={},g={};if(o.isString(e))try{c=window.JSON.parse(e)}catch(n){t.error("parse json string error: ",e)}else o.isArray(e)&&(c=e);if(c&&c.length)return t.log("createBlocksFromJSON array: ",c),o.each(c,function(e){var t;(t=s(e,n))&&(e.listId&&e.listType&&a.isListItem(t)&&(u=e.listId,(d=h[u])||(d=new i({type:e.listType,listId:e.listId}),h[u]=d),t.setOwnerList(d)),e.ownerId&&a.isCatalogue(t)&&(u=e.ownerId,g[u]||(g[u]=l.newGUID(),f[g[u]]=new r({id:g[u]})),d=f[g[u]],t.setOwnerList(d)),p.push(t))}),p}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(101),o=n(3),i=n(73),r=n(98),a=n(100),s=n(53),l=n(36),c=n(16),u=n(83),d=n(42),p=n(130),h=n(75),f=n(165),g=n(1);return function(e,n){if(e&&(e.blockType||e.type)){var y,m=e.blockType||e.type;switch(m){case o.PARAGRAPH:y=c.fromJSON(e,n);break;case o.LIST_ITEM:y=l.fromJSON(e);break;case o.IMAGE:y=s.fromJSON(e);break;case o.ATTACHMENT:y=t.fromJSON(e);break;case o.TABLE:y=u.fromJSON(e,!0);break;case o.HR:y=a.fromJSON(e);break;case o.HEADING:y=r.fromJSON(e);break;case o.CATALOGUE:y=i.fromJSON(e);break;case o.TODO:y=d.fromJSON(e);break;case o.QUOTE:y=p.fromJSON(e);break;case o.CODE:y=h.fromJSON(e);break;case o.HANDWRITE:y=f.fromJSON(e);break;default:g.warn("jsonObj.blockType = "+m)}return y}g.warn("jsonObj is null or jsonObj has no `blockType` property!")}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1),o=n(0),i=n(9),r=n(16),a={create:function(){var e={data:{},push:function(t,n){n||(n=1),e.data[t]?e.data[t]+=n:e.data[t]=n},count:function(){return Object.keys(e.data).length},mergeKeys:function(t){var n,i,r,s,l,c=a.create(),u=e.data;return o.each(e.orderedKeys(),function(e){r&&e-r<t?(s=u[r],l=u[e],n=(r*s+e*l)/(i=s+l),c.push(n,i),r=null):(r&&c.push(r,u[r]),r=e)}),r&&c.push(r,u[r]),c.count()!==e.count()?c.mergeKeys(t):c},mostFrequencyKey:function(){var t,n=0;return o.each(e.data,function(e,o){e>=n&&(n=e,t=parseInt(o))}),t},orderedKeys:function(){return Object.keys(e.data).sort(function(e,t){return e-t})}};return e}},s=function(e,t){return"yd"===t?function(e){var t={},n=e.split(",");return t.left=parseInt(n[0]),t.top=parseInt(n[1]),t.right=parseInt(n[2]),t.bottom=parseInt(n[5]),t.width=t.right-t.left,t.height=t.bottom-t.top,t}(e):function(e){var t={},n=e.split(",");return t.left=parseInt(n[0]),t.top=parseInt(n[1]),t.width=parseInt(n[2]),t.height=parseInt(n[3]),t.right=t.left+t.width,t.bottom=t.top+t.height,t}(e)},l=function(e,t){var n,i,r=e.json,a=t.type,l=[];for(r.box=s(r.boundingBox,a),o.each(r.lines,function(e){var t,i="";e.box=s(e.boundingBox,a),"ms"===a&&(o.each(e.words,function(e){e.box=s(e.boundingBox,a),function(e){return/^[a-z][a-z\d\s.,\/#!$%\^&\*;:{}=\-_`~()]*$/i.test(e)}(e.text)&&(i+=" "),i+=e.text}),e.text=i),!function(e){var t=!1;return[/Epdf/,/For Evaluation Purposes Only/].forEach(function(n){n.test(e)&&(t=!0)}),t}(e.text)?(n&&function(e,t){var n=(t.box.bottom-e.box.top)/e.box.height,o=(t.box.bottom-e.box.top)/t.box.height;return Math.max(n,o)>.8}(e,n)&&(!function(e,t){e.box.top=e.box.top<t.box.top?e.box.top:t.box.top,e.box.bottom=e.box.bottom>t.box.bottom?e.box.bottom:t.box.bottom,e.box.left=e.box.left<t.box.left?e.box.left:t.box.left,e.box.right=e.box.right>t.box.right?e.box.right:t.box.right,e.box.height=e.box.bottom-e.box.top,e.box.width=e.box.right-e.box.left,e.words=t.words.concat(e.words),e.text=t.text+"  "+e.text}(e,n),t=r.lines.indexOf(n),l.push(t)),n=e):(t=r.lines.indexOf(e),l.push(t))}),i=l.length-1;i>=0;i-=1)r.lines.splice(l[i],1)},c=function(e,t){var n={};return n.json=e,l(n,t),t.parseParagraph?(function(e){var t,n=e.json,i=a.create(),r=a.create(),s=a.create(),l=a.create(),c={};o.each(n.lines,function(e){i.push(e.box.left),r.push(e.box.right),t&&s.push(e.box.bottom-t.box.bottom),t=e,l.push(e.box.height)}),c.baseLineHeight=s.mostFrequencyKey(),c.baseFontHeight=l.mergeKeys().mostFrequencyKey(),c.regionLeft=i.mergeKeys(c.baseFontHeight).mostFrequencyKey(),c.regionRight=r.mergeKeys(c.baseFontHeight).mostFrequencyKey(),e.stat=c}(n),function(e){var t,n,o,i,r,a,s=e.json,l=[],c=e.stat.regionLeft,u=e.stat.regionRight,d=e.stat.baseFontHeight,p=e.stat.baseLineHeight,h=!1,f=!1,g="";for(t={startLineIndex:0},r=0;r<s.lines.length;r+=1){if(h=f,c+1.5*d<(i=s.lines[r]).box.left&&r!==t.startLineIndex&&(h=!0),o&&i.box.bottom-o.box.bottom>1.5*p&&(h=!0),h){for(t.endLineIndex=r-1,t.text=g.trim(),l.push(t),n=Math.floor((i.box.bottom-o.box.bottom)/p-1),a=0;a<n;a+=1)l.push({text:""});t={startLineIndex:r},g=i.text}else g+=i.text;o=i,f=u-1.5*d>i.box.right}t.endLineIndex=r,t.text=g,l.push(t),e.paragraphs=l}(n),t.parseIndent&&function(e){var t=e.json,n=e.stat,i=e.paragraphs;o.each(i,function(e){var o,i=t.lines[e.startLineIndex];i&&(Math.ceil((i.box.left-n.regionLeft)/n.baseFontHeight)/2>=1?e.text="\t"+e.text:(e.startLineIndex+1<=e.endLineIndex&&(o=t.lines[e.startLineIndex+1]),o&&Math.ceil((i.box.left-o.box.left)/n.baseFontHeight)/2>=1&&(e.text="\t"+e.text)))})}(n)):function(e){var t,n=e.json;t={startLineIndex:0,endLineIndex:n.lines.length-1,text:""},o.each(n.lines,function(e){t.text+=e.text}),e.paragraphs=[t]}(n),n};return function(e,n){var a,s,l=[];if(o.isString(e))try{a=window.JSON.parse(e)}catch(n){t.error("parse json string error: ",e)}return a&&o.each(a,function(e){o.each(e.regions,function(e){var t=c(e,n);o.each(t.paragraphs,function(e){s=function(e){var t,n,o,a=new r;return o=e.fontSize,t=(t=e.text).replace(/[\r\n]/g,""),(n=new i({text:t})).setStyle(0,n.getLength(),"font-size",o),a.setText(n),a}(e),l.push(s)})}),l.push(new r)}),l}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(17),n(1)],void 0===(i=function(e,t,n,o,i){return function(e){function t(t,o,r,a,s){var l=e.call(this,{})||this;return l.listItemNodeProps={},i.DEBUG&&(l.listItemNodeProps.debugId=n.uniqueId()),l.listItemNodeProps.level=t||0,l.listItemNodeProps.block=o,l.listItemNodeProps.start=r,l.listItemNodeProps.end=a,l.addChildNodes(s),l}return s(t,e),t.prototype.addChildNodes=function(e){var t=this;e&&(n.isArray(e)||(e=[e]),n.each(e,function(e){e.parentNode=t,t.childNodes||(t.childNodes=[]),t.childNodes.push(e)}))},t.prototype.childrenCount=function(){return this.childNodes?this.childNodes.length:0},t.prototype.getChildStartIndex=function(){var e=(this.childNodes||[])[0];return e?e.getStartIndex():1},t.prototype.getLevel=function(){return this.listItemNodeProps.level},t.prototype.getParentNode=function(){return this.parentNode},t.prototype.getStartIndex=function(){return this.listItemNodeProps.block?this.listItemNodeProps.block.getIndex():1},t.prototype.hasChildren=function(){return this.childrenCount()>0},t.prototype.isChildOrdered=function(){var e=(this.childNodes||[])[0];return!!e&&e.isOrdered()},t.prototype.isOrdered=function(){return this.listItemNodeProps.block?this.listItemNodeProps.block.isOrdered():!!this.parentNode&&this.parentNode.isOrdered()},t.prototype.toHtml=function(e){var t,o,i,r,a,s,l=this.listItemNodeProps.block,c=[];return e=!0===e,this.hasChildren()?(a=l?l.toHtml(this.listItemNodeProps.start,this.listItemNodeProps.end,e):"",c.push(a),i="<"+(t=this.isChildOrdered()?"ol":"ul")+' yne-block-type="list" style="margin:0px " ',(o=this.getChildStartIndex())>1&&(i+=' start="'+o+'"'),i+=">",c.push(i),s=this.childNodes,n.each(s,function(t){var n=t.toHtml(e);c.push(n)}),r="</"+t+">",c.push(r)):(a=l?l.toHtml(this.listItemNodeProps.start,this.listItemNodeProps.end,e):"<li></li>",c.push(a)),c.join("")},t.prototype.initialize=function(){},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(101),n(73),n(98),n(100),n(53),n(36),n(16),n(130),n(83),n(42),n(75),n(168)],void 0===(i=function(e,t,n,o,i,r,a,s,l,c,u,d,p,h,f){var g={attach:o,catalogue:i,heading:r,"horizontal-line":a,image:s,"list-item":l,para:c,code:h,quote:u,table:d,todo:p,unknown:f};return n.each(g,function(e,t){e.prototype.xmlNodeName=t}),g}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(1);return t.View.extend({class:"bulb-panel",events:{mousedown:"_onMouseDown"},initialize:function(e){this._editor=e.editor,this._items=[],this.isRendered=!1},addItems:function(e){var t=this;e=o.isArray(e)?e:[e],o.each(e,function(e){t._items.push(e),t.isRendered&&t.$el.append(e.$el)})},getItemByName:function(e){return o.find(this._items,function(t){return t.name===e})},render:function(){var e=this;e.isRendered||(e.isRendered=!0,o.each(e._items,function(t){e.$el.append(t.$el)}))},_onMouseDown:function(e){e.preventDefault()},show:function(){this.$el.show()},hide:function(){this.$el.hide()},_invoke:function(e){o.each(this._items,function(t){t[e]?t[e]():i.error("item."+e+" is not method",t)})},enable:function(){this.$el.removeClass("disabled"),this._invoke("enable")},disable:function(){this.$el.addClass("disabled"),this._invoke("disable")},reset:function(){this._invoke("reset")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(1),o=n(0),i=n(45),r={_map:{},add:function(e){var n=e.prototype.name,o=this._map;n?o[n]?t.error("Button class ["+n+"] exists!"):o[n]=e:t.error("The Button class has no name!",e)},get:function(e){i.startsWith(e,"---")&&(e="base-split");var n=this._map[e];return n||t.error("Button class ["+e+"] does not exist!"),n},getAllNames:function(){return o.keys(this._map)}};return o.each([n(298),n(694),n(695),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(706),n(707),n(708),n(709),n(710),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(728),n(729),n(730),n(731),n(732),n(733),n(734),n(735),n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(744),n(745),n(746),n(747),n(748),n(749),n(750)],function(e){r.add(e)}),r}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(299),o=n(693);return t.extend({name:"base-split",className:"toolbar-item toolbar-split",initialize:o,render:o,enable:o,disable:o,reset:o})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(27).View.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},isVisible:!0,show:function(){this.$el.css("display","inline-block"),this.isVisible=!0},hide:function(){this.$el.hide(),this.$el.css("display","none"),this.isVisible=!1},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},onEditingStateChange:function(){},onSelectionChange:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6),o=n(146),i=n(76),r=n(62);return{_container:null,getUrlInfoBeforeRange:function(e,t){var n,o,a=e.commonAncestorContainer,s={textNodeArray:[],endIndex:-1};if(i.isRangeInNode(t,e))return this._container=t,this._isInLinkElement(a)?o={alreadyUrl:!0}:(r.isElement(a)?(n=this._findLastTextNode(a))&&(s.endIndex=n.length):s.endIndex=e.endOffset,o=this._iteratorOfTextNodeBefore(s,a),this._container=null,o)},_iteratorOfTextNodeBefore:function(e,t){var n;if(r.isText(t))n=t;else{if(!r.isElement(t))return;n=this._findLastTextNode(t)}if(n)return e.textNodeArray.unshift(n),this._parseTextNodeObject(e)||this._iteratorOfTextNodeBefore(e,this._findPreviousNode(n))},_findPreviousNode:function(e){var t=e.previousSibling;return t?this._isUnvalidElement(t)?null:t:(e=e.parentNode)?this._findPreviousNode(e):null},_findLastTextNode:function(e){var t,n,o;if(e){if(r.isText(e))return e;if(0===(o=e.childNodes.length))return e=this._findPreviousNode(e),this._findLastTextNode(e);for(n=o-1;n>=0;n--)return t=e.childNodes[n],this._findLastTextNode(t)}return null},_parseTextNodeObject:function(e){var t,n,i,r,a,s="",l=e.textNodeArray[0].nodeValue,c=0,u="",d=e.endIndex,p=e.textNodeArray,h=e.textNodeArray.length;for(r=0;r<h-1;r++)u+=p[r].nodeValue;if(u+=p[h-1].nodeValue.slice(0,d),(t=o.matchEnd(u))&&t.result){for(i=t.result.index,a=0;a<h-1;a++){if(i-=s.length,s.length<=i&&l.length>i){c=a;break}s+=p[a].nodeValue,l+=p[a+1].nodeValue}n={uri:t.fullURI,startNode:p[c],startOffset:i,endNode:p[h-1],endOffset:d}}return n},_isUnvalidElement:function(e){var n,o;return!r.isText(e)&&(!r.isElement(e)||!t.contains(this._container,e)||(n=e.currentStyle||window.getComputedStyle(e,""),o="A"===e.nodeName,"block"===n.display||o))},_isInLinkElement:function(e){if(t.contains(this._container,e)){for(;e&&e!==this._container;){if("A"===e.nodeName)return!0;e=e.parentNode}return!1}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(4);return t=o.extend({name:"atom.SetInlineStyle",_selectedBlocks:null,_start:null,_end:null,_isFullText:!1,_oldStyleNameValues:{},_styleNameValues:null,initialize:function(){var e=this.options.args;this._oldStyleNameValues={},a.isCollabCommand(e)||(this._selectedBlocks=this.options.blocks,this._styleNameValues=this.options.styleNameValues,this._start=this.options.start,this._end=this.options.end,this._isFullText=this.options.fullText),t.__super__.initialize.apply(this)},apply:function(){var e=this;r.each(e._styleNameValues,function(t,n){e._setStyleToSelectedBlocks(n,t)})},doUnapply:function(){var e,t=this;r.each(t._selectedBlocks,function(n){e=t._oldStyleNameValues[n.getId()],t._isFullText&&(t._start=n.getStartOffset(),t._end=n.getEndOffset()),r.each(e,function(e,o){n.setTextStyle(o,e,t._start,t._end)})})},fromCollabJSON:function(){var e,n=this,o=n.options.args.collabProperties,i=o.cmdJSON;t.__super__.fromCollabJSON.apply(n),e=o.coreEditor.getNote(),i&&(n._selectedBlocks=[],r.each(i.blockIds,function(t){n._selectedBlocks.push(e.getBlockById(t))}),n._styleNameValues=i.styleNameValues,n._oldStyleNameValues=i.oldStyleNameValues,n._start=i.startPosition,n._end=i.endPosition,n._isFullText=i.simpleValue1)},toCollabJSON:function(){var e=[],n=t.__super__.toCollabJSON.apply(this);return this._selectedBlockIds=[],r.each(this._selectedBlocks,function(t){e.push(t.getId())}),n.blockIds=e,n.styleNameValues=this._styleNameValues,n.oldStyleNameValues=this._oldStyleNameValues,n.startPosition=this._start,n.endPosition=this._end,this._isFullText&&(n.simpleValue1=!0),n},_setStyleToSelectedBlocks:function(e,t){var n,o,i=this,a={};a[e]=t,r.each(i._selectedBlocks,function(r){o=r.getId(),i._isFullText&&(i._start=r.getStartOffset(),i._end=r.getEndOffset()),n=r.getTextStyle(e,i._start,i._end),i._oldStyleNameValues[o]||(i._oldStyleNameValues[o]={}),i._oldStyleNameValues[o][e]=n,a=r.getInlineStylesForEmpty(),r.isEmpty()&&r.setInlineStylesForEmpty(i.getInlineStates(a,e,t)),r.setTextStyle(e,t,i._start,i._end)})},getInlineStates:function(e,t,n){if(e)return e[t]=n,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(4);return t=o.extend({name:"atom.SetBlockStyle",_selectedBlocks:null,_oldStyleNameValues:{},_styleNameValues:null,initialize:function(e){var n=this.options.args;this._oldStyleNameValues={},a.isCollabCommand(n)||(this._selectedBlocks=e.blocks,this._styleNameValues=this.options.styleNameValues),t.__super__.initialize.apply(this,arguments)},apply:function(){var e=this;r.each(e._styleNameValues,function(t,n){e._setStyleToSelectedBlocks(n,t)})},doUnapply:function(){var e,t=this;r.each(t._selectedBlocks,function(n){e=t._oldStyleNameValues[n.getId()],r.each(e,function(e,t){n.setBlockStyle(t,e)})})},fromCollabJSON:function(){var e=this,n=e.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(e),e._note=n.coreEditor.getNote(),o&&(e._selectedBlocks=[],r.each(o.blockIds,function(t){e._selectedBlocks.push(e._note.getBlockById(t))}),e._styleNameValues=o.styleNameValues,e._oldStyleNameValues=o.oldStyleNameValues)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this),n=[];return r.each(this._selectedBlocks,function(e){n.push(e.getId())}),e.blockIds=n,e.styleNameValues=this._styleNameValues,e.oldStyleNameValues=this._oldStyleNameValues,e},_setStyleToSelectedBlocks:function(e,t){var n,o,i=this;r.each(i._selectedBlocks,function(r){o=r.getId(),n=r.getBlockStyle(e),i._oldStyleNameValues[o]||(i._oldStyleNameValues[o]={}),i._oldStyleNameValues[o][e]=n,r.setBlockStyle(e,t)})}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(4),a={POINT:"point",CELL:"cell"};return t=o.extend({name:"atom.SetTableCellAttr",_table:null,_rect:null,_type:null,_value:null,_oldValue:null,effected:!1,initialize:function(){var e=this.options.args;r.isCollabCommand(e)||(this._table=this.options.table,this._rect=this.options.rect,this._type=this.options.type,this._value=this.options.value),t.__super__.initialize.apply(this)},apply:function(){var e=this._type,t=this._table,n=this._rect,o=this._value;if(o)return e===a.POINT?(this._oldValue=this._getOldAttr(n.row,n.col),t.setMergePointAttrAt(n.row,n.col,o.width,o.height),void(this.effected=!0)):e===a.CELL?(this._oldValue=this._getOldAttr(n.row,n.col),t.setMergedCellAttrAt(n.row,n.col,o.dx,o.dy),void(this.effected=!0)):void 0;(t.isMergePoint(n.row,n.col)||t.isMergedCell(n.row,n.col))&&(this._oldValue=this._getOldAttr(n.row,n.col),t.clearCellAttr(n.row,n.col),this.effected=!0)},_getOldAttr:function(e,t){var n=this._table;return n.isMergedCell(e,t)?n.getMergedCellAttrAt(e,t):n.isMergePoint(e,t)?n.getMergePointAttrAt(e,t):null},doUnapply:function(){var e=this._table,t=this._rect,n=this._oldValue;n?((n.width||n.height)&&e.setMergePointAttrAt(t.row,t.col,n.width,n.height),(n.dx||n.dy)&&e.setMergedCellAttrAt(t.row,t.col,n.dx,n.dy)):e.clearCellAttr(t.row,t.col)},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._value=o.styleNameValues,this._oldValue=o.oldStyleNameValues,this._rect=o.simpleValue1,this._type=o.simpleValue2)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.styleNameValues=this._value,e.oldStyleNameValues=this._oldValue,e.simpleValue1=this._rect,e.simpleValue2=this._type,e}},{TYPES:a}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{keyBackspace:{currentLineIsEmpty:{backToLineStart:!1,backToPreLineEnd:!0}},keyEnter:{whenEndCharIs:{",":0,")":0,"}":0,";":0,":":4,"(":4,"{":4,default:0}},keyTab:{addSpacesNum:4}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(6),i=n(35),r=n(201),a=n(189),s=n(202),l=n(307),c=n(308);return function(e){var n=i(e),u=n.querySelectorAll("img[data-media-type=attachment]"),d=n.querySelectorAll("img[data-media-type=image]"),p=n.querySelectorAll("div[yne-bulb-block=paragraph]"),h=n.querySelectorAll("ol"),f=n.querySelectorAll("ul");return t.each([p,h,f],function(e){t.each(e,function(e){e.style.fontFamily='"宋体", sans-serif',e.style.zoom="1.15"})}),t.each(u,function(e){r.processHtmlContent(o(e))}),t.each(d,function(e){var t,n=o(e);n.attr("alt")&&((t=document.createElement("div")).className="img-title",t.appendChild(document.createTextNode(n.attr("alt"))),n.after(t))}),e="<head><style>"+s+"</style><style>"+l+"</style><style>"+c+"</style><style>"+a+"</style></head>"+n.outerHTML}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".mixin-common-font {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: normal;\n  color: #41464b;\n}\n.mixin-token-font {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: 500;\n  color: #41464b;\n}\n.code-view.yne-code-theme-default {\n  /* page-break affect */\n}\n.code-view.yne-code-theme-default pre:first-child {\n  border-top: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-default pre:last-child {\n  border-bottom: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-default pre {\n  border-left: 1px solid rgba(208, 212, 217, 0.5);\n  border-right: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-default pre {\n  background-color: #f7f7f7;\n  line-height: 1.3;\n}\n.code-view.yne-code-theme-default .yne-plain {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: normal;\n  color: #41464b;\n}\n.code-view.yne-code-theme-default .yne-token {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: 500;\n  color: #41464b;\n}\n.code-view.yne-code-theme-default .yne-token.yne-comment,\n.code-view.yne-code-theme-default .yne-token.yne-prolog,\n.code-view.yne-code-theme-default .yne-token.yne-doctype,\n.code-view.yne-code-theme-default .yne-token.yne-cdata {\n  color: slategray;\n}\n.code-view.yne-code-theme-default .yne-token.yne-punctuation {\n  color: #999;\n}\n.code-view.yne-code-theme-default .yne-token .namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-default .yne-token.yne-property,\n.code-view.yne-code-theme-default .yne-token.yne-tag,\n.code-view.yne-code-theme-default .yne-token.yne-boolean,\n.code-view.yne-code-theme-default .yne-token.yne-number,\n.code-view.yne-code-theme-default .yne-token.yne-constant,\n.code-view.yne-code-theme-default .yne-token.yne-symbol,\n.code-view.yne-code-theme-default .yne-token.yne-deleted {\n  color: #905;\n}\n.code-view.yne-code-theme-default .yne-token.yne-selector,\n.code-view.yne-code-theme-default .yne-token.yne-attr-name,\n.code-view.yne-code-theme-default .yne-token.yne-string,\n.code-view.yne-code-theme-default .yne-token.yne-char,\n.code-view.yne-code-theme-default .yne-token.yne-builtin,\n.code-view.yne-code-theme-default .yne-token.yne-inserted {\n  color: #690;\n}\n.code-view.yne-code-theme-default .yne-token.yne-operator,\n.code-view.yne-code-theme-default .yne-token.yne-entity,\n.code-view.yne-code-theme-default .yne-token.yne-url {\n  color: #9a6e3a;\n  background: rgba(255, 255, 255, 0.5);\n}\n.code-view.yne-code-theme-default .yne-token.yne-atrule,\n.code-view.yne-code-theme-default .yne-token.yne-attr-value,\n.code-view.yne-code-theme-default .yne-token.yne-keyword {\n  color: #07a;\n}\n.code-view.yne-code-theme-default .yne-token.yne-function,\n.code-view.yne-code-theme-default .yne-token.yne-class-name {\n  color: #DD4A68;\n}\n.code-view.yne-code-theme-default .yne-token.yne-regex,\n.code-view.yne-code-theme-default .yne-token.yne-important,\n.code-view.yne-code-theme-default .yne-token.yne-variable {\n  color: #e90;\n}\n.code-view.yne-code-theme-default .yne-token.yne-important,\n.code-view.yne-code-theme-default .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-default .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-default .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-coy {\n  /* page-break affect */\n}\n.code-view.yne-code-theme-coy pre:first-child {\n  border-top: 1px solid transparent;\n}\n.code-view.yne-code-theme-coy pre:last-child {\n  border-bottom: 1px solid transparent;\n}\n.code-view.yne-code-theme-coy pre {\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n.code-view.yne-code-theme-coy pre {\n  color: black;\n  background: none;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  word-wrap: normal;\n  line-height: 1.6;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-coy pre {\n  border-left: 10px solid #358ccb;\n  box-shadow: -1px 0px 0px 0px #358ccb, 0px 0px 0px 0px #dfdfdf;\n  background-color: #fdfdfd;\n  background-image: linear-gradient(transparent 50%, rgba(69, 142, 209, 0.04) 50%);\n  background-size: 3em 3em;\n  background-origin: content-box;\n  background-attachment: local;\n}\n.code-view.yne-code-theme-coy pre {\n  background-color: #fdfdfd;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  padding-bottom: 0;\n  padding-top: 0;\n  padding-left: 1em;\n  position: relative;\n}\n.code-view.yne-code-theme-coy pre:nth-child(2n+1) {\n  background-color: #f6fafe;\n}\n.code-view.yne-code-theme-coy pre:before,\n.code-view.yne-code-theme-coy pre:after {\n  content: '';\n  z-index: -2;\n  display: block;\n  position: absolute;\n  bottom: 0.75em;\n  left: 0.18em;\n  width: 40%;\n  height: 20%;\n  max-height: 13em;\n  box-shadow: 0px 13px 8px #979797;\n  -webkit-transform: rotate(-2deg);\n  -moz-transform: rotate(-2deg);\n  -ms-transform: rotate(-2deg);\n  -o-transform: rotate(-2deg);\n  transform: rotate(-2deg);\n}\n.code-view.yne-code-theme-coy .yne-plain {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: normal;\n  color: #41464b;\n}\n.code-view.yne-code-theme-coy .yne-token {\n  font-size: 14px;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  font-weight: 500;\n  color: #41464b;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-comment,\n.code-view.yne-code-theme-coy .yne-token.yne-block-comment,\n.code-view.yne-code-theme-coy .yne-token.yne-prolog,\n.code-view.yne-code-theme-coy .yne-token.yne-doctype,\n.code-view.yne-code-theme-coy .yne-token.yne-cdata {\n  color: #7D8B99;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-punctuation {\n  color: #5F6364;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-property,\n.code-view.yne-code-theme-coy .yne-token.yne-tag,\n.code-view.yne-code-theme-coy .yne-token.yne-boolean,\n.code-view.yne-code-theme-coy .yne-token.yne-number,\n.code-view.yne-code-theme-coy .yne-token.yne-function-name,\n.code-view.yne-code-theme-coy .yne-token.yne-constant,\n.code-view.yne-code-theme-coy .yne-token.yne-symbol,\n.code-view.yne-code-theme-coy .yne-token.yne-deleted {\n  color: #c92c2c;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-selector,\n.code-view.yne-code-theme-coy .yne-token.yne-attr-name,\n.code-view.yne-code-theme-coy .yne-token.yne-string,\n.code-view.yne-code-theme-coy .yne-token.yne-char,\n.code-view.yne-code-theme-coy .yne-token.yne-function,\n.code-view.yne-code-theme-coy .yne-token.yne-builtin,\n.code-view.yne-code-theme-coy .yne-token.yne-inserted {\n  color: #2f9c0a;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-operator,\n.code-view.yne-code-theme-coy .yne-token.yne-entity,\n.code-view.yne-code-theme-coy .yne-token.yne-url,\n.code-view.yne-code-theme-coy .yne-token.yne-variable {\n  color: #a67f59;\n  background: rgba(255, 255, 255, 0.5);\n}\n.code-view.yne-code-theme-coy .yne-token.yne-atrule,\n.code-view.yne-code-theme-coy .yne-token.yne-attr-value,\n.code-view.yne-code-theme-coy .yne-token.yne-keyword,\n.code-view.yne-code-theme-coy .yne-token.yne-class-name {\n  color: #1990b8;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-regex,\n.code-view.yne-code-theme-coy .yne-token.yne-important {\n  color: #e90;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-style,\n.code-view.yne-code-theme-coy .yne-token.yne-string {\n  color: #a67f59;\n  background: rgba(255, 255, 255, 0.5);\n}\n.code-view.yne-code-theme-coy .yne-token.yne-important {\n  font-weight: normal;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-coy .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-tomorrow {\n  /* page-break affect */\n}\n.code-view.yne-code-theme-tomorrow pre {\n  color: #ccc;\n  background: none;\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  word-wrap: normal;\n  line-height: 1.3;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-tomorrow pre {\n  background: #2d2d2d;\n  caret-color: white;\n}\n.code-view.yne-code-theme-tomorrow pre:first-child {\n  border-top: 1px solid transparent;\n}\n.code-view.yne-code-theme-tomorrow pre:last-child {\n  border-bottom: 1px solid transparent;\n}\n.code-view.yne-code-theme-tomorrow pre {\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-comment,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-block-comment,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-prolog,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-doctype,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-cdata {\n  color: #999;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-punctuation {\n  color: #ccc;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-tag,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-attr-name,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-namespace,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-deleted {\n  color: #e2777a;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-function-name {\n  color: #6196cc;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-boolean,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-number,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-function {\n  color: #f08d49;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-property,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-class-name,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-constant,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-symbol {\n  color: #f8c555;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-selector,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-important,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-atrule,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-keyword,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-builtin {\n  color: #cc99cd;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-string,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-char,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-attr-value,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-regex,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-variable {\n  color: #7ec699;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-operator,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-entity,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-url {\n  color: #67cdcc;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-important,\n.code-view.yne-code-theme-tomorrow .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-tomorrow .yne-token.yne-inserted {\n  color: green;\n}\n.code-view.yne-code-theme-okaidia {\n  /* Code blocks */\n  /* page-break affect */\n}\n.code-view.yne-code-theme-okaidia pre {\n  color: #f8f8f2;\n  background: none;\n  text-shadow: 0 1px rgba(0, 0, 0, 0.3);\n  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  word-wrap: normal;\n  line-height: 1.3;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-okaidia pre {\n  background: #272822;\n  caret-color: white;\n}\n.code-view.yne-code-theme-okaidia pre:first-child {\n  border-top: 1px solid transparent;\n}\n.code-view.yne-code-theme-okaidia pre:last-child {\n  border-bottom: 1px solid transparent;\n}\n.code-view.yne-code-theme-okaidia pre {\n  border-left: 1px solid transparent;\n  border-right: 1px solid transparent;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-comment,\n.code-view.yne-code-theme-okaidia .yne-token.yne-prolog,\n.code-view.yne-code-theme-okaidia .yne-token.yne-doctype,\n.code-view.yne-code-theme-okaidia .yne-token.yne-cdata {\n  color: slategray;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-punctuation {\n  color: #f8f8f2;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-property,\n.code-view.yne-code-theme-okaidia .yne-token.yne-tag,\n.code-view.yne-code-theme-okaidia .yne-token.yne-constant,\n.code-view.yne-code-theme-okaidia .yne-token.yne-symbol,\n.code-view.yne-code-theme-okaidia .yne-token.yne-deleted {\n  color: #f92672;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-boolean,\n.code-view.yne-code-theme-okaidia .yne-token.yne-number {\n  color: #ae81ff;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-selector,\n.code-view.yne-code-theme-okaidia .yne-token.yne-attr-name,\n.code-view.yne-code-theme-okaidia .yne-token.yne-string,\n.code-view.yne-code-theme-okaidia .yne-token.yne-char,\n.code-view.yne-code-theme-okaidia .yne-token.yne-builtin,\n.code-view.yne-code-theme-okaidia .yne-token.yne-inserted {\n  color: #a6e22e;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-operator,\n.code-view.yne-code-theme-okaidia .yne-token.yne-entity,\n.code-view.yne-code-theme-okaidia .yne-token.yne-url,\n.code-view.yne-code-theme-okaidia .yne-token.yne-language-css .string,\n.code-view.yne-code-theme-okaidia .yne-token.yne-style .string,\n.code-view.yne-code-theme-okaidia .yne-token.yne-variable {\n  color: #f8f8f2;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-atrule,\n.code-view.yne-code-theme-okaidia .yne-token.yne-attr-value,\n.code-view.yne-code-theme-okaidia .yne-token.yne-function,\n.code-view.yne-code-theme-okaidia .yne-token.yne-class-name {\n  color: #e6db74;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-keyword {\n  color: #66d9ef;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-regex,\n.code-view.yne-code-theme-okaidia .yne-token.yne-important {\n  color: #fd971f;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-important,\n.code-view.yne-code-theme-okaidia .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-okaidia .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-Ateliersulphurpool {\n  /* Code blocks */\n  /* page-break affect */\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre {\n  font-family: Consolas, Menlo, Monaco, \"Andale Mono WT\", \"Andale Mono\", \"Lucida Console\", \"Lucida Sans Typewriter\", \"DejaVu Sans Mono\", \"Bitstream Vera Sans Mono\", \"Liberation Mono\", \"Nimbus Mono L\", \"Courier New\", Courier, monospace;\n  font-size: 14px;\n  line-height: 1.375;\n  direction: ltr;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n  background: #f5f7ff;\n  color: #5e6687;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre::-moz-selection,\n.code-view.yne-code-theme-Ateliersulphurpool pre::-moz-selection {\n  text-shadow: none;\n  background: #dfe2f1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre::selection,\n.code-view.yne-code-theme-Ateliersulphurpool pre::selection {\n  text-shadow: none;\n  background: #dfe2f1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre {\n  margin: 0;\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre:first-child {\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre:last-child {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n.code-view.yne-code-theme-Ateliersulphurpool pre {\n  border-left: 1px solid rgba(0, 0, 0, 0.05);\n  border-right: 1px solid rgba(0, 0, 0, 0.05);\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-comment,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-prolog,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-doctype,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-cdata {\n  color: #898ea4;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-punctuation {\n  color: #5e6687;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-operator,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-boolean,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-number {\n  color: #c76b29;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-property {\n  color: #c08b30;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-tag {\n  color: #3d8fd1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-string {\n  color: #22a2c9;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-selector {\n  color: #6679cc;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-attr-name {\n  color: #c76b29;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-entity,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-url,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-string,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-string {\n  color: #22a2c9;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-attr-value,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-keyword,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-control,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-directive,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-unit {\n  color: #ac9739;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-statement,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-regex,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-atrule {\n  color: #22a2c9;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-placeholder,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-variable {\n  color: #3d8fd1;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-deleted {\n  text-decoration: line-through;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-inserted {\n  border-bottom: 1px dotted #202746;\n  text-decoration: none;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-important,\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-important {\n  color: #c94922;\n}\n.code-view.yne-code-theme-Ateliersulphurpool .yne-token.yne-entity {\n  cursor: help;\n}\n.code-view.yne-code-theme-vs {\n  /* Code blocks */\n  /* page-break affect */\n}\n.code-view.yne-code-theme-vs pre {\n  color: #393A34;\n  font-family: \"Consolas\", \"Bitstream Vera Sans Mono\", \"Courier New\", Courier, monospace;\n  direction: ltr;\n  text-align: left;\n  word-spacing: normal;\n  word-break: normal;\n  font-size: 0.95em;\n  line-height: 1.6em;\n  -moz-tab-size: 4;\n  -o-tab-size: 4;\n  tab-size: 4;\n  -webkit-hyphens: none;\n  -moz-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n}\n.code-view.yne-code-theme-vs pre::-moz-selection,\n.code-view.yne-code-theme-vs pre::-moz-selection {\n  background: #C1DEF1;\n}\n.code-view.yne-code-theme-vs pre::selection,\n.code-view.yne-code-theme-vs pre::selection {\n  background: #C1DEF1;\n}\n.code-view.yne-code-theme-vs pre {\n  padding: 0;\n  margin: 0;\n  background-color: white;\n}\n.code-view.yne-code-theme-vs pre:first-child {\n  border-top: 1px solid #dddddd;\n}\n.code-view.yne-code-theme-vs pre:last-child {\n  border-bottom: 1px solid #dddddd;\n}\n.code-view.yne-code-theme-vs pre {\n  border-left: 1px solid #dddddd;\n  border-right: 1px solid #dddddd;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-comment,\n.code-view.yne-code-theme-vs .yne-token.yne-prolog,\n.code-view.yne-code-theme-vs .yne-token.yne-doctype,\n.code-view.yne-code-theme-vs .yne-token.yne-cdata {\n  color: #008000;\n  font-style: italic;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-namespace {\n  opacity: .7;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-string {\n  color: #A31515;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-punctuation,\n.code-view.yne-code-theme-vs .yne-token.yne-operator {\n  color: #393A34;\n  /* no highlight */\n}\n.code-view.yne-code-theme-vs .yne-token.yne-url,\n.code-view.yne-code-theme-vs .yne-token.yne-symbol,\n.code-view.yne-code-theme-vs .yne-token.yne-number,\n.code-view.yne-code-theme-vs .yne-token.yne-boolean,\n.code-view.yne-code-theme-vs .yne-token.yne-variable,\n.code-view.yne-code-theme-vs .yne-token.yne-constant,\n.code-view.yne-code-theme-vs .yne-token.yne-inserted {\n  color: #36acaa;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-function {\n  color: #00009f;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-deleted,\n.code-view.yne-code-theme-vs .yne-token.yne-tag {\n  color: #9a050f;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-selector,\n.code-view.yne-code-theme-vs .yne-token.yne-keyword {\n  color: #00009f;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-important,\n.code-view.yne-code-theme-vs .yne-token.yne-bold {\n  font-weight: bold;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-italic {\n  font-style: italic;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-class-name,\n.code-view.yne-code-theme-vs .yne-token.yne-property {\n  color: #2B91AF;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-tag,\n.code-view.yne-code-theme-vs .yne-token.yne-selector {\n  color: #800000;\n}\n.code-view.yne-code-theme-vs .yne-token.yne-attr-name,\n.code-view.yne-code-theme-vs .yne-token.yne-property,\n.code-view.yne-code-theme-vs .yne-token.yne-regex,\n.code-view.yne-code-theme-vs .yne-token.yne-entity {\n  color: #ff0000;\n}\n.platform-pc .code-view {\n  width: calc(100vw - 60px);\n}\n.page-A4 .code-view,\n.read-mode .code-view {\n  width: 622px;\n}\n.page-A4 .code-view pre,\n.read-mode .code-view pre {\n  min-width: 605px;\n}\n.share .code-view {\n  width: 600px;\n}\n.share .code-view .para-text pre {\n  min-width: 590px;\n}\n.code-view .para-text.selectAll pre {\n  border-color: #4C98EF;\n}\n.combo-box-code-language .combo-menu-wrapper .combo-menu.combo-menu-code-language {\n  max-height: 300px;\n  overflow-y: scroll;\n}\n.code-view {\n  width: calc(100vw - 68px);\n  white-space: pre;\n  overflow-x: auto;\n  overflow-y: hidden;\n  counter-reset: lineNumber;\n  margin: 0 20px;\n}\n.code-view .para-text {\n  cursor: pointer;\n  margin: 0 auto;\n  padding: .5em .2em 0 .2em;\n  width: max-content;\n}\n.code-view .page-break-placeholder {\n  user-select: none;\n}\n.code-view pre {\n  counter-increment: lineNumber;\n  padding: .25em 0;\n  margin: 0;\n  min-width: calc(100vw - 77px);\n  cursor: auto;\n}\n.code-view pre:before {\n  content: counter(lineNumber);\n  width: 36px;\n  padding: 0 1em;\n  font-size: 12px;\n  color: grey;\n  user-select: none;\n}\n.note-view-wrapper .block-view.collab-editing-view.code-view {\n  margin: 0 20px;\n  padding-left: 0;\n}\n.note-view-wrapper .block-view.collab-editing-view.code-view {\n  pointer-events: initial;\n}\n",""])},function(e,t,n){(e.exports=n(68)(!1)).push([e.i,".code-view {\n  overflow-x: hidden;\n  margin: 0 auto;\n  white-space: normal;\n}\n.code-view .para-text {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n  width: 100%;\n}\n.code-view .para-text pre {\n  text-indent: -1em;\n  padding-left: 1em;\n  border-right: none;\n  word-break: break-all;\n  white-space: normal;\n}\n.code-view.yne-code-theme-default .para-text {\n  border-right: 1px solid rgba(208, 212, 217, 0.5);\n}\n.code-view.yne-code-theme-vs .para-text {\n  border-right: 1px solid #dddddd;\n}\n",""])},function(e,t,n){e.exports=!n(30)&&!n(15)(function(){return 7!=Object.defineProperty(n(210)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){t.f=n(24)},function(e,t,n){var o=n(55),i=n(56),r=n(175)(!1),a=n(212)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=a&&o(s,n)&&c.push(n);for(;t.length>l;)o(s,n=t[l++])&&(~r(c,n)||c.push(n));return c}},function(e,t,n){var o=n(31),i=n(10),r=n(113);e.exports=n(30)?Object.defineProperties:function(e,t){i(e);for(var n,a=r(t),s=a.length,l=0;s>l;)o.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var o=n(56),i=n(116).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(o(e))}},function(e,t,n){"use strict";var o=n(113),i=n(176),r=n(153),a=n(32),s=n(152),l=Object.assign;e.exports=!l||n(15)(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=o})?function(e,t){for(var n=a(e),l=arguments.length,c=1,u=i.f,d=r.f;l>c;)for(var p,h=s(arguments[c++]),f=u?o(h).concat(u(h)):o(h),g=f.length,y=0;g>y;)d.call(h,p=f[y++])&&(n[p]=h[p]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var o=n(40),i=n(18),r=n(317),a=[].slice,s={};e.exports=Function.bind||function(e){var t=o(this),n=a.call(arguments,1),l=function(){var o=n.concat(a.call(arguments));return this instanceof l?function(e,t,n){if(!(t in s)){for(var o=[],i=0;i<t;i++)o[i]="a["+i+"]";s[t]=Function("F,a","return new F("+o.join(",")+")")}return s[t](e,n)}(t,o.length,o):r(t,o,e)};return i(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t){e.exports=function(e,t,n){var o=void 0===n;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var o=n(12).parseInt,i=n(137).trim,r=n(216),a=/^[-+]?0[xX]/;e.exports=8!==o(r+"08")||22!==o(r+"0x16")?function(e,t){var n=i(String(e),3);return o(n,t>>>0||(a.test(n)?16:10))}:o},function(e,t,n){var o=n(12).parseFloat,i=n(137).trim;e.exports=1/o(n(216)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){var o=n(65);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=o(e))throw TypeError(t);return+e}},function(e,t,n){var o=n(18),i=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var o=n(219),i=Math.pow,r=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),l=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=o(e);return i<l?c*(i/l/a+1/r-1/r)*l*a:(n=(t=(1+a/r)*i)-(t-i))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var o=n(10);e.exports=function(e,t,n,i){try{return i?t(o(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&o(r.call(e)),t}}},function(e,t,n){var o=n(40),i=n(32),r=n(152),a=n(25);e.exports=function(e,t,n,s,l){o(t);var c=i(e),u=r(c),d=a(c.length),p=l?d-1:0,h=l?-1:1;if(n<2)for(;;){if(p in u){s=u[p],p+=h;break}if(p+=h,l?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;l?p>=0:d>p;p+=h)p in u&&(s=t(s,u[p],p,c));return s}},function(e,t,n){"use strict";var o=n(32),i=n(114),r=n(25);e.exports=[].copyWithin||function(e,t){var n=o(this),a=r(n.length),s=i(e,a),l=i(t,a),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?a:i(c,a))-l,a-s),d=1;for(l<s&&s<l+u&&(d=-1,l+=u-1,s+=u-1);u-- >0;)l in n?n[s]=n[l]:delete n[s],s+=d,l+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var o=n(231);n(2)({target:"RegExp",proto:!0,forced:o!==/./.exec},{exec:o})},function(e,t,n){n(30)&&"g"!=/./g.flags&&n(31).f(RegExp.prototype,"flags",{configurable:!0,get:n(154)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var o=n(10),i=n(18),r=n(235);e.exports=function(e,t){if(o(e),i(t)&&t.constructor===e)return t;var n=r.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var o=n(333),i=n(121);e.exports=n(184)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=o.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return o.def(i(this,"Map"),0===e?0:e,t)}},o,!0)},function(e,t,n){"use strict";var o=n(31).f,i=n(115),r=n(120),a=n(64),s=n(118),l=n(119),c=n(221),u=n(327),d=n(117),p=n(30),h=n(105).fastKey,f=n(121),g=p?"_s":"size",y=function(e,t){var n,o=h(t);if("F"!==o)return e._i[o];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e(function(e,o){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,null!=o&&l(o,n,e[c],e)});return r(u.prototype,{clear:function(){for(var e=f(this,t),n=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete n[o.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=f(this,t),o=y(n,e);if(o){var i=o.n,r=o.p;delete n._i[o.i],o.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==o&&(n._f=i),n._l==o&&(n._l=r),n[g]--}return!!o},forEach:function(e){f(this,t);for(var n,o=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(o(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(f(this,t),e)}}),p&&o(u.prototype,"size",{get:function(){return f(this,t)[g]}}),u},def:function(e,t,n){var o,i,r=y(e,t);return r?r.v=n:(e._l=r={i:i=h(t,!0),k:t,v:n,p:o=e._l,n:void 0,r:!1},e._f||(e._f=r),o&&(o.n=r),e[g]++,"F"!==i&&(e._i[i]=r)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=f(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var o=n(333),i=n(121);e.exports=n(184)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return o.def(i(this,"Set"),e=0===e?0:e,e)}},o)},function(e,t,n){"use strict";var o,i=n(12),r=n(80)(0),a=n(50),s=n(105),l=n(314),c=n(336),u=n(18),d=n(121),p=n(121),h=!i.ActiveXObject&&"ActiveXObject"in i,f=s.getWeak,g=Object.isExtensible,y=c.ufstore,m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(u(e)){var t=f(e);return!0===t?y(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(d(this,"WeakMap"),e,t)}},b=e.exports=n(184)("WeakMap",m,v,c,!0,!0);p&&h&&(l((o=c.getConstructor(m,"WeakMap")).prototype,v),s.NEED=!0,r(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(u(t)&&!g(t)){this._f||(this._f=new o);var r=this._f[e](t,i);return"set"==e?this:r}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var o=n(120),i=n(105).getWeak,r=n(10),a=n(18),s=n(118),l=n(119),c=n(80),u=n(55),d=n(121),p=c(5),h=c(6),f=0,g=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},m=function(e,t){return p(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var c=e(function(e,o){s(e,c,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=o&&l(o,n,e[r],e)});return o(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).has(e):n&&u(n,this._i)}}),c},def:function(e,t,n){var o=i(r(t),!0);return!0===o?g(e).set(t,n):o[e._i]=n,e},ufstore:g}},function(e,t,n){var o=n(66),i=n(25);e.exports=function(e){if(void 0===e)return 0;var t=o(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var o=n(116),i=n(176),r=n(10),a=n(12).Reflect;e.exports=a&&a.ownKeys||function(e){var t=o.f(r(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var o=n(177),i=n(18),r=n(25),a=n(64),s=n(24)("isConcatSpreadable");e.exports=function e(t,n,l,c,u,d,p,h){for(var f,g,y=u,m=0,v=!!p&&a(p,h,3);m<c;){if(m in l){if(f=v?v(l[m],m,n):l[m],g=!1,i(f)&&(g=void 0!==(g=f[s])?!!g:o(f)),g&&d>0)y=e(t,n,f,r(f.length),y,d-1)-1;else{if(y>=9007199254740991)throw TypeError();t[y]=f}y++}m++}return y}},function(e,t,n){var o=n(25),i=n(218),r=n(78);e.exports=function(e,t,n,a){var s=String(r(e)),l=s.length,c=void 0===n?" ":String(n),u=o(t);if(u<=l||""==c)return s;var d=u-l,p=i.call(c,Math.ceil(d/c.length));return p.length>d&&(p=p.slice(0,d)),a?p+s:s+p}},function(e,t,n){var o=n(113),i=n(56),r=n(153).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=o(a),l=s.length,c=0,u=[];l>c;)r.call(a,n=s[c++])&&u.push(e?[n,a[n]]:a[n]);return u}}},function(e,t,n){var o=n(136),i=n(343);e.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var o=n(119);e.exports=function(e,t){var n=[];return o(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,o,i){return 0===arguments.length||e!=e||t!=t||n!=n||o!=o||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-o)/(n-t)+o}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,,,,,,,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0);return{getAsArray:function(){return[9,12,14,16,18,22,26,30,36,42]},getAsList:function(){var e=this.getAsArray(),n={};return t.each(e,function(e){n[e]=e}),n},getMin:function(){return this.getAsArray()[0]},getMax:function(){var e=this.getAsArray();return e[e.length-1]}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return function(e){var t,n;window.getSelection?(t=window.getSelection()).getRangeAt&&t.rangeCount&&((n=t.getRangeAt(0)).deleteContents(),n.insertNode(document.createTextNode(e))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=e)}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(e){var t=e.getSource();if(t.startsWith("http")){var n=t.split("/");n.length>=2&&(t=n[n.length-2])}return t}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(11),n(13)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var o,i=this.editor,r=!1;i&&t&&t.imgBlock?n.IS_PC&&i.isCollabEnabled()?this.isHidden=this.isDisabled=!0:((o=t.imgBlock.getSource(!0))&&(r=o.toLocaleLowerCase().endsWith("gif")),this.isDisabled=r,this.imgBlock=t.imgBlock):this.isHidden=this.isDisabled=!0},t.prototype.reset=function(){this.imgBlock=null},t.prototype.selectAction=function(){this.editor.trigger("yne-rotate-image",this.imgBlock.getId(),this.imgBlock.getSource(),this.direction)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.direction=t.direction||0},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({editorEvents:{"yne-selection-change":"onSelectionChange"},onSelectionChange:function(){this.$el.hasClass("disabled")||this.setState(this.querySelectionState())},querySelectionState:function(){return this.editor.querySelectionInlineStyle(this.name)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(704),o=n(0);return t.extend({editorEvents:{"yne-editing-state-change":"onEditingStateChange"},onEditingStateChange:function(e){o.has(e,this.name)&&(this.selectedValue=e[this.name])}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0)],void 0===(i=function(e,t,n){var o,i,r={ACTION_SHOW_ENABLE:1,ACTION_HIDE:2,ACTION_ENABLE:3,ACTION_DISABLE:4},a={RANGE_DEFAULT:1,RANGE_HEADER_FOOTER:2,RANGE_TABLE_CELL:3,RANGE_CATALOGUE:4,RANGE_IMAGE:5,RANGE_ATTACHMENT:6,HANDWRITE_DEFAULT:11,RANGE_QUOTE:7,RANGE_CODE:8},s={EDITOR_BUTTON_STATE_MAP:{undo:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE}],redo:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE}],"remove-format":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"format-painter":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"base-split":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE}],heading:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.HANDWRITE_DEFAULT,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"no-table-split":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE}],"font-family":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"font-size":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],bold:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],italic:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],underline:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],strike:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],color:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"back-color":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"unordered-list":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"ordered-list":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],todo:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.HANDWRITE_DEFAULT,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],quote:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.HANDWRITE_DEFAULT,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],code:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],"code-theme":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_CODE,action:r.ACTION_SHOW_ENABLE}],"code-language":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_CODE,action:r.ACTION_SHOW_ENABLE}],align:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_QUOTE,action:r.ACTION_DISABLE}],"table-justify":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],indent:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE},{on:a.RANGE_QUOTE,action:r.ACTION_DISABLE}],outdent:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE},{on:a.RANGE_QUOTE,action:r.ACTION_DISABLE}],"line-height":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"table-wrap":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],"table-operate":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],"table-split":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],"table-merge":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}]},NATIVE_HEADER_FOOTER_DISABLED_MAP:{attachment:!0,catalogue:!0,hr:!0,img:!0,link:!0,table:!0},NATIVE_TABLE_DISABLED_MAP:{catalogue:!0,table:!0,hr:!0},NATIVE_HANDWRITE_DISABLED_MAP:{catalogue:!0},NATIVE_CATALOGUE_DISABLED_MAP:{catalogue:!0,img:!0,attachment:!0,hr:!0,link:!0,table:!0},NATIVE_CODE_DISABLED_MAP:{catalogue:!0,img:!0,attachment:!0,hr:!0,link:!0,table:!0}},l=["font-family","font-size","table","table-justify","table-wrap","table-operate","table-split","table-merge"];return o=["undo","redo","code","code-language","code-theme"].concat(l),i={on:a.RANGE_CODE,action:r.ACTION_DISABLE},Object.keys(s.EDITOR_BUTTON_STATE_MAP).forEach(function(e){o.indexOf(e)>-1||s.EDITOR_BUTTON_STATE_MAP[e].push(i)}),function(e,t){e.forEach(function(e){s.EDITOR_BUTTON_STATE_MAP[e]&&s.EDITOR_BUTTON_STATE_MAP[e].push(t)})}(l,{on:a.RANGE_CODE,action:r.ACTION_HIDE}),n.extend(s,r,a),s}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(82)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.QUOTE},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(82)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.TODO},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(6);return{isDataUrl:function(e){return/^data:/i.test(e)},isFileUrl:function(e){return/^(file:\/\/)/i.test(e)},isHttpUrl:function(e){return/^http/i.test(e)},has:function(e){return/\?\d+$/.test(String(e))},remove:function(e){return String(e).replace(/\?\d+$/,"")},addIfNeeded:function(e,n){if(e=String(e),e=o.trim(e),this.isHttpUrl(e))return e;if(this.isDataUrl(e))return e;if(this.has(e)){if(!0!==n)return e;e=this.remove(e)}else if(/\?/.test(e))return e;return e+"?"+t.uniqueId()}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(123),o=new RegExp("^http[s]{0,1}://"+t.getNamespace()),i="//"+t.getNamespace(),r=!1;return{setUseConvert:function(e){r=!!e},isInnerResoures:function(e){return o.test(e)},getURL:function(e){return r&&this.isInnerResoures(e)?e.replace(o,i):e}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(87),i=n(19),r=n(6),a=n(38),s=n(1),l=n(46),c=n(368),u=n(777),d=n(778),p=n(93),h=n(22),f=n(60),g=n(779),y=n(801),m=n(802),v=n(8),b=n(803),_=n(260),I=n(26),k=n(52),w=n(3),C=n(53),S=n(143),x=n(95),A=n(102),T=n(11),N=n(76),E=n(131),D=n(9),M=n(370),O=n(61);return n(805),o.extend({className:"block-view table-view",_template:i.getTemplate("common","table_view"),_wrapperElClassName:"table-wrapper",_cellEditClassName:"cell-edit",_cellSelectedClassName:"cell-selected",_layoutElClassName:"table-layout",_layoutInnerElClassName:"table-layout-inner",_rectOnDragStart:null,_oldRangeType:null,_rending:null,_preSelectionRect:null,_isPasteAsText:!1,_OCRHighlightInfos:null,_OCRHighlightItem:null,events:{"mouseenter td":"_onCellMouseEnter","mouseleave td":"_onCellMouseLeave",mousedown:"_onMouseDown",dblclick:"_onDblclick",click:"_onClick","mouseenter a":"_onEnterLink","mouseleave a":"_onLeaveLink"},initialize:function(){o.prototype.initialize.apply(this,arguments),this._draggable=new c({el:this.el,disableDocSelection:!0}),this.bindSelectionEvents(),this._initEvents(),this._OCRHighlightInfos=[],this._OCRHighlightItem=[]},_initEvents:function(){var e=this.block,n=this._draggable,o={};t.bindAll(this,"_onAttributeChanged","_onDragging","_onStyleChange"),l.addListeners({"cell-inline-style-change":"_onCellInlineStyleChange","cell-block-style-change":"_onCellBlockStyleChange","row-height-set":"_onRowHeightSet","col-width-set":"_onColWidthSet","row-inserted":"_onRowInserted","col-inserted":"_onColInserted","row-deleted":"_onRowDeleted","col-deleted":"_onColDeleted","cell-content-change":"_onCellContentChange","content-change":"_reRenderCells","high-light":"onHighlight"},e,this),e.on("attribute-changed",t.throttle(this._onAttributeChanged),100),e.on("style-change",this._onStyleChange),o[c.DRAG_START]="_onDragStart",o[c.DRAG_END]="_onDragEnd",l.addListeners(o,n,this),n.on(c.DRAGGING,t.throttle(this._onDragging,100)),this._triggerResize=t.throttle(this._triggerResize,100)},_removeSubViews:function(){var e=this;t.each(["_cellEditView","_selectionView","_hiddenInputView"],function(t){var n=e[t];n&&(n.destroy?n.destroy():s.error("view has no destroy()",n),e[t]=null)})},_addSubViews:function(){var e,n=this,o=n._keyHandlerManager;n._removeSubViews(),n._cellEditView=g.create({table:n.block,tableView:n,styleRules:n._getStyleRules(),mapper:this._inlineStyleViewMapper}),l.addListeners({"set-cell-content":"_onSetCellContent",blur:"_onCellEditViewBlur","cell-edit-view-exit":"_onCellEditViewExit","cell-edit-view-enter":"_onCellEditViewEnter"},n._cellEditView,n),l.bubble({"cell-edit-view-selection-change":!0,"cell-edit-view-exit":!0,"cell-edit-view-history-change":!0,"cell-edit-view-command-executed":!0},n._cellEditView,n),n.addViewToInner(n._cellEditView),n._selectionView=new d({tableView:n}),n.addViewToInner(n._selectionView),n._cellResizeView=new m({tableView:n}),n.addViewToInner(n._cellResizeView),l.addListeners({"set-row-height":"_onSetRowHeight","set-col-width":"_onSetColWidth","set-cells-size":"_setCellsSize"},n._cellResizeView,n),n._hiddenInputView=y.create({}),o||(o=n._keyHandlerManager=new v({scope:"table-hidden-input"})),o.on("bind-key",function(e){var t=n._hiddenInputView;t&&t.bindKey(e)}),o.on("unbind-key",function(e){var t=n._hiddenInputView;t&&t.unbindKey(e)}),e=o.getAvailableHandlerNames(),t.each(e,function(e){o.bind(e)}),n.addView(n._hiddenInputView),l.addListeners({"key-monitor":"_onKey",copy:"_onCopy",cut:"_onCut",paste:"_onPaste","text-input":"_onTextInput"},n._hiddenInputView,n)},_onSetCellContent:function(e,t){var n=this.block.getCellById(e);n?this.trigger("command","comp.SetTableCellContent",{table:this.block,cellRect:{row:n.row,col:n.col},content:t}):s.error("Not find cell! by id:",e)},_onCellEditViewBlur:function(){},_onCellEditViewExit:function(){this._hiddenInputView.hideBehind()},_onKey:function(e,t){this._keyHandlerManager.execWithKey(e,this,t)},_onCopy:function(e){e.stopPropagation(),e.preventDefault(),this.trigger("copy",e)},_onCut:function(e){var t=this._getNoteRange();e.stopPropagation(),e.preventDefault(),this.trigger("cut",e),t.isSingleTableSelected()&&this._clearSelectCells()},_pasteBlobImg:function(e){var t,n,o,i=this;t=e.originalEvent.clipboardData.items,o=i._getRectOfNoteRange(),t&&1===t.length&&0===t[0].type.indexOf("image")&&o&&(n=t[0].getAsFile(),i.trigger("yne-blob-paste",{isImg:!0,data:n},function(e){e&&e.source&&i.trigger("command","comp.SetTableCellContent",{table:i.block,cellRect:{row:o.top,col:o.left},content:O.create({source:e.source})})}))},_onPaste:function(e){e.stopPropagation(),e.preventDefault();var t,n,o,i,r,a,s,l=this._isPasteAsText;T.IS_PC?this.trigger("yne-on-paste",l,e):(t=new M({event:e}),l?(r=t.getData("text/plain"))&&this._pastePlain(r):(n=t.getData("text/yne-json"))&&this._pasteJSON(n)||(o=t.getData("text/yne-table-json"))&&this._pasteYTableJson(o)||(i=t.getData("text/html"))&&this._pasteHTML(i)||(s=(a=this.noteView.options.editor)&&a.callMacNativeApi("macClipboardData",["image"]))&&this._pasteImages(s)||(r=t.getData("text/plain"))&&this._pastePlain(r)||this._pasteBlobImg(e))},_pasteHTML:function(e){var t=S.parseHtml(e);return this.pasteBlockList(t)},_pasteJSON:function(e){var t=S.parseJSON(e);return this.pasteBlockList(t)},_pasteYTableJson:function(e){if(t.isString(e))try{e=window.JSON.parse(e)}catch(e){return void s.error("parse ytable json  string error")}return this._pasteJSON([{blockType:w.TABLE,data:e}])},_pasteImages:function(e){var t,n=[];e=JSON.parse(e);for(var o=0;o<e.length;o++)(t=e[o])&&n.push(new C({source:t,title:""}));return this.pasteBlockList(n)},_pastePlain:function(e){var t=S.parsePlain(e);return this.pasteBlockList(t)},pasteBlockList:function(e){var t=this.block,n=[],o=[];return!(!e||!e.length)&&(1===e.length&&w.isTable(e[0])?(this.trigger("command","comp.InsertTableCells",{table:t,widths:e[0].colWidths,heights:e[0].rowHeights,cellsData:e[0].tableCells}),!0):(e.forEach(function(e){var t=x.blockToCell(e);t&&n.push(t)}),n.length>0?(n.forEach(function(e){o.push([e])}),this.trigger("command","comp.InsertTableCells",{table:t,cellsData:o}),!0):void 0))},deleteTable:function(){this.trigger("command","comp.DeleteNoteRange",{isTableDelete:!0})},isSelectAllRect:function(){var e=this._getRectRange().getRect(),t=this.block;return e.width*e.height==t.getColumnCount()*t.getRowCount()},_clearSelectCells:function(){var e=this.block;e.isEmptyContent()&&this.isSelectAllRect()?this.deleteTable():this.trigger("command","comp.InsertTableCells",{table:e})},_onTextInput:function(e){var t,n,o,i,r=this._getRectOfNoteRange();r?this.isLocked()||(t=this.block.getCell(r.top,r.left,{findMergePointIfNeeded:!0,withPosition:!0}))&&((n=t.cell)&&n.isEmpty()?(o=n.getStylesForEmpty(),(i=D.create(e,!1)).setStyles(0,i.getLength(),o)):i=D.create(e,!1),this._cellEditView.showAndEdit({row:t.row,col:t.col,content:i})):s.warn("Failed to show cellEditView",r)},moveWithDirection:function(e,t){var n,o=this.block,i=this._getRectOfNoteRange(),r=1,a=1;if(i){if(o.isMergePoint(i.top,i.left)&&(a=(n=o.getMergePointAttrAt(i.top,i.left)).height,r=n.width),e===A.UP){if(i.top-a<0)return this.trigger("move-caret",!1,t);this._setRange({top:i.top-a,left:i.left,width:1,height:1})}if(e===A.DOWN){if(i.top+a+i.height>o.getRowCount())return this.trigger("move-caret",!0,t);this._setRange({top:i.top+a,left:i.left,width:1,height:1})}if(e===A.LEFT)if(i.left-r<0){if(i.top-a<0)return this.trigger("move-caret",!1,t);this._setRange({top:i.top-a,left:o.getColumnCount()-1,width:1,height:1})}else this._setRange({top:i.top,left:i.left-r,width:1,height:1});if(e===A.RIGHT)if(i.left+r>o.getColumnCount()-1){if(o.isMergePoint(i.top,i.left)&&this._preSelectionRect&&o.getRowCount()-1===this._preSelectionRect.left&&this._preSelectionRect.top++,this._preSelectionRect&&this._preSelectionRect.top+1<o.getRowCount())return this._setRange({top:this._preSelectionRect.top+1,left:0,width:1,height:1});if(i.top+a+i.height>o.getRowCount())return this.trigger("move-caret",!0,t);this._setRange({top:i.top+a,left:0,width:1,height:1})}else o.isMergePoint(i.top,i.left)&&this._preSelectionRect?(o.getRowCount()-1===this._preSelectionRect.left&&this._preSelectionRect.top++,this._setRange({top:this._preSelectionRect.top,left:i.left+r,width:1,height:1})):this._setRange({top:i.top,left:i.left+r,width:1,height:1})}},toggleInlineStyle:function(e){this.trigger("command","comp.SetTableCellInlineStyle",{toggle:e})},clearSelectedCells:function(){this._clearSelectCells()},enterEditMode:function(){},selectAll:function(e){e&&this.trigger("select-all")},render:function(){var e=this.el;this._rending=!0,this._removeSubViews(),this._renderTemplate(),this.colgroupEl=e.querySelector("colgroup"),this.wrapperEl=e.querySelector("."+this._wrapperElClassName),this.tableEl=e.querySelector("table"),this._tableLayoutEl=e.querySelector("."+this._layoutElClassName),this._tableLayoutInnerEl=e.querySelector("."+this._layoutInnerElClassName),this._setTableStyles(),this._renderCells(),this._addSubViews(),o.prototype.render.apply(this,arguments),this._rending=!1,this._triggerResize()},addView:function(e){this._tableLayoutEl.appendChild(e.el),e.render()},addViewToInner:function(e){this._tableLayoutInnerEl.appendChild(e.el),e.render()},_renderTemplate:function(){this.$el.html(this._template())},_renderCells:function(){var e,t,n,o,i,a=this.block,l=this.tableEl,c=a.getRowCount(),u=a.getColumnCount(),d=l.querySelector("tbody"),p=[];for(r(d).hide(),o=0;o<c;o++){for(e=d.insertRow(o),i=0;i<u;i++)(t=a.getCell(o,i))||s.error("No find cell! row, col, block",o,i,a),t.isMergedCell()||(t.isAttachmentCell()&&p.push({row:o,col:i}),e.appendChild(this._renderCell(o,i)));n=a.getRowHeight(o),e.style.height=n?n+"px":""}r(d).show(),this._renderColumns(this.colgroupEl.querySelectorAll("col").length,u)},_loadCellImg:function(e,t){var n=this,o=e.querySelector("img");o&&r(o).load(function(){n._triggerResize(),t&&n._redrawRange()})},_createHighlightMark:function(){var e=this;e._clearHighlightMark(),t.each(e._OCRHighlightInfos,function(n){var o=r(e.getCellImageEl(n.cellId));if(null!=o&&0!==o.length){var a=o.position(),l=o.width()/n.width;t.each(n.pos,function(t){var n=r(i.render("common","high_light_item",{top:a.top+t.top*l-1,left:a.left+t.left*l-2,height:(t.bottom-t.top)*l,width:(t.right-t.left)*l}));n.appendTo(e.wrapperEl),e._OCRHighlightItem.push(n)})}else s.error("Failed to get TableCell by ID:",o)})},clearHighlight:function(){this._OCRHighlightInfos=[],this._clearHighlightMark()},_clearHighlightMark:function(){t.each(this._OCRHighlightItem,function(e){e.remove()}),this._OCRHighlightItem=[]},_replaceBlankToSymbol:function(e){var n=function(e){!e||e.length<1||t.forEach(e,function(e){e.children&&e.children.length>0&&n(e.children),e.childNodes[0]&&3===e.childNodes[0].nodeType&&(e.innerHTML=e.innerHTML.replace(/ /g,"&nbsp;"))})};e&&n(e.children)},_renderCell:function(e,t,n){var o,i,r,a,s,l=this.block,c=l.getCell(e,t,{findMergePointIfNeeded:!0,withPosition:!0});if(c){switch(o=c.cell,i=n||document.createElement("td"),r=o.getContent(),a=o.getType(),i.setAttribute("data-cell-id",o.getCellId()),this._setMergeCell(i,o),this._setCellStyles(i,o.getBlockStyles()),this._setBorder(i,e,t,o.getBlockStyles()),a){case f.TEXT:s=r.toHtml({styleRules:this._getStyleRules()});break;case f.IMAGE:s=b.renderImage(r,l.getExtraInfo("pcResMap"));break;case f.ATTACHMENT:s=b.renderAttachment(r)}return i.innerHTML=s,this._loadCellImg(i,n),n&&this._triggerResize(),i}},_getStyleRules:function(){var e=this._inlineStyleViewMapper;return{color:function(t){var n=t.color;return t.href!==I.getDefault("href")&&a.equals(t.color,"blue")?"#003884":null!=n&&e?e.valueToView("color",n):void 0},"font-family":function(t){var n,o=t["font-family"];return null!=o&&e&&(n=e.valueToView("font-family",o)),o!==n?n:k.getAllValueByFont(o)||o}}},_setMergeCell:function(e,t){if(t.isMergePoint()){var n=t.getMergePointAttr();n.width>0&&e.setAttribute("colspan",n.width),n.height>0&&e.setAttribute("rowspan",n.height)}},_reRenderCells:function(){var e=this.tableEl.querySelector("tbody");this._rending=!0,e.innerHTML="",this.colgroupEl.innerHTML="",this._renderCells(),this._rending=!1,this._triggerResize(),this._redrawRange()},_redrawRange:function(){var e=this._getRectOfNoteRange();this._setRange(e)},_onDownloadClick:function(e){var t,n,o,i=this.getCellElementByTarget(e.target),a=this.block;i&&(t=r(i).data("cellId"),(o=a.getCellById(t).cell)&&(n=o.getContent(),this.trigger("yne-download-attachment",n.getResource(),n.getFileName())))},_onClick:function(e){-1!==e.target.className.indexOf("attachment-download")&&this._onDownloadClick(e)},_onEnterLink:function(e){var t,n,o=r(e.target).closest("a").get(0),i=this.getCellElementByTarget(e.target),a=o.parentNode;t=r(i).data("cellId"),n=this.block.getCellById(t),!this.isOnCellEdit()&&n&&(a.innerText||"").trim()===(o.innerText||"").trim()&&(E.isNoteLinkUrl(o.href)||this.isCollabLocked()||!o||("file://"===o.origin&&r(o).click(function(){return!1}),this.trigger("link-menu-show",{linkNode:o,block:this.block,range:p.create({block:this.block,type:p.TYPES.NORMAL,rect:{width:1,height:1,left:n.col,top:n.row}})})))},_onLeaveLink:function(){this.trigger("link-menu-hide")},_onMouseDown:function(e){this.getCellElementByTarget(e)?this._handleDrag(e,c.DRAG_START,!0):this._setRange(p.TYPES.BLANK)},_onDblclick:function(){var e,t=this._getRectOfNoteRange();t&&!this.isLocked()&&(e=this.block.getCell(t.top,t.left,{findMergePointIfNeeded:!0,withPosition:!0}),this._cellEditView.showAndEdit(e))},_getTableRange:function(){var e,t=this._getNoteRange();if(t&&t.isInSingleBlock&&t.isInSingleBlock()&&(e=t.getStartBlockRange())&&e instanceof p&&e.block===this.block)return e},_getRectRange:function(){var e=this._getTableRange();if(e)return e.getAsRectRange()},_getRectOfNoteRange:function(){var e=this._getRectRange();return e&&e.getRect?e.getRect():null},_getNoteRange:function(){var e;return this.trigger("get-note-range",function(t){e=t}),e},_onDragStart:function(e){this._rectOnDragStart=null,this._handleDrag(e,c.DRAG_START)},_handleDrag:function(e,t,n){var o,i,a,l,u,d=this.getCellElementByTarget(e.target),p=e.shiftKey&&!e.ctrlKey&&!e.metaKey;if(o=r(d).data("cellId"),i=this.block.getCellById(o)){switch(this._preSelectionRect=null,l={width:1,height:1,left:i.col,top:i.row},t){case c.DRAG_START:if(p)u=this._getRectOfNoteRange(),this._rectOnDragStart=u,a=_.union(this._rectOnDragStart,l);else{if(n&&(u=this._getRectOfNoteRange(),_.contains(u,l)))return;a=this._rectOnDragStart=l}break;case c.DRAGGING:case c.DRAG_END:a=_.union(this._rectOnDragStart,l);break;default:s.error("unvalid drag type",t)}a&&this._setRange(a)}},_setRange:function(e){var t,n,o,i=p.TYPES.NORMAL;if(e)return e.width?o=e:i=e,t=p.create({block:this.block,type:i||p.TYPES.FIRST_CELL,rect:o}),n=new h({startRange:t,endRange:t}),this.trigger("set-range",n,!0,!0,!0),this._preSelectionRect=o,t},_onDragging:function(e){this._handleDrag(e,c.DRAGGING)},_onDragEnd:function(){this._handleDrag(event,c.DRAG_END),this._rectOnDragStart=null},_cancelEditMode:function(){s.log("hide cellEditView"),this._cellEditView.hide()},_setCellStyles:function(e,t){var n;n=t.textAlign,e.style.textAlign="center"===n||"right"===n||"left"===n?n:"",n=t.verticalAlign,e.style.verticalAlign="top"===n||"middle"===n||"bottom"===n?n:"",n=t.wrap,e.style.whiteSpace=!1===n||"false"===n?"nowrap":"pre-wrap",n=t.backColor,e.style.backgroundColor=n&&"inherit"!==n&&"transparent"!==n?n:""},_setBorder:function(e,t,n,o){var i,r=this.tableEl.querySelector("tbody"),a=o["border|vertical"],s=o["border|horizontal"];0===t?(i=e)&&(i.style.borderTop=s):(i=r.rows[t-1].cells[n])&&(i.style.borderBottom=s),0===n?(i=e)&&(i.style.borderLeft=a):(i=r.rows[t].cells[n-1])&&(i.style.borderRight=a)},_setRowHeight:function(e,t){var n=this._getRowElAt(e);n&&(n.style.height=t+"px",this._triggerResize())},_getRowElAt:function(e){var t=this.tableEl.tBodies[0];if(t)return t.rows[e]},getRowElHeight:function(e){var t=this._getRowElAt(e),n=0;return t?n=t.getBoundingClientRect().height:n},_renderColumns:function(e,n){if(!((e=e||0)>=n)){var o,i=this.block,r=i.getColumnCount(),a=this.colgroupEl,s=t.toArray(a.querySelectorAll("col"));for(n=n||r,o=e;o<n;++o)this._setColumnWidth(o,i.getColumnWidth(o));for(o=s.length-1;o>=r;--o)u(s[o])}},_setColumnWidth:function(e,t){var n=this._ensureColEl(e);n&&(n.style.width=t+"px",this._triggerResize())},_ensureColEl:function(e){var t,n=this._getColumnCount(),o=Math.max(e+1,n),i=this.colgroupEl,r=o-i.querySelectorAll("col").length,a=this._getColElAt(e);if(a)return a;for(t=0;t<r;++t)i.appendChild(document.createElement("col"));return this._getColElAt(e)},_getColumnCount:function(){var e=this.tableEl.rows[0];return e?e.cells.length:this.block.getColumnCount()},_getColElAt:function(e){if(!(e<0)){return this.colgroupEl.querySelectorAll("col")[e]}},getColElWidth:function(e){var t=this._getColElAt(e);return t?parseFloat(t.style.width):0},getCellElement:function(e){if(e&&e.getCellId&&(e=e.getCellId()),e)return this.$el.find('[data-cell-id="'+e+'"]:first').get(0)},getCellElementAt:function(e,t){var n=this.block.getCell(e,t,{findMergePointIfNeeded:!0});return this.getCellElement(n)},getCellTextElementAt:function(e,t){return this.getCellElementAt(e,t).querySelector(".table-cell-line > span")},getColumnIndex:function(e){var t=r(e).data("cellId"),n=this.block.getCellById(t);return n&&null!=n.col?n.col:null},getCellElementByTarget:function(e){if(e&&e.target&&(e=e.target),e)return r(e).closest("td").get(0)},getAbsoluteBoundingRectAt:function(e,t){var n=this.getBoundingRectAt(e,t),o=this._tableLayoutInnerEl.scrollLeft;if(n)return n.left-=o,n},getBoundingRectAt:function(e,t){var n=this.getCellElementAt(e,t);return this.getBoundingRect(n)},getBoundingRectByCell:function(e){var t=this.getCellElement(e);return this.getBoundingRect(t)},_triggerResize:function(){if(!this._rending){this._createHighlightMark()}},getBoundingRect:function(e){if(e){var t=this.wrapperEl.getBoundingClientRect(),n=this._tableLayoutInnerEl.scrollLeft,o=e.getBoundingClientRect();return{left:o.left-t.left-n,top:o.top-t.top,right:o.right-t.left-n,bottom:o.bottom-t.top,width:o.width,height:o.height}}},getEventBoundingRect:function(e){if(e){var t=this.wrapperEl.getBoundingClientRect();return{left:e.clientX-t.left,top:e.clientY-t.top}}},_onSetRowHeight:function(e,t){this._setCellsSize([{row:e,height:t}])},_onSetColWidth:function(e,t){this._setCellsSize([{col:e,width:t}])},_setCellsSize:function(e){this.trigger("command","comp.SetTableCellsSize",{table:this.block,sizes:e})},_onAttributeChanged:function(){this._reRenderCells()},_onRowHeightSet:function(e,t){this._setRowHeight(e,t)},_onColWidthSet:function(e,t){this._setColumnWidth(e,t)},_ensureRow:function(e){s.log("ensure the row has rendered",e)},_onColInserted:function(){this._reRenderCells()},_onColDeleted:function(){this._reRenderCells()},_onRowInserted:function(){this._reRenderCells()},_onRowDeleted:function(){this._reRenderCells()},_onCellInlineStyleChange:function(e,t){var n=this.getCellElementAt(e,t);this._renderCell(e,t,n)},_onCellBlockStyleChange:function(e,t,n,o){var i=this.getCellElementAt(e,t);i&&this._setCellStyles(i,o)},_onCellMouseEnter:function(e){this.trigger("cell-enter",e,this)},_onCellMouseLeave:function(e){this.trigger("cell-leave",e,this)},_onCellContentChange:function(e){var t,n=this.block.getCellById(e);n?(this._ensureRow(n.row),(t=this.getCellElement(e))?(this._renderCell(n.row,n.col,t),this._triggerResize()):this._reRenderCells()):s.error("unvalid cell info",n)},getHiddenInputView:function(){return this._hiddenInputView},getCellEditView:function(){return this._cellEditView},focusOutTbody:function(){this._setRange(p.TYPES.BLANK)},_setTableStyles:function(){var e=this,n=e.block.getBlockStyles();t.each(n,function(t,n){e._setTableStyle(n,t)})},_setTableStyle:function(e,t){var n=this.$el;switch(e){case"back-color":n.css("background-color",t);break;case"padding":t?n.css({padding:t,"padding-bottom":"5px","padding-top":"5px"}):n.css({padding:t,"padding-bottom":"","padding-top":""})}},_onStyleChange:function(e,t){this._setTableStyle(e,t)},getCellImageEl:function(e){var t=this.getCellElement(e);if(t)return t.querySelector("img")},getImageDomMapByTableRange:function(e){var t,n=e.tableRange,o=e.selectAll,i=this,r=i.block,a={};if(o&&(n=p.create({type:p.TYPES.ALL,block:r})),n&&(t=n.getAsRectRange()))return t.forEachCell(function(e){var t,n,o=e.getCellId();e.isImageCell()&&(t=i.getCellImageEl(o))&&(n=e.getContent(),a[r.getId()+"-"+n.getResId()]||(a[r.getId()+"-"+n.getResId()]={img:t,source:n.getSource()}))}),a},isLocked:function(){var e;return this._rending||this.trigger("get-read-only-status",function(t){e=t}),this.block.isLocked()||this.block.isReadOnly()||this._isReadOnly||e},selectTable:function(e){if(!this._selectionView)return s.error("No selectionView find!");if(e){if(this._getRectOfNoteRange())return;this._selectionView.draw(p.create({block:this.block,type:p.TYPES.ALL}))}else this._selectionView.draw()},onDrawRange:function(e){var t,n;if(!this._selectionView)return s.error("No selectionView find!");if(e&&!e.isInBlank()){if(this._selectionView.draw(e),!(t=e.getAsRectRange()))return;n=t.getRect(),this._hiddenInputView.focus(this.getAbsoluteBoundingRectAt(n.top,n.left))}else this._selectionView.draw()},convertToNativeRange:function(){var e=document.createRange(),t=this.$el.get(0);return e.setStart(t,0),e.setEnd(t,t.childNodes.length),e},parseNativeRange:function(e,t,n){var o,i,a,s,l,c=this.block,u=e.startContainer,d=e.endContainer;return e.collapsed||(i=this.getCellElementByTarget(d))&&(s=c.getCellById(r(i).data("cellId"))),(o=this.getCellElementByTarget(u))&&(a=c.getCellById(r(o).data("cellId"))),a?this._setRange({top:a.row,left:a.col,height:s?s.row-a.row:1,width:s?s.col-a.col:1}):n||N.isNodeInRange(this.wrapperEl,e)||N.isRangeInNode(this.el,e)?(l=new p({block:c,type:p.TYPES.ALL}),this._selectionView.draw(l),l):void 0},onHighlight:function(e,n,o){var i,r,a,s,l,c=this,u=c.block,d=u.getRowCount(),p=u.getColumnCount();function h(e){for(var t,i=e.getLength(),r=n.ignoreCase?e.toString().toLowerCase():e.toString(),a=s.indexOf(r,0);-1!==a;)(t=document.createRange()).setStart(l,a),t.setEnd(l,a+i),o(t),a=s.indexOf(r,a+i)}function f(o){s=o.textContent,s=n.ignoreCase?s.toLowerCase():s,l=o,t.each(e,h)}for(c._OCRHighlightInfos=[],r=0;r<d;r++)for(a=0;a<p;a++)if(!u.isMergedCell(r,a))if((i=u.getCell(r,a)).isImageCell())null!=n.images&&t.each(n.images,function(e){e.resID===i.getContent().getResId()&&(e.cellId=i.getCellId(),c._OCRHighlightInfos.push(e))});else{if(l=c.getCellTextElementAt(r,a),!i.isTextNoEmptyCell()||!l)continue;t.map(l.childNodes,f)}c._createHighlightMark()},editCellFromToolbar:function(e,t){return this._cellEditView.editFromToolbar(e,t)},isOnCellEdit:function(){var e=this._cellEditView,t=this._hiddenInputView;return e&&e.isOnEdit()||t&&t.isOnEdit()},_onCellEditViewEnter:function(e){e&&(e.blockId=this.block.getId()),this.trigger("cell-edit-view-enter",e)},setPasteAsText:function(e){this._isPasteAsText=e||!1}},{isRangeInCellEditArea:function(e){return g.isRangeIn(e)||y.isRangeIn(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(17),i=n(0);return t=o.extend({initialize:function(e){i.bindAll(this,"onMouseDown","onMouseMove","onMouseUp"),this.el=e.el,this.disableDocSelection=!0===e.disableDocSelection,this.document=this.el.ownerDocument,this._makeDraggable()},_makeDraggable:function(){var e=this.el;e.addEventListener("mousedown",this.onMouseDown),this._setUserSelect(e,"none")},_getUserSelect:function(e){return e.style.webkitUserSelect||e.style.mozUserSelect||e.style.msUserSelect||e.style.userSelect||""},_setUserSelect:function(e,t){e.style.webkitUserSelect=t,e.style.mozUserSelect=t,e.style.msUserSelect=t,e.style.userSelect=t},onMouseDown:function(e){if(1===e.which){var n=this.el,o=this.document;n.setCapture&&n.setCapture(),o.addEventListener("mousemove",this.onMouseMove),o.addEventListener("mouseup",this.onMouseUp),this.disableDocSelection&&(this._backupDocUserSelect=this._getUserSelect(o.body),this._setUserSelect(o.body,"none")),this.trigger(t.DRAG_START,e)}},onMouseMove:function(e){1===e.which&&this.trigger(t.DRAGGING,e)},cancel:function(){var e=this.el,t=this.document;e.releaseCapture&&e.releaseCapture(),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mouseup",this.onMouseUp),this.disableDocSelection&&this._setUserSelect(t.body,this._backupDocUserSelect)},onMouseUp:function(e){1===e.which&&(this.cancel(),this.trigger(t.DRAG_END,e))}},{DRAG_START:"drag-start",DRAGGING:"dragging",DRAG_END:"drag-end"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t={bold:"bold",italic:"italic",strike:"strikeThrough",underline:"underline"};return{TOGGLE_INLINE_STYLES_CMD_MAP:t,INLINE_STYLES_CMD_MAP:n(0).extend({"back-color":"backColor",color:"foreColor","font-family":"fontName","font-size":"fontSize"},t)}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(371).extend({initialize:function(e){var t=e.event,n=t.originalEvent||t;this._dataTransfer=n.clipboardData}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(21),i=n(1),r=n(47).isEdge(),a=n(804),s={"text/html":!0,"text/plain":!0,"text/uri-list":!0,"text/yne-image-json":!1,"text/yne-json":!1,"text/yne-note-id":!1,"text/yne-table-json":!1};return o.extend({initialize:function(e){var t=e.event,n=t.originalEvent||t;this._dataTransfer=n.dataTransfer},_getCustomData:function(e){var t,n;if(!this._altData){t=this._dataTransfer.getData("application/json");try{n=JSON.parse(t),this._altData=n}catch(e){i.error(e),this._altData={}}}return this._altData[e]},getData:function(e){var t,n,o=this._dataTransfer;return r?(!0===(t=s[e])?(n=o.getData(e),i.log("get standard type",e,n)):!1===t?(n=this._getCustomData(e),i.log("get custom type",e,n)):i.error("type should be registered!",e),n):o.getData(e)},setDataMap:function(e){var n,o=this._dataTransfer,l=function(t,n){i.log("set data to data transfer",n,t);try{var r=t;"text/html"===n&&null!=e["text/yne-json"]&&null!=e["text/html"]&&(e["text/html"]=e["text/html"]+"\x3c!--5f39ae17-8c62-4a45-bc43-b32064c9388a:"+a.encode(e["text/yne-json"])+"--\x3e",r=e["text/html"]),o.setData(n,r)}catch(e){i.error(e)}},c={},u=0;if(r){if(t.each(e,function(e,t){var n=s[t];!0===n?l(e,t):!1===n?(i.log("set custom type",t),c[t]=e,u++):i.error("type should be registered!",t)}),u>0)try{n=JSON.stringify(c),l(n,"application/json")}catch(e){i.error(e)}}else t.each(e,l)},clearData:function(e){return this._dataTransfer.clearData(e)},setProperty:function(e,t){this._dataTransfer[e]=t}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(14),o=n(5),i=n(7),r=n(1),a=n(22),s=n(93),l=n(4),c=t.extend({name:"ManagerAdapter",effected:!0,_block:null,_dataBefore:null,_dataAfter:null,_args:null,initialize:function(e){var t;e.args=e.args||{},this._args=e.args,c.__super__.initialize.apply(this,arguments),l.isCollabCommand(this._args)||(this._block=e.block,this._dataBefore=e.dataBefore,this._dataAfter=e.dataAfter,(t=this._args.range)&&t.clone&&(this.setStartingRange(t),this.setEndingRange(t.clone(!0))))},apply:function(){var e=this._args.collabProperties||{},t=e.coreEditor;t.isCollabEnabled()&&e.isCollabCmd&&(this._block?this._NeedToSetData(t)&&this._block.setInnerData(this._dataAfter):(e.dataCmdError="Table block has been deleted",e.isOwnCmd&&t.notifyErrorToHost(i.INVALIDACTION_BLOCKS_DIRTY,e.coreEditor),this.effected=!1))},doReapply:function(e){var t,n,o=this._block,r=e.collabProperties,a=r.coreEditor;o&&(t=o.getInnerCommandManager()),a.isCollabEnabled()?(r.redoUndoEffected=!0,r.isCollabCmd?o?(o.setInnerData(this._dataAfter),r.isOwnCmd&&t&&(n=t.redoStack.pop())&&t.undoStack.push(n)):(r.dataCmdError="Table block has been deleted",r.isOwnCmd&&r.coreEditor.notifyErrorToHost(i.INVALIDACTION_BLOCKS_DIRTY,a),r.redoUndoEffected=!1):t&&t.redo()):t&&t.redo()},sendInfoToInner:function(e){var t=this._block;t&&t.sendInfoToInner?t.sendInfoToInner(e):r.error("The block or sendInfoToInner() method is not valid!")},doUnapply:function(e){var t,n,o=this._block,r=e.collabProperties||{},a=r.coreEditor;o&&(t=o.getInnerCommandManager()),a.isCollabEnabled()&&r.isCollabCmd?o?(o.setInnerData(this._dataBefore),r.isOwnCmd&&t&&(n=t.undoStack.pop())&&t.redoStack.push(n)):(r.dataCmdError="Table block has been deleted",r.isOwnCmd&&a.notifyErrorToHost(i.INVALIDACTION_BLOCKS_DIRTY,a),r.redoUndoEffected=!1):t&&t.undo()},fromCollabJSON:function(){var e=this._args.collabProperties,t=e.cmdJSON,n=e.coreEditor.getBlockById(t.blockId);this._block=n,this._dataBefore=t.dataBefore,this._dataAfter=t.dataAfter,c.__super__.fromCollabJSON.apply(this)},getBlockId:function(){var e=null;return this._block&&(e=this._block.getId()),e},toCollabJSON:function(){var e,t=this._block.getId();return this.rangeIsRequired=!1,(e=c.__super__.toCollabJSON.apply(this)).blockId=t,e.dataBefore=this._dataBefore,e.dataAfter=this._dataAfter,e},_NeedToSetData:function(e){var t=this._args.collabProperties||{},n=e.getLastNotOwnExecCmd(),o=!0;return t.isOwnCmd&&(n?n.name!==this.name?(r.log(this.name+": lastNotOwnCmd.name is "+n.name),o=!1):this._block.getId()!==this.getBlockId()?(r.log(this.name+": lastNotOwnCmd do NOT operate same table"),o=!1):this.getCmdOriginalNoteVersion()!==n.getCmdOriginalNoteVersion()?(r.log(this.name+": lastNotOwnCmd originalNoteVersion NOT same"),o=!1):r.log(this.name+": Need to set data again to resolve conflict"):(r.log(this.name+": lastNotOwnCmd is null"),o=!1)),o}},{create:function(e,t,n){var o,i,l={};if(e&&e.getInnerCommandManager&&e.setInnerData)return o=new s({block:e}),i=new a({startRange:o,endRange:o}),l.range=i,new c({args:l,block:e,dataBefore:t,dataAfter:n});r.error("The block is not valid: ",e)}});return o.add(c),c}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(21),o=n(7),i=n(4),r=n(1);return t.extend({name:"UnknownCommand",isSimple:!1,cmdError:null,cmdId:null,isCollabRedo:!1,isCollabUndo:!1,rangeIsRequired:null,initialize:function(){var e=this.options.args||{};i.isCollabCommand(e)?this.fromCollabJSON(e.collabProperties.cmdJSON):this.cmdId=i.newGUID()},apply:function(){throw"Method not implemented."},doReapply:function(){throw"Method not implemented."},doUnapply:function(){throw"Method not implemented."},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;null!=e.cmdId?this.cmdId=e.cmdId:r.debugAlert("cmdJSON.cmdId should NOT be null")},getCmdId:function(){var e=this.cmdId;return null==e&&r.debugAlert("cmdId should NOT be null"),e},setCollabRedo:function(e){this.isCollabRedo=e},setCollabUndo:function(e){this.isCollabUndo=e},toCollabJSON:function(){var e={};return e[o.CJSON_ACTION]=this.name,e.cmdId=this.getCmdId(),e}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(29),r=n(5),a=n(93),s=n(4);return t=i.extend({name:"atom.SetTableCellInlineStyle",_table:null,_rect:null,_type:null,effected:!1,_oldStyles:{},_styles:null,initialize:function(){var e=this.options.args;this._oldStyles={},s.isCollabCommand(e)||(this._table=this.options.table,this._styles=this.options.styles,this._rect=this.options.rect,this._type=this.options.type,this._toggle=this.options.toggle),this.type===a.TYPES.ALL&&(this._rect=this._rect||{top:0,left:0,width:this._table.getColumnCount(),height:this._table.getRowCount()}),t.__super__.initialize.apply(this)},apply:function(){var e,t,n,i,r,s=this._table,l=this._rect,c=this._styles||{},u=this._toggle,d=l.top+l.height,p=l.left+l.width;if(!l)return this.effected;if(u){if(i=a.create({block:s,type:a.TYPES.NORMAL,rect:l})){if(!(r=i.getAsRectRange()))return this.effected;e=s.getCommonInlineStyle(u,r)}c[u]=null==e||!e}for(t=l.top;t<d;t++)for(n=l.left;n<p;n++)this._oldStyles[t+"-"+n]=s.getCellInlineStyles({row:t,col:n,names:o.keys(c)}),s.setCellInlineStyles({row:t,col:n,styles:c})&&(this.effected=!0);return this.effected},doUnapply:function(){var e,t,n=this._table,o=this._rect,i=o.top+o.height,r=o.left+o.width;for(e=o.top;e<i;e++)for(t=o.left;t<r;t++)n.setCellInlineStyles({row:e,col:t,styles:this._oldStyles[e+"-"+t]})},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._styles=o.styleNameValues,this._oldStyles=o.oldStyleNameValues,this._rect=o.simpleValue1,this._type=o.simpleValue2,this._toggle=o.newBlkId)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.styleNameValues=this._styles||null,e.oldStyleNameValues=this._oldStyles,e.simpleValue1=this._rect,e.simpleValue2=this._type,e.newBlkId=this._toggle||null,e}}),r.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(23),a=n(3),s=n(1),l=n(48),c=n(110),u=n(205),d=n(140),p=n(134),h=n(302),f=n(172),g=n(129);return t=o.extend({name:"abstract.comp.DeleteNoteRange",_cmdArgs:null,_note:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this)},apply:function(){var e,t,n,o,i,c,h=this._cmdArgs.range,f=[];if(!h)return s.error(this.name+":note range should NOT be null"),!1;if(t=(e=h.getStartBlockRange()).block,n=h.getEndBlockRange().block,o=this._note.getNextBlock(n),a.isCode(t))return e.selectWholeBlock||this._cmdArgs.isCodeDelete?(i=r.replaceBlockWithParagraph(this,this._note,t,""),r.setTextBlockAsEndingRange(this,i,0,0)):(h.isCollapsed()?(c=d.createNewRange({preCodeRange:e,charOffset:1}),this.executeAtomicCommand(new u({block:t,startBlockRange:e,endBlockRange:c}))):r.deleteSelectedContent(this,this._note,h),r.setCodeBlockAsEndingRange(this,e,0,0)),!0;if(!h.isCollapsed()&&(r.deleteSelectedContent(this,this._note,h),h.isInSingleBlock()&&a.isTextBlock(t)))return r.setTextBlockAsEndingRange(this,t,e.start,e.start),!0;if(h.isInSingleBlock()){if(a.isTextBlock(t)){if(h.isCollapsed())return e.start===t.getLength()?this._deleteAtTextBlockEnd(o,t):this._deleteAtTextBlockMiddle(t,e.start);r.setTextBlockAsEndingRange(this,t,e.start,e.start)}else o&&!a.isTable(o)?(this.executeAtomicCommand(new l({note:this._note,blocks:[t]})),t=o):t=r.replaceBlockWithParagraph(this,this._note,t,""),a.isTextBlock(t)?r.setTextBlockAsEndingRange(this,t,0,0):r.setNonTextBlockAsEndingRange(this,t);return!0}return h.isInMultiBlock(n)?(a.isTextBlock(t)&&a.isTextBlock(n)?(this.executeAtomicCommand(new p({block:t,start:t.getLength(),text:n.getText()})),f.push(n),r.setTextBlockAsEndingRange(this,t,e.start,e.start)):a.isTextBlock(t)?(f.push(n),r.setTextBlockAsEndingRange(this,t,e.start,e.start)):a.isTextBlock(n)?(f.push(t),r.setTextBlockAsEndingRange(this,n,0,0)):(f.push(t),o?f.push(n):n=r.replaceBlockWithParagraph(this,this._note,n,""),r.setTextBlockAsEndingRange(this,n,0,0)),this.executeAtomicCommand(new l({note:this._note,blocks:f})),!0):void 0},_deleteAtTextBlockEnd:function(e,t){var n;return!(e&&!a.isTable(e))||(a.isAttachment(e)||a.isImage(e)||a.isCode(e)?(this.setEndingRange(g.buildNoteRangeFromNonTextBlock(e)),!0):(n=t.getLength(),a.isTextBlock(e)&&this.executeAtomicCommand(new p({block:t,start:t.getLength(),text:e.getText()})),this.executeAtomicCommand(new l({note:this._note,blocks:[e]})),r.setTextBlockAsEndingRange(this,t,n,n),!0))},_deleteAtTextBlockMiddle:function(e,t){if(f.isAtHrefBorder(e,t,!1))return this._deleteHref(e,t,!1),!0;this.executeAtomicCommand(new c({block:e,start:t,end:t+1})),r.setTextBlockAsEndingRange(this,e,t,t)},_deleteHref:function(e,t){var n;-1!==(n=f.findHrefBorder(e,t,!1))&&this.executeAtomicCommand(new h({blocks:[e],styleNameValues:{href:"",color:"#393939",underline:!1},start:t,end:n+1}))},isSingleBlockAffected:function(){var e,n,o=this._args.range,i=t.__super__.isSingleBlockAffected.apply(this),r=0;return i&&o&&o.isCollapsed()&&(e=(n=o.getStartBlockRange()).block,r=n.start,this._note.getNextBlock(e)&&r===e.getEndOffset()&&(i=!1)),i}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(126),a=n(4);return t=o.extend({name:"atom.InsertTableRowCol",_table:null,_rect:null,_cellsData:null,_dataLength:null,effected:!1,initialize:function(){var e=this.options,n=e.args;a.isCollabCommand(n)||(this._cellsData=e.cellsData,this._sizes=e.sizes,this._rect=e.rect,this._table=e.table,this._dataLength=this._cellsData.length),t.__super__.initialize.apply(this)},apply:function(){var e=this._rect,t=this._table,n=this._cellsData,o=this._sizes;null!=e.row&&(t.insertRows(e.row,n,o),this.effected=!0),null!=e.col&&(t.insertCols(e.col,n,o),this.effected=!0)},doUnapply:function(){var e=this._rect,t=this._table,n=this._dataLength;null!=e.row&&t.deleteRows(e.row,n),null!=e.col&&t.deleteCols(e.col,n)},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._cellsData=r.cellsFromCollabJSON(o.dataBefore),this._rect=o.simpleValue1,this._dataLength=o.simpleValue2)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.dataBefore=r.cellsToCollabJSON(this._cellsData),e.simpleValue1=this._rect,e.simpleValue2=this._dataLength,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(21)],void 0===(i=function(e,t,n){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.createCommandTypeEvent=function(e){return new t({data:e,type:t.EVENT_TYPES.COMMAND})},t.createUserTypeEvent=function(e){return new t({data:e,type:t.EVENT_TYPES.USER})},t.prototype.getType=function(){return this.type},t.prototype.getData=function(){return this.data},t.prototype.isCommandType=function(){return this.type===t.EVENT_TYPES.COMMAND},t.prototype.isUserType=function(){return this.type===t.EVENT_TYPES.USER},t.prototype.initialize=function(e){this.type=e.type,this.data=e.data,delete this.options},t.EVENT_TYPES={COMMAND:1,USER:2},t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){n(379),e.exports=n(581)},function(e,t,n){"use strict";(function(e){if(n(380),n(577),n(578),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var t="defineProperty";function o(e,n,o){e[n]||Object[t](e,n,{writable:!0,configurable:!0,value:o})}o(String.prototype,"padLeft","".padStart),o(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&o(Array,e,Function.call.bind([][e]))})}).call(this,n(54))},function(e,t,n){n(381),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(461),n(462),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(230),n(485),n(328),n(486),n(329),n(487),n(488),n(489),n(490),n(491),n(332),n(334),n(335),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),e.exports=n(63)},function(e,t,n){"use strict";var o=n(12),i=n(55),r=n(30),a=n(2),s=n(50),l=n(105).KEY,c=n(15),u=n(151),d=n(135),p=n(112),h=n(24),f=n(310),g=n(211),y=n(383),m=n(177),v=n(10),b=n(18),_=n(56),I=n(77),k=n(111),w=n(115),C=n(313),S=n(57),x=n(31),A=n(113),T=S.f,N=x.f,E=C.f,D=o.Symbol,M=o.JSON,O=M&&M.stringify,L=h("_hidden"),B=h("toPrimitive"),R={}.propertyIsEnumerable,P=u("symbol-registry"),j=u("symbols"),F=u("op-symbols"),z=Object.prototype,H="function"==typeof D,G=o.QObject,V=!G||!G.prototype||!G.prototype.findChild,U=r&&c(function(){return 7!=w(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(e,t,n){var o=T(z,t);o&&delete z[t],N(e,t,n),o&&e!==z&&N(z,t,o)}:N,W=function(e){var t=j[e]=w(D.prototype);return t._k=e,t},J=H&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},Z=function(e,t,n){return e===z&&Z(F,t,n),v(e),t=I(t,!0),v(n),i(j,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=w(n,{enumerable:k(0,!1)})):(i(e,L)||N(e,L,k(1,{})),e[L][t]=!0),U(e,t,n)):N(e,t,n)},Y=function(e,t){v(e);for(var n,o=y(t=_(t)),i=0,r=o.length;r>i;)Z(e,n=o[i++],t[n]);return e},Q=function(e){var t=R.call(this,e=I(e,!0));return!(this===z&&i(j,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,L)&&this[L][e])||t)},X=function(e,t){if(e=_(e),t=I(t,!0),e!==z||!i(j,t)||i(F,t)){var n=T(e,t);return!n||!i(j,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=E(_(e)),o=[],r=0;n.length>r;)i(j,t=n[r++])||t==L||t==l||o.push(t);return o},K=function(e){for(var t,n=e===z,o=E(n?F:_(e)),r=[],a=0;o.length>a;)!i(j,t=o[a++])||n&&!i(z,t)||r.push(j[t]);return r};H||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(F,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),U(this,e,k(1,n))};return r&&V&&U(z,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),S.f=X,x.f=Z,n(116).f=C.f=$,n(153).f=Q,n(176).f=K,r&&!n(104)&&s(z,"propertyIsEnumerable",Q,!0),f.f=function(e){return W(h(e))}),a(a.G+a.W+a.F*!H,{Symbol:D});for(var q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;q.length>ee;)h(q[ee++]);for(var te=A(h.store),ne=0;te.length>ne;)g(te[ne++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return i(P,e+="")?P[e]:P[e]=D(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in P)if(P[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!H,"Object",{create:function(e,t){return void 0===t?w(e):Y(w(e),t)},defineProperty:Z,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:K}),M&&a(a.S+a.F*(!H||c(function(){var e=D();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){for(var t,n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(n=t=o[1],(b(t)||void 0!==e)&&!J(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!J(t))return t}),o[1]=t,O.apply(M,o)}}),D.prototype[B]||n(49)(D.prototype,B,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(o.JSON,"JSON",!0)},function(e,t,n){e.exports=n(151)("native-function-to-string",Function.toString)},function(e,t,n){var o=n(113),i=n(176),r=n(153);e.exports=function(e){var t=o(e),n=i.f;if(n)for(var a,s=n(e),l=r.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var o=n(2);o(o.S,"Object",{create:n(115)})},function(e,t,n){var o=n(2);o(o.S+o.F*!n(30),"Object",{defineProperty:n(31).f})},function(e,t,n){var o=n(2);o(o.S+o.F*!n(30),"Object",{defineProperties:n(312)})},function(e,t,n){var o=n(56),i=n(57).f;n(79)("getOwnPropertyDescriptor",function(){return function(e,t){return i(o(e),t)}})},function(e,t,n){var o=n(32),i=n(58);n(79)("getPrototypeOf",function(){return function(e){return i(o(e))}})},function(e,t,n){var o=n(32),i=n(113);n(79)("keys",function(){return function(e){return i(o(e))}})},function(e,t,n){n(79)("getOwnPropertyNames",function(){return n(313).f})},function(e,t,n){var o=n(18),i=n(105).onFreeze;n(79)("freeze",function(e){return function(t){return e&&o(t)?e(i(t)):t}})},function(e,t,n){var o=n(18),i=n(105).onFreeze;n(79)("seal",function(e){return function(t){return e&&o(t)?e(i(t)):t}})},function(e,t,n){var o=n(18),i=n(105).onFreeze;n(79)("preventExtensions",function(e){return function(t){return e&&o(t)?e(i(t)):t}})},function(e,t,n){var o=n(18);n(79)("isFrozen",function(e){return function(t){return!o(t)||!!e&&e(t)}})},function(e,t,n){var o=n(18);n(79)("isSealed",function(e){return function(t){return!o(t)||!!e&&e(t)}})},function(e,t,n){var o=n(18);n(79)("isExtensible",function(e){return function(t){return!!o(t)&&(!e||e(t))}})},function(e,t,n){var o=n(2);o(o.S+o.F,"Object",{assign:n(314)})},function(e,t,n){var o=n(2);o(o.S,"Object",{is:n(315)})},function(e,t,n){var o=n(2);o(o.S,"Object",{setPrototypeOf:n(215).set})},function(e,t,n){"use strict";var o=n(136),i={};i[n(24)("toStringTag")]="z",i+""!="[object z]"&&n(50)(Object.prototype,"toString",function(){return"[object "+o(this)+"]"},!0)},function(e,t,n){var o=n(2);o(o.P,"Function",{bind:n(316)})},function(e,t,n){var o=n(31).f,i=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in i||n(30)&&o(i,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var o=n(18),i=n(58),r=n(24)("hasInstance"),a=Function.prototype;r in a||n(31).f(a,r,{value:function(e){if("function"!=typeof this||!o(e))return!1;if(!o(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var o=n(2),i=n(318);o(o.G+o.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var o=n(2),i=n(319);o(o.G+o.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var o=n(12),i=n(55),r=n(65),a=n(217),s=n(77),l=n(15),c=n(116).f,u=n(57).f,d=n(31).f,p=n(137).trim,h=o.Number,f=h,g=h.prototype,y="Number"==r(n(115)(g)),m="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,o,i,r=(t=m?t.trim():p(t,3)).charCodeAt(0);if(43===r||45===r){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t}for(var a,l=t.slice(2),c=0,u=l.length;c<u;c++)if((a=l.charCodeAt(c))<48||a>i)return NaN;return parseInt(l,o)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(y?l(function(){g.valueOf.call(n)}):"Number"!=r(n))?a(new f(v(t)),n,h):v(t)};for(var b,_=n(30)?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;_.length>I;I++)i(f,b=_[I])&&!i(h,b)&&d(h,b,u(f,b));h.prototype=g,g.constructor=h,n(50)(o,"Number",h)}},function(e,t,n){"use strict";var o=n(2),i=n(66),r=n(320),a=n(218),s=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,o=t;++n<6;)o+=e*c[n],c[n]=o%1e7,o=l(o/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=l(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};o(o.P+o.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(15)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,o,s,l=r(this,u),c=i(e),g="",y="0";if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*f(2,69,1))-69)<0?l*f(2,-t,1):l/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),o=c;o>=7;)d(1e7,0),o-=7;for(d(f(10,o,1),0),o=t-1;o>=23;)p(1<<23),o-=23;p(1<<o),d(1,1),p(2),y=h()}else d(0,n),d(1<<-t,0),y=h()+a.call("0",c);return y=c>0?g+((s=y.length)<=c?"0."+a.call("0",c-s)+y:y.slice(0,s-c)+"."+y.slice(s-c)):g+y}})},function(e,t,n){"use strict";var o=n(2),i=n(15),r=n(320),a=1..toPrecision;o(o.P+o.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=r(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var o=n(2);o(o.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var o=n(2),i=n(12).isFinite;o(o.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var o=n(2);o(o.S,"Number",{isInteger:n(321)})},function(e,t,n){var o=n(2);o(o.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var o=n(2),i=n(321),r=Math.abs;o(o.S,"Number",{isSafeInteger:function(e){return i(e)&&r(e)<=9007199254740991}})},function(e,t,n){var o=n(2);o(o.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var o=n(2);o(o.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var o=n(2),i=n(319);o(o.S+o.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var o=n(2),i=n(318);o(o.S+o.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var o=n(2),i=n(322),r=Math.sqrt,a=Math.acosh;o(o.S+o.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+r(e-1)*r(e+1))}})},function(e,t,n){var o=n(2),i=Math.asinh;o(o.S+o.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var o=n(2),i=Math.atanh;o(o.S+o.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var o=n(2),i=n(219);o(o.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var o=n(2);o(o.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var o=n(2),i=Math.exp;o(o.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var o=n(2),i=n(220);o(o.S+o.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var o=n(2);o(o.S,"Math",{fround:n(323)})},function(e,t,n){var o=n(2),i=Math.abs;o(o.S,"Math",{hypot:function(e,t){for(var n,o,r=0,a=0,s=arguments.length,l=0;a<s;)l<(n=i(arguments[a++]))?(r=r*(o=l/n)*o+1,l=n):r+=n>0?(o=n/l)*o:n;return l===1/0?1/0:l*Math.sqrt(r)}})},function(e,t,n){var o=n(2),i=Math.imul;o(o.S+o.F*n(15)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,o=+t,i=65535&n,r=65535&o;return 0|i*r+((65535&n>>>16)*r+i*(65535&o>>>16)<<16>>>0)}})},function(e,t,n){var o=n(2);o(o.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var o=n(2);o(o.S,"Math",{log1p:n(322)})},function(e,t,n){var o=n(2);o(o.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var o=n(2);o(o.S,"Math",{sign:n(219)})},function(e,t,n){var o=n(2),i=n(220),r=Math.exp;o(o.S+o.F*n(15)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(r(e-1)-r(-e-1))*(Math.E/2)}})},function(e,t,n){var o=n(2),i=n(220),r=Math.exp;o(o.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(r(e)+r(-e))}})},function(e,t,n){var o=n(2);o(o.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var o=n(2),i=n(114),r=String.fromCharCode,a=String.fromCodePoint;o(o.S+o.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],o=arguments.length,a=0;o>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var o=n(2),i=n(56),r=n(25);o(o.S,"String",{raw:function(e){for(var t=i(e.raw),n=r(t.length),o=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<o&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(137)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var o=n(178)(!0);n(221)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var o=n(2),i=n(178)(!1);o(o.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var o=n(2),i=n(25),r=n(223),a="".endsWith;o(o.P+o.F*n(224)("endsWith"),"String",{endsWith:function(e){var t=r(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,o=i(t.length),s=void 0===n?o:Math.min(i(n),o),l=String(e);return a?a.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";var o=n(2),i=n(223);o(o.P+o.F*n(224)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var o=n(2);o(o.P,"String",{repeat:n(218)})},function(e,t,n){"use strict";var o=n(2),i=n(25),r=n(223),a="".startsWith;o(o.P+o.F*n(224)("startsWith"),"String",{startsWith:function(e){var t=r(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return a?a.call(t,o,n):t.slice(n,n+o.length)===o}})},function(e,t,n){"use strict";n(51)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(51)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(51)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(51)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(51)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(51)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(51)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(51)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(51)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(51)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(51)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(51)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(51)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var o=n(2);o(o.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var o=n(2),i=n(32),r=n(77);o(o.P+o.F*n(15)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=r(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var o=n(2),i=n(460);o(o.P+o.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var o=n(15),i=Date.prototype.getTime,r=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=o(function(){return"0385-07-25T07:06:39.999Z"!=r.call(new Date(-5e13-1))})||!o(function(){r.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),o=t<0?"-":t>9999?"+":"";return o+("00000"+Math.abs(t)).slice(o?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:r},function(e,t,n){var o=Date.prototype,i=o.toString,r=o.getTime;new Date(NaN)+""!="Invalid Date"&&n(50)(o,"toString",function(){var e=r.call(this);return e==e?i.call(this):"Invalid Date"})},function(e,t,n){var o=n(24)("toPrimitive"),i=Date.prototype;o in i||n(49)(i,o,n(463))},function(e,t,n){"use strict";var o=n(10),i=n(77);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(o(this),"number"!=e)}},function(e,t,n){var o=n(2);o(o.S,"Array",{isArray:n(177)})},function(e,t,n){"use strict";var o=n(64),i=n(2),r=n(32),a=n(324),s=n(225),l=n(25),c=n(226),u=n(227);i(i.S+i.F*!n(180)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,p=r(e),h="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,y=void 0!==g,m=0,v=u(p);if(y&&(g=o(g,f>2?arguments[2]:void 0,2)),null==v||h==Array&&s(v))for(n=new h(t=l(p.length));t>m;m++)c(n,m,y?g(p[m],m):p[m]);else for(d=v.call(p),n=new h;!(i=d.next()).done;m++)c(n,m,y?a(d,g,[i.value,m],!0):i.value);return n.length=m,n}})},function(e,t,n){"use strict";var o=n(2),i=n(226);o(o.S+o.F*n(15)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var o=n(2),i=n(56),r=[].join;o(o.P+o.F*(n(152)!=Object||!n(67)(r)),"Array",{join:function(e){return r.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var o=n(2),i=n(214),r=n(65),a=n(114),s=n(25),l=[].slice;o(o.P+o.F*n(15)(function(){i&&l.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),o=r(this);if(t=void 0===t?n:t,"Array"==o)return l.call(this,e,t);for(var i=a(e,n),c=a(t,n),u=s(c-i),d=new Array(u),p=0;p<u;p++)d[p]="String"==o?this.charAt(i+p):this[i+p];return d}})},function(e,t,n){"use strict";var o=n(2),i=n(40),r=n(32),a=n(15),s=[].sort,l=[1,2,3];o(o.P+o.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n(67)(s)),"Array",{sort:function(e){return void 0===e?s.call(r(this)):s.call(r(this),i(e))}})},function(e,t,n){"use strict";var o=n(2),i=n(80)(0),r=n(67)([].forEach,!0);o(o.P+o.F*!r,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var o=n(18),i=n(177),r=n(24)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var o=n(2),i=n(80)(1);o(o.P+o.F*!n(67)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var o=n(2),i=n(80)(2);o(o.P+o.F*!n(67)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var o=n(2),i=n(80)(3);o(o.P+o.F*!n(67)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var o=n(2),i=n(80)(4);o(o.P+o.F*!n(67)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var o=n(2),i=n(325);o(o.P+o.F*!n(67)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var o=n(2),i=n(325);o(o.P+o.F*!n(67)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var o=n(2),i=n(175)(!1),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0;o(o.P+o.F*(a||!n(67)(r)),"Array",{indexOf:function(e){return a?r.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var o=n(2),i=n(56),r=n(66),a=n(25),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;o(o.P+o.F*(l||!n(67)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=Math.min(o,r(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}})},function(e,t,n){var o=n(2);o(o.P,"Array",{copyWithin:n(326)}),n(106)("copyWithin")},function(e,t,n){var o=n(2);o(o.P,"Array",{fill:n(229)}),n(106)("fill")},function(e,t,n){"use strict";var o=n(2),i=n(80)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),o(o.P+o.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(106)("find")},function(e,t,n){"use strict";var o=n(2),i=n(80)(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),o(o.P+o.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(106)(r)},function(e,t,n){n(117)("Array")},function(e,t,n){var o=n(12),i=n(217),r=n(31).f,a=n(116).f,s=n(179),l=n(154),c=o.RegExp,u=c,d=c.prototype,p=/a/g,h=/a/g,f=new c(p)!==p;if(n(30)&&(!f||n(15)(function(){return h[n(24)("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")}))){c=function(e,t){var n=this instanceof c,o=s(e),r=void 0===t;return!n&&o&&e.constructor===c&&r?e:i(f?new u(o&&!r?e.source:e,t):u((o=e instanceof c)?e.source:e,o&&r?l.call(e):t),n?this:d,c)};for(var g=function(e){e in c||r(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},y=a(u),m=0;y.length>m;)g(y[m++]);d.constructor=c,c.prototype=d,n(50)(o,"RegExp",c)}n(117)("RegExp")},function(e,t,n){"use strict";n(329);var o=n(10),i=n(154),r=n(30),a=/./.toString,s=function(e){n(50)(RegExp.prototype,"toString",e,!0)};n(15)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=o(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){"use strict";var o=n(10),i=n(25),r=n(232),a=n(181);n(182)("match",1,function(e,t,n,s){return[function(n){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o):new RegExp(n)[t](String(o))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=o(e),c=String(this);if(!l.global)return a(l,c);var u=l.unicode;l.lastIndex=0;for(var d,p=[],h=0;null!==(d=a(l,c));){var f=String(d[0]);p[h]=f,""===f&&(l.lastIndex=r(c,i(l.lastIndex),u)),h++}return 0===h?null:p}]})},function(e,t,n){"use strict";var o=n(10),i=n(32),r=n(25),a=n(66),s=n(232),l=n(181),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(182)("replace",2,function(e,t,n,f){return[function(o,i){var r=e(this),a=null==o?void 0:o[t];return void 0!==a?a.call(o,r,i):n.call(String(r),o,i)},function(e,t){var i=f(n,e,this,t);if(i.done)return i.value;var d=o(e),p=String(this),h="function"==typeof t;h||(t=String(t));var y=d.global;if(y){var m=d.unicode;d.lastIndex=0}for(var v=[];;){var b=l(d,p);if(null===b)break;if(v.push(b),!y)break;""===String(b[0])&&(d.lastIndex=s(p,r(d.lastIndex),m))}for(var _,I="",k=0,w=0;w<v.length;w++){b=v[w];for(var C=String(b[0]),S=c(u(a(b.index),p.length),0),x=[],A=1;A<b.length;A++)x.push(void 0===(_=b[A])?_:String(_));var T=b.groups;if(h){var N=[C].concat(x,S,p);void 0!==T&&N.push(T);var E=String(t.apply(void 0,N))}else E=g(C,p,S,x,T,t);S>=k&&(I+=p.slice(k,S)+E,k=S+C.length)}return I+p.slice(k)}];function g(e,t,o,r,a,s){var l=o+e.length,c=r.length,u=h;return void 0!==a&&(a=i(a),u=p),n.call(s,u,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,o);case"'":return t.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>c){var p=d(u/10);return 0===p?n:p<=c?void 0===r[p-1]?i.charAt(1):r[p-1]+i.charAt(1):n}s=r[u-1]}return void 0===s?"":s})}})},function(e,t,n){"use strict";var o=n(10),i=n(315),r=n(181);n(182)("search",1,function(e,t,n,a){return[function(n){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o):new RegExp(n)[t](String(o))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=o(e),l=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var u=r(s,l);return i(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]})},function(e,t,n){"use strict";var o=n(179),i=n(10),r=n(155),a=n(232),s=n(25),l=n(181),c=n(231),u=n(15),d=Math.min,p=[].push,h=!u(function(){RegExp(4294967295,"y")});n(182)("split",2,function(e,t,n,u){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!o(e))return n.call(i,e,t);for(var r,a,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,u+"g");(r=c.call(f,i))&&!((a=f.lastIndex)>d&&(l.push(i.slice(d,r.index)),r.length>1&&r.index<i.length&&p.apply(l,r.slice(1)),s=r[0].length,d=a,l.length>=h));)f.lastIndex===r.index&&f.lastIndex++;return d===i.length?!s&&f.test("")||l.push(""):l.push(i.slice(d)),l.length>h?l.slice(0,h):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,o){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i,o):f.call(String(i),n,o)},function(e,t){var o=u(f,e,this,t,f!==n);if(o.done)return o.value;var c=i(e),p=String(this),g=r(c,RegExp),y=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),v=new g(h?c:"^(?:"+c.source+")",m),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===p.length)return null===l(v,p)?[p]:[];for(var _=0,I=0,k=[];I<p.length;){v.lastIndex=h?I:0;var w,C=l(v,h?p:p.slice(I));if(null===C||(w=d(s(v.lastIndex+(h?0:I)),p.length))===_)I=a(p,I,y);else{if(k.push(p.slice(_,I)),k.length===b)return k;for(var S=1;S<=C.length-1;S++)if(k.push(C[S]),k.length===b)return k;I=_=w}}return k.push(p.slice(_)),k}]})},function(e,t,n){"use strict";var o,i,r,a,s=n(104),l=n(12),c=n(64),u=n(136),d=n(2),p=n(18),h=n(40),f=n(118),g=n(119),y=n(155),m=n(233).set,v=n(234)(),b=n(235),_=n(330),I=n(183),k=n(331),w=l.TypeError,C=l.process,S=C&&C.versions,x=S&&S.v8||"",A=l.Promise,T="process"==u(C),N=function(){},E=i=b.f,D=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(24)("species")]=function(e){e(N,N)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==x.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var o=e._v,i=1==e._s,r=0,a=function(t){var n,r,a,s=i?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(i||(2==e._h&&R(e),e._h=1),!0===s?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),a=!0)),n===t.promise?c(w("Promise-chain cycle")):(r=M(n))?r.call(n,l,c):l(n)):c(o)}catch(e){u&&!a&&u.exit(),c(e)}};n.length>r;)a(n[r++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){m.call(l,function(){var t,n,o,i=e._v,r=B(e);if(r&&(t=_(function(){T?C.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(o=l.console)&&o.error&&o.error("Unhandled promise rejection",i)}),e._h=T||B(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},B=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){m.call(l,function(){var t;T?C.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},P=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=M(e))?v(function(){var o={_w:n,_d:!1};try{t.call(e,c(j,o,1),c(P,o,1))}catch(e){P.call(o,e)}}):(n._v=e,n._s=1,O(n,!1))}catch(e){P.call({_w:n,_d:!1},e)}}};D||(A=function(e){f(this,A,"Promise","_h"),h(e),o.call(this);try{e(c(j,this,1),c(P,this,1))}catch(e){P.call(this,e)}},(o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(120)(A.prototype,{then:function(e,t){var n=E(y(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=T?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new o;this.promise=e,this.resolve=c(j,e,1),this.reject=c(P,e,1)},b.f=E=function(e){return e===A||e===a?new r(e):i(e)}),d(d.G+d.W+d.F*!D,{Promise:A}),n(135)(A,"Promise"),n(117)("Promise"),a=n(63).Promise,d(d.S+d.F*!D,"Promise",{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!D),"Promise",{resolve:function(e){return k(s&&this===a?A:this,e)}}),d(d.S+d.F*!(D&&n(180)(function(e){A.all(e).catch(N)})),"Promise",{all:function(e){var t=this,n=E(t),o=n.resolve,i=n.reject,r=_(function(){var n=[],r=0,a=1;g(e,!1,function(e){var s=r++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||o(n))},i)}),--a||o(n)});return r.e&&i(r.v),n.promise},race:function(e){var t=this,n=E(t),o=n.reject,i=_(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,o)})});return i.e&&o(i.v),n.promise}})},function(e,t,n){"use strict";var o=n(336),i=n(121);n(184)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return o.def(i(this,"WeakSet"),e,!0)}},o,!1,!0)},function(e,t,n){"use strict";var o=n(2),i=n(185),r=n(236),a=n(10),s=n(114),l=n(25),c=n(18),u=n(12).ArrayBuffer,d=n(155),p=r.ArrayBuffer,h=r.DataView,f=i.ABV&&u.isView,g=p.prototype.slice,y=i.VIEW;o(o.G+o.W+o.F*(u!==p),{ArrayBuffer:p}),o(o.S+o.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||c(e)&&y in e}}),o(o.P+o.U+o.F*n(15)(function(){return!new p(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(a(this),e);for(var n=a(this).byteLength,o=s(e,n),i=s(void 0===t?n:t,n),r=new(d(this,p))(l(i-o)),c=new h(this),u=new h(r),f=0;o<i;)u.setUint8(f++,c.getUint8(o++));return r}}),n(117)("ArrayBuffer")},function(e,t,n){var o=n(2);o(o.G+o.W+o.F*!n(185).ABV,{DataView:n(236).DataView})},function(e,t,n){n(88)("Int8",1,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Uint8",1,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Uint8",1,function(e){return function(t,n,o){return e(this,t,n,o)}},!0)},function(e,t,n){n(88)("Int16",2,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Uint16",2,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Int32",4,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Uint32",4,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Float32",4,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(88)("Float64",8,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){var o=n(2),i=n(40),r=n(10),a=(n(12).Reflect||{}).apply,s=Function.apply;o(o.S+o.F*!n(15)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var o=i(e),l=r(n);return a?a(o,t,l):s.call(o,t,l)}})},function(e,t,n){var o=n(2),i=n(115),r=n(40),a=n(10),s=n(18),l=n(15),c=n(316),u=(n(12).Reflect||{}).construct,d=l(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),p=!l(function(){u(function(){})});o(o.S+o.F*(d||p),"Reflect",{construct:function(e,t){r(e),a(t);var n=arguments.length<3?e:r(arguments[2]);if(p&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(c.apply(e,o))}var l=n.prototype,h=i(s(l)?l:Object.prototype),f=Function.apply.call(e,h,t);return s(f)?f:h}})},function(e,t,n){var o=n(31),i=n(2),r=n(10),a=n(77);i(i.S+i.F*n(15)(function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){r(e),t=a(t,!0),r(n);try{return o.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var o=n(2),i=n(57).f,r=n(10);o(o.S,"Reflect",{deleteProperty:function(e,t){var n=i(r(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var o=n(2),i=n(10),r=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(222)(r,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),o(o.S,"Reflect",{enumerate:function(e){return new r(e)}})},function(e,t,n){var o=n(57),i=n(58),r=n(55),a=n(2),s=n(18),l=n(10);a(a.S,"Reflect",{get:function e(t,n){var a,c,u=arguments.length<3?t:arguments[2];return l(t)===u?t[n]:(a=o.f(t,n))?r(a,"value")?a.value:void 0!==a.get?a.get.call(u):void 0:s(c=i(t))?e(c,n,u):void 0}})},function(e,t,n){var o=n(57),i=n(2),r=n(10);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return o.f(r(e),t)}})},function(e,t,n){var o=n(2),i=n(58),r=n(10);o(o.S,"Reflect",{getPrototypeOf:function(e){return i(r(e))}})},function(e,t,n){var o=n(2);o(o.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var o=n(2),i=n(10),r=Object.isExtensible;o(o.S,"Reflect",{isExtensible:function(e){return i(e),!r||r(e)}})},function(e,t,n){var o=n(2);o(o.S,"Reflect",{ownKeys:n(338)})},function(e,t,n){var o=n(2),i=n(10),r=Object.preventExtensions;o(o.S,"Reflect",{preventExtensions:function(e){i(e);try{return r&&r(e),!0}catch(e){return!1}}})},function(e,t,n){var o=n(31),i=n(57),r=n(58),a=n(55),s=n(2),l=n(111),c=n(10),u=n(18);s(s.S,"Reflect",{set:function e(t,n,s){var d,p,h=arguments.length<4?t:arguments[3],f=i.f(c(t),n);if(!f){if(u(p=r(t)))return e(p,n,s,h);f=l(0)}if(a(f,"value")){if(!1===f.writable||!u(h))return!1;if(d=i.f(h,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=s,o.f(h,n,d)}else o.f(h,n,l(0,s));return!0}return void 0!==f.set&&(f.set.call(h,s),!0)}})},function(e,t,n){var o=n(2),i=n(215);i&&o(o.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var o=n(2),i=n(175)(!0);o(o.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(106)("includes")},function(e,t,n){"use strict";var o=n(2),i=n(339),r=n(32),a=n(25),s=n(40),l=n(228);o(o.P,"Array",{flatMap:function(e){var t,n,o=r(this);return s(e),t=a(o.length),n=l(o,0),i(n,o,o,t,0,1,e,arguments[1]),n}}),n(106)("flatMap")},function(e,t,n){"use strict";var o=n(2),i=n(339),r=n(32),a=n(25),s=n(66),l=n(228);o(o.P,"Array",{flatten:function(){var e=arguments[0],t=r(this),n=a(t.length),o=l(t,0);return i(o,t,t,n,0,void 0===e?1:s(e)),o}}),n(106)("flatten")},function(e,t,n){"use strict";var o=n(2),i=n(178)(!0);o(o.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var o=n(2),i=n(340),r=n(183),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);o(o.P+o.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var o=n(2),i=n(340),r=n(183),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);o(o.P+o.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(137)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(137)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var o=n(2),i=n(78),r=n(25),a=n(179),s=n(154),l=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};n(222)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),o(o.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):s.call(e),o=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return o.lastIndex=r(e.lastIndex),new c(o,t)}})},function(e,t,n){n(211)("asyncIterator")},function(e,t,n){n(211)("observable")},function(e,t,n){var o=n(2),i=n(338),r=n(56),a=n(57),s=n(226);o(o.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,o=r(e),l=a.f,c=i(o),u={},d=0;c.length>d;)void 0!==(n=l(o,t=c[d++]))&&s(u,t,n);return u}})},function(e,t,n){var o=n(2),i=n(341)(!1);o(o.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var o=n(2),i=n(341)(!0);o(o.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var o=n(2),i=n(32),r=n(40),a=n(31);n(30)&&o(o.P+n(186),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:r(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var o=n(2),i=n(32),r=n(40),a=n(31);n(30)&&o(o.P+n(186),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:r(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var o=n(2),i=n(32),r=n(77),a=n(58),s=n(57).f;n(30)&&o(o.P+n(186),"Object",{__lookupGetter__:function(e){var t,n=i(this),o=r(e,!0);do{if(t=s(n,o))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var o=n(2),i=n(32),r=n(77),a=n(58),s=n(57).f;n(30)&&o(o.P+n(186),"Object",{__lookupSetter__:function(e){var t,n=i(this),o=r(e,!0);do{if(t=s(n,o))return t.set}while(n=a(n))}})},function(e,t,n){var o=n(2);o(o.P+o.R,"Map",{toJSON:n(342)("Map")})},function(e,t,n){var o=n(2);o(o.P+o.R,"Set",{toJSON:n(342)("Set")})},function(e,t,n){n(187)("Map")},function(e,t,n){n(187)("Set")},function(e,t,n){n(187)("WeakMap")},function(e,t,n){n(187)("WeakSet")},function(e,t,n){n(188)("Map")},function(e,t,n){n(188)("Set")},function(e,t,n){n(188)("WeakMap")},function(e,t,n){n(188)("WeakSet")},function(e,t,n){var o=n(2);o(o.G,{global:n(12)})},function(e,t,n){var o=n(2);o(o.S,"System",{global:n(12)})},function(e,t,n){var o=n(2),i=n(65);o(o.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var o=n(2);o(o.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var o=n(2);o(o.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var o=n(2),i=180/Math.PI;o(o.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var o=n(2),i=n(344),r=n(323);o(o.S,"Math",{fscale:function(e,t,n,o,a){return r(i(e,t,n,o,a))}})},function(e,t,n){var o=n(2);o(o.S,"Math",{iaddh:function(e,t,n,o){var i=e>>>0,r=n>>>0;return(t>>>0)+(o>>>0)+((i&r|(i|r)&~(i+r>>>0))>>>31)|0}})},function(e,t,n){var o=n(2);o(o.S,"Math",{isubh:function(e,t,n,o){var i=e>>>0,r=n>>>0;return(t>>>0)-(o>>>0)-((~i&r|~(i^r)&i-r>>>0)>>>31)|0}})},function(e,t,n){var o=n(2);o(o.S,"Math",{imulh:function(e,t){var n=+e,o=+t,i=65535&n,r=65535&o,a=n>>16,s=o>>16,l=(a*r>>>0)+(i*r>>>16);return a*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},function(e,t,n){var o=n(2);o(o.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var o=n(2),i=Math.PI/180;o(o.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var o=n(2);o(o.S,"Math",{scale:n(344)})},function(e,t,n){var o=n(2);o(o.S,"Math",{umulh:function(e,t){var n=+e,o=+t,i=65535&n,r=65535&o,a=n>>>16,s=o>>>16,l=(a*r>>>0)+(i*r>>>16);return a*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},function(e,t,n){var o=n(2);o(o.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var o=n(2),i=n(63),r=n(12),a=n(155),s=n(331);o(o.P+o.R,"Promise",{finally:function(e){var t=a(this,i.Promise||r.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var o=n(2),i=n(235),r=n(330);o(o.S,"Promise",{try:function(e){var t=i.f(this),n=r(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var o=n(89),i=n(10),r=o.key,a=o.set;o.exp({defineMetadata:function(e,t,n,o){a(e,t,i(n),r(o))}})},function(e,t,n){var o=n(89),i=n(10),r=o.key,a=o.map,s=o.store;o.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:r(arguments[2]),o=a(i(t),n,!1);if(void 0===o||!o.delete(e))return!1;if(o.size)return!0;var l=s.get(t);return l.delete(n),!!l.size||s.delete(t)}})},function(e,t,n){var o=n(89),i=n(10),r=n(58),a=o.has,s=o.get,l=o.key,c=function(e,t,n){if(a(e,t,n))return s(e,t,n);var o=r(t);return null!==o?c(e,o,n):void 0};o.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var o=n(334),i=n(343),r=n(89),a=n(10),s=n(58),l=r.keys,c=r.key,u=function(e,t){var n=l(e,t),r=s(e);if(null===r)return n;var a=u(r,t);return a.length?n.length?i(new o(n.concat(a))):a:n};r.exp({getMetadataKeys:function(e){return u(a(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var o=n(89),i=n(10),r=o.get,a=o.key;o.exp({getOwnMetadata:function(e,t){return r(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var o=n(89),i=n(10),r=o.keys,a=o.key;o.exp({getOwnMetadataKeys:function(e){return r(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var o=n(89),i=n(10),r=n(58),a=o.has,s=o.key,l=function(e,t,n){if(a(e,t,n))return!0;var o=r(t);return null!==o&&l(e,o,n)};o.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var o=n(89),i=n(10),r=o.has,a=o.key;o.exp({hasOwnMetadata:function(e,t){return r(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var o=n(89),i=n(10),r=n(40),a=o.key,s=o.set;o.exp({metadata:function(e,t){return function(n,o){s(e,t,(void 0!==o?i:r)(n),a(o))}}})},function(e,t,n){var o=n(2),i=n(234)(),r=n(12).process,a="process"==n(65)(r);o(o.G,{asap:function(e){var t=a&&r.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var o=n(2),i=n(12),r=n(63),a=n(234)(),s=n(24)("observable"),l=n(40),c=n(10),u=n(118),d=n(120),p=n(49),h=n(119),f=h.RETURN,g=function(e){return null==e?void 0:l(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},m=function(e){return void 0===e._o},v=function(e){m(e)||(e._o=void 0,y(e))},b=function(e,t){c(e),this._c=void 0,this._o=e,e=new _(this);try{var n=t(e),o=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){o.unsubscribe()}:l(n),this._c=n)}catch(t){return void e.error(t)}m(this)&&y(this)};b.prototype=d({},{unsubscribe:function(){v(this)}});var _=function(e){this._s=e};_.prototype=d({},{next:function(e){var t=this._s;if(!m(t)){var n=t._o;try{var o=g(n.next);if(o)return o.call(n,e)}catch(e){try{v(t)}finally{throw e}}}},error:function(e){var t=this._s;if(m(t))throw e;var n=t._o;t._o=void 0;try{var o=g(n.error);if(!o)throw e;e=o.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!m(t)){var n=t._o;t._o=void 0;try{var o=g(n.complete);e=o?o.call(n,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var I=function(e){u(this,I,"Observable","_f")._f=l(e)};d(I.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(r.Promise||i.Promise)(function(n,o){l(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){o(e),i.unsubscribe()}},error:o,complete:n})})}}),d(I,{from:function(e){var t="function"==typeof this?this:I,n=g(c(e)[s]);if(n){var o=c(n.call(e));return o.constructor===t?o:new t(function(e){return o.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(h(e,!1,function(e){if(t.next(e),n)return f})===f)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:I)(function(e){var t=!1;return a(function(){if(!t){for(var o=0;o<n.length;++o)if(e.next(n[o]),t)return;e.complete()}}),function(){t=!0}})}}),p(I.prototype,s,function(){return this}),o(o.G,{Observable:I}),n(117)("Observable")},function(e,t,n){var o=n(12),i=n(2),r=n(183),a=[].slice,s=/MSIE .\./.test(r),l=function(e){return function(t,n){var o=arguments.length>2,i=!!o&&a.call(arguments,2);return e(o?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:l(o.setTimeout),setInterval:l(o.setInterval)})},function(e,t,n){var o=n(2),i=n(233);o(o.G+o.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var o=n(230),i=n(113),r=n(50),a=n(12),s=n(49),l=n(138),c=n(24),u=c("iterator"),d=c("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(h),g=0;g<f.length;g++){var y,m=f[g],v=h[m],b=a[m],_=b&&b.prototype;if(_&&(_[u]||s(_,u,p),_[d]||s(_,d,m),l[m]=p,v))for(y in o)_[y]||r(_,y,o[y],!0)}},function(e,t,n){(function(t){!function(t){"use strict";var n,o=Object.prototype,i=o.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag",c="object"==typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=_;var d="suspendedStart",p="suspendedYield",h="executing",f="completed",g={},y={};y[a]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(D([])));v&&v!==o&&i.call(v,a)&&(y=v);var b=C.prototype=k.prototype=Object.create(y);w.prototype=b.constructor=C,C.constructor=w,C[l]=w.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(b),e},u.awrap=function(e){return{__await:e}},S(x.prototype),x.prototype[s]=function(){return this},u.AsyncIterator=x,u.async=function(e,t,n,o){var i=new x(_(e,t,n,o));return u.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(b),b[l]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},u.values=D,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,i){return s.type="throw",s.arg=e,t.next=o,i&&(t.method="next",t.arg=n),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:D(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),g}}}function _(e,t,n,o){var i=t&&t.prototype instanceof k?t:k,r=Object.create(i.prototype),a=new E(o||[]);return r._invoke=function(e,t,n){var o=d;return function(i,r){if(o===h)throw new Error("Generator is already running");if(o===f){if("throw"===i)throw r;return M()}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var l=I(e,t,n);if("normal"===l.type){if(o=n.done?f:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=f,n.method="throw",n.arg=l.arg)}}}(e,n,a),r}function I(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function w(){}function C(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(e){function n(t,o,r,a){var s=I(e[t],e,o);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){n("next",e,r,a)},function(e){n("throw",e,r,a)}):Promise.resolve(c).then(function(e){l.value=e,r(l)},a)}a(s.arg)}var o;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function i(){return new Promise(function(o,i){n(e,t,o,i)})}return o=o?o.then(i,i):i()}}function A(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,A(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=I(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function t(){for(;++o<e.length;)if(i.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}return{next:M}}function M(){return{value:n,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(54))},function(e,t,n){n(579),e.exports=n(63).RegExp.escape},function(e,t,n){var o=n(2),i=n(580)(/[\\^$*+?.()|[\]{}]/g,"\\$&");o(o.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=window.JST={},o=n(0),i=n(19);n(930),n(937),n(582).files.forEach(function(e){var r=n(583)("./"+e+".jst");t["common/"+e]=o.template(i.trimTempalte(r))}),n(602).files.forEach(function(e){var r=n(603)("./"+e+".jst");t["pc/"+e]=o.template(i.trimTempalte(r))});var r,a,s,l,c=n(1),u=n(623),d=n(921),p=n(923),h=n(3),f=n(61),g=n(6),y=/^http/i.test(window.location.href);r=new u({parentEl:document.body,render:!0,buildVersion:1587118833e3}),a=new d({editor:r}),(s=new p).on("save-image",function(e,t){var n=function(e){if(e){var t,n,o=(e+="").indexOf(":");if(-1!==o&&(t=e.substring(0,o),n=e.substring(o+1),t&&n))return{source:t,localSource:n}}}(a.callNativeApi("SaveImageToNote",[t.extraSource,e]));if(n){var o=r.getBlockById(t.blockId);if(o){if(r.updateResMapWithKey(n.source,n.localSource,!1),h.isTable(o))o.forEach(function(e,t){var i=o.getCell(e,t);if(i&&i.isImageCell()){var r=i.getContent();r instanceof f&&(r.setSource(n.source),o.trigger("content-change"))}});else{if(!h.isImage(o))return;o.setSource(n.source)}a.callNativeApi("OnDocumentChange")}}}),r.on("content-set",function(e,t){s.updateNoteId(e);var n=o.filter(t,function(e){return!a.callNativeApi("IsImageSavedToNote",[e.extraSource,e.source])});s.addImgInfo(n,e),s.startSaveWithDelay()}).on("check-image",function(e,t){var n=o.filter(t,function(e){return!a.callNativeApi("IsImageSavedToNote",[e.extraSource,e.source])});s.addImgInfo(n,e),s.startSave()}).on("content-change",o.debounce(function(){a.callNativeApi("OnDocumentChange")},100)).on("context-menu",function(e,t,n){l=n;var i=3,r=2;o.each(t,function(e){e.type===r&&(e.type=i),e.key||(e.key="")}),a.callNativeApi("CtxMenu",[t])}).on("insert-photo",function(){a.callNativeApi("InsertAttachments",["image"])}).on("insert-attachment",function(){a.callNativeApi("InsertAttachments",[])}).on("insert-link",function(e){a.asyncCallNativeApi("ShowInsertLinkDialogAsync",["http://"],e)}).on("show-words",function(e,t){a.callNativeApi("ShowNoteCharNum",[e,t])}).on("download-image",function(e){a.callNativeApi("SaveImage",[e])}).on("download-attachment",function(e,t){a.callNativeApi("SaveAsAttachment",[e,t])}).on("get-entity",function(e,t){c.log("get-entity",e),a.callNativeApi("GetTemplateEntity",[e,t])}).on("replace-img-url",function(e){var t=e.url,n=e.blockId,o=e.resId;c.log("RequestReplaceImage",[t,o,n]),/(http|https):\/\/([\w.]+\/?)\s*/.test(t)&&this.trigger("save-image",t,{source:o,extraSource:t,blockId:n,noteId:e.noteId,encode:!1}),a.callNativeApi("RequestReplaceImage",[t,o,n])}).on("replace-attachment",function(e,t,n){a.callNativeApi("ReplaceAttachments",[n,"",t])}).on("replace-image",function(e,t,n){a.callNativeApi("ReplaceAttachments",[n,"image",t])}).on("on-paste",function(e,t){var n=[];c.DEBUG&&y&&n.push(t),e?a.callNativeApi("PasteAsText",n):a.callNativeApi("Paste",n)}).on("snap-screen",function(e){var t={snap:"normal","snap-x":"hide"},n=t[e]||t.snap;a.callNativeApi("SnapScreen",[n])}).on("clipboard-status",function(e){e(a.callNativeApi("ClipboardAvailable"),a.callNativeApi("IsNoteLinkInClipboard"))}).on("require-paste",function(e,t){!0!==t?!0===e?a.callNativeApi("PasteNoteLink",[]):a.callNativeApi("Paste",[]):a.callNativeApi("PasteAsText",[])}).on("open-link",function(e,t){e=g.trim(e),t?a.callNativeApi("OpenNote",[e]):a.callNativeApi("OpenLink",[e])}).on("open-image",function(e){a.callNativeApi("OpenImage",[e])}).on("open-attachment",function(e,t){a.callNativeApi("OpenAttachment",[e,"",t])}).on("edit-link",function(e,t){var n=e.href;a.asyncCallNativeApi("ShowInsertLinkDialogAsync",[n],t)}).on("click",function(){a.callNativeApi("OnAreaClick")}).on("find",function(){a.callNativeApi("FindText")}).on("export-pdf",function(){a.callNativeApi("Export2PDF")}).on("export-word",function(){a.callNativeApi("Export2Word")}).on("download-file",function(){a.callNativeApi("DownloadOriginFile")}).on("exit-full-screen",function(){a.callNativeApi("ExitFullScreen")}).on("exit-presentation",function(){a.callNativeApi("ExitPresentation")}).on("view-mode-change",function(e){a.callNativeApi("PageModeChanged",[e])}).on("save-and-sync",function(){a.callNativeApi("StartSync")}).on("clipboard-error",function(e){c.warn("clipboard error: "+e)}).on("get-clipboard",function(e,t){var n={};o.each(e,function(e){n[e]=a.callNativeApi("GetClipboardData",[e])}),t(n)}).on("share-note",function(){a.callNativeApi("ShowShareMenu")}).on("clipboard-set",function(e){window.setTimeout(function(){a.callNativeApi("OnCopy",[!0===e])},25)}).on("rotate-image",function(e,t,n){a.callNativeApi("RotateImage",[e,t,n])}).on("zoom-changed",function(e){a.callNativeApi("OnChangeZoomByEditor",[e])}).on("background-changed",function(e,t){a.callNativeApi("ChangeBGImage",[e,t])}).on("background-failed-update",function(e){a.callNativeApi("ChangeBGImageFailed",[e])}).on("is-vip-user",function(e){e(a.callNativeApi("IsVIPUser"))}).on("log-to-native",function(e,t){t="EDITOR_LOG:"+t,a.callNativeApi("Log",[e,t])}).on("user-action-collection",function(e){a.callNativeApi("NoteEditorActionCollection",[e])}).on("scroll-in-content-loading",function(){a.callNativeApi("OnScrollInContentLoading")}),r.on("bridge-event",function(e){a.trigger.apply(a,e)}).on("select-context-menu",function(e){l&&l(e)}).on("bridge-off-events",function(){a.off()}).on("callback-to-native",function(e,t){null!=e&&""!==e&&((t=t||[]).unshift(e),a.callNativeApi("EditorCallBack",t))}).on("image-ocr",function(e){a.callNativeApi("ImageOCR",[e])}),r.on("collabsession-change",function(e){var t=window.JSON.stringify(e);a.callNativeApi("OnCollabSessionChange",[t])}),r.on("datacommand-success",function(e){a.callNativeApi("OnDataCommandSuccess",[e])}),r.on("session-built",function(e){c.log("session-built:",e),a.callNativeApi("OnSessionBuilt",[e]),r.toggleStats(!0)}),r.on("session-closed",function(e){c.log("session-closed:",e),a.callNativeApi("OnSessionClosed",[window.JSON.stringify(e)]),r.toggleStats(!1)}),r.on("session-initialized",function(e,t){c.log("session-initialized:",e,t),a.callNativeApi("OnSessionInitialized",[e,window.JSON.stringify(t)])}),r.on("useraction-failed",function(e){c.log("useraction-failed:",e),a.callNativeApi("OnUserActionFailed",[e])}),c.DEBUG&&(window.debugBridge=a,window.debugEditor=r),a.ready(document,r)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e){e.exports={files:["attachment-view-attachment-container","catalogue_view","table_view","table_cell_resize","table_cell_edit","high_light_item","color_picker","handwrite-view-container","header-footer","high_light_item_image","image-title-input","image-view-image-container","link_view","list_item_view","page_break_view","paragraph_view","todo","content-load-progress"]}},function(e,t,n){var o={"./attachment-view-attachment-container.jst":584,"./catalogue_view.jst":585,"./color_picker.jst":586,"./content-load-progress.jst":587,"./handwrite-view-container.jst":588,"./header-footer.jst":589,"./high_light_item.jst":590,"./high_light_item_image.jst":591,"./image-title-input.jst":592,"./image-view-image-container.jst":593,"./link_view.jst":594,"./list_item_view.jst":595,"./page_break_view.jst":596,"./paragraph_view.jst":597,"./table_cell_edit.jst":598,"./table_cell_resize.jst":599,"./table_view.jst":600,"./todo.jst":601};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=583},function(e,t){e.exports='<div class="attachment-block-container">\r\n    <div class="attachment-container" title="<%- title %>">\r\n        <div class="attachment-icon svg-common <%- name %>"></div>\r\n        <div class="attachment-title">\r\n            <p class="attachment-title-name"><%- fileName %></p><p class="attachment-title-type"><%- fileType %></p>\r\n        </div>\r\n        <div class="attachment-size"><%= size %></div>\r\n        <div class="attachment-download svg-common"></div>\r\n        <div class="attachment-mask" draggable="<%-!!draggable%>">\r\n            <div class="attachment-icon svg-common <%- name %>"></div>\r\n            <div class="attachment-title">\r\n                <p class="attachment-title-name"><%- fileName %></p><p class="attachment-title-type"><%- fileType %></p>\r\n            </div>\r\n            <div class="attachment-size"><%= size %></div>\r\n            <div class="attachment-download svg-common"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="catalogue-header cannot-edit">\r\n    <div class="catalogue-refresh" title="刷新">\r\n        <i class="svg-common src--svg--catalogue-refresh"></i>\r\n    </div>\r\n    <div class="catalogue-delete" title="删除">\r\n        <i class="svg-common src--svg--catalogue_remove"></i>\r\n    </div>\r\n</div>\r\n<div class="para-text"></div>'},function(e,t){e.exports='<div class="color-picker-panel" tabindex="0">\r\n    <div class="color-picker-panel-inner">\r\n        <div class="color-picker-panel-board">\r\n            <div class="color-picker-panel-board-hsv" style="background-color: rgb(255, 0, 0);">\r\n                <div class="color-picker-panel-board-value"></div>\r\n                <div class="color-picker-panel-board-saturation"></div>\r\n            </div>\r\n            <span style="left: 126px; top: 93.5px;"></span>\r\n        </div>\r\n        <div class="color-picker-panel-wrap">\r\n            <div class="color-picker-panel-wrap-ribbon">\r\n                <div class="color-picker-panel-ribbon">\r\n                    <span style="left: 0%;"></span>\r\n                </div>\r\n            </div>\r\n            <div class="color-picker-panel-wrap-alpha">\r\n                <div class="color-picker-panel-alpha">\r\n                    <div class="color-picker-panel-alpha-bg" style="background: linear-gradient(to right, rgba(57, 57, 57, 0), rgb(57, 57, 57));"></div>\r\n                    <span style="left: 100%;"></span>\r\n                </div>\r\n            </div>\r\n            <div class="color-picker-panel-wrap-preview">\r\n                <div class="color-picker-panel-preview">\r\n                    <span style="background-color: rgb(57, 57, 57); opacity: 1;"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="color-picker-panel-wrap" style="height: 40px; margin-top: 6px;">\r\n            <div class="color-picker-panel-params">\r\n                <div class="color-picker-panel-params-input">\r\n                    <input type="text" class="color-picker-panel-params-hex" maxlength="6" value="393939">\r\n                    <input type="number" value="57">\r\n                    <input type="number" value="57">\r\n                    <input type="number" value="57">\r\n                    <input type="number" value="100">\r\n                </div>\r\n                <div class="color-picker-panel-params-lable">\r\n                    <label class="color-picker-panel-params-lable-hex">HEX</label>\r\n                    <label class="color-picker-panel-params-lable-number">R</label>\r\n                    <label class="color-picker-panel-params-lable-number">G</label>\r\n                    <label class="color-picker-panel-params-lable-number">B</label>\r\n                    <label class="color-picker-panel-params-lable-alpha">A</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>'},function(e,t){e.exports='<div class="progressbar-layer">\r\n    </div>\r\n    <div class="progressbar-mark">\r\n    </div>\r\n    <div class="progress-message">\r\n    <span class="progress-message-text">\r\n       <span class="progress-message-number"></span>  的内容已加载完成，请稍后...\r\n    </span>\r\n</div>'},function(e,t){e.exports='<div class="handwrite-container">\r\n    <img  src="<%= src %>"/>\r\n</div>\r\n<% if (needCopyHack) {%>\r\n    <p class="handwrite-copy-hack">select me</p>\r\n<% } %>'},function(e,t){e.exports="<div class=\"header-footer-input\" contenteditable=\"<%= readonly ? 'false' : 'true' %>\"></div>"},function(e,t){e.exports='<div class="high-light-item" style="left: <%= left %>px; top: <%= top %>px; height: <%= height %>px; width: <%= width %>px;"></div>'},function(e,t){e.exports='<div class="high-light-item-image" style="left: <%= left %>px; top: <%= top %>px; height: <%= height %>px; width: <%= width %>px;"></div>'},function(e,t){e.exports='<div class="image-title-input" contenteditable="true"\r\n    style="position: absolute; left: <%- left %>px; top: <%- top %>px; width: <%- width%>px; text-align: <%- textAlign%>; min-height: <%- height%>px;"><%- title %></div>\r\n<div class="image-title-placeholder"\r\n    style="position: absolute; left: <%- left %>px; top: <%- top %>px; width: <%- width%>px; text-align: <%- textAlign%>; min-height: <%- height%>px;">\r\n    输入标题\r\n</div>\r\n'},function(e,t){e.exports='<div class="image-block-container">\r\n    <div class="image-container">\r\n       <% if (src) { %>\r\n         <img <% if (width || height) { %> class="filter-blur" <% } %> src="<%= src %>"\r\n            <% if (width && height) { %> style="width: <%- width%>px; height: <%- height%>px;"\r\n            <% } else if (width) { %> style="width: <%- width%>px; height: auto;"<% } %>/>\r\n            <div class="resize-handle" data-corner="0"></div>\r\n            <div class="resize-handle" data-corner="1"></div>\r\n            <div class="resize-handle" data-corner="2"></div>\r\n            <div class="resize-handle" data-corner="3"></div>\r\n            <div class="menu-wrapper">\r\n                <div class="yne-button-group">\r\n                    <div class="yne-button-item yne-last" data-button-name="menu" title="快捷菜单">\r\n                        <span class="yne-button svg-common">快捷菜单</span>\r\n                        <span class="yne-arrow-down svg-common"></span>\r\n                    </div>\r\n                    <ul class="yne-popup-menu">\r\n                        <li class="yne-popup-item" data-cm-name="image-title"><span>标题</span></li>\r\n                        <li class="yne-popup-item" data-cm-name="float-left"><span>左浮动</span></li>\r\n                        <li class="yne-popup-item" data-cm-name="float-right"><span>右浮动</span></li>\r\n                        <li class="yne-popup-item" data-cm-name="clear-float"><span>清除浮动</span></li>\r\n                        <li class="yne-popup-item" data-cm-name="clear-resize"><span>清除缩放</span></li>\r\n                        <% if (hasOCR) {%>\r\n                            <li class="yne-popup-item" data-cm-name="image-ocr"><span>文本识别OCR</span></li>\r\n                        <% } %>\r\n                        <li class="yne-popup-item yne-popup-split"></li>\r\n                        <li class="yne-popup-item" data-cm-name="delete"><span>删除图片</span></li>\r\n                        <li class="yne-popup-item" data-cm-name="download"><span>另存为</span></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="image-title"></div>\r\n        <div class="image-split"></div>\r\n         <% } else {\r\n            %>\r\n              <% if (isImgError) { %>\r\n         <div class="image_error"><div class="svg-common src--svg--image_error"></div></div>\r\n         <% } else {\r\n            %><div class="loader-wrap"  <% if (width && height) {%>style="width: <%- width%>px; height: <%- height%>px;"<% } %>></div>\r\n         <% } %>\r\n\r\n         <% } %>\r\n\r\n\r\n    <% if (needCopyHack) {%>\r\n        <p class="image-copy-hack">select me</p>\r\n    <% } %>\r\n</div>\r\n'},function(e,t){e.exports='<div class="hover-menu hover-menu-show-link">\r\n    <div class="hover-menu-before"></div>\r\n    <div class="hover-menu-body">\r\n        <a href="<%= link%>" target=\'_blank\'><span><%= link%></span></a>\r\n        <% if (!isReadOnly) { %>\r\n            <div class="link-button">\r\n                <span class="link-modify-button">编辑</span>\r\n                <span class="link-split">|</span>\r\n                <span class="link-remove-button">移除</span>\r\n            </div>\r\n        <% } %>\r\n    </div>\r\n</div>\r\n<div class="hover-menu hover-menu-modify-link">\r\n    <div class="hover-menu-before"></div>\r\n    <div class="hover-menu-body">\r\n        <span class="link-label">链接</span>\r\n        <input class="link-input" type="text" name="link" value="<%= link%>" />\r\n        <div class="link-confirm-button">\r\n            <span class="link-button-text">确定</span>\r\n        </div>\r\n    </div>\r\n</div>'},function(e,t){e.exports='<% if (isOrdered) { %>\r\n    <ol class="li-box"><li><div class="para-text"></div></li></ol>\r\n<% } else { %>\r\n    <ul class="li-box"><li><div class="para-text"></div></li></ul>\r\n<% } %>'},function(e,t){e.exports='<div class="page-break">\r\n    <span class="spanMark topSpan"></span>\r\n    <span class="spanMark middleSpan"></span>\r\n    <span class="spanMark bottomSpan"></span>\r\n</div>'},function(e,t){e.exports='<div class="para-text"></div>'},function(e,t){e.exports='<div class="cell-edit-box" contenteditable="true"></div>'},function(e,t){e.exports='<div class="resize-up"></div>\r\n<div class="resize-right"></div>\r\n<div class="resize-down"></div>\r\n<div class="resize-left"></div>\r\n'},function(e,t){e.exports='<div class="table-layout">\r\n    <div class="table-layout-inner" contentEditable="false">\r\n        <div class="table-wrapper">\r\n            <table>\r\n                <colgroup></colgroup>\r\n                <tbody></tbody>   \r\n            </table>\r\n            <div class="row-resize-line"></div>\r\n            <div class="col-resize-line"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="todo-content">\r\n    <label class="todo-mark" contenteditable="false">\r\n        <span class="todo-inner"></span>\r\n    </label>\r\n    <div class="todo-input para-text">\r\n    </div>\r\n</div>'},function(e){e.exports={files:["toolbar-button-template","toolbar-combo-box-font-family","toolbar-combo-box-font-size","toolbar-combo-box-align","toolbar-combo-box-line-height","toolbar-combo-box-color","toolbar-combo-box-back-color","toolbar-combo-box-table","toolbar-combo-box-zoom","toolbar-combo-box-set-background","toolbar-combo-box-heading","toolbar_view","toolbar-combo-box-show-more","toolbar-combo-box-insert-link","presenter_page","presenter_article","float-modifiers","float-modifiers-li"],dependency:["common"]}},function(e,t,n){var o={"./float-modifiers-li.jst":604,"./float-modifiers.jst":605,"./presenter_article.jst":606,"./presenter_page.jst":607,"./toolbar-button-template.jst":608,"./toolbar-combo-box-align.jst":609,"./toolbar-combo-box-back-color.jst":610,"./toolbar-combo-box-color.jst":611,"./toolbar-combo-box-font-family.jst":612,"./toolbar-combo-box-font-size.jst":613,"./toolbar-combo-box-heading.jst":614,"./toolbar-combo-box-insert-link.jst":615,"./toolbar-combo-box-line-height.jst":616,"./toolbar-combo-box-set-background.jst":617,"./toolbar-combo-box-show-more.jst":618,"./toolbar-combo-box-table.jst":619,"./toolbar-combo-box-template.jst":620,"./toolbar-combo-box-zoom.jst":621,"./toolbar_view.jst":622};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=603},function(e,t){e.exports='<% for (index in allAttendees) { %>\r\n    <li id="<%=allAttendees[index].SID%>" class="attendee">\r\n        <span class="phote">\r\n            <% if (allAttendees[index].portrait) { %>\r\n            <i class="portrait" style="background-image:url(<%=allAttendees[index].portrait%>);"></i>\r\n            <% } else { %>\r\n            <i class="portrait" style="background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAAGvZ15GAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUMzMzk1NzA1NDNFMTFFNTk5MURCMjJEMUNENUZFOTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUMzMzk1NkY1NDNFMTFFNTk5MURCMjJEMUNENUZFOTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUNCQThDMTFDNDhBMTFERjg4MThCMUU5Rjk4RDBCMjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUNCQThDMTJDNDhBMTFERjg4MThCMUU5Rjk4RDBCMjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4YtSJRAAAGIUlEQVR42lSKQQrAMAgEay1+IuBB//8l8eYnEhNLQqEDe9jZBTO7/tyV3jsittbmnEdVZ2YiEpGjAGDvm6dS3d3rm5mvGmOo6neJiCWAGNFsBOoAmfX7929ubm4mMIAaz87OLiYmJi8vj3DXfzCAMKA2Ai2CmAjRyMLKygp0N9z4hw8fAgQgg4xRAAZCIIghjY0/EO7/z7L0AdYZMJhcYnEcy6KzK/+Mn2Hb2T94OyhvK1WVmU8PXQVXxsGo6jRxjEqLEbGhiGwmmM3szbvW6iB3PK64+2COD5FlJLsEYJSMVSAGgSB6iIWIlVaKjeD//5SV2Aq292CPDYQLdxbBJOPM7Iw/phNF8/pjXdNZa9HKOaeUJHJyuTxJTtSDCf4550II2ODYPYJSymXCmFqrMj16gvgL095bpXmOMe5MWKEpQmfDEGst9pq41TxYVAFCRkNLcVaL45bjV75yxc45c86PHO9o996lKaEB6r1vrYkBAz+IpxljjIDeApBSBisMg0AQBcm1eBL//+dCLp5E0Fzalw4YWaWldA/BtHF2HWfmuzI/Fz2ZxXXB/F/bDM9BMCcyDSF0NlU5ZxgnE87zhEZ5fgHEH8JSgoizEevxLtKBTiOKlYn2YD6h9F+MmWOMMyduJq+1ZrqZD7h2M+liIp1u3/dlsPBMKR3HwUSm2YIjiQ958pSvNCZMq5lQzEQWCHbYz5qF955ghTKNwxon1VphWglmI/x+2TaSST7p34EuRpiO1Os3gA5KKffeywLO0YQU4RTjZc1XNhaR37PyAlEWMTYozx8LlyJaSeElAPPlsqsgEATRaPgASPj/v2NN2LvwOAfLEXEI8S7uJCboOD39qKpufuVaxPHPuPb/DG1xZO2VGJ6HYUCb+bosCyCiMtQI6j+S8g7ubpMzscO/x3GE6NkCRBQIpYZoQBQT4Lam7g7X7ExiKvOA7YV2lcMt0oILtjEBgjPEeGAdLLoOHNoWWoa8VjFPc9nc76hwQFoPpO19xV6JbmNrRyEPlyZq6u8nG6FoWLmVZbttJRu3qXF9uZnOA9eIkgOp5R/gbZ7n5D5Z93C2WlIbc+CYY5Qvai2gp2nyWRX7qpDr+Fq8WMoC3FCEkBXZFPQz2d1naCZSiCP4TJ5OGnEk0G2FhglJBLgDcSdsFBqjBIjdeuzZZz8m0H/ga9vJFr/QVIgUp8g3nrZy1Pc9tNRcXfLXKFzGLGQAi7TJt/ITCwGr/+vIVNFVvy7PFT2gArw1mDJVbO2ZeA6tLycXmmWzfKSVD5kjfst0alENzvqKcbVHq6enBb/IMQvv7gK0Y0YrDcRAFJVSHwTf+///ty2lTyIoHnPqJSTbZbNW8cEBl1WT7M1k5s6d3KeufUeCRv96HruHP2b/gIbqfq9fm6qjtKR0k5S0PCRVf+gMhmYgG3gQ+cpE4p1nKKfn+lWADDE7P8mBF3oTKCZcyx+9v0h7Jmk+FWMk2TxNE/RsyRVTaHMMkAgslsyXG7E4z6UjtU2TYHUMs5A0lEi4VKYMAw/HkH2YX5KpRKMP4vOMaa4WHCPpwsmQLiNxWH8DsRZQzQ08lX8zmuGr257VMXKdheCxWLOBLVkmjUZEjGZNakr207d4awHpIWPI/NrCK7vrTVpuRpY3tgrQa7F6xSFjLtre6R5Zc+5rAb0VY4sENc3m+Xy+hem9WBOCRi6uvVwup9OJRerLmy08VDsWKKzLRskXiK6molxp1imtzIQY2YZXHgteWQXIHeeizWRhaRQVaMAEXyM2TJxABx8gXorxoriRsZo1hwFlZs4ixM9X/WRyONowv0bR19PrFYaZutbYyRQMxzRysm4D8+7TKnEVOsVEsyWGoulV+RwNWpmCyjE1m0uQ9u0oc5X0PL3OktVY5BaPLMVQ2gZw5Ph6V/c4ahKyN7d0AMuuww5/DNDhcGAfuTFMoV4m/tn6Iykw97kYaMBEzs4Dsj+Sciw9eMXcnu3Xh6pHkrT2q+KE3SIBAJebPoNkb03eF+OF0wEN/lyIu7sYruIrx+MRb5k3ItubCMSdUhCNIbX8gv7HSXwOL6TSfQLiB22gWDHQ+J+XUz8NiKgwQ3nx1DilD+SpF4rN641ZAAAAAElFTkSuQmCC);"></i>\r\n            <% } %>\r\n            <i class="color-bg"></i>\r\n            <i class="color" style="background-color:<%=allAttendees[index].color%>;"></i>\r\n        </span>\r\n        <span class="nickname"><%=allAttendees[index].nickname%></span>\r\n    </li>\r\n<% } %>\r\n'},function(e,t){e.exports='<div id="attendee-dialog">\r\n    <div id="attendee-hint">\r\n        <i id="attendee-icon"></i>\r\n        <span id="attendee-num">\r\n            <span id="attend-num-span">1</span>\r\n            <span>人正在编辑</span>\r\n        </span>\r\n    </div>\r\n    <ul id="attendee-list"></ul>\r\n</div>\r\n'},function(e,t){e.exports='<h1 style="text-align: center; font-size: 48px; margin-top: 100px; margin-bottom: 100px;">\r\n    <%=title%>\r\n</h1>\r\n<article class="editor-area" \r\n    ng-mouseover="over()" \r\n    ng-mouseleave="leave()"\r\n    style="padding: 10px 0 10px 0;">\r\n    <%=content%>\r\n</article>'},function(e,t){e.exports='<div class="demo-page">\r\n    <iframe frameborder="none" class="note-content"></iframe>\r\n    <div class="tool-bar" ng-class="{show : inDemoArea}">\r\n        <div>\r\n            <i class="demo-mode-icon zoom-in-icon" title="放大" data-action="zoom-in"></i>\r\n        </div>\r\n        <div>\r\n            <i class="demo-mode-icon zoom-out-icon" title="缩小" data-action="zoom-out"></i>\r\n        </div>\r\n        <div>\r\n            <i class="demo-mode-icon esc-icon" title="退出" data-action="esc"></i>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="button-wrapper button-wrapper-<%=name%>" title="<%=label%>">\r\n    <div class="button button-<%=name%> svg-common"></div>\r\n    <div class="button-text" <% if (!text) { %> style="display:none;" <% } %> ><%= text %></div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n        <% if (text) { %>\r\n            <span class="combo-text combo-text-<%=name%>"><%-text%></span>\r\n        <% } %>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <ul class="combo-menu combo-menu-<%=name%>">\r\n    <% for (key in items) { %>\r\n        <li class="combo-item" data-value="<%=key%>">\r\n            <span class="combo-item-icon-<%=name%> <%=key%> svg-common">&nbsp;</span>\r\n            <span class="combo-item-span-<%=name%>"><%=items[key]%></span>\r\n        </li>\r\n    <% } %>\r\n    </ul>\r\n</div>\r\n\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value svg-common combo-value-<%=name%>">\r\n            <span class="combo-value-buttom-color"></span>\r\n        </span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <div class="combo-menu combo-menu-<%=name%>">\r\n        <div class="color-section color-section-default combo-item" data-value="<%=defaultValue%>">\r\n            <div class="color-cell combo-item back-color-cell-default" data-value="<%=defaultValue%>" style="background-color:<%=defaultValue%>;"></div>\r\n            <div class="color-label color-label-default">默认无背景色</div>\r\n        </div>\r\n        <hr class="color-section-split">\r\n        <div class="color-section color-section-theme">\r\n            <div class="color-label color-label-theme">主题颜色</div>\r\n            <div class="color-row">\r\n            <% for (key in items.theme) { %>\r\n                <div class="color-cell combo-item" data-value="<%=items.theme[key]%>" style="background-color:<%=items.theme[key]%>;"></div>\r\n            <% } %>\r\n            </div>\r\n            <div class="color-row-split"></div>\r\n            <div class="color-part-theme">\r\n            <% for (row in items.other) { %>\r\n                <div class="color-row">\r\n                <% for (key in items.other[row]) { %>\r\n                    <div class="color-cell combo-item" data-value="<%=items.other[row][key]%>" style="background-color:<%=items.other[row][key]%>;"></div>\r\n                <% } %>\r\n                </div>\r\n            <% } %>\r\n            </div>\r\n        </div>\r\n        <hr class="color-section-split">\r\n        <div class="color-section color-section-standard">\r\n            <div class="color-label color-label-standard">推荐颜色</div>\r\n            <div class="color-row">\r\n            <% for (key in items.standard) { %>\r\n                <div class="color-cell combo-item" data-value="<%=items.standard[key]%>" style="background-color:<%=items.standard[key]%>;"></div>\r\n            <% } %>\r\n            </div>\r\n        </div>\r\n        <hr class="color-section-split">\r\n        <div class="color-section color-section-other combo-item">\r\n            <div class="color-img-other"></div>\r\n            <div class="color-label color-label-other">其他颜色</div>\r\n        <div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common">\r\n            <span class="combo-value-buttom-color"></span>\r\n        </span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <div class="combo-menu combo-menu-<%=name%>">\r\n        <div class="color-section color-section-default combo-item" data-value="<%=defaultValue%>">\r\n            <div class="color-cell combo-item color-cell-default" data-value="<%=defaultValue%>" style="background-color:<%=defaultValue%>;"></div>\r\n            <div class="color-label color-label-default">默认颜色</div>\r\n        </div>\r\n        <hr class="color-section-split">\r\n        <div class="color-section color-section-theme">\r\n            <div class="color-label color-label-theme">主题颜色</div>\r\n            <div class="color-row">\r\n            <% for (key in items.theme) { %>\r\n                <div class="color-cell combo-item" data-value="<%=items.theme[key]%>" style="background-color:<%=items.theme[key]%>;"></div>\r\n            <% } %>\r\n            </div>\r\n            <div class="color-row-split"></div>\r\n            <div class="color-part-theme">\r\n            <% for (row in items.other) { %>\r\n                <div class="color-row">\r\n                <% for (key in items.other[row]) { %>\r\n                    <div class="color-cell combo-item" data-value="<%=items.other[row][key]%>" style="background-color:<%=items.other[row][key]%>;"></div>\r\n                <% } %>\r\n                </div>\r\n            <% } %>\r\n            </div>\r\n        </div>\r\n        <hr class="color-section-split">\r\n        <div class="color-section color-section-standard">\r\n            <div class="color-label color-label-standard">推荐颜色</div>\r\n            <div class="color-row">\r\n            <% for (key in items.standard) { %>\r\n                <div class="color-cell combo-item" data-value="<%=items.standard[key]%>" style="background-color:<%=items.standard[key]%>;"></div>\r\n            <% } %>\r\n            </div>\r\n        </div>\r\n        <hr class="color-section-split">\r\n        <div class="color-section color-section-other combo-item">\r\n            <div class="color-img-other"></div>\r\n            <div class="color-label color-label-other">其他颜色</div>\r\n        <div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <ul class="combo-menu combo-menu-<%=name%>">\r\n    <% for (font in items) { %>\r\n        <li class="combo-item" data-value="<%=items[font].singleValue%>">\r\n            <span style="font-family:<%=items[font].fullValue%>;"><%=items[font].name%></span>\r\n        </li>\r\n    <% } %>\r\n    </ul>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <ul class="combo-menu combo-menu-<%=name%>">\r\n    <% for (key in items) { %>\r\n        <li class="combo-item" data-value="<%=key%>">\r\n            <span><%=items[key]%></span>\r\n        </li>\r\n    <% } %>\r\n    </ul>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%>"></span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <ul class="combo-menu combo-menu-<%=name%>">\r\n    <% for (key in items) { %>\r\n        <li class="combo-item" data-value="<%=key%>">\r\n            <span style="font-size: <%=items[key][\'font-size\']%>px"><%=items[key].name%></span>\r\n        </li>\r\n    <% } %>\r\n    </ul>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper combo-link-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper combo-value-wrapper-<%=name%>">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n        <span class="combo-text" <% if (!text) { %> style="display:none;" <% } %> ><%= text %></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper  wrapper-<%=name%>">\r\n    <div class="combo-menu-<%=name%>">\r\n        <span class="link-label">链接</span>\r\n        <input class="link-input" type="text" name="link" placeholder="输入链接" />\r\n        <div class="link-button">\r\n            <span class="link-button-text">确定</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <ul class="combo-menu combo-menu-<%=name%>">\r\n    <% for (idx in items) { %>\r\n        <li class="combo-item" data-value="<%=items[idx].key%>">\r\n            <span class="combo-item-icon-<%=name%> line-height-<%=idx%>">&nbsp;</span>\r\n            <span class="combo-item-span-<%=name%>"><%=items[idx].value%></span>\r\n        </li>\r\n    <% } %>\r\n    </ul>\r\n</div>\r\n\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common">\r\n        </span>\r\n        <span class="combo-text combo-text-<%=name%>">纸张背景</span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <div class="combo-menu combo-menu-<%=name%>">\r\n        <div class="background-section-top">\r\n            <% for (row in items.normalUser) { %>\r\n            <div class="background-row">\r\n                <% for (key in items.normalUser[row]) { %>\r\n                    <% if (items.normalUser[row][key] === \'NoBackground\') { %>\r\n                        <div class="background-cell combo-item" data-value="<%=items.normalUser[row][key]%>">\r\n                            <svg class="background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\r\n                        </div>\r\n                    <% } else { %>\r\n                        <div class="background-cell combo-item" data-value="<%=items.normalUser[row][key]%>" style="background-image:url(\'<%=items.normalUser[row][key]%>\');">\r\n                            <svg class="background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\r\n                        </div>\r\n                    <% } %>\r\n                <% } %>\r\n                </div>\r\n            <% } %>\r\n        </div>\r\n        <hr class="background-section-split">\r\n        <div class="background-section-bottom">\r\n            <div class="background-label background-label-vip">会员特权</div>\r\n            <% for (row in items.VIP) { %>\r\n                <div class="background-row">\r\n                <% for (key in items.VIP[row]) { %>\r\n                    <% if (items.VIP[row][key] === \'NoBackground\') { %>\r\n                        <div class="background-cell combo-item" data-value="<%=items.VIP[row][key]%>">\r\n                            <svg class="background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\r\n                        </div>\r\n                    <% } else { %>\r\n                        <div class="background-cell combo-item" data-value="<%=items.VIP[row][key]%>" style="background-image:url(\'<%=items.VIP[row][key]%>\');">\r\n                            <svg class="background-cell-check-mark" xmlns="http://www.w3.org/2000/svg" viewBox="-16 -16 52 52"><path d="M1.05584113,8.97696545 C0.884930054,8.78831051 0.877161369,8.59965557 1.03253508,8.41100063 L1.52196226,7.7742902 C1.6617986,7.56991402 1.84047836,7.53847153 2.05800155,7.67996273 L6.39292802,10.6748599 C6.79689966,10.9421211 7.19310261,10.9185392 7.58153688,10.6041143 L19.1180347,0.982712344 C19.3044832,0.825499894 19.4831629,0.833360516 19.654074,1.00629421 L19.9104406,1.26569475 C20.0813517,1.43862845 20.0813517,1.61942277 19.9104406,1.80807771 L7.53492477,14.5187043 C7.17756524,14.880293 6.8279744,14.8881536 6.48615224,14.5422862 L1.05584113,8.97696545 Z"/></svg>\r\n                        </div>\r\n                    <% } %>\r\n                <% } %>\r\n                </div>\r\n            <% } %>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="toolbar-more-split"></div>\r\n<div class="combo-display-wrapper combo-showmore-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper combo-value-wrapper-<%=name%>">\r\n        <span class="combo-value combo-value-<%=name%> svg-common">更多</span>\r\n        <span class="combo-expand-gray svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper  wrapper-<%=name%>">\r\n    <div class="combo-menu combo-menu-<%=name%>">\r\n    </div>\r\n</div>'},function(e,t){e.exports='<div class="combo-display-wrapper combo-display-wrapper-<%=name%>" title="<%=label%>">\r\n    <div class="combo-value-wrapper combo-value-wrapper-<%=name%>">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n        <span class="combo-text" <% if (!text) { %> style="display:none;" <% } %> ><%= text %></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <div class="combo-menu combo-menu-<%=name%>">\r\n    <% for (var i=0; i<maxRows; i++) { %>\r\n        <% for (var j=0; j<maxCols; j++) { %>\r\n            <span class="combo-item" data-row="<%=i%>" data-col="<%=j%>"></span>\r\n        <% } %>\r\n    <% } %>\r\n    <div class="combo-menu-label-<%=name%>">插入表格</div>\r\n    </div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper">\r\n    <div class="combo-value-wrapper"></div>\r\n    <div class="combo-expand-wrapper"></div>\r\n</div>\r\n<div class="combo-menu-wrapper"></div>\r\n'},function(e,t){e.exports='<div class="combo-display-wrapper" title="<%=label%>">\r\n    <div class="combo-value-wrapper">\r\n        <span class="combo-value combo-value-<%=name%> svg-common"></span>\r\n    </div>\r\n    <div class="combo-expand-wrapper">\r\n        <span class="combo-expand svg-common"></span>\r\n    </div>\r\n</div>\r\n<div class="combo-menu-wrapper">\r\n    <ul class="combo-menu combo-menu-<%=name%>">\r\n    <% for (key in items) { %>\r\n        <li class="combo-item" data-value="<%=key%>">\r\n            <span><%=items[key]%></span>\r\n        </li>\r\n    <% } %>\r\n    </ul>\r\n</div>\r\n'},function(e,t){e.exports='<div class="toolbar-container">\r\n    <% \r\n        _.each(items, function(conf, key){\r\n            if(conf.type === \'button\') {\r\n    %>\r\n                <button class="<%= key%>" action="<%= conf.action%>" name="<%= conf.name%>" type="button" data-yne-is-block="<%= !!conf.block%>"><%= conf.label%></button>\r\n    <%      \r\n            } else if(conf.type === \'select\') {\r\n    %>\r\n                <select class="<%= key%>" action="<%= conf.action%>" name="<%= conf.name%>" data-yne-is-block="<%= !!conf.block%>">\r\n    <%\r\n                    _.each(conf.options, function(value, key) {\r\n    %>\r\n                        <option value="<%= key%>"><%= value%></option>\r\n    <%                       \r\n                    });\r\n    %>\r\n                </select>\r\n    <%\r\n            }\r\n        });\r\n    %>\r\n\r\n</div>'},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(1),n(624),n(909),n(916),n(918)],void 0===(i=function(e,t,n,o,i,r,a,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.getBlockById=function(e){return this.coreEditor.getNote().getBlockById(e)},t.prototype.isLegacyHost=function(){return this.coreEditor.isLegacyHost()},t.prototype.toggleStats=function(e){this.coreEditor.toggleStats(e)},t.prototype.updateResMapWithKey=function(e,t,n){this.coreEditor.updateResMapWithKey(e,t,n)},t.prototype.initialize=function(e){var t,r=this,s=[];if((e=n.defaults(e||{},{parentEl:null,render:!0})).render&&!e.parentEl)throw new Error("BulbEditor need `parentEl`!");r.coreEditor=t=new i({parentEl:e.parentEl}),e.render&&t.render(),n.each(a,function(e){if(s.indexOf(e)>-1)o.error("The event ["+e+"] has already bound");else{var n="yne-"+e;"collabsession-change"===e&&t.isLegacyHost()?t.bind(n,function(e){t.updateAttendees(e)}):t.bind(n,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r.trigger.bind(r,e).apply(r,t)}),s.push(e)}})},t}(r)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(7),n(625),n(627),n(630),n(3),n(263),n(52),n(356),n(19),n(109),n(75),n(22),n(46),n(142),n(648),n(649),n(650),n(1),n(0),n(651),n(688),n(691),n(757),n(760),n(821),n(907),n(908),n(26),n(123),n(53)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m,v,b,_,I,k,w,C,S,x,A,T,N,E,D,M){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isZoomHintShown=!1,t}return s(t,e),t.prototype.getDefaultFontSize=function(){return this.defaultFontSize},t.prototype.getdefaultFontName=function(){return this.defaultFontName},t.prototype.getDefaultStyle=function(){var e;return e=E.getAllDefault(["href"]),this.getdefaultFontName()&&(e["font-family"]=this.defaultFontName),this.getDefaultFontSize()&&(e["font-size"]=this.defaultFontSize),e},t.prototype.canRemoveFormat=function(){return this.controller.canRemoveFormat()},t.prototype.enterFullScreen=function(){$(document.body).addClass("full-screen"),this.toolbar.enterFullScreen(),this.isCollabEnabled()&&(this.$attendeesHintDiv.css("top","6px"),this.$attendeesHintDiv.css("right","140px"))},t.prototype.enterPresentation=function(e){var t=this._getPresenter(),n=this.getHtmlContent(!0);t.enter(e,n,this.currentBackground)},t.prototype.exitFullScreen=function(){$(document.body).removeClass("full-screen"),this.toolbar.exitFullScreen(),this.isCollabEnabled()&&(this.$attendeesHintDiv.css("top",this.attendeeHintDivDefaultStyle.top),this.$attendeesHintDiv.css("right",this.attendeeHintDivDefaultStyle.right))},t.prototype.getImages=function(){return I.filter(this.note.getAllBlocks(),function(e){return a.isImage(e)})},t.prototype.updateImageByOrigSrc=function(e,t,n){var o=this.note.getBlockById(n),i=this.noteView.getBlockViewByBlock(o);o instanceof M&&(this.updateResMapWithKey(e,t),o.setSource(e),i.updateRenderedSource(t))},t.prototype.focusEditor=function(){this.controller.focusEditor()},t.prototype.getCurrentZoomValue=function(){var e,t=this._getEditArea();return e=Number(t.css("zoom")),I.isNumber(e)||(e=1),e},t.prototype.getFirstLineTextContent=function(){var e,t=this._firstNotEmptyTextBlockIndex(),n="";return-1===t?"":((e=this.note.getBlockAt(t))instanceof h?e.getRichTexts().map(function(e){for(;n.length>100;)return n;n+=e.toString().replace(/\s+/g,"")}):n=e.toPlain(),n)},t.prototype.getNote=function(){return this.note},t.prototype.getExtraInfo=function(e){return this.note.getExtraInfo(e)},t.prototype.getNoteViewWrapper=function(){return $(this.noteViewWrapper)},t.prototype.getNoteViewFrame=function(){return $(this.noteViewFrame)},t.prototype.getPcResMap=function(){return this.getExtraInfo("pcResMap")},t.prototype.getScrollPercent=function(){var e=this.noteViewWrapper;return e.scrollTop/e.scrollHeight},t.prototype.imageOCR=function(e){this.trigger("yne-image-ocr",e)},t.prototype.initNoteViewWrapper=function(){var e,t=this,n=$(t.parentEl);t.noteViewWrapper||('<div class="note-view-wrapper"><div class="note-view-frame"></div></div>',t.noteViewWrapper=$('<div class="note-view-wrapper"><div class="note-view-frame"></div></div>').get(0),e=$(t.noteViewWrapper),t.noteViewFrame=e.find("div").get(0),e.bind("mousedown",function(e){var n=e.target;n!==t.noteViewFrame&&n!==t.noteViewWrapper||e.preventDefault()}),e.bind("scroll",function(){t.contentLoading&&(t.scrolledWhenLoading=!0,t.trigger("yne-scroll-in-content-loading"),_.log("scrolled during content loading"))}),n.append(t.noteViewWrapper),t.progressTracker=new N({}),new T({$parentEl:e,progressTracker:t.progressTracker}),null!=t.noteView&&t.noteView.setOptions({noteviewFrame:t.getNoteViewFrame(),noteviewWrapper:t.getNoteViewWrapper()})),t.updateNoteViewWrapperSize()},t.prototype.isCaretInFirstTextLine=function(e){(!I.isNumber(e)||e<=0||e>500)&&(e=80),_.log("limit: "+e);var t,n,o,i,r=this.note,s=this._firstNotEmptyTextBlockIndex(),l=0;if(-1===s)return!1;if(t=this.getNoteRange().getEndBlockRange(),(n=r.getBlockIndex(t.block))>s)return!1;for(o=0;o<n-1;o++)(i=r.getBlockAt(o))&&a.isTextOrTableBlock(i)&&(l+=i.countWords());return i=r.getBlockAt(n),a.isTextBlock(i)?l+=t.end:a.isTable(i)&&(l+=i.countWords()),l<=e},t.prototype.insertText=function(e,t){this.controller.insertText(e,t)},t.prototype.isFullScreen=function(){return $(document.body).hasClass("full-screen")},t.prototype.isLegacyHost=function(){var e=!0,t=this.getEditorProps();return null==t.pcVersion&&null!=window.YNote&&null!=window.YNote.GetVersion&&(t.pcVersion=parseInt(window.YNote.GetVersion(),10)),null!=t.pcVersion&&t.pcVersion>=parseInt("060000000000",10)&&(e=!1),e},t.prototype.isSameList=function(e){return this.controller.isSameList(e)},t.prototype.querySelectionInlineStyle=function(e){return this.controller.querySelectionInlineStyle(e)},t.prototype.querySelectionBlockStyle=function(e){return this.controller.querySelectionBlockStyle(e)},t.prototype.querySelectionInlineStyles=function(){return this.controller.querySelectionInlineStyles()},t.prototype.querySelectionBlockStyles=function(){return this.controller.querySelectionBlockStyles()},t.prototype.removeShortCut=function(e){this.controller.removeShortCut.apply(this.controller,[e])},t.prototype.render=function(){var t=this.noteView;this.renderCallCounter?(this.renderCallCounter++,_.error("The PcEditor - render() should be called only once: "+this.renderCallCounter)):this.renderCallCounter=1,t&&(this.initNoteViewWrapper(),$(this.noteViewFrame).append(t.$el),$(this.noteViewWrapper).append(this.linkView.$el),this.setViewMode(this.editorProps.viewMode,!0,!1),t.setOptions({pageType:this.editorProps.pageType}),t.render(),$(this.noteViewWrapper).append(this.imgTitleInput.$el),this.isCollabEnabled()&&!1===this.noteProps.hideAttendeeHint?this.toggleAttendeeHint(!0):this.toggleAttendeeHint(!1),e.prototype.render.call(this))},t.prototype.reset=function(){var t=this.defaultFontName,n=this.defaultFontSize;e.prototype.reset.call(this),this.getController().setDefaultFont(t,n),this.scrolledWhenLoading=!1,this.toolbar&&this.toolbar.isRendered&&(this.toolbar.reset(),this.toolbar.show()),this.colorpicker&&this.colorpicker.reset(),this._clearScrollTimeout(),this._toggleAttendees(!1),this.setIdleTimeout(!1),this.progressTracker.stop()},t.prototype.rotateSaveSyncIcon=function(e){this.toolbar.rotateSaveSyncIcon(e)},t.prototype.setCaretPosition=function(e,t){var n,o=document.caretRangeFromPoint(e,t);return!!o&&(!!(n=f.fromNativeRange(o,this.noteView))&&(this.setNoteRange(n),!0))},t.prototype.setDefaultFont=function(e,t){var n=c.getFontFirstValue(e),o=u.getAsArray();n&&(this.defaultFontName=n),o.indexOf(t)>-1&&(this.defaultFontSize=t),this.note&&this.note.isEmptyContent()&&this.useDefaultFontAsEditingStyle()},t.prototype.setHtmlContent=function(e,t,n,o){_.log("setHtmlContent"),this._setContent(!1,e,t,n,o),this.isLegacyHost()&&this.trigger("yne-content-change")},t.prototype.setIdleTimeout=function(t){e.prototype.setIdleTimeout.call(this,t),t&&this.toggleAttendeeHint(!1)},t.prototype.setScrollPercentWithDelay=function(e,t){var n=this;t=t||50,n._clearScrollTimeout(),n.scrollTimeout=window.setTimeout(function(){n._setScrollPercent(e)},t)},t.prototype.setStyles=function(e){this.noteView.$el.css(e)},t.prototype.setXmlContent=function(e,t,n,o){this._setContent(!0,e,t,n,o)},t.prototype.setZoomPercent=function(e,t){this._getPresenter().isPresenting()?e>0?this._getPresenter().zoomIn():this._getPresenter().zoomOut():t?this.zoomEditor(e/100,!0):e>0?this._zoomInEditor():this._zoomOutEditor()},t.prototype.showSaveSyncButton=function(e){this.toolbar.showSaveSyncButton(!0===e)},t.prototype.showToolbar=function(){this.toolbar&&this.toolbar.isRendered&&this.toolbar.show()},t.prototype.toggleAttendeeHint=function(e){e?this.$attendeesHintDiv.show():this.$attendeesHintDiv.hide()},t.prototype.toggleStats=function(e){var t;t=_.DEBUG?"http://test."+D.getNamespace()+"/editor/collab/pcCollabStats_debug.html":"https://"+D.getNamespace()+"/editor/collab/pcCollabStats.html",e?this.$statsIFrame.attr("src",t):this.$statsIFrame.attr("src","")},t.prototype.toggleToolbar=function(e){this.toolbar.toggleToolbar(e),this.updateNoteViewWrapperSize()},t.prototype.updateAttendees=function(e){var t,n,o=[],i="";I.each(e,function(e){y.parseToBoolean(e.readOnly,!1)||((t={}).SID=e.sessionId,t.portrait=e.portraitUrl,t.color=e.lockColor,t.nickname=e.nickname,o.push(t))}),n=I.size(o),this.$attendeesHintDiv.find("#attend-num-span").html(n),n>0&&(i=d.render("pc","float-modifiers-li",{allAttendees:o})),this.$attendeesHintDiv.find("#attendee-list").html(i)},t.prototype.updateFormatPainterCursorUI=function(e){this.noteView.updateFormatPainterCursorUI(e)},t.prototype.updateShortCut=function(e,t){this.controller.updateShortCut.apply(this.controller,[e,t])},t.prototype.updateNoteViewWrapperSize=function(){var e,t;this.toolbar&&this.noteViewWrapper&&(e=$(window).height(),t=this.toolbar.$el.outerHeight(),$(this.noteViewWrapper).outerHeight(e-t))},t.prototype.updateResMapWithKey=function(e,t,n){this.note.setExtraInfoWithKey("pcResMap",e,t,n)},t.prototype.useDefaultFontAsEditingStyle=function(){this.controller.setDefaultFont(this.defaultFontName,this.defaultFontSize)},t.prototype.zoomEditor=function(e,t){I.isNumber(e)&&(this._getEditArea().css("zoom",e),this.imgTitleInput.setZoom(e),this.linkView.setZoom(e),t&&this.trigger("yne-editing-zoom-change",e),this.trigger("yne-zoom-changed",100*e),this.noteView.trigger("resize",e),this._showZoomHint(100*e+"%"))},t.prototype.bindEventsForController=function(){var t=this,n=t.controller;n?(e.prototype.bindEventsForController.call(this),g.bubble(["contextmenu","yne-click","yne-download-attachment","yne-download-image","yne-get-entity","yne-editing-state-change","yne-replace-img-url","yne-on-paste","yne-open-attachment","yne-open-image","yne-open-link","yne-replace-attachment","yne-replace-image","yne-save-content","yne-selection-change","yne-show-words","yne-image-ocr","yne-scroll-in-content-loading"],n,t),g.bubble({find:"yne-find"},n,t),n.on("ytable-key-esc",function(){t.isFullScreen()&&t.trigger("yne-exit-full-screen")})):_.warn("no controller!")},t.prototype.initialize=function(t){this.editorProps=I.extend({},t),this.parentEl=this.editorProps.parentEl,$(this.parentEl).html(""),I.bindAll(this,"_onWinResize"),this.note=l.createBlank(!0),this.noteView=new x({editor:this,inlineStyleViewMapper:S,note:this.note}),this.linkView=new b({editor:this}),this.imgTitleInput=new v({editor:this}),this.controller=new A({editor:this,imgTitleInput:this.imgTitleInput,note:this.note,noteView:this.noteView}),this._initToolbar(),this._initContextMenu(),this._bindEventsForDoc(),this._bindEventsForThis(),this._initZoomHint(),this._initAttendeesHint(),e.prototype.initialize.call(this,t),this.colorpicker=new m({editor:this}),$(this.parentEl).append(this.colorpicker.$el),g.bubble(["color-picker-show"],this,this.colorpicker),this.$statsIFrame=$('<iframe id="iframe_stats" style="display:none"></iframe>'),this.$statsIFrame.appendTo("html")},t.prototype.updateContainerBackground=function(e){var t=this.noteView.$el.parent(),o=t.css("background-image");return!(this.currentBackground===e&&o.indexOf(e)>0)&&(e&&e!==n.DEFAULT_BACKGROUND?(t.css("background-image",'url("'+e+'")'),this.currentBackground=e):(t.css("background-image",""),this.currentBackground=n.DEFAULT_BACKGROUND),!0)},t.prototype.makeReadOnly=function(t){e.prototype.makeReadOnly.call(this,t),this.updateNoteViewWrapperSize()},t.prototype.updateContentSetProgress=function(t){e.prototype.updateContentSetProgress.call(this,t),I.isNumber(t.percent)&&t.percent>=1&&(this.isCollabEnabled()||this.trigger("yne-content-set",this.note.getNoteId(),this.note.getAllResourceInfo(null,[a.IMAGE])),this.focusEditor())},t.prototype._bindEventsForDoc=function(){var e,t,n=this;$(window).on("resize",n._onWinResize),$(document.body).on("contextmenu",function(e){e.preventDefault()}).on("keydown",function(e){n.isFullScreen()&&e&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&p.isMatch("esc",e.keyCode)&&n.trigger("yne-exit-full-screen")}),t=window.devicePixelRatio,e=function(){var o=!1;t!==window.devicePixelRatio&&(o=!0,t=window.devicePixelRatio),o&&n._onWinResize(),setTimeout(e,500)},setTimeout(e,500)},t.prototype._bindEventsForThis=function(){var e=this;e.on("yne-exit-full-screen",function(){e.exitFullScreen()})},t.prototype._clearScrollTimeout=function(){this.scrollTimeout&&(window.clearTimeout(this.scrollTimeout),this.scrollTimeout=null)},t.prototype._firstNotEmptyTextBlockIndex=function(){var e,t,n=this.note.blocks,o=n.length,i=-1;for(e=0;e<o;e++)if(t=n[e],a.isTextOrTableBlock(t)&&!t.isEmptyContent()){i=e;break}return i},t.prototype._getEditArea=function(){return $(this.noteViewFrame)},t.prototype._getPresenter=function(){var e=this;return e.presenter||($('<div id="presenter"></div>').appendTo("html"),e.presenter=new w({el:"#presenter"}),e.presenter.on("exit",function(){e.trigger("yne-exit-presentation")}),e.presenter.on("open-link",function(t){e.trigger("yne-open-link",t)}),e.presenter.on("open-attachment",function(t,n){e.trigger("yne-open-attachment",t,n)})),e.presenter},t.prototype._getZoomHintDiv=function(){return this.$zoomHintDiv||(this.$zoomHintDiv=$("#ycm-zoomHint")),this.$zoomHintDiv},t.prototype._initZoomHint=function(){$('<div id="ycm-zoomHint" class="yne-zoom-hint">100%</div>').appendTo(document.body)},t.prototype._initAttendeesHint=function(){var e=this,t=d.render("pc","float-modifiers",{});e.$attendeesHintDiv=$(t),e.$attendeesHintDiv.appendTo(document.body),e.attendeeHintDivDefaultStyle={},e.attendeeHintDivDefaultStyle.top=e.$attendeesHintDiv.css("top"),e.attendeeHintDivDefaultStyle.right=e.$attendeesHintDiv.css("right"),e.$attendeesHintDiv.find("#attendee-hint").on("click",function(){e._toggleAttendees()}),e.$attendeesHintDiv.mouseleave(function(){e.attendeeListCloser=window.setTimeout(function(){e._toggleAttendees(!1),e.isZoomHintShown=!1},2e3)}),e.$attendeesHintDiv.mouseenter(function(){window.clearTimeout(e.attendeeListCloser)}),e.toolbar.on("tab-toggled",function(t){t?e.$attendeesHintDiv.css("visibility","visible"):e.$attendeesHintDiv.css("visibility","hidden")})},t.prototype._initToolbar=function(){var e=this;e.toolbar=new C({editor:e,parentEl:e.parentEl}),e.toolbar.on("resize",function(){e._onWinResize()})},t.prototype._initContextMenu=function(){var e,t=this,n=[];t.contextMenu||(e=t.contextMenu=new o({editor:t}),I.each(k,function(e){var t=e();I.isArray(t)?n=n.concat(t):n.push(t)}),e.addItems(n),t.on("contextmenu",function(n){var o=i(t,n);e.onContextMenu(n,o)}))},t.prototype._onWinResize=function(){_.log("_onWinResize"),this.updateNoteViewWrapperSize(),this.noteView&&this.noteView.trigger("resize")},t.prototype._setContent=function(e,t,n,o,i){var r=this,a=!0===o.isAsync,s=function(e){e.isAsync=a,r.updateContentSetProgress(e),e.percent>=1&&(r.isDataFixed()&&r.trigger("yne-content-change"),r.makeReadOnly(!!r.noteProps.isReadOnly),null!=i&&i({resultCode:1}))};r.reset(),r.contentLoading=!0,r.updateContentSetProgress({percent:0,message:"加载中",isAsync:a}),r.noteProps=null==o?r.options||{}:o,r.resMap=n||{},r.note.setExtraInfo({pcResMap:r.resMap,pcTodoMap:r.noteProps.todoContents}),r.controller.setOptions({note:r.note}),r.noteView.setOptions({disableOCR:r.noteProps.disableOCR,isNoteSet:!0,note:r.note,pageType:r.editorProps.pageType}),r.setViewMode(r.editorProps.viewMode,!0,!1),r.setReadOnly(r.noteProps.isReadOnly),r.setCopyProhibited(r.noteProps.isCopyProhibited),r.setDragProhibited(r.noteProps.isDragProhibited),r.setBackground(r.noteProps.bgImageId),r.useDefaultFontAsEditingStyle(),r.noteProps.isReadOnly||!r.isLegacyHost()&&!r.isCollabEnabled()||r.makeReadOnly(!0),r.noteView.render(),r.updateContentSetProgress({percent:.05,isAsync:a}),e?l.fromXml(t,r.note,null,{isAsync:a,progressCallBack:s}):o.isOCR?(l.fromOCR(t,r.note,{type:o.ocrType,parseParagraph:o.ocrParseParagraph,parseIndent:o.ocrParseIndent}),s({percent:1})):null==l.fromHtml(t,r.note,null,{progressCallBack:s,isAsync:a})&&(l.createBlank(!0,r.note),s({percent:1})),r.notSetContent=!1},t.prototype._setScrollPercent=function(e){var t,n,o=this.noteViewWrapper;this.scrolledWhenLoading||this.contentChanged||(e=e||0,n=o.scrollHeight,t=Math.round(e*n),$(o).scrollTop(t))},t.prototype._showZoomHint=function(e){var t=this;t.isZoomHintShown?t.zoomHintCloser&&window.clearTimeout(t.zoomHintCloser):(t._getZoomHintDiv().show("slow"),t.isZoomHintShown=!0),t.zoomHintCloser=window.setTimeout(function(){t._getZoomHintDiv().hide("slow"),t.isZoomHintShown=!1},2e3),t._getZoomHintDiv().text(e)},t.prototype._toggleAttendees=function(e){var t;void 0===e&&(e=!0),t=this.$attendeesHintDiv.find("#attendee-list"),!0===e?t.css("display","inline-block"):!1===e?t.css("display","none"):t.slideToggle(10,function(){t.is(":visible")&&t.css("display","inline-block")})},t.prototype._zoomInEditor=function(){var e,t=this._getEditArea();if(e=Number(t.css("zoom")),I.isNumber(e)){if(e>=3)return}else e=1;(e+=.25)>3&&(e=3),this.zoomEditor(e,!0)},t.prototype._zoomOutEditor=function(){var e,t=this._getEditArea();e=Number(t.css("zoom")),!I.isNumber(e)||e<=1||((e-=.25)<1&&(e=1),this.zoomEditor(e,!0))},t}(r)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(21),n(1),n(13)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.filterItems=function(e){var o=!1,i=[];return n.each(e,function(e){var a=e;switch(e&&e.simplify&&(a=e.simplify()),a.type){case r.TYPE.SPLIT:o||(o=!0,i.push(a));break;case r.TYPE.SUBMENU:a.isHidden||(o=!1,a=n.extend({},a,{items:t.filterItems(a.items)}),i.push(a));break;default:a.isHidden||(o=!1,i.push(a))}}),i},t.prototype.addItems=function(e){this.items=this.items.concat(e),n.each(e,this.prepareItem.bind(this))},t.prototype.onContextMenu=function(e,o){var i,r=this,a={left:e.pageX,top:e.pageY};r.resetAll(),n.invoke(r.items,"checkStatus",e,o||{}),i=t.filterItems(r.items),r.editor.trigger("yne-context-menu",a,i,function(e){r.select(e),r.resetAll()})},t.prototype.prepareItem=function(e){var t=e.keyHandlerName;e.index=this.indexArray.length,e.editor=this.editor,t&&!this.editor.getController().hasKeyHandler(t)&&i.error("The keyHandlerName ["+t+"] of ContextMenuItem ["+e.name+"] does not exist!"),this.indexArray.push(e),e.type===r.TYPE.SUBMENU&&n.each(e.items,this.prepareItem.bind(this))},t.prototype.resetAll=function(){var e;n.map(this.items,function(t){if((e=t.reset)&&n.isFunction(e))return e.apply(t)})},t.prototype.select=function(e){var t=this.indexArray[e];if(t&&!t.items&&t.select)return t.select()},t.prototype.initialize=function(e){this.editor=e.editor,this.items=[],this.indexArray=[]},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(3),o=n(0),i=n(45),r=n(6),a=n(22),s=n(60),l={imageBlock:function(e,n,o){var i,r=e.getNoteRange();r&&r.isInSingleBlock()&&(i=r.getStartBlockRange().block,t.isImage(i)&&(o.imgBlock=i,o.isImgAttachBlock=!0))},attachmentBlock:function(e,n,o){var i,r=e.getNoteRange();r&&r.isInSingleBlock()&&(i=r.getStartBlockRange().block,t.isAttachment(i)&&(o.attachmentBlock=i,o.isImgAttachBlock=!0))},codeBlock:function(e,n,o){var i,r=e.getNoteRange();r&&r.isInSingleBlock()&&(i=r.getStartBlockRange().block,t.isCode(i)&&(o.codeBlock=i,o.isCodeBlock=!0))},tableBlock:function(e,n,i){var r,a,l,c,u=e.getNoteRange();if(u&&u.isInSingleBlock()&&(c=(a=u.getStartBlockRange()).block,t.isTable(c))){if(!(l=a.getAsRectRange()))return;r={},l.onlyMergePointAndCell()&&(r.onlyMergePointAndCell=!0),l.isOnlyImgCell()&&o.extend(r,{cell:l.getFirstCell().cell,type:s.IMAGE}),l.isOnlyAttachCell()&&o.extend(r,{cell:l.getFirstCell().cell,type:s.ATTACHMENT}),i.tableInfo=r}},hrefInfo:function(e,t,n){var o,s,l,c,u,d,p,h,f=t.target;r(f).is(".block-view a *")&&(o=function(e,t){if(e&&e.parentNode)for(var n=e.parentNode;n;){if(n.webkitMatchesSelector&&n.webkitMatchesSelector(t))return n;n=n.parentNode}}(f,"a"))&&((s=document.createRange()).selectNodeContents(o),l=a.fromNativeRange(s,e.noteView),s.detach(),l&&l.isInSingleBlock()&&((u=(c=l.getStartBlockRange()).block)&&u.getCommonInlineStyle&&(d=u.getCommonInlineStyle("href",c)),d&&((p=function(e,t){return e=r.trim(e||""),t=r.trim(t||""),!(!e||!t)&&(e===t||i.startsWith(t,e)||i.endsWith(t,e)||i.startsWith(e,t)||i.endsWith(e,t))}(d,c.getDataAsPlain()))&&(h=u.getCommonInlineStyles(c)),n.hrefInfo={noteRange:l,href:d,hrefAsLinkText:p,commonStyles:h})))},isRangeCollapsed:function(e,t,n){var o=e.getNoteRange();o&&(n.isRangeCollapsed=o.isCollapsed())}};return function(e){var t={};return o.each(l,function(n){n(e,event,t)}),t}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(21),n(1),n(41)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e,n,o){if(n&&e)return new t({filter:o,note:n,noteRange:e});i.error("Failed to create NoteRangeWalker, unvalid parameters",e,n,o)},t.prototype.current=function(){return this.walkerProps.blockRanges[this.walkerProps.blockRangeIndex]},t.prototype.first=function(){return this.walkerProps.blockRangeIndex=0,this._getAtIndex(this.walkerProps.blockRangeIndex)},t.prototype.last=function(){if(this._getAtIndex(this.walkerProps.endIndex),this.walkerProps.blockRangeIndex=this.walkerProps.blockRanges.length-1,-1!==this.walkerProps.blockRangeIndex)return this.walkerProps.blockRanges[this.walkerProps.blockRangeIndex]},t.prototype.next=function(){return this.walkerProps.blockRangeIndex++,this._getAtIndex(this.walkerProps.blockRangeIndex)},t.prototype.previous=function(){return this.walkerProps.blockRangeIndex--,this._getAtIndex(this.walkerProps.blockRangeIndex)},t.prototype.reset=function(){this.walkerProps.blockRangeIndex=-1},t.prototype.initialize=function(e){var t,o;e=n.defaults(e||{},{filter:function(){return!0},note:null,noteRange:null}),this.walkerProps=e,t=this.walkerProps.note=e.note,o=this.walkerProps.noteRange=e.noteRange,this.walkerProps.filter=e.filter,this.walkerProps.startRange=o.getStartBlockRange(),this.walkerProps.endRange=o.getEndBlockRange(),this.walkerProps.startIndex=t.getBlockIndex(this.walkerProps.startRange.block),this.walkerProps.endIndex=t.getBlockIndex(this.walkerProps.endRange.block),this.walkerProps.blockIndex=this.walkerProps.startIndex-1,this.walkerProps.blockRanges=[],this.walkerProps.blockRangeIndex=-1},t.prototype._getAtIndex=function(e){var t,n,o,i;if(o=this.walkerProps.blockRanges[e])return o.clone(!0);if(!this._hasWalked()){for(i=this.walkerProps.blockIndex+1;i<=this.walkerProps.endIndex&&(this.walkerProps.blockIndex=i,this.walkerProps.startIndex!==this.walkerProps.endIndex?i===this.walkerProps.startIndex?(t=this.walkerProps.startRange.clone(!0)).extendToBlockEnd():i===this.walkerProps.endIndex?(t=this.walkerProps.endRange.clone(!0)).extendToBlockStart():(n=this.walkerProps.note.getBlockAt(i),t=r.createRangeByBlock({allContent:!0,block:n})):t=this.walkerProps.startRange.clone(!0),!(!0===this.walkerProps.filter(t)&&(this.walkerProps.blockRanges.push(t),o=this.walkerProps.blockRanges[e])));i++);return o}},t.prototype._hasWalked=function(){return this.walkerProps.blockIndex>=this.walkerProps.endIndex},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(83),n(260),n(21),n(1)],void 0===(i=function(e,t,n,o,i,r,a){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){if(!(!e||!e.table||null==e.left||null==e.top||!e.width||!e.height||e.left<0||e.top<0||e.width<1||e.height<1))return new t(e);a.error("Failed to create RectRange",e)},t.prototype.clone=function(){var e=this.getRect();return t.create(e)},t.prototype.equals=function(e){var t=e.getRect();return this.props.table===e.getTable()&&this.props.height===t.height&&this.props.left===t.left&&this.props.top===t.top&&this.props.width===t.width},t.prototype.forEach=function(e,t){var n=this;n.forEachRow(function(o){return n.forEachColumn(function(t){return e(o,t)},t)},t)},t.prototype.forEachCell=function(e,t){var n=this,o={};n.forEach(function(t,i){var r,a=n.props.table.getCell(t,i,{findMergePointIfNeeded:!0,withPosition:!0});if(a&&(r=a.row+"-"+a.col,!0!==o[r]))return o[r]=!0,e(a.cell,a.row,a.col)},t)},t.prototype.forEachRow=function(e,t){var n;for(n=0;n<this.props.height;n++)if(!1===e(t?this.props.top+this.props.height-n:this.props.top+n))return!1},t.prototype.forEachColumn=function(e,t){var n;for(n=0;n<this.props.width;n++)if(!1===e(t?this.props.left+this.props.width-n:this.props.left+n))return!1},t.prototype.getDataAsHtml=function(){return this._getAsNewTable().toHtml()},t.prototype.getDataAsJSON=function(e){return this._getAsNewTable().toJSON(e)},t.prototype.getDataAsPlain=function(){return this._getAsNewTable().toPlain({returnString:!0})},t.prototype.getFirstCell=function(){return this.props.table.getCell(this.props.top,this.props.left,{findMergePointIfNeeded:!0,withPosition:!0})},t.prototype.getFirstCellRect=function(){return{col:this.props.left,row:this.props.top}},t.prototype.getLastCell=function(){return this.props.table.getCell(this.props.top+this.props.height-1,this.props.left+this.props.width-1,{findMergePointIfNeeded:!0,withPosition:!0})},t.prototype.getRect=function(){var e={};return e.height=this.props.height,e.left=this.props.left,e.top=this.props.top,e.width=this.props.width,e},t.prototype.getTable=function(){return this.props.table},t.prototype.isMerge=function(){},t.prototype.isOnlyAttachCell=function(){var e,t;return!(!(e=this.props.table.getCell(this.props.top,this.props.left))||!e.isAttachmentCell())&&(e.isMergePoint()?(t=e.getMergePointAttr()).width===this.props.width&&t.height===this.props.height:1===this.props.width&&1===this.props.height)},t.prototype.isOnlyImgCell=function(){var e,t;return!(!(e=this.props.table.getCell(this.props.top,this.props.left))||!e.isImageCell())&&(e.isMergePoint()?(t=e.getMergePointAttr()).width===this.props.width&&t.height===this.props.height:1===this.props.width&&1===this.props.height)},t.prototype.onlyOneCell=function(){return 1===this.props.width&&1===this.props.height},t.prototype.overlaps=function(){},t.prototype.onlyMergePointAndCell=function(){var e,t;return!!(e=this.props.table.getCell(this.props.top,this.props.left)).isMergePoint()&&(t=e.getMergePointAttr(),this.props.width===t.width&&this.props.height===t.height)},t.prototype.toJSON=function(){return this.getRect()},t.prototype.toString=function(){var e={};return e.height=this.props.height,e.left=this.props.left,e.top=this.props.top,e.width=this.props.width,"RectRange("+n.map(e,function(e,t){return t+":"+e}).join(",")+")"},t.prototype.initialize=function(e){e=e||{},this.props=this.props||{},this.props.table=e.table,this._setRect(e),this._checkBoundary(),this._fixMerge()},t.prototype._checkBoundary=function(){var e=this.props.table,t=e.getColumnCount(),n=e.getRowCount();this.props.left<0?this.props.left=0:this.props.left>=t&&(this.props.left=t-1),this.props.top<0?this.props.top=0:this.props.top>=n&&(this.props.top=n-1),this.props.width<1&&(this.props.width=1),this.props.left+this.props.width>t&&(this.props.width=t-this.props.left),this.props.height<1&&(this.props.height=1),this.props.top+this.props.height>n&&(this.props.height=n-this.props.top)},t.prototype._fixMerge=function(){this._walkToFixMergeCells({})},t.prototype._getAsNewTable=function(){var e,t,n,i,r,a=this.props.table,s=[],l=[],c=[],u=this.props.top;for(u=0;u<this.props.height;u++)for(i=[],s.push(i),t=this.props.top+u,l.push(a.getRowHeight(t)),e=0;e<this.props.width;e++)n=this.props.left+e,0===u&&c.push(a.getColumnWidth(n)),i.push(a.getCell(t,n));return(r=new o({colWidths:c,rowHeights:l,tableCells:s})).setBlockStyles(a.getBlockStyles()),r},t.prototype._markAsWalked=function(e,t){var n,o;for(n=0;n<e.width;n++)for(o=0;o<e.height;o++)t[this._makeMarkKey(e.top+o,e.left+n)]=!0},t.prototype._makeMarkKey=function(e,t){return e+","+t},t.prototype._setRect=function(e){this.props=this.props||{},this.props.height=e.height,this.props.left=e.left,this.props.top=e.top,this.props.width=e.width},t.prototype._shouldExtend=function(e,t,n){var o,r,s,l,c=this.props.table;return(!n||!n[this._makeMarkKey(e,t)])&&((s=c.getCell(e,t,{findMergePointIfNeeded:!0,withPosition:!0}))&&s.cell?(o=(l=s.cell).isMergePoint()?{height:(r=l.getMergePointAttr()).height,left:s.col,top:s.row,width:r.width}:{height:1,left:t,top:e,width:1},this._markAsWalked(o,n),!i.contains(this.props,o)&&i.union(this.props,o)):(a.warn("no table cell at row/col",e,t),!1))},t.prototype._walkToFixMergeCells=function(e){var t=this,n=function(n){var o,i,r=n?t.props.top:t.props.top+t.props.height-1;for(i=0;i<t.props.width;i++)if(o=t._shouldExtend(r,t.props.left+i,e))return o},o=function(n){var o,i,r=n?t.props.left:t.props.left+t.props.width-1;for(i=1;i<t.props.height;i++)if(o=t._shouldExtend(t.props.top+i,r,e))return o},i=n(!0)||n(!1)||o(!0)||o(!1);i&&(t._setRect(i),t._walkToFixMergeCells(e))},t}(r)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};o=[n,r,n(0),n(631),n(128),n(7),n(3),n(41),n(192),n(22),n(129),n(46),n(11),n(142),n(1),n(646)],void 0===(i=function(e,t,n,o,i,r,a,c,u,d,p,h,f,g,y,m){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSessionInitDone=!1,t}return s(t,e),t.prototype.buildCollabProperties=function(){var e={};return null!=this.collabEngine?e=this.collabEngine.buildCollabProperties(null):e.coreEditor=this,e.isCollabEnabled=this.isCollabEnabled(),e},t.prototype.buildCollabSession=function(e,t){var n=this,o=e.collabServer,i=e.userInfo;null!=this.collabEngine&&(this.collabEngine.closeCollabSession(null,null),this.collabEngine=null),this._initCollabEngine(),e.collabServer=o.address,e.useWSS=!!o.useWSS,e.nickname=i.nickname,e.userId=i.userId,e.portraitUrl=i.portraitUrl,this.collabEngine.buildCollabSession(e,function(e){1===e.resultCode&&n.trigger("yne-session-built",e.isCollabStarted),t(e)})},t.prototype.canRemoveFormat=function(){throw new Error("should be overridden.")},t.prototype.closeCollabSession=function(e,t){null!=this.collabEngine&&this.collabEngine.closeCollabSession(e,t),this.collabEngine=null},t.prototype.getCollabId=function(){if(null!=this.collabEngine)return this.collabEngine.getCollabId()},t.prototype.getLastNotOwnExecCmd=function(){if(null!=this.collabEngine)return this.collabEngine.getLastNotOwnExecCmd()},t.prototype.getModifiers=function(e,t){return null!=this.collabEngine?this.collabEngine.getModifiers(e,t):{status:r.ERRORID_COLLAB_ENGINE_NULL}},t.prototype.getCollabContent=function(e,t){var n={status:0,resultCode:0},o=this;return null!=this.collabEngine?(t&&(this.isReadOnly()||this.makeReadOnly(!0),this.noteView.removeNote()),this.isContentLoading()?this.getCollabContentTimer=setTimeout(function(){o.getCollabContent(e,!1)},1e3):(n=this.collabEngine.getCollabContent(e)).status=n.resultCode,n):{status:r.ERRORID_COLLAB_ENGINE_NULL}},t.prototype.hasCachedDataCmd=function(){return null!=this.collabEngine&&this.collabEngine.hasCachedDataCmd()},t.prototype.isLastOwnDataCmdExecuted=function(){if(null!=this.collabEngine)return this.collabEngine.isLastOwnDataCmdExecuted()},t.prototype.isValidLocalDataCmd=function(e){if(null!=this.collabEngine)return this.collabEngine.isValidLocalDataCmd(e)},t.prototype.noteSetNotification=function(){var e=this;null!=this.collabEngine&&this.collabEngine.sendContentSetInfo(this.note.getFileVersion(),function(t){t.result===r.CJSON_INITIALIZE_DONE&&(e.isSessionInitDone=!0),e.trigger("yne-session-initialized",t.result,t)})},t.prototype.pushLocalDataCommand=function(e,t){null!=this.collabEngine&&this.collabEngine.pushLocalDataCommand(e,t)},t.prototype.saveNotification=function(e,t){null!=this.collabEngine&&this.collabEngine.saveNotification(e,t)},t.prototype.sendBlockLockInfo=function(e){null!=this.collabEngine&&this.collabEngine.sendOwnLockInfo(e)},t.prototype.sendCachedDataCommand=function(){null!=this.collabEngine&&this.collabEngine.sendCachedDataCmd(!1)},t.prototype.updateUserInfo=function(e){var t=this.getEditorProps();null!=e&&(n.extend(t.userInfo,e),null!=this.collabEngine&&this.collabEngine.updateSessionInfos(e))},t.prototype.applyCollabCmdRedoUndo=function(e){this.controller.cmdManager.applyCollabCmdRedoUndo(e)},t.prototype.buildNoteRangeFromJSON=function(e){return p.buildNoteRangeFromJSON(e,this)},t.prototype.createDataCommand=function(e,t){return this.controller.createCmd(e,t)},t.prototype.dropRedoCmd=function(){this.controller.cmdManager.dropRedoCmd()},t.prototype.dropUndoCmds=function(e,t,n){this.controller.cmdManager.dropUndoCmds(e,t,n)},t.prototype.getClientId=function(){return this.clientId},t.prototype.getDefaultNoteRange=function(){return this.controller.defaultNoteRange()},t.prototype.getInnerBlocksWithEdge=function(e){var t,n,o;return e&&u.isHeaderFooterRange(e.getStartBlockRange())?[e.getStartBlockRange().block]:(d.isNoteRange(e)&&(t=e.getStartBlockRange().block,n=e.getEndBlockRange().block,o=this.note.getInterBlocks(t,n,!0)),o)},t.prototype.getNextBlockById=function(e){var t=null,n=this.getBlockById(e);return n&&(t=this.note.getNextBlock(n)),t},t.prototype.getNoteVersion=function(){return this.note?this.note.getFileVersion():null},t.prototype.getPreBlockById=function(e){var t=null,n=this.getBlockById(e);return n&&(t=this.note.getPreBlock(n)),t},t.prototype.isListItem=function(e){return a.isListItem(e)},t.prototype.isNoteValidForCollab=function(){return this.controller.note.isValidForCollab()},t.prototype.isReadyForEdit=function(){return!0===this.isSessionInitDone},t.prototype.isContentLoading=function(){return!0===this.contentLoading},t.prototype.isTable=function(e){return a.isTable(e)},t.prototype.isTodo=function(e){return a.isTodo(e)},t.prototype.reset=function(){null!=this.getCollabContentTimer&&clearTimeout(this.getCollabContentTimer),e.prototype.reset.call(this)},t.prototype.setNoteVersion=function(e){y.log("SetNoteVersion:"+e),this.note.setFileVersion(e),this.trigger("yne-note-version-change",e)},t.prototype.buildBlockRangeFromJSON=function(e){var t,n;if(e&&e.blockId){if(t=e.blockId,n=this.getBlockById(t))return e.rangeType===a.CODE?c.createRangeByBlock(l({block:n},e)):c.createRangeByBlock({block:n,end:e.endPosition,rect:e.simpleValue1,start:e.startPosition,type:e.simpleValue2});y.log("block is NOT existing:",e)}else y.error("The blockRangeJSON.blockId is not valid!")},t.prototype.buildInnerCommandFromJSON=function(e,t){var o=e[r.CJSON_ACTION],i={};return i.collabProperties=n.clone(t.collabProperties),i.collabProperties.cmdJSON=e,this.createDataCommand(o,i)},t.prototype.getBlockById=function(e){return this.note.getBlockById(e)},t.prototype.getEditorProps=function(){return this.editorProps},t.prototype.getNoteProps=function(){return this.noteProps},t.prototype.getNote=function(){return this.note},t.prototype.isCollabEnabled=function(){return!(null==this.noteProps||!this.noteProps.isCollabEnabled)},t.prototype.isIdleTimeout=function(){return this.idleTimeout},t.prototype.isMyOwnLockedBlock=function(e){var t,n=!1,o=this._getMyOwnBlockId();return null!=e&&null!=o&&""!==o&&(d.isNoteRange(e)&&e.isInSingleBlock()?t=e.getStartBlockRange().getBlockId():c.isBlockRange(e)&&(t=e.getBlockId()),t&&t===o&&!this.isTable(this.getBlockById(t))&&(n=!0)),n},t.prototype.render=function(){e.prototype.render.call(this),this.isCollabEnabled()||this.updateNoteViewVisibility(!0)},t.prototype.setIdleTimeout=function(e){e&&(this.noteView.render(),this.setReadOnly(!0)),this.idleTimeout=e},t.prototype.updateEditorOptions=function(e){if(this.options||(this.options=e?n.clone(e):{}),e)for(var t in e)e.hasOwnProperty(t)&&("shareKey"===t&&this.options[t]!==e[t]&&(this.idleTimeout=!1),this.options[t]=e[t]);this.options.isCollabEnabled=g.parseToBoolean(this.options.isCollabEnabled,!0),this.options.isCollabEnabled||(this.idleTimeout=!1),this.options.hideAttendeeHint=g.parseToBoolean(this.options.hideAttendeeHint,!1),this.options.disableBackground=g.parseToBoolean(this.options.disableBackground,!1),this.options.useWSS=g.parseToBoolean(this.options.useWSS,!1),this.options.pageType=g.parseToPageType(this.options.pageType),this.options.sessionId||(this.options.sessionId=this.clientId),this.options.readOnly=g.parseToBoolean(this.options.readOnly,!1),this.options.hasOriginFile=g.parseToBoolean(this.options.hasOriginFile,!1),n.extend(this.editorProps,this.options)},t.prototype.notifyErrorToHost=function(e){this.trigger("yne-useraction-failed",e)},t.prototype.onDocSelectionChange=function(){y.log("onDocSelectionChange")},t.prototype.recoverFromIdleTimeout=function(){var e;this.idleTimeout&&this.isCollabEnabled()&&(e={code:0,customCode:8e3,shareKey:this.getCollabId()},this.trigger("yne-session-closed",e))},t.prototype.testSendMsgToCollabServer=function(e){null!=this.collabEngine&&this.collabEngine.sendMessageToCollabServer(e)},t.prototype.bindEventsForController=function(){var e=this,t=this.controller;t.on("command-exec",function(t,n){t&&t.name?e.isCollabEnabled()?((n=n||{}).collabProperties=n.collabProperties||{},n.collabProperties.finalNoteVersion&&e.setNoteVersion(n.collabProperties.finalNoteVersion),t&&t.effected&&(!n.collabProperties.isCollabCmd||n.collabProperties.isCollabCmd&&n.collabProperties.isOwnCmd&&!n.collabProperties.isLocalExecutedCmd)&&(e.contentChanged=!0,e.trigger("yne-content-change"))):t&&t.effected?(e.contentChanged=!0,e.trigger("yne-content-change")):y.warn("The command has no effected",t):y.error("The command is not valid",t)}),h.bubble(["redo-stack-change","undo-stack-change","selectstart","mouse-down","command-exec","esc","yne-clipboard-status","yne-clipboard-error","yne-get-clipboard","yne-clipboard-set","color-picker-show","yne-user-action-collection","cell-edit-view-enter","cell-edit-view-exit","cell-edit-view-history-change"],t,this)},t.prototype._getMyOwnBlockId=function(){var e=this.collabEngine.getMyOwnBlockIds();return null!=e&&e.length>0?e[0]:null},t.prototype._initCollabEngine=function(){var e=this;e.idleTimeout=!1,e.isSessionInitDone=!1,e.collabEngine=new o.default(e,n,y),e.collabEngine.on(i.default.WS_CLOSED,function(t){8e3===t.customCode&&f.IS_PC?e.setIdleTimeout(!0):e.trigger("yne-session-closed",t)}),e.collabEngine.on(i.default.DATACMD_FAILURE,function(t){e.trigger("yne-useraction-failed",t.message)}),e.collabEngine.on(i.default.DATACMD_SUCCESS,function(t){e.trigger("yne-datacommand-success",t.rawCollabJSON)}),e.collabEngine.on(i.default.LOCK_LOCKED,function(t){var n,o=t.sessionProps;null!=o&&null!=o.lockedBlkIds&&o.lockedBlkIds.length>0&&(n=o.lockedBlkIds[0],e._lockBlock(n,o))}),e.collabEngine.on(i.default.LOCK_RELEASED,function(t){e._unlockBlock(t.unlockedBlockId)}),e.collabEngine.on(i.default.SESSION_CHNAGED,function(t){null!=t&&t.length>0&&n.each(t,function(t){t.propUpdated&&null!=t.nickname&&null!=t.lockedBlkIds&&t.lockedBlkIds.length>0&&t.sessionId!==e.clientId&&(t.lockUpdated=!0,e._lockBlock(t.lockedBlkIds[0],t))}),e.trigger("yne-collabsession-change",t)})},t.prototype._lockBlock=function(e,t){var n=this.note,o=this.getBlockById(e);null==o||this.isTable(o)||n.lockBlock(e,t)},t.prototype._unlockBlock=function(e){this.note.unlockBlock(e)},t}(m)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(632),n(633),n(634),n(635),n(636),n(637),n(638),n(141),n(639),n(85),n(640),n(641),n(642),n(72),n(128)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m){Object.defineProperty(t,"__esModule",{value:!0});var v=function(){},b=function(e){function t(t,s,u){var d=e.call(this)||this;if(d.localCmdPerSec=0,null==s)throw new Error("Missing underscorejs");if(null==u)throw new Error("Missing logger instance");return p.ExternalLibs.setUnderscore(s),p.ExternalLibs.setLogger(u),d.isLocalCmdTooFast=!1,d.coreEditor=t,d.clientId=d.coreEditor.getClientId(),d.keyTranslator=new a.CollabKeyTranslator,d.collabPropsHandler=new o.CmdCollabPropsHandler(d.clientId,d.keyTranslator,d.coreEditor),d.wsClient=new g.WebSocketClient(d.collabPropsHandler),d.cmdMergeHandler=new i.CmdMergeHandler,d.nondataCmdHandler=new h.NonDataCmdHandler(d.wsClient),d.sessionHandler=new l.CollabSessionHandler(d.clientId,d.nondataCmdHandler),d.blockLockHandler=new n.BlockLockHandler(d.clientId,d.sessionHandler,d.nondataCmdHandler),d.conflictHandler=new r.CollabConfilctHandler(d.coreEditor,d.blockLockHandler),d.redoundoHandler=new f.RedoUndoHandler(d.coreEditor),d.dataCmdHandler=new c.DataCmdHandler(d.coreEditor,d.blockLockHandler,d.conflictHandler,d.redoundoHandler,d.cmdMergeHandler,d.keyTranslator,d.wsClient),d._createEventEmitter(),d}return s(t,e),t.prototype.buildCollabProperties=function(e){return this.collabPropsHandler.buildCollabProperties(e)},t.prototype.buildCollabSession=function(e,t){var n,o,i=this,r={resultCode:u.CustomResultCode.NO_ERROR};e.sessionId=this.clientId,t=t||v,null!=this.callbackBuildCollabSession&&(r.resultCode=u.CustomResultCode.STOP_CALL,r.message="StopPreviousCall",this.callbackBuildCollabSession(r)),this.callbackBuildCollabSession=function(e){clearTimeout(i.timeoutBuildCollabSession),i.wsClient.off(m.default.SESSION_INIT_BUILT,n),i.wsClient.off(m.default.WS_CLOSED,o),t(e)};try{o=function(e){p.loggerInst.log("WS_CLOSED Callback in buildCollabSession"),i.callbackBuildCollabSession(e)},this.wsClient.once(m.default.WS_CLOSED,o),n=function(e){p.loggerInst.log("SESSION_INIT_BUILT Callback in buildCollabSession"),i.callbackBuildCollabSession(e)},this.nondataCmdHandler.once(m.default.SESSION_INIT_BUILT,n),this.wsClient.connect(e),this.timeoutBuildCollabSession=setTimeout(function(){var e={resultCode:u.CustomResultCode.TIME_OUT,message:"TimeOut"};i.callbackBuildCollabSession(e)},5e3)}catch(e){r.resultCode=u.CustomResultCode.EXCEPTION,r.message=e.message||e,this.callbackBuildCollabSession(r)}},t.prototype.closeCollabSession=function(e,t,n){var o={resultCode:u.CustomResultCode.NO_ERROR};n=n||v;try{this.wsClient.close(e,t),this.blockLockHandler.destroy(),this.blockLockHandler=null,this.collabPropsHandler.destroy(),this.collabPropsHandler=null,this.conflictHandler.destroy(),this.conflictHandler=null,this.cmdMergeHandler.destroy(),this.cmdMergeHandler=null,this.dataCmdHandler.destroy(),this.dataCmdHandler=null,this.nondataCmdHandler.destroy(),this.nondataCmdHandler=null,this.redoundoHandler.destroy(),this.redoundoHandler=null,this.sessionHandler.destroy(),this.sessionHandler=null}catch(e){o.resultCode=u.CustomResultCode.EXCEPTION,o.message=e.message||e}n(o)},t.prototype.isLastOwnDataCmdExecuted=function(){return this.dataCmdHandler.isLastOwnCmdExecuted()},t.prototype.sendContentSetInfo=function(e,t){var n=this,o={collabId:this.wsClient.getCollabId(),isReadOnly:this.wsClient.isReadOnlySession(),nickname:this.wsClient.getNickname(),result:d.ConstValueInJSON.SESSION_INIT_DONE,resultCode:u.CustomResultCode.NO_ERROR,sessionId:this.wsClient.getSessionId(),userId:this.wsClient.getUserId()},i={};t=t||v,null!=this.callbackSendContentSetInfo&&(o.resultCode=u.CustomResultCode.STOP_CALL,o.message="StopPreviousCall",this.callbackSendContentSetInfo(o)),this.callbackSendContentSetInfo=function(e){clearTimeout(n.timeoutSendContentSetInfo),n.nondataCmdHandler.off(m.default.SESSION_INIT_DONE,n.callbackSendContentSetInfo),t(e)},this.coreEditor.isNoteValidForCollab()?(i.noteVersion=e,this.nondataCmdHandler.once(m.default.SESSION_INIT_DONE,this.callbackSendContentSetInfo),this.nondataCmdHandler.sendCollabNonDataCommand(u.CmdNames.NONDATACMD_CLINTPONG,i),this.timeoutSendContentSetInfo=setTimeout(function(){o.resultCode=u.CustomResultCode.TIME_OUT,null!=n.callbackSendContentSetInfo&&n.callbackSendContentSetInfo(o)},5e3)):(o.result=d.ConstValueInJSON.SESSION_INIT_INVALID,this.callbackSendContentSetInfo(o))},t.prototype.getCollabContent=function(e){var t=this,n={resultCode:0},o=function(n){n.resultCode===u.CustomResultCode.NO_ERROR&&(n.version=t.coreEditor.getNoteVersion(),n.content=t.coreEditor.getXmlContent(),n.sessionCount=t.sessionHandler.getSessionCount()),null!=t.callbackGetCollabContent&&t.dataCmdHandler.off(m.default.DATACMD_NO_PENDING,t.callbackGetCollabContent),t.callbackGetCollabContent=null,clearTimeout(t.timeoutGetCollabContent),e(n)};return e=e||v,this.coreEditor.isContentLoading()?(n.resultCode=0,o(n)):this.dataCmdHandler.hasPendingCmds()?this.wsClient.isOpened()?(n.resultCode=0,null==this.callbackGetCollabContent&&(this.callbackGetCollabContent=function(e){null==e&&(e={resultCode:u.CustomResultCode.NO_ERROR}),o(e)},this.dataCmdHandler.once(m.default.DATACMD_NO_PENDING,this.callbackGetCollabContent),this.timeoutGetCollabContent=setTimeout(function(){n.resultCode=u.CustomResultCode.TIME_OUT,n.message="TimeOut",null!=t.callbackGetCollabContent&&t.callbackGetCollabContent(n)},6e4))):(n.resultCode=u.WSCustomCode.COLLAB_SESSION_CLOSED,o(n)):(n.resultCode=u.CustomResultCode.NO_ERROR,o(n)),n},t.prototype.getModifiers=function(e,t){var n=this,o={status:0,resultCode:u.CustomResultCode.NO_ERROR};return t=t||v,null!=this.callbackGetModifiers&&(o.resultCode=u.CustomResultCode.STOP_CALL,o.status=2,o.message="StopPreviousCall",this.callbackGetModifiers(o)),this.callbackGetModifiers=function(e){n.nondataCmdHandler.off(m.default.NONDATACMD_MODIFIERS_RESULT,n.callbackGetModifiers),n.callbackGetModifiers=null,clearTimeout(n.timeoutGetModifiers),t(e)},0!==(o=this.nondataCmdHandler.getModifiers(e)).status?(t(o),o):(this.nondataCmdHandler.once(m.default.NONDATACMD_MODIFIERS_RESULT,this.callbackGetModifiers),this.timeoutGetModifiers=setTimeout(function(){null!=n.callbackGetModifiers&&(o.resultCode=u.CustomResultCode.TIME_OUT,o.status=2,o.message="TimeOut",n.callbackGetModifiers(o))},5e3),o)},t.prototype.saveNotification=function(e,t){var n={};n.noteVersion=e,n.isHistorySave=!!t,this.nondataCmdHandler.sendCollabNonDataCommand(u.CmdNames.NONDATACMD_NOTESAVE,n)},t.prototype.getLastNotOwnExecCmd=function(){return this.dataCmdHandler.getLastNotOwnExecCmd()},t.prototype.getMyOwnBlockIds=function(){return this.blockLockHandler.getOwnBlockIds()},t.prototype.sendOwnLockInfo=function(e){var t={};t.lockedBlockId=e,t.sessionId=this.clientId,this.nondataCmdHandler.sendCollabNonDataCommand(u.CmdNames.NONDATACMD_COLLABINFO,t)},t.prototype.sendCachedDataCmd=function(e){this.dataCmdHandler.sendCachedDataCommand(e)},t.prototype.hasCachedDataCmd=function(){return this.dataCmdHandler.hasPendingCmds()},t.prototype.pushLocalDataCommand=function(e,n){var o=u.CustomResultCode.NO_ERROR;return(o=this.dataCmdHandler.pushLocalDataCommand(e,n))===u.CustomResultCode.NO_ERROR&&1===this.dataCmdHandler.getCachedCmdCount()&&(this._checkCommandSendDelay(),this._updateCmdSpeed(!0)),o===u.CustomResultCode.NO_ERROR&&e.isLocalExecutedCmd&&(this.localCmdPerSec++,this.localCmdPerSec>t.LACAL_CMD_SPEED_LIMITATION&&(this.isLocalCmdTooFast=!0)),o},t.prototype.isValidLocalDataCmd=function(e){var t=!0,n={closeSession:!1,resultCode:u.CustomResultCode.NO_ERROR};return t&&(t=this._isLocalCommandTooFast()),t&&!1===e.isReadyToApply&&(n.message="命令不满足执行条件",n.resultCode=u.DataCmdFailureCode.LOCAL_NOT_READY_APPLY,this.emit(m.default.DATACMD_FAILURE,n),t=!1),t&&!this.wsClient.isOpened()&&(n.resultCode=u.WSCustomCode.SESSION_NOT_OPENED,n.message="协同链接已断开",this.emit(m.default.DATACMD_FAILURE,n),t=!1),t&&!this.coreEditor.isNoteValidForCollab()&&(n.resultCode=u.DataCmdFailureCode.LOCAL_INVALID_FOR_COLLAB,n.message="笔记不满足协同条件",this.emit(m.default.DATACMD_FAILURE,n),t=!1),t&&!e&&(n.message="空的本地命令，已被忽略",n.resultCode=u.DataCmdFailureCode.LOCAL_EMPTY_CMD,this.emit(m.default.DATACMD_FAILURE,n),t=!1),!t||e.isCollabRedo||e.isCollabUndo||(t=!this._isLocalCommandConflict(e)),t&&(e.isCollabRedo||e.isCollabUndo)&&!1===(t=this.redoundoHandler.ValidateLocalRedoUndo(e))&&(n.message="目标区域已经被修改，不能撤销或重做",n.resultCode=u.DataCmdFailureCode.LOCAL_DIRTY_BLOCKS,this.emit(m.default.DATACMD_FAILURE,n)),t},t.prototype.updateSessionInfos=function(e){this.nondataCmdHandler.sendCollabNonDataCommand(u.CmdNames.NONDATACMD_COLLABINFO,e)},t.prototype.sendMessageToCollabServer=function(e){this.wsClient.send(e)},t.prototype.getCollabId=function(){return this.wsClient.getCollabId()},t.prototype._sendDataCmdFailedMessage=function(e,t){var n={};n.errToClose=t,n.dataCmdErrorCode=e.toString(),this.nondataCmdHandler.sendCollabNonDataCommand(u.CmdNames.NONDATACMD_DATACMDFAILED,n)},t.prototype._createEventEmitter=function(){var e=this;e.wsClient.on(m.default.WS_CLOSED,function(t){e.emit(m.default.WS_CLOSED,t)}),e.nondataCmdHandler.on(m.default.SESSION_INIT_BUILT,function(t){e.emit(m.default.SESSION_INIT_BUILT,t)}),e.nondataCmdHandler.on(m.default.SESSION_INIT_DONE,function(t){e.emit(m.default.SESSION_INIT_DONE,t)}),e.sessionHandler.on(m.default.SESSION_CHNAGED,function(t){p.underscoreInst.each(t,function(t){if(t.propUpdated){var n=e.blockLockHandler.getLockedBlockIdsBy(t.sessionId);null!=n&&n.length>0&&(t.lockedBlkIds=n)}}),e.emit(m.default.SESSION_CHNAGED,t)}),e.blockLockHandler.on(m.default.LOCK_LOCKED,function(t){var n;t.sessionProps&&t.sessionProps.lockedBlkIds&&t.sessionProps.lockedBlkIds.length>0&&(n=t.sessionProps.lockedBlkIds[0]),null!=n&&(t.sessionId===e.wsClient.getSessionId()?e.sendOwnLockInfo(n):e.emit(m.default.LOCK_LOCKED,t))}),e.blockLockHandler.on(m.default.LOCK_RELEASED,function(t){t.sessionId!==e.wsClient.getSessionId()&&e.emit(m.default.LOCK_RELEASED,t)}),e.dataCmdHandler.on(m.default.DATACMD_FAILURE,function(t){e._sendDataCmdFailedMessage(t.resultCode,t.closeSession),e.emit(m.default.DATACMD_FAILURE,t)}),e.dataCmdHandler.on(m.default.DATACMD_SUCCESS,function(t){e.emit(m.default.DATACMD_SUCCESS,t)})},t.prototype._checkCommandSendDelay=function(){!this.isLocalCmdTooFast&&null!=this.dataCmdHandler&&this.dataCmdHandler.getCmdDelay()>t.MAX_CMD_DELAY_MILLIS?this.wsClient.close(u.WSCustomCode.FAILED_SEND_LOCAL_CMD,"ExceedMaxSendDelay"):null!=this.dataCmdHandler&&this.dataCmdHandler.getCachedCmdCount()>0&&this.wsClient.isOpened()&&window.setTimeout(this._checkCommandSendDelay.bind(this),t.MAX_CMD_DELAY_MILLIS)},t.prototype._isLocalCommandConflict=function(e){var t=!1,n=e.getStartingRange(),o=e.getCollabProps();if(n&&(t=this.conflictHandler.isNoteRangeConflict(n,e.name,o))){var i={closeSession:o.errorToClose,message:o.dataCmdError,resultCode:o.errorCode};this.emit(m.default.DATACMD_FAILURE,i)}return t},t.prototype._isLocalCommandTooFast=function(){var e=!0,t=this.dataCmdHandler.getCachedCmdCount();if(this.isLocalCmdTooFast&&t>0){e=!1;var n={closeSession:!1,message:"命令输入过快，等待执行命令个数："+(t=this.dataCmdHandler.getCachedCmdCount()),resultCode:u.DataCmdFailureCode.LOCAL_CMD_TOO_FAST};this.emit(m.default.DATACMD_FAILURE,n),this.sendCachedDataCmd(!1)}return e},t.prototype._updateCmdSpeed=function(e){var n,o=0;null!=this.dataCmdHandler&&(o=this.dataCmdHandler.getCachedCmdCount()),e&&(this.isLocalCmdTooFast=!1),o>0?((n=o/t.LACAL_CMD_SPEED_LIMITATION)<1&&(n=1),this.localCmdPerSec=0,this.wsClient.isOpened()&&window.setTimeout(this._updateCmdSpeed.bind(this,!1),1e3*n)):this.isLocalCmdTooFast=!1},t.LACAL_CMD_SPEED_LIMITATION=20,t.MAX_CMD_DELAY_MILLIS=4e3,t}(y.YEvent);t.default=b}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(141),n(85),n(72),n(128)],void 0===(i=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n,o){var i=e.call(this)||this;if(null==t)throw new Error("ownSID cannot be null in BlockLockHandler");return i.lockedBlocksMap={},i.sessionId=t,i.sessionHandler=n,i.nonDataCmdHandler=o,i.sessionHandler.on(r.default.SESSION_LOCK_UPDATE,i._onSessionLockChanged.bind(i)),i.sessionHandler.on(r.default.SESSION_QUIT,i._onSessionQuit.bind(i)),i.nonDataCmdHandler.on(r.default.LOCK_RELEASED,function(e){i._releaseLockOf(e.sessionId)}),i}return s(t,e),t.prototype.destroy=function(){this.lockedBlocksMap=null,this.sessionHandler=null,this.nonDataCmdHandler=null,this.removeAllListeners(null)},t.prototype.isBlockLockedBy=function(e,t){var n,o=!1;return null!=e&&null!=t&&null!=(n=this.lockedBlocksMap[e])&&n===t&&(o=!0),o},t.prototype.getOwnBlockIds=function(){var e=this,t=[];return o.underscoreInst.each(this.lockedBlocksMap,function(n,o){n===e.sessionId&&t.push(o)}),t},t.prototype.getLockedBlockIdsBy=function(e){var t=[];return o.underscoreInst.each(this.lockedBlocksMap,function(n,o){e===n&&t.push(o)}),t},t.prototype.updateLockByDataCmd=function(e){var t,n=e.getCollabProps();if(null!=(t=e.isCollabUndo?e.getStartingRange():e.getEndingRange())){var o=t.getEndBlockRange();if(null!=o){var i=o.block.getId();if(null!=i&&(this._releaseLockOf(n.cmdSessionId),null==this.lockedBlocksMap[i])){var r=this.sessionHandler.getSessionPropertiesBy(n.cmdSessionId);null!=r&&(r.lockedBlkIds=[i],this._lockBlock(r))}}}},t.prototype._releaseLockOf=function(e){var t=this,n=[];o.underscoreInst.each(this.lockedBlocksMap,function(t,o){t===e&&n.push(o)}),o.underscoreInst.each(n,function(n){t._unlockBlock(n,e)})},t.prototype._onSessionQuit=function(e){this._releaseLockOf(e.sessionId)},t.prototype._onSessionLockChanged=function(e){var t=this,n=!1;o.underscoreInst.each(e,function(e){n=!1,null!=e.lockedBlkIds&&e.lockedBlkIds.length>0&&(o.underscoreInst.some(e.lockedBlkIds,function(o){return t.lockedBlocksMap[o]!==e.sessionId&&(n=!0),n}),n&&(t._releaseLockOf(e.sessionId),t._lockBlock(e)))})},t.prototype._unlockBlock=function(e,t){delete this.lockedBlocksMap[e];var o={resultCode:n.CustomResultCode.NO_ERROR,sessionId:t,unlockedBlockId:e};this.emit(r.default.LOCK_RELEASED,o)},t.prototype._lockBlock=function(e){var t=this,n={resultCode:1,sessionId:e.sessionId,sessionProps:e},i=!1;o.underscoreInst.each(e.lockedBlkIds,function(n){t.lockedBlocksMap[n]!==e.sessionId&&(t.lockedBlocksMap[n]=e.sessionId,i=!0)}),i&&this.emit(r.default.LOCK_LOCKED,n)},t}(i.YEvent);t.BlockLockHandler=a}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(72)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,o){var i=e.call(this)||this;return i.clientId=t,i.collabKeyTranslator=n,i.coreEditor=o,i}return s(t,e),t.prototype.destroy=function(){this.removeAllListeners(null)},t.prototype.buildCollabProperties=function(e){var t,n,o,i,r={coreEditor:this.coreEditor,isCollabEnabled:this.coreEditor.isCollabEnabled()};return e?(r.cmdSessionId=e.sessionId,t=r.cmdSessionId===this.clientId,r.isOwnCmd=t,r.finalNoteVersion=parseInt(e.finalVersion,10),r.ownerName=e.cmdOwner,r.isCollabEnabled=!0,r.isCollabCmd=!0,r.isServerCmd=!1,(n=e.collabCmds).nondataCmds?i=n.nondataCmds[0]:(this.collabKeyTranslator.decode(n),o=n.dataCommands[0]),null!=i?r.isServerCmd=!0===i.isServerCmd:null!=o&&(r.isLocalExecutedCmd=!0===o.isLocalExecutedCmd,r.cmdId=o.cmdId)):r.cmdSessionId=this.clientId,r},t}(n.YEvent);t.CmdCollabPropsHandler=o}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(85),n(72)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.destroy=function(){this.removeAllListeners(null)},t.prototype.mergeLocalCommands=function(e){var t,o,i=null,r=0;if(e&&e.length>0)if(1===e.length)i=e[0];else{for(i=e.shift();e.length>0&&(t=e[0],i.canBeMerged(t));)n.loggerInst.log("merge pending command:",i,t),i.mergeLocalCmd(t),e.shift(),r++;r>0&&e[0]&&e[0].isCollabUndo&&((o=n.underscoreInst.clone(i)).isLocalExecutedCmd=e[0].isLocalExecutedCmd,o.setCollabUndo(!0),o.setCollabRedo(!1),e[0]=o),e.unshift(i)}},t}(o.YEvent);t.CmdMergeHandler=i}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(141),n(85),n(72)],void 0===(i=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n){var o=e.call(this)||this;return o.coreEditor=t,o.lockHandler=n,o}return s(t,e),t.prototype.destroy=function(){this.lockHandler=null,this.removeAllListeners(null)},t.prototype.isConflictWithOwnLockedBlock=function(e,t,n){var r,a,s,l,c=this.lockHandler.getOwnBlockIds(),u=!1;return null!=c&&c.length>0&&(l=c[0]),i.loggerInst.log("LOCK/UNLOCK: isConflictWithOwnLockedBlock Enter"),"comp.AppendBlank"!==t&&l&&((r=this.coreEditor.getBlockById(l))&&!this.coreEditor.isTable(r)&&((a=this.coreEditor.getInnerBlocksWithEdge(e))&&0!==a.length?i.underscoreInst.some(a,function(e){return e.getId()===l&&(n.collabProperties.dataCmdError="协同命令执行失败：编辑目标段落被锁定",n.collabProperties.errorToClose=!!n.collabProperties.isLocalExecutedCmd,n.collabProperties.errorCode=o.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED,u=!0),u}):i.loggerInst.warn("Failed to get the blocks from range",e)),u||null==n.dropRange||null==n.dropRange.block||(s=n.dropRange.block.getId())&&(u=s===l)&&(n.collabProperties.dataCmdError="协同命令执行失败：拖拽目标段落被锁定",n.collabProperties.errorToClose=!!n.collabProperties.isLocalExecutedCmd,n.collabProperties.errorCode=o.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED)),i.loggerInst.log("LOCK/UNLOCK: isConflictWithOwnLockedBlock Exit"),u},t.prototype.isNoteRangeConflict=function(e,t,n){var r,a,s,l,c,u=this,d=!1;return i.loggerInst.log("LOCK/UNLOCK: isNoteRangeConflict Enter"),a=n.cmdSessionId,c=!n.isCollabCmd||n.isOwnCmd,"comp.AppendBlank"!==t&&"ManagerAdapter"!==t&&((r=this.coreEditor.getInnerBlocksWithEdge(e))&&0!==r.length?(i.underscoreInst.some(r,function(e){return i.loggerInst.log("LOCK/UNLOCK: "+e.getId()+" LockState:"+e.isLocked()),e.isLocked()&&(d=c||!u.lockHandler.isBlockLockedBy(e.getId(),a))&&(n.dataCmdError="目标段落已被其他用户锁定",n.isCollabCmd?(n.errorToClose=!!n.isLocalExecutedCmd,n.errorCode=o.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED):n.errorCode=o.DataCmdFailureCode.LOCAL_TARGET_BLOCK_LOCKED),d}),d||(d=this._isConflictWithNeighborBlock(t,e,n))):(n.dataCmdError="目标段落不存在",n.isCollabCmd?(n.errorToClose=!0,n.errorCode=o.DataCmdFailureCode.COLLAB_BLOCKS_MISSING):n.errorCode=o.DataCmdFailureCode.LOCAL_BLOCKS_MISSING,d=!0),d||null==n.cmdJSON||null==n.cmdJSON.dropRange||((s=n.cmdJSON.dropRange.blockId)&&(l=this.coreEditor.getBlockById(s)),l&&l.isLocked()&&(d=c||!this.lockHandler.isBlockLockedBy(s,a)))),i.loggerInst.log("LOCK/UNLOCK: isNoteRangeConflict Exit"),d},t.prototype._isConflictWithNeighborBlock=function(e,t,r){var a,s,l,c,u=r.cmdSessionId,d=!1;if(!t)return i.loggerInst.warn("_isConflictWithNeighborBlock:noteRange should not be null"),!1;switch(a=t.getStartBlockRange(),s=!r.isCollabCmd||r.isOwnCmd,e){case"comp.KeyBackspace":a&&n.isTextBlock(a.block)&&0===a.start&&!this.coreEditor.isTodo(a.block)&&(l=this.coreEditor.getPreBlockById(a.getBlockId()))&&t.isCollapsed()&&!this.coreEditor.isListItem(a.block)&&0===a.block.getBlockStyle("text-indent")&&l.isLocked()&&(d=s||!this.lockHandler.isBlockLockedBy(l.getId(),u))&&(r.dataCmdError="目标段落已被其他用户锁定",r.isCollabCmd?(r.errorToClose=!0,r.errorCode=o.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED):r.errorCode=o.DataCmdFailureCode.LOCAL_TARGET_BLOCK_LOCKED);break;case"comp.KeyDelete":t.isCollapsed()&&n.isTextBlock(a.block)&&a.end===a.block.getLength(!1)&&(c=this.coreEditor.getNextBlockById(a.getBlockId()))&&c.isLocked()&&(d=s||!this.lockHandler.isBlockLockedBy(c.getId(),u))&&(r.dataCmdError="目标段落已被其他用户锁定",r.isCollabCmd?(r.errorToClose=!0,r.errorCode=o.DataCmdFailureCode.COLLAB_TARGET_BLOCK_LOCKED):r.errorCode=o.DataCmdFailureCode.LOCAL_TARGET_BLOCK_LOCKED)}return d},t}(r.YEvent);t.CollabConfilctHandler=a}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(85),n(72)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=e.call(this)||this;return t.KEY_MAP_DECODE={a:{key:"sessionId",type:0},b:{key:"finalVersion",type:0},c:{key:"cmdOwner",type:0},d:{key:"collabCmds",type:1},e:{key:"dataCommands",type:1},f:{key:"action",type:0},g:{key:"cmdId",type:0},h:{key:"nondataCmds",type:1},i:{key:"updateVersion",type:0},j:{key:"startNoteRange",type:1},k:{key:"startBlockRange",type:1},l:{key:"rangeType",type:0},m:{key:"startPosition",type:0},n:{key:"endPosition",type:0},o:{key:"isInSingleBlock",type:0},p:{key:"cmdNoteVersion",type:0},q:{key:"isLocalExecutedCmd",type:0},r:{key:"skipBlockLocking",type:0},s:{key:"blockId",type:0},t:{key:"richText",type:0},u:{key:"newBlkId",type:0},v:{key:"inlineStyles",type:0},w:{key:"blockStyles",type:0},x:{key:"newStartBlkId",type:0},y:{key:"newEndBlkId",type:0},z:{key:"dropRange",type:1},0:{key:"colNums",type:0},1:{key:"rowNums",type:0},2:{key:"simpleValue1",type:0},3:{key:"src",type:0},4:{key:"simpleValue2",type:0},5:{key:"recogLink",type:0},6:{key:"attachRes",type:0},7:{key:"fileName",type:0},8:{key:"fileLen",type:0},9:{key:"innerCmds",type:1},A:{key:"affectedBlockIds",type:0},B:{key:"endNoteRange",type:1},C:{key:"isCollabUndo",type:0},D:{key:"preBlockId",type:0},E:{key:"deletedBlocks",type:0},F:{key:"insertedBlocks",type:0},G:{key:"isCollabRedo",type:0},H:{key:"resIds",type:0},J:{key:"dataBefore",type:0},K:{key:"dataAfter",type:0},L:{key:"endBlockRange",type:1},N:{key:"blockIds",type:0},O:{key:"styleNameValues",type:0},P:{key:"oldStyleNameValues",type:0},Q:{key:"abstractSimpleValue1",type:0},R:{key:"indentStep",type:0},S:{key:"listId",type:0},T:{key:"listType",type:0},U:{key:"abstractSimpleValue2",type:0},V:{key:"oldLevels",type:0},W:{key:"newLevels",type:0},X:{key:"listItemIds",type:0},Y:{key:"headerFooterInfo",type:0},aa:{key:"selectWholeBlock",type:0},ab:{key:"startLineIndex",type:0},ac:{key:"startLineCharIndex",type:0},ad:{key:"endLineCharIndex",type:0},ae:{key:"endLineIndex",type:0}},t._assembleEncodeMap(),t}return s(t,e),t.prototype.destroy=function(){},t.prototype.decode=function(e){var t,o=this;if(!1!==this.isValidKeyMap){if(n.underscoreInst.isArray(e))n.underscoreInst.each(e,function(e){o.decode(e)});else if(null!==e&&"object"==typeof e)for(var i=0,r=n.underscoreInst.keys(e);i<r.length;i++){var a=r[i];e.hasOwnProperty(a)&&(a in this.KEY_MAP_DECODE&&(e[t=this.KEY_MAP_DECODE[a].key]=e[a],delete e[a],null!==e[t]&&"object"==typeof e[t]&&1===this.KEY_MAP_DECODE[a].type&&this.decode(e[t])))}}else n.loggerInst.error("KeyMap is not valid, skip decode.")},t.prototype.encode=function(e){var t,o=this;if(!1!==this.isValidKeyMap){if(n.underscoreInst.isArray(e))n.underscoreInst.each(e,function(e){o.encode(e)});else if(null!==e&&"object"==typeof e)for(var i=0,r=n.underscoreInst.keys(e);i<r.length;i++){var a=r[i];e.hasOwnProperty(a)&&(a in this.KEY_MAP_ENCODE?(e[t=this.KEY_MAP_ENCODE[a].key]=e[a],delete e[a],null!==e[t]&&"object"==typeof e[t]&&1===this.KEY_MAP_ENCODE[a].type&&this.encode(e[t])):(n.loggerInst.log("key:",typeof a),n.loggerInst.error('Key - "',a,'" does NOT exist in COLLAB_MAP_ENCODE!')))}}else n.loggerInst.error("KeyMap is not valid, skip encode.")},t.prototype._assembleEncodeMap=function(){var e,t;for(t in this.isValidKeyMap=!0,this.KEY_MAP_ENCODE={},this.KEY_MAP_DECODE)if(this.KEY_MAP_DECODE.hasOwnProperty(t)){if(e=this.KEY_MAP_DECODE[t].key,n.underscoreInst.has(this.KEY_MAP_DECODE,e)){this.isValidKeyMap=!1,n.loggerInst.error("original JSON key is conflict with encoded key, please rename it",e);break}if(n.underscoreInst.has(this.KEY_MAP_ENCODE,e)){this.isValidKeyMap=!1,n.loggerInst.error("original JSON key is duplicated, please rename them",e);break}this.KEY_MAP_ENCODE[e]={},this.KEY_MAP_ENCODE[e].key=t,this.KEY_MAP_ENCODE[e].type=this.KEY_MAP_DECODE[t].type}},t}(o.YEvent);t.CollabKeyTranslator=i}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(85),n(72),n(128)],void 0===(i=function(e,t,n,o,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n){var o=e.call(this)||this;return o.sessionsMap={},o.nondataCmdHandler=n,o.nondataCmdHandler.on(i.default.SESSION_CHNAGED,o._onSessionChanged.bind(o)),o.nondataCmdHandler.on(i.default.SESSION_QUIT,o._onSessionQuit.bind(o)),o}return s(t,e),t.prototype.destroy=function(){this.sessionsMap=null,this.removeAllListeners(null)},t.prototype.getSessionCount=function(){return n.underscoreInst.size(this.sessionsMap)},t.prototype.getSessionPropertiesBy=function(e){var t=this.sessionsMap[e];if(t)return n.underscoreInst.clone(t)},t.prototype._onSessionChanged=function(e){var t,o,r=this,a=[],s=[],l=!1;e.length>0&&(n.underscoreInst.each(this.sessionsMap,function(e){e.propUpdated=!1,a.push(e)}),n.underscoreInst.each(e,function(e){if(null==r.sessionsMap[e.sessionId]&&(r.sessionsMap[e.sessionId]={sessionId:e.sessionId},a.push(r.sessionsMap[e.sessionId]),l=!0),o=e.lockedBlkIds,delete e.lockedBlkIds,(t=r.sessionsMap[e.sessionId]).propUpdated=!1,n.underscoreInst.each(Object.keys(e),function(n){t[n]!==e[n]&&(t[n]=e[n],t.propUpdated=!0,l=!0)}),null!=o&&o.length>0){var i={lockedBlkIds:o,sessionId:e.sessionId};n.underscoreInst.defaults(i,t),s.push(i)}}),l&&this.emit(i.default.SESSION_CHNAGED,a),s.length>0&&this.emit(i.default.SESSION_LOCK_UPDATE,s))},t.prototype._onSessionQuit=function(e){var t=[];delete this.sessionsMap[e.sessionId],this.emit(i.default.SESSION_QUIT,e),n.underscoreInst.each(this.sessionsMap,function(e){e.propUpdated=!1,t.push(e)}),this.emit(i.default.SESSION_CHNAGED,t)},t}(o.YEvent);t.CollabSessionHandler=r}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(141),n(85),n(262),n(72),n(128)],void 0===(i=function(e,t,n,o,i,r,a){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t,n,o,i,r,s,l){var c=e.call(this)||this;return c.regularCmdSendIntervalMS=2e3,c.pendingSentCmdsQueue=[],c.coreEditor=t,c.blockLockHandler=n,c.conflictHandler=o,c.redoundoHandler=i,c.cmdMergeHandler=r,c.keyTranslator=s,c.wsClient=l,c.callbackWSOnMessage=c._execCollabDataCommand.bind(c),c.wsClient.on(a.default.WS_MESSAGE,c.callbackWSOnMessage),c}return s(t,e),t.prototype.destroy=function(){this.wsClient.off(a.default.WS_MESSAGE,this.callbackWSOnMessage),this.wsClient=null,this.removeAllListeners(null),this.pendingSentCmdsQueue=[]},t.prototype.getLastNotOwnExecCmd=function(){return this.lastNotOwnExecCmd},t.prototype.hasPendingCmds=function(){return this.pendingSentCmdsQueue&&this.pendingSentCmdsQueue.length>0},t.prototype.isLastOwnCmdExecuted=function(){var e=!0;return this.pendingSentCmdsQueue.length>0&&(e=this.pendingSentCmdsQueue[0].isLocalExecutedCmd),e},t.prototype.getCachedCmdCount=function(){return this.pendingSentCmdsQueue.length},t.prototype.getCmdDelay=function(){var e=this.pendingSentCmdsQueue[0],t=0;return null!=e&&null!=e.sendingToCollabServerMillis&&(t=Date.now()-e.sendingToCollabServerMillis),t},t.prototype.pushLocalDataCommand=function(e,t){var i=n.CustomResultCode.NO_ERROR;return e.isLocalExecutedCmd||0!==this.pendingSentCmdsQueue.length||(o.loggerInst.log("Process: sending non-local-executed first command"),i=this._sendCollabDataCommand(e,!1)),!t&&e.isLocalExecutedCmd&&0===this.pendingSentCmdsQueue.length&&(o.loggerInst.log("Process: delay sending local-executed first command"),this.sendCachedDataCommand(!0)),i===n.CustomResultCode.NO_ERROR&&(this.pendingSentCmdsQueue.push(e),!this.pendingSentCmdsQueue[0].sendingToCollabServerMillis&&(t||this.pendingSentCmdsQueue.length>1&&!e.isLocalExecutedCmd)&&(i=this.sendCachedDataCommand(!1)),o.loggerInst.log("Process: enqueue Command:(len:"+this.pendingSentCmdsQueue.length+")",e)),!0===e.isLocalExecutedCmd&&this.blockLockHandler.updateLockByDataCmd(e),i},t.prototype.sendCachedDataCommand=function(e){var t=n.CustomResultCode.NO_ERROR;return e?this.cmdSendingTimer=setTimeout(this._dispatchCachedDataCommand.bind(this),this.regularCmdSendIntervalMS):(clearTimeout(this.cmdSendingTimer),t=this._dispatchCachedDataCommand()),t},t.prototype._execCollabDataCommand=function(e){var t,n=e.collabCmdsJSON,i=e.collabProps,r={collabProperties:i};try{if(this.keyTranslator.decode(n),null==n.dataCommands)return null;if(null!=this.lastCmdId&&this.lastCmdId===i.cmdId)return null;null!=i.cmdId&&(this.lastCmdId=i.cmdId);var s=n.dataCommands[0],l=s.action,c=this.coreEditor.getDefaultNoteRange(),u=!1,d=void 0,p=void 0,h=void 0;d=this.coreEditor.getNoteRange(),r.collabProperties.cmdJSON=s,this._validateCollabDataCmd(n,r)&&(t=this._executeDataCommand(l,r)),!r.collabProperties.isOwnCmd&&"comp.DeleteNoteRange"===l&&r.range.isInSingleBlock()&&d.isInSingleBlock()&&(h=r.range.getStartBlockRange().block,p=d.getStartBlockRange().block,this.coreEditor.isTable(h)&&p.getId()===h.getId()&&(u=!0)),u&&c&&this.coreEditor.setNoteRange(c),this._postCollabDataCmdExecution(t,r)}catch(e){o.loggerInst.error(e)}finally{this.pendingSentCmdsQueue.length>0?this.sendCachedDataCommand(!1):this.emit(a.default.DATACMD_NO_PENDING)}return t},t.prototype._dispatchCachedDataCommand=function(){for(var e,t;this.pendingSentCmdsQueue.length>0&&(o.loggerInst.log("Process: sending cached command from queue"),e=this.pendingSentCmdsQueue[0],this.cmdMergeHandler.mergeLocalCommands(this.pendingSentCmdsQueue),(t=this._sendCollabDataCommand(e,!0))!==n.CustomResultCode.NO_ERROR)&&!e.isLocalExecutedCmd;)o.loggerInst.warn("skip failed-sent command and try next",e),this.pendingSentCmdsQueue.shift();return t},t.prototype._sendCollabDataCommand=function(e,t){var i,r,s,l,c=[],u={};if(t){if(e.sendingToCollabServerMillis)return o.loggerInst.warn("current cmd has been sent",e),n.CustomResultCode.NO_ERROR;if(e.isLocalExecutedCmd||e.isCollabRedo||e.isCollabUndo)o.loggerInst.log("Update-Range: NoUpdate");else{if(s=this._updateLocalCmdStartRange(e),!e.isValidStartNoteRange())return this.emit(a.default.DATACMD_FAILURE,n.DataCmdFailureCode.LOCAL_INVALID_STARTRANGE),n.DataCmdFailureCode.LOCAL_INVALID_STARTRANGE;if(s&&this.conflictHandler.isNoteRangeConflict(s,e.name,e.getCollabProps()))return o.loggerInst.log("Do NOT send Conflict Local Command"),e.getCollabProps().errorCode}}if(i=e.toCollabJSON())c[0]=i,u.dataCommands=c,o.loggerInst.log("_sendCollabDataCommand(original):",JSON.stringify(u)),this.keyTranslator.encode(u),r=JSON.stringify(u),o.loggerInst.log("_sendCollabDataCommand(compressd):",r),(l=this.wsClient.send(r))===n.CustomResultCode.NO_ERROR&&(e.sendingToCollabServerMillis=Date.now());else{l=n.DataCmdFailureCode.LOCAL_INVALID_CMDJSON;var d={closeSession:e.isLocalExecutedCmd,message:"无效的命令格式，无法协同",resultCode:l};this.emit(a.default.DATACMD_FAILURE,d)}return l===n.CustomResultCode.NO_ERROR&&e.isLocalExecutedCmd&&(o.loggerInst.log("Update-Range: set local command as last executed command"),this._setLastOwnExecutedCmd(e)),l},t.prototype._updateLocalCmdStartRange=function(e){var t;return this.lastOwnExecCmd?this.lastOwnExecCmd.isLocalExecutedCmd?o.loggerInst.log("Update-Range: last own executed command is local executed"):null!=(t=this.lastOwnExecCmd.getEndingRange())&&(e.setStartingRange(t),o.loggerInst.log("Update-Range: UpdateTo-",t.getStartBlockRange())):o.loggerInst.log("Update-Range: No last own executed command"),t},t.prototype._postCollabDataCmdExecution=function(e,t){var i,r=t.collabProperties.isLocalExecutedCmd,s=t.collabProperties.isOwnCmd;if(s&&(i=this.pendingSentCmdsQueue.shift()),t.collabProperties.dataCmdError){o.loggerInst.error(t.collabProperties.dataCmdError),e&&(e.effected||r)&&(t.collabProperties.errorToClose=!0);var l={closeSession:t.collabProperties.errorToClose,message:t.collabProperties.dataCmdError,resultCode:t.collabProperties.errorCode};return s&&this.emit(a.default.DATACMD_FAILURE,l),void(null==e&&this.coreEditor.setNoteVersion(t.collabProperties.finalNoteVersion))}if(e){if(s&&this.coreEditor.isReadyForEdit()&&(o.loggerInst.log("clear sendingToCollabServerMillis:",e,i),e.sendingToCollabServerMillis=null,i.sendingToCollabServerMillis=null,o.loggerInst.log("Process: Dequeue Command(len:"+this.pendingSentCmdsQueue.length+")")),e.setCmdFinalNoteVersion(this.coreEditor.getNoteVersion()),!s&&e.effected&&(this.redoundoHandler.pushNotOwnExecCmd(e),this.lastNotOwnExecCmd=e),s){var c={rawCollabJSON:t.collabProperties.rawWSMessage,resultCode:n.CustomResultCode.NO_ERROR};this.emit(a.default.DATACMD_SUCCESS,c),r||this._setLastOwnExecutedCmd(e)}this.blockLockHandler.updateLockByDataCmd(e)}else o.loggerInst.error("execCommand should NOT be null when no dataCmdError")},t.prototype._setLastOwnExecutedCmd=function(e){this.lastOwnExecCmd=e},t.prototype._executeDataCommand=function(e,t){var n=t.collabProperties.cmdJSON,i=n.isCollabUndo,r=n.isCollabRedo;return o.loggerInst.log("Executing "+e),i||r?this.redoundoHandler.applyCollabRedoUndo(e,t):this.coreEditor.execCommand(e,t)},t.prototype._validateCollabDataCmd=function(e,t){var r,a=t.collabProperties,s=a.cmdJSON,l=this.coreEditor.getNoteVersion(),c=a.finalNoteVersion,u=!this.coreEditor.isReadyForEdit(),d=a.isLocalExecutedCmd,p=s.startNoteRange,h=!0;return o.loggerInst.log("Executing Validation Enter"),u?0===c?(h=!1,o.loggerInst.log("Executing Validation - ignore cmd whose finalVersion is 0")):o.loggerInst.log("Executing Validation - executing unsaved cmd"):i.Utils.isCmdVersionMatchNoteVersion(c,l)?d||(r=this.coreEditor.buildNoteRangeFromJSON(p),a.isOwnCmd||(h=!this.conflictHandler.isConflictWithOwnLockedBlock(r,s.action,t)),h&&(s.isCollabUndo||s.isCollabRedo?(h=this.redoundoHandler.ValidateCollabRedoUndo(s.affectedBlockIds,s.cmdNoteVersion))||(a.errorToClose=!0,a.errorCode=n.DataCmdFailureCode.COLLAB_DIRTY_BLOCKS,a.dataCmdError="协同：目标区域已经被修改，不能撤销或重做"):h=!this.conflictHandler.isNoteRangeConflict(r,s.action,a))):(h=!1,a.errorToClose=!0,a.errorCode=n.DataCmdFailureCode.COLLAB_NOTEVERSION_MISMATCH,a.dataCmdError="命令对应版本和本地笔记版本不匹配:("+l+"/"+c+")"),o.loggerInst.log("Executing Validation Exit"),h},t}(r.YEvent);t.DataCmdHandler=l}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.SESSION_INIT_DONE="done",e.SESSION_INIT_COLLABSTARTED="collabStarted",e.SESSION_INIT_TIMEOUT="timeout",e.SESSION_INIT_INVALID="notValidForCollab",e}();t.ConstValueInJSON=n}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(141),n(85),n(262),n(72),n(128)],void 0===(i=function(e,t,n,o,i,r,a){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t){var n=e.call(this)||this;if(n.retryIntervalMilliSec=1e3,n.retryMaxCount=2,null==t)throw new Error("wsClient should NOT be null");return n.wsClient=t,n.callbackWSOnMessage=n._execCollabNondataCommand.bind(n),n.wsClient.on(a.default.WS_MESSAGE,n.callbackWSOnMessage),n}return s(t,e),t.prototype._queueCollabCmdJSON=function(e){var t;return(t=this._sendCollabJSON(e))&&(e.sendingToCollabServerMillis=Date.now(),e.retryRemainedCount=this.retryMaxCount,this.retriableCmdsQueue.push(e),null==this.retryCollabJSONDispatcher&&(this.retryCollabJSONDispatcher=setTimeout(this._handleCollabJSONRetry.bind(this),this.retryIntervalMilliSec))),t},t.prototype.destroy=function(){this.wsClient.off(a.default.WS_MESSAGE,this.callbackWSOnMessage),this.wsClient=null,this.removeAllListeners(null)},t.prototype.getModifiers=function(e){return this.wsClient.isOpened()?this.modifiers&&1===this.modifiers.status&&this.modifiers.endVersion===e||(this.modifiers={resultCode:n.CustomResultCode.NO_ERROR,status:0},this._requestModifiers(e)||(this.modifiers.status=2)):this.modifiers={resultCode:n.WSCustomCode.SESSION_NOT_OPENED,status:2},this.modifiers},t.prototype.sendCollabNonDataCommand=function(e,t){var o,i=!0;return o=this._buildCollabCmdJSON(e,t),e===n.CmdNames.NONDATACMD_GETMODIFIERS?this._isModifiersReqeustSent(t.endNoteVersion)||(this._clearRetryQueueByAction(e),i=this._queueCollabCmdJSON(o)):i=e===n.CmdNames.NONDATACMD_COLLABINFO||e===n.CmdNames.NONDATACMD_NOTESAVE?this._queueCollabCmdJSON(o):this._sendCollabJSON(o),i},t.prototype._execCollabNondataCommand=function(e){var t,o=e.collabCmdsJSON,i=e.collabProps,r=i.cmdSessionId;if(null!=o.nondataCmds){switch((t=o.nondataCmds[0]).action){case n.CmdNames.NONDATACMD_BLOCKSELECTION:break;case n.CmdNames.NONDATACMD_COLLABCLOSE:var s={resultCode:n.CustomResultCode.NO_ERROR,sessionId:r};this.emit(a.default.SESSION_QUIT,s);break;case n.CmdNames.NONDATACMD_COLLABINFO:this._handleCollabInfo(t,i);break;case n.CmdNames.NONDATACMD_SESSIONINITIALIZED:var l={collabId:this.wsClient.getCollabId(),collabVersion:t.collabVersion,isReadOnly:this.wsClient.isReadOnlySession(),nickname:this.wsClient.getNickname(),result:t.initResult,resultCode:1,sessionId:this.wsClient.getSessionId(),userId:this.wsClient.getUserId()};this.emit(a.default.SESSION_INIT_DONE,l);break;case n.CmdNames.NONDATACMD_LOCKRELEASE:var c={resultCode:n.CustomResultCode.NO_ERROR,sessionId:r,unlockedBlockId:null};this.emit(a.default.LOCK_RELEASED,c);break;case n.CmdNames.NONDATACMD_SEVERPING:this._handleServerPing(t);break;case n.CmdNames.NONDATACMD_GETMODIFIERS:this._handleModifiers(t);break;case n.CmdNames.NONDATACMD_NOTESAVE:this._handleNoteSave(t);break;default:throw new Error("unknown nondata cmd:"+t.action)}this._removeFromRetryQueue(t.cmdId)}},t.prototype._requestModifiers=function(e){var t={};return t.endNoteVersion=e,this.sendCollabNonDataCommand(n.CmdNames.NONDATACMD_GETMODIFIERS,t)},t.prototype._handleCollabJSONRetry=function(){var e,t=this,i=!1;o.underscoreInst.each(this.retriableCmdsQueue,function(r){!0!==i&&null!=t.wsClient&&!1!==t.wsClient.isOpened()?Date.now()-r.sendingToCollabServerMillis>t.retryIntervalMilliSec&&((e=r.retryRemainedCount)>0?(o.loggerInst.log("NonDataCmd-Resend:",r),delete r.sendingToCollabServerMillis,delete r.retryRemainedCount,t._sendCollabJSON(r),r.sendingToCollabServerMillis=Date.now(),r.retryRemainedCount=e-1):(o.loggerInst.error("NondataCmd-Send Failed after retry:",r),t.wsClient&&t.wsClient.isOpened()&&t.wsClient.close(n.WSCustomCode.FAILED_RECEIVE_COLLAB_CMD,n.WSCustomCode[n.WSCustomCode.FAILED_RECEIVE_COLLAB_CMD]),i=!0)):i=!0}),i&&(this.retriableCmdsQueue=[]),this.retriableCmdsQueue.length>0?this.retryCollabJSONDispatcher=setTimeout(this._handleCollabJSONRetry.bind(this),this.retryIntervalMilliSec):(clearTimeout(this.retryCollabJSONDispatcher),this.retryCollabJSONDispatcher=null)},t.prototype._sendCollabJSON=function(e){return null!=e&&this.wsClient.send(JSON.stringify(e)),!0},t.prototype._isModifiersReqeustSent=function(e){var t,i;return o.underscoreInst.some(this.retriableCmdsQueue,function(o){return(t=o.nondataCmds[0]).action===n.CmdNames.NONDATACMD_GETMODIFIERS&&t.endVersion===e&&(i=!0,!0)}),i},t.prototype._buildCollabCmdJSON=function(e,t){var o,r=[],a={};switch(o={action:e,cmdId:i.Utils.newGUID()},r.push(o),a.nondataCmds=r,e){case n.CmdNames.NONDATACMD_BLOCKSELECTION:o.blockId=t.selectedBlockId;break;case n.CmdNames.NONDATACMD_COLLABINFO:var s={sessionId:t.sessionId};void 0!==t.nickname&&(s.nickname=t.nickname),void 0!==t.lockedBlockId&&(s.lockedBlkIds=[],s.lockedBlkIds.push(t.lockedBlockId)),void 0!==t.portraitUrl&&(s.portraitUrl=t.portraitUrl),this._buildSessionInfoJSON(o,s);break;case n.CmdNames.NONDATACMD_DATACMDFAILED:o.dataCmdError=t.dataCmdErrorCode,o.errToClose=!!t.errToClose;break;case n.CmdNames.NONDATACMD_CLINTPONG:o.versionUpdate=t.noteVersion;break;case n.CmdNames.NONDATACMD_GETMODIFIERS:o.endVersion=t.endNoteVersion;break;case n.CmdNames.NONDATACMD_NOTESAVE:o.versionUpdate=t.noteVersion,o.isHistorySave=t.isHistorySave;break;default:throw a=null,new Error("Unsupported NondataCmd:"+e)}return a},t.prototype._buildSessionInfoJSON=function(e,t){var n={sessionId:t.sessionId};null!=t.nickname&&(n.nickname=t.nickname),null!=t.portraitUrl&&(n.portraitUrl=t.portraitUrl),null!=t.lockedBlkIds&&t.lockedBlkIds.length>0&&(n.lockedBlkId=t.lockedBlkIds[0]),e.sessionProp=[],e.sessionProp.push(n)},t.prototype._handleCollabInfo=function(e,t){var n=e.sessionProp,i=[];o.underscoreInst.each(n,function(e){var n={sessionId:null};null!=e.lockedBlkId&&(n.lockedBlkIds=[e.lockedBlkId],delete e.lockedBlkId),o.underscoreInst.extend(n,e),null==n.sessionId&&(n.sessionId=t.cmdSessionId),i.push(n)}),this.emit(a.default.SESSION_CHNAGED,i)},t.prototype._handleServerPing=function(e){if(null!=e.collabNoteReady){var t={isCollabStarted:e.collabNoteReady,resultCode:n.CustomResultCode.NO_ERROR,sessionId:this.wsClient.getSessionId()};this.emit(a.default.SESSION_INIT_BUILT,t)}},t.prototype._handleModifiers=function(e){var t=this;this.modifiers.status=1,this.modifiers.startVersion=e.startVersion,this.modifiers.endVersion=e.endVersion,this.modifiers.modifiers=[],o.underscoreInst.each(e.modifiers,function(e){var n={userId:e.userId};t.modifiers.modifiers.push(n)}),this._clearRetryQueueByAction(n.CmdNames.NONDATACMD_GETMODIFIERS),this.emit(a.default.NONDATACMD_MODIFIERS_RESULT,this.modifiers)},t.prototype._clearRetryQueueByAction=function(e){this.retriableCmdsQueue=o.underscoreInst.reject(this.retriableCmdsQueue,function(t){return t.nondataCmds[0].action===e&&(o.loggerInst.log("remove cmd from retryQueue by actionName:",e),!0)})||[]},t.prototype._removeFromRetryQueue=function(e){this.retriableCmdsQueue=o.underscoreInst.reject(this.retriableCmdsQueue,function(t){return t.nondataCmds[0].cmdId===e&&(o.loggerInst.log("remove cmd from retryQueue:",e),!0)})||[]},t.prototype._handleNoteSave=function(e){o.loggerInst.log("SaveNotification:",e)},t}(r.YEvent);t.NonDataCmdHandler=l}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(85),n(72)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this)||this;return n.coreEditor=t,n.executedNotOwnCmdQueue=[],n}return s(t,e),t.prototype.destroy=function(){this.removeAllListeners(null)},t.prototype.applyCollabRedoUndo=function(e,t){var n,o=t.collabProperties.cmdJSON,i=o.isCollabUndo,r=o.isCollabRedo;return i?(t.collabProperties.isCollabUndo=!0,t.collabProperties.isCollabRedo=!1):r&&(t.collabProperties.isCollabUndo=!1,t.collabProperties.isCollabRedo=!0),(n=this.coreEditor.createDataCommand(e,t))&&(n.isOriginalCmd=!0,this.coreEditor.applyCollabCmdRedoUndo(n)),n},t.prototype.pushNotOwnExecCmd=function(e){this.executedNotOwnCmdQueue.push(e)},t.prototype.ValidateLocalRedoUndo=function(e){var t,o=!0,i=!1;return e.isCollabUndo?t=this.lastValidUndoCmd:e.isCollabRedo&&(t=this.lastValidRedoCmd),o&&((o=!this._isConflicted(e.getAffectedBlockIds(),e.getCmdFinalNoteVersion()))||(i=!0)),o&&t&&t.cmdId===e.cmdId&&(o=!1,n.loggerInst.warn("skip duplicated redo/undo command")),o?e.isCollabRedo?(this.lastValidRedoCmd=e,this.lastValidUndoCmd=null):e.isCollabUndo&&(this.lastValidUndoCmd=e,this.lastValidRedoCmd=null):(n.loggerInst.warn("Skip invalid Redo/Undo"),i&&(n.loggerInst.warn("Drop invalid Redo/Undo"),e.isCollabRedo?this.coreEditor.dropRedoCmd():e.isCollabUndo&&this.coreEditor.dropUndoCmds(null,null,null))),o},t.prototype.ValidateCollabRedoUndo=function(e,t){return!this._isConflicted(e,t)},t.prototype._isConflicted=function(e,t){var o,i,r=this,a=!1;return(i=(i=n.underscoreInst.filter(this.executedNotOwnCmdQueue,function(e){return e.getCmdFinalNoteVersion()>t}))||[]).length>0&&n.underscoreInst.some(i,function(t){if(r._isNoteRangeOverlap(e,t.getAffectedBlockIds()))return a=!0,o=t.getCollabProps(),n.loggerInst.log("Conflict: data has been edited by "+o.ownerName),!0}),a},t.prototype._isNoteRangeOverlap=function(e,t){var o=!1;return e&&e.length>0&&t&&t.length>0&&n.underscoreInst.some(e,function(e){return n.underscoreInst.some(t,function(t){return e===t&&(o=!0),o}),o}),o},t}(o.YEvent);t.RedoUndoHandler=i}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){(function(o){var i,r;void 0===(r=function(t,a){"use strict";var s,l=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});i=[n,a,n(141),n(85),n(262),n(72),n(128)],void 0===(r=function(e,t,i,r,a,s,c){Object.defineProperty(t,"__esModule",{value:!0});var u,d="buildVersion",p="collabId",h="nickname",f="portraitUrl",g="sessionId",y="sessionType",m="userId";!function(e){e[e.normal=0]="normal",e[e.readonly=1]="readonly",e[e.owner=2]="owner"}(u||(u={}));var v=function(e){function t(t){var i=e.call(this)||this;"undefined"==typeof window&&void 0!==o&&(o.WebSocket=n(643).w3cwebsocket);return i.collabPropsHandler=t,i}return l(t,e),t.prototype.connect=function(e){var t,n=e.useWSS?"wss":"ws";if("undefined"==typeof WebSocket)throw new Error("There is NO WebSocket type in Context.");if(null==e.collabServer)throw new Error("Param of options.collabServer should not be null");if(null==e.shareKey)throw new Error("Param of options.shareKey should not be null");if(null==e.nickname)throw new Error("Param of options.nickname should not be null");if(null==e.portraitUrl)throw new Error("Param of options.portraitUrl should not be null");if(null==e.userId)throw new Error("Param of options.userId should not be null");if(null==e.sessionId)throw new Error("Param of options.sessionId should not be null");if(null==e.sessionType)throw new Error("Param of options.sessionType should not be null");if(null==e.buildVersion)throw new Error("Param of options.buildVersion should not be null");t=n+"://"+e.collabServer+"?"+p+"="+e.shareKey+"&"+h+"="+e.nickname+"&"+f+"="+e.portraitUrl+"&"+m+"="+e.userId+"&"+y+"="+e.sessionType+"&"+g+"="+e.sessionId+"&"+d+"="+e.buildVersion,this.sessionOptions=e,r.loggerInst.log("Connect to",t),this.wsInst=new WebSocket(t),this.wsInst.onopen=this._onOpen.bind(this),this.wsInst.onclose=this._onClose.bind(this),this.wsInst.onmessage=this._onMessage.bind(this),this.wsInst.onerror=this._onError.bind(this)},t.prototype.getSessionId=function(){return this.sessionOptions.sessionId},t.prototype.getNickname=function(){return this.sessionOptions.nickname},t.prototype.getPortraitUrl=function(){return this.sessionOptions.portraitUrl},t.prototype.getUserId=function(){return this.sessionOptions.userId},t.prototype.getCollabId=function(){return this.sessionOptions.shareKey},t.prototype.isReadOnlySession=function(){return this.sessionOptions.sessionType===u.readonly},t.prototype.isOpened=function(){return null!=this.wsInst&&this.wsInst.readyState===this.wsInst.OPEN},t.prototype.send=function(e){var t,n=i.CustomResultCode.NO_ERROR;return t=2*e.length/1024,a.Utils.isMessageTooLarge(t)?n=i.WSCustomCode.MESSAGE_TOO_BIG:this.wsInst&&this.wsInst.readyState===WebSocket.OPEN?(r.loggerInst.log("sending message:",e),this.wsInst.send(e)):n=i.WSCustomCode.SESSION_NOT_OPENED,n},t.prototype.close=function(e,t){this.wsInst&&this.wsInst.readyState===WebSocket.OPEN&&(this.wsInst.onopen=null,this.wsInst.onclose=null,this.wsInst.onmessage=null,this.wsInst.onerror=null,this.wsInst.close(e,t),e!==i.WSCustomCode.CLOSED_BY_HOST&&this.emit(c.default.WS_CLOSED,this._assembleSessionError(e,e)))},t.prototype.sendDataCmdErrorCode=function(e){this.send(e.toString())},t.prototype._onOpen=function(e){r.loggerInst.log("Connection is opened.");var t={resultCode:i.CustomResultCode.NO_ERROR};this.emit(c.default.WS_OPENED,t)},t.prototype._onClose=function(e){r.loggerInst.log("Connection is closed."),this.emit(c.default.WS_CLOSED,this._assembleSessionError(e.code,parseInt(e.reason,10)))},t.prototype._onMessage=function(e){r.loggerInst.log("Received Message in WSClient:",e.data);try{if(null!=e.data&&""!==e.data){var t=JSON.parse(e.data),n=this.collabPropsHandler.buildCollabProperties(t);n.rawWSMessage=e.data;var o={collabCmdsJSON:t.collabCmds,collabProps:n,resultCode:i.CustomResultCode.NO_ERROR};this.emit(c.default.WS_MESSAGE,o)}}catch(e){r.loggerInst.error("Exception in WebSocketClient._onMessage:",e)}},t.prototype._onError=function(e){r.loggerInst.log("Caught Error:",e)},t.prototype._assembleSessionError=function(e,t){var n;switch(r.underscoreInst.isNaN(t)&&(t=1006===e?i.WSCustomCode.COLLAB_SERVER_UNREACHABLE:1005===e?i.WSCustomCode.COLLAB_SERVER_SHUTDOWN:1001===e?i.WSCustomCode.COLLAB_SESSION_CLOSED:e),t){case 2e3:n="连接总数超过上限";break;case 2001:n="单个文件连接总数超过上限";break;case 2002:n="重复的session链接";break;case 2003:n="所有者链接超过上限";break;case 3e3:n="转发命令失败";break;case 3001:n="添加链接失败";break;case 3003:n="命令转发进程无响应";break;case 3004:n="创建链接失败";break;case 3005:n="创建命令转发进程失败";break;case 3006:n="广播命令失败";break;case 3007:n="初始化链接失败";break;case 3008:n="未转发命令总数超上限";break;case 4001:n="等待命令返回超时";break;case 4002:n="发送命令失败";break;case 8e3:n="笔记长时间无操作";break;case 9e3:n="链接协同服务器失败";break;case 9003:n="协同服务器被强制关闭";break;case 9004:n="协同链接异常关闭，请检测session是否初始化成功";break;case 9100:n="当前编辑器版本太低";break;case 9101:n="链接被主动强制关闭";break;case 9102:n="协同命令执行失败";break;case 9103:n="重连次数超限";break;default:n="未知错误"}return{code:e,customCode:t,reason:n,resultCode:e,shareKey:this.sessionOptions.shareKey}},t}(s.YEvent);t.WebSocketClient=v}.apply(a,i))||(e.exports=r)}.apply(t,i=[n,t]))||(e.exports=r)}).call(this,n(54))},function(e,t,n){var o=function(){return this}(),i=o.WebSocket||o.MozWebSocket,r=n(644);function a(e,t){return t?new i(e,t):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(a,e,{get:function(){return i[e]}})}),e.exports={w3cwebsocket:i?a:null,version:r}},function(e,t,n){e.exports=n(645).version},function(e){e.exports={_args:[["websocket@1.0.28","C:\\Users\\louluya\\Desktop\\新建文件夹 (2)\\pc-web-mac\\bulbeditor"]],_from:"websocket@1.0.28",_id:"websocket@1.0.28",_inBundle:!1,_integrity:"sha512-00y/20/80P7H4bCYkzuuvvfDvh+dgtXi5kzDf3UcZwN6boTYaKvsrtZ5lIYm1Gsg48siMErd9M4zjSYfYFHTrA==",_location:"/websocket",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"websocket@1.0.28",name:"websocket",escapedName:"websocket",rawSpec:"1.0.28",saveSpec:null,fetchSpec:"1.0.28"},_requiredBy:["/","/ycollablib"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.28.tgz",_spec:"1.0.28",_where:"C:\\Users\\louluya\\Desktop\\新建文件夹 (2)\\pc-web-mac\\bulbeditor",author:{name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.11.0","typedarray-to-buffer":"^3.1.5",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.28"}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(4),n(7),n(34),n(26),n(46),n(11),n(142),n(17),n(1),n(191)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentBackground=i.DEFAULT_BACKGROUND,t}return s(t,e),t.prototype.canUndo=function(){return this.controller.canUndo()},t.prototype.canRedo=function(){return this.controller.canRedo()},t.prototype.clearHighlight=function(){this.note&&this.note.highlight([""]),this.note.clearHighlight()},t.prototype.countWords=function(e){var t=this.getNoteRange();return this.note.countWords(t,e)},t.prototype.execCommandByToolbar=function(e,t){var n,o,i=this.getNoteRange(),r=this.getTableOnCellEdit(i);r&&(n=this.noteView.getBlockViewByBlock(r))&&n.editCellFromToolbar&&(o=n.editCellFromToolbar(e,t)),o||("undo"===e?this.undo():"redo"===e?this.redo():this.execCommand(e,t))},t.prototype.execCommand=function(e,t){return this.controller.execCommand(e,t)},t.prototype.focus=function(){this.noteView.$el.focus()},t.prototype.getController=function(){return this.controller},t.prototype.getHtmlContent=function(e,t,n){var o;if(null!=this.getHtmlContentTimer&&(clearTimeout(this.getHtmlContentTimer),this.getHtmlContentTimer=null),!this.contentLoading||null==t)return o=this.note.toHtml(null,!0===e),null!=t&&t({status:1,content:o}),o;n&&(this.isReadOnly()||this.makeReadOnly(!0),this.noteView.removeNote()),this.getHtmlContentTimer=setTimeout(this.getHtmlContent.bind(this,e,t,n),100)},t.prototype.getNoteRange=function(){return this.controller.getNoteRange()},t.prototype.getPlainContent=function(){return this.note.toPlain()},t.prototype.getSchemaVersion=function(){return this.note.getSchemaVersion()},t.prototype.getXmlContent=function(e,t){var n;if(null!=this.getXmlContentTimer&&(clearTimeout(this.getXmlContentTimer),this.getXmlContentTimer=null),!this.contentLoading||null==e)return n=this.note.toXml(),null!=e&&e({status:1,content:n}),n;t&&(this.isReadOnly()||this.makeReadOnly(!0),this.noteView.removeNote()),this.getXmlContentTimer=setTimeout(this.getXmlContent.bind(this,e,t),100)},t.prototype.hasHandWriteBlock=function(){return this.note.hasHandWriteBlock()},t.prototype.highlight=function(e,t){this.note&&this.note.highlight(e,t)},t.prototype.insertImage=function(e){return this.controller.insertImage(e)},t.prototype.insertAttachment=function(e){return this.controller.insertAttachment(e)},t.prototype.isNotSetContent=function(){return this.notSetContent},t.prototype.isReadOnly=function(){return this.controller.isReadOnly()},t.prototype.nextHighlight=function(){this.note&&this.note.nextHighlight()},t.prototype.preHighlight=function(){this.note&&this.note.preHighlight()},t.prototype.getNoteContentStatus=function(){return!!this.note&&this.note.getContentStatus()},t.prototype.querySelectionInlineStyle=function(e){return this.controller.querySelectionInlineStyle(e)},t.prototype.querySelectionBlockStyle=function(e){return this.controller.querySelectionBlockStyle(e)},t.prototype.querySelectionInlineStyles=function(){return this.controller.querySelectionInlineStyles()},t.prototype.querySelectionBlockStyles=function(){return this.controller.querySelectionBlockStyles()},t.prototype.redo=function(){return this.controller.redo()},t.prototype.render=function(){null!=this.noteProps&&(this.noteProps.sessionType?(this.noteProps.sessionType=parseInt(this.noteProps.sessionType,10),1===this.noteProps.sessionType?this.setReadOnly(!0):this.setReadOnly(!1)):this.noteProps.readOnly?this.setReadOnly(!0):this.setReadOnly(!1))},t.prototype.rerenderNoteView=function(){this.noteView.render()},t.prototype.resetEditingInlineStates=function(){return this.controller.resetEditingInlineStates()},t.prototype.setEditingInlineStyles=function(e){return this.controller.setEditingInlineStyles(e)},t.prototype.reset=function(){var e=this.getNoteViewWrapper();this.controller&&this.controller.reset(),this.noteView&&this.noteView.reset(),this.note&&this.note.reset(),this.note.removeEntityCache(),h.reset(),this.notSetContent=!0,e&&this.noteView.isInPageMode()&&e.find(".page-break").remove(),null!=this.getHtmlContentTimer&&(clearTimeout(this.getHtmlContentTimer),this.getHtmlContentTimer=null),null!=this.getXmlContentTimer&&(clearTimeout(this.getXmlContentTimer),this.getXmlContentTimer=null),this.contentChanged=!1,this.contentLoading=!1,this.currentBackground=i.DEFAULT_BACKGROUND},t.prototype.resetFont=function(){r.resetCssRules(),a.reset(),this.noteView.reRenderTextBlockView()},t.prototype.selectAll=function(){return this.controller.selectAll()},t.prototype.setAllBackgrounds=function(e,t){this.trigger("set-all-backgrounds",n.clone(e),t),this.currentBackground=i.DEFAULT_BACKGROUND},t.prototype.setBackground=function(e){var t=this.currentBackground;this.updateContainerBackground(e)&&this.trigger("set-background",t,e)},t.prototype.setFont=function(e,t){if(e||t){var n,o={};e&&(n=a.getDefault("font-size"),o["font-size"]=function(t){var o=t["font-size"];if(null!=o)return Math.round(e*o/n)+"px"},r.setCssRules(o)),t&&(a.setDefault("font-family",t),r.resetInlineStyleDefaultForHtml("font-family")),this.noteView.reRenderTextBlockView()}},t.prototype.setNoteRange=function(e){this.controller.noteSelection.setRange(e)},t.prototype.setPasteAsText=function(e){this.controller.setPasteAsText(e)},t.prototype.setEntity=function(e,t){var n=this;this.controller.setEntity(e,t),setTimeout(function(){n.trigger("yne-content-change")})},t.prototype.setReadOnly=function(e){e=!!e,this.noteProps.isReadOnly=e,this.makeReadOnly(e)},t.prototype.setDragProhibited=function(e){e=!!e,this.noteProps.isDragProhibited=e,this.controller.setDragProhibited(e)},t.prototype.setCopyProhibited=function(e){e=!!e,this.noteProps.isCopyProhibited=e,this.controller.setCopyProhibited(e)},t.prototype.setViewMode=function(e,t,n){e=c.IS_PC?u.parseToNumber(e,1):u.parseToNumber(e,0),this.updateEditorProps({viewMode:e}),c.IS_PC&&(1===e?$(this.getNoteViewWrapper()).toggleClass("read-mode",!0):$(this.getNoteViewWrapper()).toggleClass("read-mode",!1)),this.noteView.setViewMode(e,!this.isNotSetContent()),!0===t&&this.trigger("view-mode-change",e),!0===n&&this.trigger("yne-view-mode-change",e),this.controller.resizeSpecialBlock()},t.prototype.undo=function(){return this.controller.undo()},t.prototype.updateBackground=function(e){var t=this.currentBackground;this.updateContainerBackground(e)&&(t||(t=i.DEFAULT_BACKGROUND),this.trigger("yne-background-changed",t,e))},t.prototype.updateEditorProps=function(e){null==this.editorProps&&(this.editorProps={}),n.extend(this.editorProps,e),n.extend(this.options,e)},t.prototype.updateNoteViewVisibility=function(e){e?this.noteView.$el.css("visibility","visible"):this.noteView.$el.css("visibility","hidden")},t.prototype.setInputType=function(e){this.controller.setInputType(e)},t.prototype.getInputType=function(){return this.controller.getInputType()},t.prototype.getOutputType=function(e){return this.hasHandWriteBlock()?"html":this.controller.getOutputType(e)},t.prototype.setDataFixed=function(e){this.controller.setDataFixed(e)},t.prototype.isDataFixed=function(){return this.controller.isDataFixed()},t.prototype.initialize=function(e){var t=this;this.clientId=o.newGUID(),this.notSetContent=!0,this.bindEventsForController(),this.on("background-failed-update",function(e,n){null!=n&&t.updateContainerBackground(n),0===e&&t.trigger("yne-background-failed-update",e)}),this.contentChanged=!1,this.contentLoading=!1},t.prototype.makeReadOnly=function(e){this.controller.setReadOnly(e),c.IS_PC?e?this.toolbar.toggleToolbar(!1):this.toolbar.toggleToolbar(!0):e?this.toolbar.disable():this.toolbar.enable()},t.prototype.bindEventsForController=function(){var e=this,t=this.controller;t.on("command-exec",function(t,n){t&&t.name?t&&t.effected?(e.contentChanged=!0,e.trigger("yne-content-change")):p.warn("The command has no effected",t):p.error("The command is not valid",t)}),l.bubble(["redo-stack-change","undo-stack-change","selectstart","mouse-down","command-exec","esc","yne-clipboard-status","yne-clipboard-error","yne-get-clipboard","yne-clipboard-set","color-picker-show","yne-user-action-collection","cell-edit-view-enter","cell-edit-view-exit","cell-edit-view-history-change"],t,this)},t.prototype.updateContentSetProgress=function(e){!0===this.contentLoading&&(e.isAsync&&this.progressTracker.updateContentSetProgress(e),n.isNumber(e.percent)&&e.percent>=1&&(this.isLegacyHost()&&!this.noteProps.isReadOnly&&this.makeReadOnly(!1),this.contentLoading=!1))},t.prototype.getTableOnCellEdit=function(e){var t;if(e&&e.isSingleTableSelected())return(t=e.getStartBlockRange())&&t.isOnCellEdit&&t.isOnCellEdit()?t.block:void 0},t}(d)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},,function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(6),r=n(19),a=n(38),s=n(109),l=[["r","g","b"],["h","s","v"],["h","s","l"]],c=[[255,255,255],[360,100,100],[360,100,100]];return t.View.extend({className:"color-picker",name:"colorpicker",label:"选色器",templateName:"color_picker",events:{mousedown:"onMouseDown","mousedown .color-picker-panel":"onPanelMouseDown","mousedown .color-picker-panel-board":"onBoardMousedown","mousedown .color-picker-panel-alpha":"onAlphaMousedown","mousedown .color-picker-panel-ribbon":"onRibbonMousedown","click .color-picker-panel-params-lable-number":"onParamsLabelClick"},initialize:function(e){this.editor=e.editor,this.render(),this.hidePicker(),this.mode=0,o.bindAll(this,"onDocumentMouseDown","onBoardMousedown","onBoardDrag","onBoardDragEnd","onAlphaMousedown","onAlphaDrag","onAlphaDragEnd","onRibbonMousedown","onRibbonDrag","onRibbonDragEnd","onParamsLabelClick"),this.on("color-picker-show",this.showPicker),i(document).on("mousedown",this.onDocumentMouseDown)},render:function(){var e,t=this.$el;e=r.render("common",this.templateName),t.html(e),this.panel=t.find(".color-picker-panel")[0],this.board=t.find(".color-picker-panel-board")[0],this.boardBg=i(this.board).find(".color-picker-panel-board-hsv"),this.ribbon=t.find(".color-picker-panel-ribbon")[0],this.alpha=t.find(".color-picker-panel-alpha")[0],this.preview=t.find(".color-picker-panel-preview")[0],this.inputs=t.find(".color-picker-panel-params-input"),this.inputHex=i(this.inputs).find("input")[0],this.inputR=i(this.inputs).find("input")[1],this.inputG=i(this.inputs).find("input")[2],this.inputB=i(this.inputs).find("input")[3],this.inputA=i(this.inputs).find("input")[4],this.labelR=t.find(".color-picker-panel-params-lable-number")[0],this.labelG=t.find(".color-picker-panel-params-lable-number")[1],this.labelB=t.find(".color-picker-panel-params-lable-number")[2],this.bindEvents()},bindEvents:function(){o.bindAll(this,"onHexChange","onRedChange","onGreenChange","onBlueChange","onAlphaChange","updateInputHex","updateInputR","updateInputG","updateInputB","updateInputA","onKeyDown","onLastInputKeyDown"),i(this.inputHex).on("input propertychange",this.onHexChange),i(this.inputHex).on("blur",this.updateInputHex),i(this.inputHex).on("keydown",this.onKeyDown),i(this.inputR).on("input propertychange",this.onRedChange),i(this.inputR).on("blur",this.updateInputR),i(this.inputR).on("keydown",this.onKeyDown),i(this.inputG).on("input propertychange",this.onGreenChange),i(this.inputG).on("blur",this.updateInputG),i(this.inputG).on("keydown",this.onKeyDown),i(this.inputB).on("input propertychange",this.onBlueChange),i(this.inputB).on("blur",this.updateInputB),i(this.inputB).on("keydown",this.onKeyDown),i(this.inputA).on("input propertychange",this.onAlphaChange),i(this.inputA).on("blur",this.updateInputA),i(this.inputA).on("keydown",this.onLastInputKeyDown)},showPicker:function(e){var t=this.solidColor(e.selectedValue);t.isValid()||(t=this.solidColor(e.value)),t.isValid()||(t=a("#393939")),this.color=t,this.mode=0,this.item=e,this.$el.show(),this.updateUI()},solidColor:function(e){var t=a(e),n=t.toRgb();return 0===n.r&&0===n.g&&0===n.b&&0===n.a&&t.setAlpha(1),t},hidePicker:function(){var e;this.removeWindowListeners(),this.$el.hide(),this.item&&(e=this.color.toRgbString(),this.item.changeValue(e),this.item=null)},removeWindowListeners:function(){i(window).off("mousemove",this.onBoardDrag),i(window).off("mouseup",this.onBoardDragEnd),i(window).off("mousemove",this.onAlphaDrag),i(window).off("mouseup",this.onAlphaDragEnd),i(window).off("mousemove",this.onRibbonDrag),i(window).off("mouseup",this.onRibbonDragEnd)},onDocumentMouseDown:function(){this.hidePicker()},onMouseDown:function(e){this.hidePicker(),e.stopPropagation(),e.preventDefault()},onPanelMouseDown:function(e){e.stopPropagation()},onBoardMousedown:function(e){this.onBoardDrag(e),this.removeWindowListeners(),i(window).on("mousemove",this.onBoardDrag),i(window).on("mouseup",this.onBoardDragEnd)},onBoardDrag:function(e){var t=e.clientX,n=e.clientY;e.preventDefault(),this.pointMoveTo({x:t,y:n})},onBoardDragEnd:function(e){this.onBoardDrag(e),this.removeWindowListeners()},pointMoveTo:function(e){var t,n,o=this.board.getBoundingClientRect(),r=e.x-o.left,s=e.y-o.top,l=this.color.toHsv(),c=i(this.boardBg).css("background-color"),u=l.h;(t=a(c)).isValid()&&(u=t.toHsv().h),r=Math.max(0,r),r=Math.min(r,200),s=Math.max(0,s),s=Math.min(s,150),(n=a.fromRatio({h:u/360,s:r/200,v:1-s/150,a:l.a})).isValid()&&(this.color=n,this.updateBoardPoint(r-4,s-4),this.updatePreview(),this.updateAlpha(),this.updateInputHex(),this.updateInputG(),this.updateInputB(),this.updateInputR())},onAlphaMousedown:function(e){this.onAlphaDrag(e),this.removeWindowListeners(),i(window).on("mousemove",this.onAlphaDrag),i(window).on("mouseup",this.onAlphaDragEnd)},onAlphaDrag:function(e){var t=e.clientX,n=e.clientY;e.preventDefault(),this.alphaMoveTo({x:t,y:n})},onAlphaDragEnd:function(e){this.onAlphaDrag(e),this.removeWindowListeners()},alphaMoveTo:function(e){var t,n=this.alpha.getBoundingClientRect(),o=n.width,i=e.x-n.left;i=Math.max(0,i),t=(i=Math.min(i,o))/o,this.color.setAlpha(t),this.updateAlpha(100*t),this.updatePreview(),this.updateInputA()},onRibbonMousedown:function(e){this.onRibbonDrag(e),this.removeWindowListeners(),i(window).on("mousemove",this.onRibbonDrag),i(window).on("mouseup",this.onRibbonDragEnd)},onRibbonDrag:function(e){var t=e.clientX,n=e.clientY;e.preventDefault(),this.ribbonMoveTo({x:t,y:n})},onRibbonDragEnd:function(e){this.onRibbonDrag(e),this.removeWindowListeners()},ribbonMoveTo:function(e){var t,n,o=this.ribbon.getBoundingClientRect(),i=o.width,r=e.x-o.left,s=this.color.toHsv();r=Math.max(0,r),t=(r=Math.min(r,i))/i,(n=a.fromRatio({h:t,s:s.s,v:s.v,a:s.a})).isValid()&&(this.color=n,this.updateRibbon(100*t),this.updateBoardBg(360*t),this.updatePreview(),this.updateAlpha(),this.updateInputHex(),this.updateInputR(),0===this.mode&&(this.updateInputG(),this.updateInputB()))},onHexChange:function(){var e,t=i(this.inputHex).val();t.length>0&&t.length<6&&(t=t.concat("0".repeat(6-t.length))),(e=a(t)).isValid()&&(e.setAlpha(this.color.getAlpha()),this.color=e,this.updateOnHexChange())},updateOnHexChange:function(){this.updateBoardPoint(),this.updateBoardBg(),this.updatePreview(),this.updateAlpha(),this.updateRibbon(),this.updateInputR(),this.updateInputG(),this.updateInputB()},onRedChange:function(){var e=i(this.inputR).val(),t=this.mode,n=this.color.toHsv(),r=this.color.toRgb(),s=this.color.toHsl();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>c[t][0]||(this.color=1===t?a.fromRatio({h:e/360,s:n.s,v:n.v,a:n.a}):2===t?a.fromRatio({h:e/360,s:s.s,l:s.l,a:s.a}):a({r:e,g:r.g,b:r.b,a:r.a}),this.updateOnRedChange()))},updateOnRedChange:function(){0===this.mode&&this.updateBoardPoint(),this.updateBoardBg(),this.updatePreview(),this.updateAlpha(),this.updateRibbon(),this.updateInputHex()},onGreenChange:function(){var e=i(this.inputG).val(),t=this.mode,n=this.color.toHsv(),r=this.color.toRgb(),s=this.color.toHsl();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>c[t][1]||(this.color=1===t?a.fromRatio({h:n.h,s:e/100,v:n.v,a:n.a}):2===t?a.fromRatio({h:s.h,s:e/100,l:s.l,a:s.a}):a({r:r.r,g:e,b:r.b,a:r.a}),this.updateOnGreenChange()))},updateOnGreenChange:function(){this.updateBoardPoint(),0===this.mode&&(this.updateBoardBg(),this.updateRibbon()),this.updatePreview(),this.updateAlpha(),this.updateInputHex()},onBlueChange:function(){var e=i(this.inputB).val(),t=this.mode,n=this.color.toHsv(),r=this.color.toRgb(),s=this.color.toHsl();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>c[t][2]||(this.color=1===t?a.fromRatio({h:n.h,s:n.s,v:e/100,a:n.a}):2===t?a.fromRatio({h:s.h,s:s.s,l:e/100,a:s.a}):a({r:r.r,g:r.g,b:e,a:r.a}),this.updateOnBlueChange()))},updateOnBlueChange:function(){this.updateBoardPoint(),0===this.mode&&(this.updateBoardBg(),this.updateRibbon()),this.updatePreview(),this.updateAlpha(),this.updateInputHex()},onAlphaChange:function(){var e=i(this.inputA).val();e=parseInt(e),o.isNumber(e)&&!o.isNaN(e)&&(e<0||e>100||(this.color.setAlpha(e/100),this.updateOnAlphaChange()))},updateOnAlphaChange:function(){this.updatePreview(),this.updateAlpha()},onParamsLabelClick:function(){var e=this.mode;e+=1,e%=3,this.mode=e,this.updateInputR(),this.updateInputB(),this.updateInputG()},onKeyDown:function(e){s.isMatch("enter",e.keyCode)&&(e.stopPropagation(),e.preventDefault(),this.hidePicker(),this.editor.focus())},onLastInputKeyDown:function(e){(s.isMatch("enter",e.keyCode)||s.isMatch("tab",e.keyCode))&&(e.stopPropagation(),e.preventDefault(),this.hidePicker(),this.editor.focus())},inputValue:function(e,t){var n,o=this.color,i=o.toRgb(),r=o.toHsv(),a=o.toHsl(),s=1;switch(e){case 0:n=i;break;case 1:n=r;break;case 2:n=a;break;default:n=i}return(0===e||1!==t&&2!==t)&&3!==t||(s=100),Math.round(n[l[e][t]]*s)},updateInputHex:function(){var e=this.color;i(this.inputHex).val(e.toHex().toUpperCase())},updateInputR:function(){var e=this.mode;i(this.labelR).text(l[e][0].toUpperCase()),i(this.inputR).val(this.inputValue(e,0))},updateInputG:function(){var e=this.mode;i(this.labelG).text(l[e][1].toUpperCase()),i(this.inputG).val(this.inputValue(e,1))},updateInputB:function(){var e=this.mode;i(this.labelB).text(l[e][2].toUpperCase()),i(this.inputB).val(this.inputValue(e,2))},updateInputA:function(){var e=this.color.getAlpha();i(this.inputA).val(Math.round(100*e))},updateBoardBg:function(e){var t,n=this.color.toHsv(),o=this.boardBg;e>=0&&e<=360||(e=n.h),t=a.fromRatio({h:e/360,s:1,v:1}),o.css("background-color",t.toHexString())},updateBoardPoint:function(e,t){var n=this.color.toHsv(),o=i(this.board).find("span");e>=0&&e<=200||(e=200*n.s-4),t>=0&&t<=150||(t=150*(1-n.v)-4),o.css("left",e+"px"),o.css("top",t+"px")},updatePreview:function(){var e=this.color,t=e.getAlpha(),n=i(this.preview).find("span");n.css("background-color",e.toHexString()),n.css("opacity",t)},updateAlpha:function(e){var t,n=this.color.toRgb(),o=i(this.alpha).find(".color-picker-panel-alpha-bg"),r=i(this.alpha).find("span");e>=0&&e<=100||(e=100*n.a),t="linear-gradient(to right, "+a({r:n.r,g:n.g,b:n.b,a:0}).toRgbString()+", "+a({r:n.r,g:n.g,b:n.b,a:1}).toRgbString()+")",o.css("background",t),r.css("left",e+"%")},updateRibbon:function(e){var t=this.color.toHsv().h,n=i(this.ribbon).find("span");e>=0&&e<=100||(e=Math.round(t/360*100)),n.css("left",e+"%")},updateUI:function(){this.updateBoardBg(),this.updateBoardPoint(),this.updatePreview(),this.updateAlpha(),this.updateRibbon(),this.updateInputHex(),this.updateInputA(),this.updateInputR(),this.updateInputB(),this.updateInputG(),this.updateInputHex()},reset:function(){this.$el.hide()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(19),o=n(27),i=n(0),r=n(109),a=n(11),s=n(1),l=n(357),c=function(){};return o.View.extend({className:"image-title-input-wrapper",name:"ImageTitleInputView",events:{"keydown .image-title-input":"_onKeyDown","paste .image-title-input":"_onPaste","input .image-title-input":"_onInput"},zoom:1,initialize:function(e){this.editor=e.editor,i.bindAll(this,"_onEditStart","_onEditEnd","_onKeyDown","_onExit","_onUpdate","_getPosition","_onPaste","_show","_hide","_onInput","_handlerPlaceholder","_onLockedChange"),this.on("img-title-edit-start",this._onEditStart),this.on("img-title-edit-end",this._onEditEnd),this.on("img-title-edit-focus",this._onFocus),this.on("img-title-edit-exit",this._onExit),this.on("img-title-edit-update",this._onUpdate),this.on("locked-change",this._onLockedChange),this._callback=c},render:function(){var e=t.render("common","image-title-input",{title:""});this.$el.html(e)},_getPosition:function(e){var t=this.editor.getNoteViewWrapper(),n=a.IS_PC?this.editor.getNoteViewFrame():this.editor.noteView.$el,o=n.offset(),i=parseInt(n.css("margin-top"));e.left=e.left-t.offset().left+t.scrollLeft(),e.top=e.top-o.top+i},_show:function(){var e=this._origialNode;this.$el.show(),e&&e.css("color","transparent")},_hide:function(){var e=this._origialNode;e&&(e.css("color",""),e.css("height","auto")),this.$el.hide()},_onEditStart:function(e,n,o,r,a){var s,l=this,u=n();l.getOffset=n,l._getPosition(u),l._callback!==c&&l._onEditEnd(),e||(e=""),s=t.render("common","image-title-input",i.defaults({title:e},u)),l.$el.html(s),l.$input=this.$el.find(".image-title-input"),l.$placeholder=this.$el.find(".image-title-placeholder"),l.$input.on("blur",function(){l._handlerPlaceholder(),l._onEditEnd()}).on("focus",function(){l._handlerPlaceholder(),l.editor.controller.lockBlockById(a)}),l._callback=o||c,l._origialNode=r,l._handlerPlaceholder(),e&&l._show(),l.$placeholder.click(function(){l.$input.focus()})},_onEditEnd:function(e,t){if(this.$input&&this.$input.is(":visible")){var n=this.$input.text();this._callback(n,e,t,this.$el.is(":visible"))}},_onKeyDown:function(e){if(this.$input.is(":visible")&&r.isMatch("enter",e.keyCode)&&i.isFunction(this._onEditEnd))return e.preventDefault(),this._onEditEnd(!0,this.editor.controller.getNextCaretBlockRange()),void this._onExit();(e.ctrlKey||e.metaKey)&&["B","b","U","u","I","i"].forEach(function(t){r.isMatch(t,e.keyCode)&&e.preventDefault()})},_onFocus:function(){var e=this.$input;e&&e.is(":visible")||this._show(),e.focus()},_onExit:function(){this._hide(),this._callback=c},_onUpdate:function(e){var t=e();this.getOffset=e,this._getPosition(t),this.$input.css({left:t.left,top:t.top,width:t.width+"px","min-height":t.height+"px"}),this.$placeholder.css({left:t.left,top:t.top,width:t.width+"px"})},_handlerPlaceholder:function(){this.$input.text()?this.$placeholder.hide():this.$placeholder.show()},setZoom:function(e){this.zoom=e,this.$el.css("zoom",this.zoom)},_transferString:function(e){var t=e;try{t=(t=t.replace(/\r\n/g," ")).replace(/\n/g," ")}catch(e){s.log("replace image title line break failed!")}return t},_onPaste:function(e){var t,n,o=e.originalEvent;e.preventDefault(),o.clipboardData&&o.clipboardData.getData?(t=o.clipboardData.getData("text/plain"),n=this._transferString(t),document.execCommand("insertHTML",!1,n)):window.clipboardData&&window.clipboardData.getData&&(t=window.clipboardData.getData("Text"),l(t))},_onInput:function(){var e=this.$input.height();e!==this._origialNode.height()&&this._origialNode.height(e),this._handlerPlaceholder()},_onLockedChange:function(){this.getOffset&&this._onUpdate(this.getOffset)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(6),r=n(19),a=n(109),s=n(11),l=n(3),c=n(91),u=n(22);return t.View.extend({className:"link-view",templateName:"link_view",zoom:1,events:{"click .link-confirm-button":"onConfirmButtonClick","click .link-modify-button":"onModifyButtonClick","click .link-remove-button":"onRemoveButtonClick","keydown .link-input":"onKeyDown",mousedown:"onMouseDown",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},initialize:function(e){this.editor=e.editor,this.on("link-menu-show",this.timeoutToShowMenu),this.on("link-menu-hide",this.timeoutToHideMenu),this.bindDocumentEvents(),this.modifyMode=!1,this.on("locked-change",this.recalPosition),i(window).on("resize",this.recalPosition.bind(this))},render:function(){var e,t=this.$el;e=r.render("common",this.templateName,{link:c.safeHref(this.link),isReadOnly:this.editor.isReadOnly()}),t.html(e),this.menuPreviewLink=t.find(".hover-menu-show-link"),this.menuModifyLink=t.find(".hover-menu-modify-link"),this.input=t.find(".link-input"),this.hideModifyMenu()},bindDocumentEvents:function(){o.bindAll(this,"onDocumentMouseDown"),i(document).on("mousedown",this.onDocumentMouseDown)},onKeyDown:function(e){e.stopPropagation(),a.isMatch("enter",e.keyCode)&&(e.preventDefault(),this.onConfirmButtonClick())},onDocumentMouseDown:function(){this.fadeOutMenu()},onMouseDown:function(e){e.stopPropagation()},onConfirmButtonClick:function(){var e=this.range,t=c.safeHref(i(this.input).val());t!==this.link?(window.focus(),t&&this.editor.execCommand("comp.InsertLink",{src:t,range:e}),this.fadeOutMenu()):this.fadeOutMenu()},onRemoveButtonClick:function(){var e=this.range;l.isCatalogue(this.block)?this.editor.execCommand("atom.SetCatalogueHref",{range:e,block:this.block,href:null}):this.editor.execCommand("comp.ApplyStyles",{range:e,inlineStyles:{href:"",color:"#393939",underline:!1}}),this.fadeOutMenu()},onModifyButtonClick:function(){this.hidePreviewMenu(),this.showModifyMenu()},showMenu:function(e){var t=e.range.clone(),n=e.linkNode.href;if(l.isCatalogue(e.block)&&(n=e.block.getViewHref()),!this.modifyMode&&n){var o=new RegExp("^note://");n.match(o)||(this.hideTimerId&&(clearTimeout(this.hideTimerId),this.hideTimerId=null),this.link&&this.hideMenu(),this.linkNode=e.linkNode,this.link=n,this.block=e.block,this.blockId=e.block.getId(),this.range=new u({startRange:t,endRange:t}),this.render(),this.showPreviewMenu())}},recalPosition:function(){this.link&&this.modifyMode&&this.setPosition()},setPosition:function(){var e,t,n,r,a,l,c,u,d,p,h=this.linkNode,f=this.editor.noteView,g=this.editor.getNoteViewWrapper(),y=this.editor.getNoteViewWrapper(),m=s.IS_PC?this.editor.getNoteViewFrame().offset():this.editor.noteView.$el.offset();(e=i(h).offset()).left=e.left-y.offset().left+y.scrollLeft()/this.zoom,e.top=e.top-m.top,t=e.top+i(h).outerHeight(),n=e.left+i(h).outerWidth()/2,l=e.left,p=this.$el.find(".hover-menu-before"),a=i(p[0]).outerWidth()/2,c=t+i(p[0]).outerHeight(),n-l-a<15&&(l=n-15-a),u=this.modifyMode?this.$el.find(".hover-menu-modify-link .hover-menu-body").outerWidth():this.$el.find(".hover-menu-show-link .hover-menu-body").outerWidth(),d=f.$el.outerWidth()-30,g.hasClass("read-mode")&&(d+=parseInt(g.find(".note-view-frame").css("margin-left"))),l+u>d&&(l=d-u),r=n-l-a,i(h).outerHeight()>parseFloat(i(h).css("line-height"))&&(l=e.left-15-a,r=15),this.$el.css("left",l),this.$el.css("top",c),o.each(p,function(e){i(e).css("left",r)})},setZoom:function(e){this.zoom=e,this.$el.css("zoom",this.zoom)},showPreviewMenu:function(){var e=this.menuPreviewLink;this.setPosition(),i(e).show()},hidePreviewMenu:function(){var e=this.menuPreviewLink;i(e).hide()},fadeOutPreviewMenu:function(){var e=this.menuPreviewLink;i(e).fadeOut()},showModifyMenu:function(){var e=this.menuModifyLink;this.modifyMode=!0,this.editor.controller.lockBlockById(this.blockId),this.setPosition(),i(e).show()},hideModifyMenu:function(){var e=this.menuModifyLink;i(e).hide(),this.modifyMode=!1},fadeOutModifyMenu:function(){var e=this.menuModifyLink;i(e).fadeOut(),this.modifyMode=!1},hideMenu:function(){this.stay||(this.hideModifyMenu(),this.hidePreviewMenu(),this.link=null)},fadeOutMenu:function(){this.fadeOutModifyMenu(),this.fadeOutPreviewMenu(),this.link=null,this.range=null,this.linkNode=null,this.hideTimerId=null,this.blockId=null,this.block=null,this.showTimerId&&(clearTimeout(this.showTimerId),this.showTimerId=null)},onMouseEnter:function(e){e.stopPropagation(),this.hideTimerId&&(clearTimeout(this.hideTimerId),this.hideTimerId=null)},onMouseLeave:function(){this.trigger("link-menu-hide")},timeoutToHideMenu:function(){var e=this;e.modifyMode||e.hideTimerId||(e.hideTimerId=setTimeout(function(){e.fadeOutMenu()},100))},timeoutToShowMenu:function(e){var t=this;t.showTimerId||(t.showTimerId=setTimeout(function(){t.showMenu(e)},500))}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(652),n(653),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(672),n(673),n(674),n(675),n(676),n(677),n(680),n(681),n(682),n(683),n(684),n(685),n(686),n(687)],void 0===(i=function(e,t,n,o,i,r,a,s,l,c,u,d,p,h,f,g,y,m,v,b,_,I,k,w,C,S,x,A,T,N,E,D,M,O,L){return[L,D,c,M,c,i,n,T,E,N,c,r,x,k,w,C,c,_,c,l,s,a,c,I,S,c,O,c,A,o,c,b,y,g,d,c,h,f,u,c,p,m,v]}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(11),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=e.target,o=n.ownerDocument;t.isRangeCollapsed?this.isDisabled=!0:(this.targetEl=n,this.doc=o)},t.prototype.selectAction=function(){var e,t,o,i=this.doc,r=this.editor,a=this.targetEl;if((e=r.getNoteRange()).isSingleTableSelected()&&(t=e.getStartBlockRange().block,a=r.getController().noteView.getBlockViewByBlock(t).getHiddenInputView()),a.focus(),n.IS_MAC)r.callMacNativeApi("menuCopy");else{try{o=i.execCommand("copy")}catch(e){o=!1}o||r.trigger("yne-clipboard-error","copy",function(){r.focus()})}},t.prototype.reset=function(){e.prototype.reset.call(this),this.doc=null,this.targetEl=null},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="copy",this.label="复制",this.key="mod+c"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!t.isImgAttachBlock&&!t.tableInfo},t.prototype.selectAction=function(){var e=this.editor,t=this.editor.countWords(!0),n=t.count,o=t.isSelected,i=t.detail;e.trigger("yne-show-words",n,o,i)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="countWords",this.label="统计字数"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(11),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=e.target,o=n.ownerDocument;t.isRangeCollapsed?this.isDisabled=!0:(this.doc=o,this.targetEl=n)},t.prototype.selectAction=function(){var e,t,o,i=this.doc,r=this.editor,a=this.targetEl;if((e=r.getNoteRange()).isSingleTableSelected()&&(t=e.getStartBlockRange().block,a=r.getController().noteView.getBlockViewByBlock(t).getHiddenInputView()),a.focus(),n.IS_MAC)r.callMacNativeApi("menuCut");else{try{o=i.execCommand("cut")}catch(e){o=!1}o||r.trigger("yne-clipboard-error","cut",function(){r.focus()})}},t.prototype.reset=function(){e.prototype.reset.call(this),this.doc=null,this.targetEl=null},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="cut",this.label="剪切",this.key="mod+x"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return this.block=t.imgBlock,!!t.imgBlock},t.prototype.selectAction=function(){this.block&&this.block.trigger("edit-image-title")},t.prototype.reset=function(){e.prototype.reset.call(this),this.block=null},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="imageTitle",this.label="标题"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(358),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this.editor.getNoteProps(),o=n&&!!n.disableOCR;return this.imgBlock=t.imgBlock,!o&&null!=this.imgBlock},t.prototype.selectAction=function(){if(null!=this.imgBlock){var e=n(this.imgBlock);this.editor.imageOCR(e)}},t.prototype.reset=function(){e.prototype.reset.call(this),this.imgBlock=null},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="recogOCR",this.label="文本识别OCR"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this.editor.canRemoveFormat()&&!t.isImgAttachBlock&&!t.tableInfo;return this.isDisabled=!n,!t.tableInfo&&!t.isImgAttachBlock},t.prototype.selectAction=function(){this.editor.execCommand("comp.RemoveFormat",{inlineStyles:this.editor.getDefaultStyle()})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="removeFormat",this.label="清除格式"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!t.isImgAttachBlock&&!t.tableInfo},t.prototype.selectAction=function(){this.editor.selectAll()},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="selectAll",this.label="全选"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){},t.prototype.selectAction=function(){},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="split",this.label="---",this.type=n.TYPE.SPLIT},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteTableRowCol",{describe:{col:!0}})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="deleteCol",this.label="删除整列"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteTableRowCol",{describe:{row:!0}})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="deleteRow",this.label="删除整行"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteNoteRange",{isTableDelete:!0})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="deleteTable",this.label="删除整个表格"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(102),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{col:n.LEFT}})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="insertColLeft",this.label="在左侧插入列"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(102),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{col:n.RIGHT}})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="insertColRight",this.label="在右侧插入列"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(102),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{row:n.DOWN}})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="insertRowDown",this.label="在下方插入行"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(102),n(13)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo},t.prototype.selectAction=function(){this.editor.execCommand("comp.InsertTableRowCol",{describe:{row:n.UP}})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="insertRowUp",this.label="在上方插入行"},t}(o))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.isCodeBlock},t.prototype.selectAction=function(){this.editor.execCommand("comp.DeleteNoteRange",{isCodeDelete:!0})},t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="deleteCode",this.label="删除代码块"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this.editor;this.noteRange=n.getNoteRange();var o=this.noteRange.getStartBlockRange().block;return this.noteView=n.getController().noteView,this.blockView=this.noteView.getBlockViewByBlock(o),!!t.isCodeBlock},t.prototype.selectAction=function(){this.blockView.onSetRange(this.noteRange.getStartBlockRange())},t.prototype.reset=function(){e.prototype.reset.call(this),this.noteRange=null},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="selectCode",this.label="选中代码块"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return!!t.tableInfo&&(t.tableInfo.onlyMergePointAndCell?(this.label="拆分单元格",!0):!1===t.tableInfo.onlyOneCell&&(this.label="合并单元格",!0))},t.prototype.selectAction=function(){this.editor.execCommand("comp.ToggleMergeTableCell",{})},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="mergeCell",this.label="合并单元格"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(671),n(0)],void 0===(i=function(e,t,n,o){return function(){var e={left:"左浮动",none:"清除浮动",right:"右浮动"};return o.map(["left","right","none"],function(t){return new n({float:t,label:e[t],name:"attachmentFloat-"+t})})}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(41),n(22),n(13)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){return t&&t.attachmentBlock&&(this.attachmentBlock=t.attachmentBlock),!!this.attachmentBlock},t.prototype.reset=function(){this.attachmentBlock=null,e.prototype.reset.call(this)},t.prototype.selectAction=function(){var e,t,i=this.editor,r=this.attachmentBlock,a=this.float;i&&r&&-1!==["left","right","none"].indexOf(a)&&(e=n.createRangeByBlock({block:r}),t=new o({endRange:e,startRange:e}),i.execCommand("comp.ApplyStyles",{blockStyles:{float:a},range:t}),this.attachmentBlock=null)},t.prototype.initialize=function(t){t=t||{percent:100},e.prototype.initialize.call(this,t),this.float=t.float},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13),n(60)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n,i=t.tableInfo;this.editor&&t&&(t.attachmentBlock||i&&i.type===o.ATTACHMENT)?(n=i?i.cell.getContent():t.attachmentBlock,this.resource=n.getResource(),this.fileName=n.getFileName()):this.isHidden=this.isDisabled=!0},t.prototype.selectAction=function(){this.resource&&this.editor.trigger("yne-download-attachment",this.resource,this.fileName)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="attachmentSaveAs",this.label="另存为"},t}(n))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13),n(41),n(22)],void 0===(i=function(e,t,n,o,i){var r=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){this.editor&&t&&t.imgBlock?this.imgBlock=t.imgBlock:this.isHidden=this.isDisabled=!0},t.prototype.selectAction=function(){var e,t,n=this.imgBlock;this.editor&&n&&(e=o.createRangeByBlock({block:n}),t=new i({endRange:e,startRange:e}),this.editor.execCommand("comp.ApplyStyles",{blockStyles:{width:null},range:t}),this.imgBlock=null)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="imageClearZoom",this.label="清除缩放"},t}(n))({});return function(){return r}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(359)],void 0===(i=function(e,t,n){return function(){return new n({direction:0,label:"向左转",name:"imageLeftRotation"})}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(359)],void 0===(i=function(e,t,n){return function(){return new n({direction:1,label:"向右转",name:"imageRightRotation"})}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13),n(60)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n,i=t.tableInfo;if(this.editor&&t&&(t.imgBlock||i&&i.type===o.IMAGE)){if(i)return n=i.cell.getContent(),void(this.imgSrc=n.getSource(this.editor.getExtraInfo("pcResMap")));n=t.imgBlock,this.imgSrc=n.getSource(!0)}else this.isHidden=this.isDisabled=!0},t.prototype.selectAction=function(){this.imgSrc&&this.editor.trigger("yne-download-image",this.imgSrc),this.imgSrc=null},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="imageSaveAs",this.label="另存为"},t}(n))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(13),n(678)],void 0===(i=function(e,t,n,o,i){var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){this.editor&&t&&t.imgBlock||(this.isHidden=this.isDisabled=!0)},t.prototype.selectAction=function(){},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="imageZoom",this.label="图片缩放",this.type=o.TYPE.SUBMENU},t}(o);return function(){var e=n.map([10,25,50,75,100,125,150,200],function(e){return new i({label:e+"%",name:"imageZoom-"+e+"%",percent:e})});return new r({items:e})}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(41),n(22),n(679),n(13)],void 0===(i=function(e,t,n,o,i,r,a){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){t&&t.imgBlock&&(this.imgBlock=t.imgBlock)},t.prototype.reset=function(){e.prototype.reset.call(this),this.imgBlock=null},t.prototype.selectAction=function(){var e=this,t=e.editor,n=e.imgBlock;t&&n&&r.get(n.getSource(!0),function(r){var a,s,l,c;r&&r.width&&(a=Math.round(r.width*e.percent/100),null!=r.height&&(s=Math.round(r.height*e.percent/100)),l=o.createRangeByBlock({block:n}),c=new i({endRange:l,startRange:l}),t.execCommand("comp.ApplyStyles",{blockStyles:{height:s,width:a},range:c})),e.imgBlock=null},!0)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),t=n.defaults(t,{percent:100}),this.percent=t.percent},t.prototype.resetStatus=function(){e.prototype.resetStatus.call(this),this.imgBlock=null},t}(a)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return function(){function e(){}return e.clearCache=function(t){t?delete e.sizeCache[t]:e.sizeCache={}},e.get=function(t,n,o){var i;o||e.clearCache(t),(i=e.sizeCache[t])&&n(i),e.downloadImg(t,n)},e.downloadImg=function(t,n){var o=new Image;o.onload=function(){var i={height:o.height,width:o.width};o.onload=o.onerror=o.onabort=null,o=null,e.sizeCache[t]=i,n(i)},o.onerror=o.onabort=function(){o.onload=o.onerror=o.onabort=null,o=null,n()},o.src=t},e.sizeCache={},e}()}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13),n(3)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this.editor.getNoteRange(),i=[o.PARAGRAPH,o.LIST_ITEM,o.ATTACHMENT,o.IMAGE];n&&n.isMatchBlockTypes(this.editor.getNote(),i)||(this.isDisabled=!0)},t.prototype.selectAction=function(){},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="insertDate",this.label="插入当前时间",this.keyHandlerName="insertDate"},t}(n))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this;this.editor.trigger("yne-clipboard-status",function(e,t){n.isDisabled=!e,n.isHidden=t})},t.prototype.selectAction=function(){this.editor.trigger("yne-require-paste",!1,!1)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="paste",this.label="粘贴",this.key="mod+v"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this;n.isHidden=!1,n.editor.trigger("yne-clipboard-status",function(e){n.isDisabled=!e})},t.prototype.selectAction=function(){this.editor.trigger("yne-require-paste",!1,!0)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="pasteAsText",this.label="纯文本粘贴",this.key="mod+shift+v"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=this;n.editor.trigger("yne-clipboard-status",function(e,t){n.isDisabled=n.isHidden=!t})},t.prototype.selectAction=function(){this.editor.trigger("yne-require-paste",!0,!1)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="pasteNoteLink",this.label="粘贴引用链接",this.key="mod+v"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){this.isDisabled=!this.editor.canRedo()},t.prototype.selectAction=function(){},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="redo",this.label="重做",this.keyHandlerName="redo"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13),n(131)],void 0===(i=function(e,t,n,o){var i=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){var n=t.hrefInfo;if(this.hrefInfo=null,!n||!o.isNoteLinkUrl(n.href))return!1;this.hrefInfo=n},t.prototype.selectAction=function(){this.hrefInfo&&(this.editor.execCommand("comp.ApplyStyles",{inlineStyles:{color:"#393939",href:"",underline:!1},range:this.hrefInfo.noteRange}),this.hrefInfo=null)},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="removeNoteLink",this.label="清除引用链接"},t}(n))({});return function(){return i}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){},t.prototype.selectAction=function(){this.editor.trigger("yne-share-note")},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="share",this.label="分享链接"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(13)],void 0===(i=function(e,t,n){var o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.queryAction=function(e,t){this.isDisabled=!this.editor.canUndo()},t.prototype.selectAction=function(){},t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.name="undo",this.label="撤销",this.keyHandlerName="undo"},t}(n))({});return function(){return o}}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6),o=n(0),i=n(7),r=n(1),a=n(17),s=n(19),l=n(109),c=n(201),u=n(4),d=n(189),p=n(689),h=n(690),f=n(202);return a.extend({_contentDoc:null,_contentWin:null,initialize:function(e){var n,i,a;o.isUndefined(e.el)&&r.error("options.el is needed"),n=this.$el=t(e.el),i=s.render("pc","presenter_page",{}),n.hide().html(i),a=n.find("iframe")[0],this._contentDoc=a.contentDocument,this._contentWin=a.contentWindow,this._insertNoteCss(),this._bindEvents()},_insertNoteCss:function(){var e=t("head",this._contentDoc);e.append("<style>"+d+"</style>"),e.append("<style>"+p+"</style>"),e.append("<style>"+f+"</style>"),e.append("<style>"+h+"</style>")},_bindEvents:function(){var e=this,n=t("body",e._contentDoc);e.$el.find(".demo-mode-icon").on("click",e._onClick.bind(e)),n.delegate("a","click",function(n){var o,i,r=t(n.currentTarget);if((i=r.attr("href")).startsWith("file://")||i.startsWith("calculator://"))n.preventDefault();else{if("catalogue"===r.parent().attr("yne-bulb-block")&&/^#/.test(i)&&u.isGUID(i.replace(/^#/,""))){try{(o=n.currentTarget.ownerDocument.defaultView).location.hash=i,o.location.hash="#!"}catch(e){}return n.preventDefault(),void n.stopPropagation()}r.attr("target","_blank"),e.trigger("open-link",r[0].href)}}),n.delegate("img","click",function(n){var o=t(n.currentTarget);o.attr("path")?e.trigger("open-attachment",o.attr("path"),o.attr("filename")):t(document.activeElement).blur()}),n.on("keydown",e._escKeyHandler.bind(e)),t(document).on("keydown",e._escKeyHandler.bind(e))},_processAttachment:function(){var e=this,n=t("body",e._contentDoc);t('img[data-media-type="attachment"]',n).each(function(n,o){var i=t(o);c.processHtmlContent(i).click(function(){i.attr("path")?e.trigger("open-attachment",i.attr("path"),i.attr("filename")):t(document.activeElement).blur()})})},_processImage:function(){var e=t("body",this._contentDoc);t('img[data-media-type="image"]',e).each(function(e,n){var o,i=t(n);i.attr("alt")&&((o=document.createElement("div")).className="img-title",o.appendChild(document.createTextNode(i.attr("alt"))),i.after(o)),i.parent().css({"padding-top":"5px","padding-bottom":"5px"})})},_render:function(e,n){var o=t("body",this._contentDoc),i=s.render("pc","presenter_article",{content:n,title:e});o.empty().append(i),o.find("article").css("zoom",1.5)},_onClick:function(e){switch(t(e.target).data("action")){case"zoom-in":this.zoomIn();break;case"zoom-out":this.zoomOut();break;case"esc":this._exitFullscreen()}},_close:function(e){e&&this.exit()},enter:function(e,n,o){var r,a=document.documentElement,s=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen;r=o&&o!==i.DEFAULT_BACKGROUND?'url("'+o+'")':"",this.$el.find(".demo-page").css("background-image",r),s.call(a),this._render(e,n),t("body").addClass("presentation"),this._processAttachment(),this._processImage(),this.$el.show(),t("body",this._contentDoc).focus(),this._contentWin.scrollTo(0,0)},exit:function(){this.$el.hide(),t("body").removeClass("presentation"),this.trigger("exit")},zoomIn:function(){var e,n=t("article",this._contentDoc);o.isUndefined(n)||0===n.length||(e=Number(n.css("zoom")))>=3||((e+=.25)>3&&(e=3),n.css("zoom",e))},zoomOut:function(){var e,n=t("article",this._contentDoc);o.isUndefined(n)||0===n.length||(e=Number(n.css("zoom")))<=1||((e-=.25)<1&&(e=1),n.css("zoom",e))},_exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen(),this._close(this.isPresenting())},isPresenting:function(){return t("body").hasClass("presentation")},_escKeyHandler:function(e){this.isPresenting()&&e&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&l.isMatch("esc",e.keyCode)&&this._exitFullscreen()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){(e.exports=n(68)(!1)).push([e.i,'article {\r\n    width: 75%;\r\n    margin-left: 12.5%;\r\n}\r\nhtml,\r\nimg {\r\n    cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAABOUlEQVR42mL8//8/g/G8DwxIgA2IS4F4DxCfZCABnE0SYGDCIu4MxC1AvAOIVRhIBNgM1IDSAkC8AYj5KTVQE4mtDcSLgJiRWgaCgB8QN1HTQBCoBuIQcgwUA2JhLOpAXl4IxHqkGqiBRy0XEG8EYlFSDNQi4AAFIF4FxKzEGqhJRDA5AHEfNbyMDHKAOIVaLoSBqUBsjc9AXiCWJcFAUJ5fC8QyuAzUYCAdiAPxemgKwDBQk4E8YALEs0kx8C+09JkJxHdxqIkC4iwQg4WAgSDD4oB4GZKYIhC7QLETEItAxYOAeBo+A38BcTQQr0ETvw/14myoDw2ght9DdiE7ECujGRYKxJsIhN8/ID4HxQzIBqoBMTOU/R3q/B3kxBDMQB4o/Q1a/u0lM8bhsXwCmj/dKTEMBAACDAA6Oi9O6DlyWwAAAABJRU5ErkJggg==), auto !important;\r\n}\r\n\r\nimg[filename]{cursor:pointer !important;}\r\n\r\nimg[src="DEFAULTIMAGE"] {display: none !important;}\r\n.search-hit-node {font-style: normal;background-color: #FFFF00;}\r\n.search-hit-node.current {background-color:#FF9632;}\r\n\r\n.innerlink-icon {\r\n    width: 16px;\r\n    height: 16px;\r\n    margin: 0 6px;\r\n    vertical-align: middle;\r\n}\r\n::-webkit-scrollbar{height:8px;width:10px;background:transparent;border-radius:5px;}\r\n::-webkit-scrollbar-button{display:none;}\r\n::-webkit-scrollbar-track{background-color:transparent;}\r\n::-webkit-scrollbar-track-piece{background:transparent;}\r\n::-webkit-scrollbar-thumb{width:10px;min-height:15px;background:rgba(118, 176, 243, 0.3);border-radius: 0;margin-right:1px;}\r\n::-webkit-scrollbar-thumb:hover{background: rgba(118, 176, 243, 0.3);}\r\n::-webkit-scrollbar-thumb:active{background: rgba(118, 176, 243, 0.3);}\r\n\r\nhtml,body{margin:0;padding:0;overflow:auto;pointer-events:none}body{overflow:visible;position:relative;padding-bottom:3px}.editor-area{display:block;padding:20px 20px 0 25px;min-height:100%;pointer-events:all;box-sizing:border-box;outline:0;overflow:visible;font-size:14px;font-family:Microsoft YaHei;word-break:break-word}.editor-area *{background-color:inherit}.editor-attachment{cursor:default}p{margin:5px 0}img:not(.editor-attachment){cursor:default;display:inline-block;margin-top:8px}img[data-media-type=image]{max-width:800px!important;height:auto!important}table{font-size:inherit;border-collapse:collapse;margin-top:10px;margin-bottom:10px;display:table}table td,table th{word-break:break-all;word-wrap: break-word;border:1px solid #999;padding:5px 10px;min-height:25px;min-width:25px;height:25px}table td>div{min-width:2px}a[href]{cursor:pointer}code,pre{font-family:Monaco,Consolas,Courier,"Lucida Console",monospace;font-size:12px;line-height:16px;font-style:normal}pre{white-space:pre-wrap}.ynote-handwrite-br{display:block!important;clear:both;width:0;height:0;visibility:hidden}.ynote-handwrite-caret{display:inline-block;width:0;line-height:99px;height:60px}.ynote-handwrite-area{line-height:60px}img[data-media-type=todo]{margin-top:6px;cursor:pointer}\r\n',""])},function(e,t,n){(e.exports=n(68)(!1)).push([e.i,"\r\n.code-view {\r\n  width: calc(50vw - 20px);\r\n  white-space: initial;\r\n}\r\n.code-view .para-text {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.code-view .para-text pre {\r\n  min-width: calc(50vw - 25px);\r\n}",""])},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(296),o=n(0),i=n(6),r=n(692),a=n(751);return t.extend({className:"bulb-big-toolbar",_tabHead:null,_tabBody:null,initialize:function(e){this._editor=e.editor,this._parentEl=e.parentEl,this.render(),this._editor.isLegacyHost()&&(this._tabHead=new r({editor:e.editor,parentEl:this.el})),this._tabBody=new a({editor:e.editor,parentEl:this.el}),this._bindEvents()},_bindEvents:function(){o.bindAll(this,"_onRequestSwitch","_onExitFullScreen","_onToggleTab"),this._editor.isLegacyHost()&&(this._tabHead.bind("request-switch",this._onRequestSwitch),this._tabHead.bind("exit-full-screen",this._onExitFullScreen),this._tabHead.bind("user-action-collection",this._onUserActionCollection),this._tabBody.bind("toggle-tab",this._onToggleTab))},_canSwitchTab:function(){return!0},_onRequestSwitch:function(e){this.switchTo(e)},_onExitFullScreen:function(){this._editor.trigger("yne-exit-full-screen")},_onUserActionCollection:function(e){this._editor.trigger("yne-user-action-collection",e)},_onToggleTab:function(){this._tabHead.toggle(),this.trigger("resize"),"none"===this._tabHead.$el.css("display")?this.trigger("tab-toggled",!1):this.trigger("tab-toggled",!0)},switchTo:function(e){this._canSwitchTab()&&(this._tabHead&&this._tabHead.switchTo(e),this._tabBody.switchTo(e))},render:function(){this.isRendered||(this.isRendered=!0,i(this._parentEl).append(this.$el))},enable:function(){this.$el.removeClass("disabled"),this._tabHead&&this._tabHead.enable(),this._tabBody.enable()},disable:function(){this.$el.removeClass("disabled"),this._tabHead&&this._tabHead.disable(),this._tabBody.disable()},reset:function(){this._tabHead&&this._tabHead.reset(),this._tabBody.reset(),this.enable()},enterFullScreen:function(){this._tabHead&&this._tabHead.enterFullScreen(),this._tabBody.enterFullScreen(),this.trigger("resize")},exitFullScreen:function(){this._tabHead&&this._tabHead.exitFullScreen(),this._tabBody.exitFullScreen(),this.trigger("resize")},showSaveSyncButton:function(e){var t;if(this._tabHead){if(!(t=this._tabHead.getItemByName("save-and-sync")))return;e?t.show():t.hide()}},rotateSaveSyncIcon:function(e){var t;this._tabHead&&(t=this._tabHead.getItemByName("save-and-sync"))&&t.rotateSyncIcon(e)},toggleToolbar:function(e){this._tabBody&&this._tabBody.toggle(e)},getCurrentTabName:function(){var e=this._tabBody;if(e&&e.getCurrentTabName)return e.getCurrentTabName()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(147),o=n(0),i=n(6),r=n(46);return t.extend({className:"bulb-tab-head",buttonConfig:["edit","insert","view","export","full-screen","save-and-sync"],initialize:function(e){t.prototype.initialize.apply(this,arguments),i(e.parentEl).append(this.$el),this.show()},_bindEvents:function(){var e=this,t=e._getTextButtons(),n=e._getFullScreenButton();o.each(t,function(t){t.bind("on-click",function(){e.trigger("request-switch",this.name,this),e.trigger("user-action-collection","tab-head-"+this.name+"-click")})}),n&&r.bubble(["exit-full-screen"],n,e)},_shrink:function(){},_addButtons:function(){t.prototype._addButtons.call(this,!1)},_getTextButtons:function(){var e=this,t=["edit","insert","view","export"];return e._textButtonList||(e._textButtonList=[],o.each(e._items,function(n){t.indexOf(n.name)>-1&&e._textButtonList.push(n)})),e._textButtonList},_getFullScreenButton:function(){return this._fullScreenButton||(this._fullScreenButton=this.getItemByName("full-screen")),this._fullScreenButton},_enableTextButtons:function(e){var t=this._getTextButtons();o.each(t,function(t){e?t.enable():t.disable()})},_activeTextButton:function(e){var t=this._getTextButtons();o.each(t,function(t){t.setState(t.name===e)})},switchTo:function(e){this._enableTextButtons(!0),this._activeTextButton(e)},toggle:function(){this.$el.toggle()},enterFullScreen:function(){var e=this._getFullScreenButton();this.show(),e&&e.show()},exitFullScreen:function(){var e=this._getFullScreenButton();this.show(),e&&e.hide()},reset:function(){this._invoke("reset"),this.switchTo("edit")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return function(){}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(148).extend({name:"full-screen",text:"退出全屏",label:"退出全屏",onClick:function(){this.trigger("exit-full-screen")},show:function(){this.$el.show()},hide:function(){this.$el.hide()},disable:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"toggle-tab",label:"收缩/展开工具栏",onClick:function(){this.trigger("toggle-tab"),this.$el.toggleClass("reverse")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"toggle-allItems",label:"收缩/展开工具栏",onClick:function(){this.$el.toggleClass("reverse"),this.trigger("toggle-allItems")},isCollapsed:function(){return!this.$el.hasClass("reverse")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(149),o=n(3),i=n(19),r=n(0),a=n(6),s=t.extend({name:"align",label:"对齐方式",defaultValue:"left",items:{justify:"两端对齐",left:"左对齐",center:"居中对齐",right:"右对齐"},templateName:"toolbar-combo-box-align",render:function(){var e,t=this.$el;t.addClass("combo-box-"+this.name),e=i.render("pc",this.templateName,{name:this.name,label:this.label,defaultValue:this.defaultValue,text:!1,items:this.items}),t.html(e),this.valueWrapperEl=t.find(".combo-value-wrapper")[0],this.expandWrapperEl=t.find(".combo-expand-wrapper")[0],this.menuWrapperEl=t.find(".combo-menu-wrapper")[0],t.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},onChange:function(e){var t,n,i,r;(i=(t=this.editor).getNoteRange())&&(r=(n=i.getStartBlockRange()).block)&&o.isHeaderFooter(r)?t.execCommandByToolbar("comp.SetHeaderFooter",{align:e,headerFooter:r,range:n}):s.__super__.onChange.apply(this,arguments)},updateValueUI:function(e){var t=a(this.valueWrapperEl).find(".combo-value")[0];a(t).removeClass(r.keys(this.items).join(" ")),a(t).addClass(e)},onSelectionChange:function(){var e,t=this.editor.getNoteRange(),n=t&&t.getStartBlockRange().block;this.$el.hasClass("disabled")||(e=n&&o.isHeaderFooter(n)?n.getAlign():this.editor.querySelectionBlockStyle(this.name),this.items[e]?this.select(e):this.select(this.defaultValue))}});return s}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"indent",label:"增加缩进",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.IndentOutdent",{indentStep:1}),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(149),o=n(0),i=n(7),r=n(6);return t.extend({name:"line-height",label:"行高",defaultValue:i.PLATFORM_LINE_HEIGHT,keys:[1,1.25,1.5,1.75,2,2.5,3],items:[{key:1,value:"1.0"},{key:1.25,value:"1.25"},{key:1.5,value:"1.5"},{key:1.75,value:"1.75"},{key:2,value:"2.0"},{key:2.5,value:"2.5"},{key:3,value:"3.0"}],templateName:"toolbar-combo-box-line-height",initialize:function(){t.prototype.initialize.apply(this,arguments),this._keys=o.map(this.items,function(e){return e.key})},updateValueUI:function(e){var t=r(this.menuWrapperEl),n=o.indexOf(this._keys,e);t.find(".active").removeClass("active svg-common"),-1!==n&&t.find(".line-height-"+n).addClass("active svg-common")},onSelectionChange:function(){var e,t,n;this.$el.hasClass("disabled")||(e=this.editor.querySelectionBlockStyle(this.name),-1!==o.indexOf(this._keys,e)?this.select(e):parseFloat(e)==e?(t=parseFloat(e),o.each(this.keys,function(o){var i=Math.abs(o-e);i<t&&(n=o,t=i)}),this.select(n)):(this.select(this.defaultValue),this._isForceSelectWhenClick=!0))}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(360),o=n(39);return t.extend({name:"ordered-list",label:"项目编号",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:"Ctrl+Shift+L",querySelectionState:function(){return this.editor.isSameList("ordered")},onClick:function(){this.editor.execCommandByToolbar("comp.InsertList",{type:o.ORDERED}),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"outdent",label:"减少缩进",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.IndentOutdent",{indentStep:-1}),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(360),o=n(39);return t.extend({name:"unordered-list",label:"无序列表",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:"Ctrl+L",querySelectionState:function(){return this.editor.isSameList("unordered")},onClick:function(){this.editor.execCommandByToolbar("comp.InsertList",{type:o.UNORDERED}),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(361).extend({name:"back-color",label:"背景色",defaultValue:"transparent",defaultSetValue:"#FAE220",templateName:"toolbar-combo-box-back-color",doAction:function(e){var t={};t[this.name]=e||this.value,this.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:t})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(170),o=n(6),i=n(705);return t.extend({name:"color",defaultValue:"#000000",items:i,templateName:"toolbar-combo-box-color",editorEvents:{"yne-selection-change":"onSelectionChange"},onValueWrapperElClick:function(){var e=this.value;this.hideMenu(),this.onChange(e)},onChange:function(e){this.doAction(e)},doAction:function(){},onItemClick:function(e){var t=o(e).data("value");if(o(e).hasClass("color-section-other"))return this.editor.trigger("color-picker-show",this),void this.hideMenu();this.changeValue(t)},changeValue:function(e){this.select(e),this.onChange(e)},updateValueUI:function(e){var t=o(this.valueWrapperEl).find(".combo-value-buttom-color")[0];o(t).css("background-color",e)},onSelectionChange:function(){var e;this.$el.hasClass("disabled")||(e=this.editor.querySelectionInlineStyle(this.name),this.selectedValue=e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{theme:["#ffffff","#000000","#eeece0","#1c487f","#4d80bf","#c24f4a","#9abc52","#7b5ba1","#46acc8","#f9963b"],other:[["#f2f2f2","#808080","#ddd9c2","#c5d9f2","#dce6f3","#f3dcdb","#ebf1dd","#e6e0ec","#daeef4","#feead9"],["#d9d9d9","#595959","#c4be95","#8db3e5","#b8cde6","#e7b9b7","#d7e5bb","#ccc0db","#b6dee9","#fdd5b3"],["#bfbfbf","#404040","#948b50","#528cd8","#94b2d9","#da9693","#c3d798","#b3a1c8","#91cdde","#fbc08c"],["#a6a6a6","#262626","#4a4528","#15365f","#355f94","#973632","#769436","#60487c","#2c859d","#e66c00"],["#808080","#0d0d0d","#1e1c10","#0f2340","#243f62","#642422","#4f6324","#403053","#1e5969","#994800"]],standard:["#df402a","#f77567","#fad4d3","#fae220","#b19067","#77c94b","#98dede","#184e87","#9896a4","#90a7d1"]}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(203).extend({name:"bold",label:"加粗",shortcut:"Ctrl+B"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(361),o=n(1),i=n(38);return t.extend({name:"color",label:"文字颜色",defaultValue:"#000000",defaultSetValue:"#DF402A",doAction:function(e){var t={},n=e||this.value,r=i(n);r&&!1!==r.isValid()?(t[this.name]=r.toHexString(),this.editor.execCommandByToolbar("comp.ApplyStyles",{inlineStyles:t})):o.error("tiny color object is not valid",r)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(171),i=n(7),r=n(52),a=n(6);return t=o.extend({name:"font-family",label:"字体",defaultValue:r.DEFAULT_FONT,items:r.getItems(),templateName:"toolbar-combo-box-font-family",getUnlistedText:function(e){var t;return e&&e!==i.INTERM&&(t=r.getFont(e)),t=t||r.splitFontFamily(e)[0]||"微软雅黑"},render:function(){var e,n=this;t.__super__.render.apply(n,arguments),e=n.$el.find(".combo-value-font-family"),a(e).hover(function(){a(n.displayWrapperEl).tooltipster({animation:"",animationDuration:0,content:e.text(),delay:[800,300]})},function(){a(n.displayWrapperEl).tooltipster({animation:"",animationDuration:0,content:n.label,delay:[800,300]})})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(171),o=n(356);return t.extend({name:"font-size",label:"字号",defaultValue:"14",items:o.getAsList(),templateName:"toolbar-combo-box-font-size",getUnlistedText:function(e){var t=parseInt(e,10);return t&&!isNaN(t)?t+"":this.defaultValue+""}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(203).extend({name:"italic",label:"斜体",shortcut:"Ctrl+I"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(203).extend({name:"strike",label:"删除线",shortcut:"Ctrl+E"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(203).extend({name:"underline",label:"下划线",shortcut:"Ctrl+U"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(132).extend({name:"attachment",label:"插入附件",text:"附件",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.trigger("yne-insert-attachment"),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(132).extend({name:"hr",label:"水平线",text:"横线",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:"Ctrl+H",onClick:function(){this.editor.execCommandByToolbar("comp.InsertHorizontalRule"),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(132).extend({name:"img",label:"插入图片",text:"图片",defaultState:!1,state:!1,onClick:function(){this.editor.trigger("yne-insert-photo"),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(6),r=n(19),a=n(91),s=n(109);return t.View.extend({className:"toolbar-item toolbar-combo-box toolbar-combo-link",name:"link",label:"插入链接",text:"链接",templateName:"toolbar-combo-box-insert-link",events:{"mousedown .combo-value-wrapper-link":"onValueWrapperMouseDown","click .combo-value-wrapper-link":"onValueWrapperClick","click .link-button":"onConfirmButtonClick",mousedown:"onMouseDown"},initialize:function(e){this.editor=e.editor,this.items=e.items,this.render(),this.bindDocumentEvents(),this.bindEditorEvents()},render:function(){var e,t=this,n=t.$el;e=r.render("pc",t.templateName,{name:t.name,label:t.label,text:t.text}),n.html(e),t.menuWrapperEl=n.find(".combo-menu-wrapper")[0],t.menuItemContainer=n.find(".combo-menu")[0],t.input=n.find(".link-input"),i(t.input).keydown(function(e){e.stopPropagation(),s.isMatch("enter",e.keyCode)&&(e.preventDefault(),t.onConfirmButtonClick())}),n.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},bindEditorEvents:function(){var e=this,t=e.editor,n=e.editorEvents;n&&o.each(n,function(n,o){t.on(o,e[n].bind(e))})},bindDocumentEvents:function(){o.bindAll(this,"onDocumentMouseDown"),i(document).on("mousedown",this.onDocumentMouseDown)},onDocumentMouseDown:function(){this.hideMenu()},onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onConfirmButtonClick:function(){var e=a.safeHref(i(this.input).val().trim());e&&this.editor.execCommandByToolbar("comp.InsertLink",{src:e,styles:this.editor.controller.getEditingInlineState()}),window.focus(),this.hideMenu()},onValueWrapperMouseDown:function(e){e.preventDefault()},onValueWrapperClick:function(){this.toggleMenu(),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")},toggleMenu:function(){i(this.menuWrapperEl).toggleClass("show")},showMenu:function(){var e=this.menuWrapperEl;i(e).addClass("show")},hideMenu:function(){var e=this.menuWrapperEl;i(e).removeClass("show"),i(this.input).val("")},show:function(){return this.$el.show(),!0},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},reset:function(){this.hideMenu()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(6),r=n(19);return t.View.extend({className:"toolbar-item toolbar-combo-box toolbar-combo-box-table",events:{"click .combo-value-wrapper":"onValueWrapperClick","mouseleave .combo-menu":"onMenuMouseLeave","mouseenter .combo-item":"onItemMouseEnter","click .combo-item":"onItemClick",mousedown:"onMouseDown"},editorEvents:{"yne-editing-state-change":"onEditingStateChange"},name:"table",label:"表格",text:"表格",templateName:"toolbar-combo-box-table",initialize:function(e){this.editor=e.editor,this.render(),this.bindDocumentEvents(),this.bindEditorEvents()},render:function(){var e,t=this.$el;e=r.render("pc",this.templateName,{name:this.name,label:this.label,text:this.text,maxRows:6,maxCols:8}),t.html(e),this.menuWrapperEl=t.find(".combo-menu-wrapper")[0],this.menuLabelEl=t.find(".combo-menu-label-table")[0],this.comboItems=t.find(".combo-item"),t.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},bindDocumentEvents:function(){o.bindAll(this,"onDocumentMouseDown"),i(document).on("mousedown",this.onDocumentMouseDown)},bindEditorEvents:function(){var e=this,t=e.editor,n=e.editorEvents;n&&o.each(n,function(n,o){t.on(o,e[n].bind(e))})},onDocumentMouseDown:function(e){var t=e.target;i.contains(this.el,t)||this.hideMenu()},onValueWrapperClick:function(){this.toggleMenu(),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")},onItemMouseEnter:function(e){var t=e.target,n=this.getItemCoordinate(t);this.selectItems(n.row+1,n.col+1)},onItemClick:function(e){var t=e.target,n=this.getItemCoordinate(t);this.insertTable(n.row+1,n.col+1),this.hideMenu()},onMenuMouseLeave:function(){this.resetSelected()},onMouseDown:function(e){e.preventDefault()},getItemCoordinate:function(e){var t=i(e);return{row:t.data("row"),col:t.data("col")}},resetSelected:function(){this.selectItems(0,0)},selectItems:function(e,t){this.updateSelectedLabelText(e,t),this.updateSelectedItemsUI(e,t)},updateSelectedLabelText:function(e,t){var n=i(this.menuLabelEl);e>0&&t>0?n.html(e+" 行 "+t+" 列"):n.html("插入表格")},updateSelectedItemsUI:function(e,t){var n,o;for(i(this.comboItems).removeClass("selected"),n=0;n<e;n++)for(o=0;o<t;o++)i(this.comboItems[8*n+o]).addClass("selected")},insertTable:function(e,t){this.editor.execCommandByToolbar("comp.InsertTable",{rows:e,cols:t})},toggleMenu:function(){i(this.menuWrapperEl).hasClass("show")?this.hideMenu():this.showMenu()},showMenu:function(){var e=this.menuWrapperEl;i(e).removeClass("menu-position-fix"),i(e).addClass("show"),e.getBoundingClientRect().right>document.documentElement.offsetWidth&&i(e).addClass("menu-position-fix")},hideMenu:function(){i(this.menuWrapperEl).removeClass("show"),this.resetSelected()},isVisible:!0,show:function(){this.$el.show(),this.isVisible=!0},hide:function(){this.$el.hide(),this.isVisible=!1},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},reset:function(){this.resetSelected(),this.hideMenu()},onEditingStateChange:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6),o=n(171),i=n(163);return o.extend({name:"heading",label:"标题",defaultValue:"default",items:i.headingArray,templateName:"toolbar-combo-box-heading",editorEvents:{"yne-editing-state-change":"onEditingStateChange","yne-selection-change":"onSelectionChange"},updateValueUI:function(e){var n=t(this.valueWrapperEl).find(".combo-value")[0];i.headingMap[e]?t(n).text(i.headingMap[e].name):t(n).text(this.getUnlistedText(e)||"")},getUnlistedText:function(e){return e?i.headingMap[e].name:i.headingMap[this.defaultValue].name+""},onItemClick:function(e){var t,n;for(t in i.headingMap)if(i.headingMap[t].name===e.innerText){n=t;break}this.editor.execCommandByToolbar("comp.InsertHeading",{level:n})},onEditingStateChange:function(){var e=this.editor.querySelectionBlockStyle(this.name);i.headingMap[e]?this.select(e):this.select(this.defaultValue)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(132).extend({name:"catalogue",label:"目录",text:"目录",defaultState:!1,state:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.InsertCatalogue")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(132).extend({name:"todo",label:"待办",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:"Ctrl+D",onClick:function(){this.editor.execCommandByToolbar("comp.InsertTodo",{checked:!1})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(132),o=n(7);return t.extend({name:"quote",label:"引用",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:o.IS_MAC?"Control+Q":"Ctrl+Q",onClick:function(){this.editor.execCommandByToolbar("comp.InsertQuote")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(132),o=n(7);return t.extend({name:"code",label:"代码块",defaultState:!1,state:!1,templateName:"toolbar-button-template",shortcut:o.IS_MAC?"Control+Alt+D":"Ctrl+Alt+D",onClick:function(){this.editor.execCommandByToolbar("comp.InsertCode")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"export-pdf",label:"导出为PDF",text:"导出为PDF",defaultState:!1,state:!1,onClick:function(){this.editor.trigger("yne-export-pdf")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"export-word",label:"导出为Word",text:"导出为Word",defaultState:!1,state:!1,onClick:function(){this.editor.trigger("yne-export-word")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(37);return t.extend({name:"download-file",label:"下载原始文件",text:"下载原始文件",defaultState:!1,state:!1,enable:function(){t.prototype.enable.apply(this),this._updateVisibleState()},disable:function(){t.prototype.disable.apply(this),this._updateVisibleState()},onClick:function(){this.editor.trigger("yne-download-file")},_updateVisibleState:function(){var e=this.editor.getNoteProps();null!=e&&!0===e.hasOriginFile?this.$el.removeClass("hidden"):this.$el.addClass("hidden")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(37),o=n(727);return t.extend({name:"format-painter",label:"格式刷",events:{click:"onClick",dblclick:"onDblClick",mousedown:"onMouseDown"},defaultState:!1,state:!1,templateName:"toolbar-button-template",initialize:function(){t.prototype.initialize.apply(this,arguments),this._initFormatPainterManager()},_initFormatPainterManager:function(){this._formatPainterManager=new o({editor:this.editor}),this._formatPainterManager.on("formatpainter-state-change",this.onFormatPainterStateChange.bind(this))},clickAction:function(){!0===this.state?this.reset():this.stash(!0)},onClick:function(){var e=this;clearTimeout(e._timer),e._timer=setTimeout(function(){e.clickAction()},300),e.editor.trigger("yne-user-action-collection","tab-body-"+e.name+"-click")},onDblClick:function(){clearTimeout(this._timer),this.stash()},stash:function(e){this._formatPainterManager.stash(e)},reset:function(){this._formatPainterManager.reset()},onFormatPainterStateChange:function(e){this.setState(!!e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(21),i=n(6),r=n(27),a=n(0),s=n(7),l=n(38),c=0,u=1,d=2;return t={state:null,data:null,initialize:function(e){this._editor=e.editor,this.state=c,a.bindAll(this,"stash","_paintWithDebounce","reset","_onSelectStart","_onCommandExec")},_isLinkStyle:function(e){return e&&e.color&&e.color!==s.INTERM&&l.equals(e.color,"blue")&&!0===e.underline},stash:function(e){var t,n=this._editor;this.reset(),t=n.querySelectionInlineStyles(),this._isLinkStyle(t)&&t.href&&(delete t.color,delete t.underline),this.data={inlineStyles:t,blockStyles:n.querySelectionBlockStyles()},e?this.setState(u):this.setState(d),this.bindEvents()},paint:function(){this.data&&this._editor.execCommandByToolbar("comp.FormatPainter",{data:this.data}),this.state===u&&this.reset()},reset:function(){this._clearPaintTimeout(),this.data=null,this.setState(c),this.unbindEvents()},setState:function(e){this.state!==e&&(this.state=e,this.trigger("formatpainter-state-change",!!e),this.updateFormatPainterCursorUI(!!e))},updateFormatPainterCursorUI:function(e){this._editor.updateFormatPainterCursorUI(e)},bindEvents:function(){var e=this._editor;this.unbindEvents(),e.on("selectstart",this._onSelectStart),e.on("mouse-down",this._onSelectStart),e.on("esc",this.reset),e.on("command-exec",this._onCommandExec)},unbindEvents:function(){var e=this._editor;e.off("selectstart",this._onSelectStart),e.off("mouse-down",this._onSelectStart),e.off("esc",this.reset),e.off("command-exec",this._onCommandExec),i(document).off("mouseup",this._paintWithDebounce)},_onSelectStart:function(){i(document).one("mouseup",this._paintWithDebounce)},_clearPaintTimeout:function(){this._paintTimeout&&(window.clearTimeout(this._paintTimeout),this._paintTimeout=null)},_paintWithDebounce:function(){var e=this;e._clearPaintTimeout(),e._paintTimeout=window.setTimeout(function(){e.paint()},100)},_onCommandExec:function(e){"comp.FormatPainter"!==(e||{}).name&&this.reset()}},a.extend(t,r.Events),o.extend(t)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(149),o=n(19),i=n(0),r=n(6);return t.extend({editorEvents:{"view-mode-change":"_onViewModeChange"},name:"view-mode",label:"视图模式",defaultValue:"read",items:{normal:"普通视图",read:"阅读视图",page:"文档视图"},templateName:"toolbar-combo-box-align",_itemsKeyMap:{0:"normal",1:"read",2:"page"},render:function(){var e,t=this.$el;t.addClass("combo-box-"+this.name),e=o.render("pc",this.templateName,{name:this.name,label:this.label,defaultValue:this.defaultValue,text:this.items[this.defaultValue],items:this.items}),t.html(e),this.valueWrapperEl=t.find(".combo-value-wrapper")[0],this.expandWrapperEl=t.find(".combo-expand-wrapper")[0],this.menuWrapperEl=t.find(".combo-menu-wrapper")[0],t.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},updateValueUI:function(e){var t=r(this.valueWrapperEl);t.find(".combo-value").removeClass(i.keys(this.items).join(" ")).addClass(e),t.find(".combo-text").text(this.items[e])},onChange:function(e){var t=1;i.some(this._itemsKeyMap,function(n,o){return n===e&&(t=o,!0)}),this.editor.setViewMode(t,!1,!0),this.editor.trigger("yne-user-action-collection","tab-body-pagemode-"+e+"-click")},_onViewModeChange:function(e){var t=this._itemsKeyMap[e];this.select(t)},reset:function(){this.hideMenu()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"redo",label:"重做",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"command-exec":"_onHistoryChange","redo-stack-change":"_onHistoryChange","cell-edit-view-exit":"_onHistoryChange","cell-edit-view-enter":"_onCellEditViewHistoryChange","cell-edit-view-history-change":"_onCellEditViewHistoryChange"},_onHistoryChange:function(){this.setState(this.editor.canRedo())},_onCellEditViewHistoryChange:function(e){this.setState(e.canRedo)},onClick:function(){!0===this.state&&(this.editor.execCommandByToolbar("redo"),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click"))},reset:function(){this.setState(!1)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"remove-format",label:"清除格式",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"yne-selection-change":"_onSelectionChange","yne-editing-state-change":"_onEditingStateChange"},_onEditingStateChange:function(e){this.$el.hasClass("disabled")||(e&&null!==e.cellEditViewRangeCollapsed?this.setState(!1===e.cellEditViewRangeCollapsed):this.setState(!0))},_onSelectionChange:function(){this.$el.hasClass("disabled")||this.setState(!0)},onClick:function(){var e,t=this.editor.getDefaultStyle();(e=this.editor.getNoteRange())&&!e.isCollapsed()?(this.editor.execCommandByToolbar("comp.RemoveFormat",{inlineStyles:t,resetAllStyles:!0}),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")):this.editor.setEditingInlineStyles(t)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"save-and-sync",label:"保存并同步",text:"保存并同步",defaultState:!1,state:!1,onClick:function(){this.editor.trigger("yne-save-and-sync")},rotateSyncIcon:function(e){this.$el.find(".button-save-and-sync").toggleClass("rotating",e),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(300);var t=n(149),o=n(19),i=n(0),r=n(6);return t.extend({name:"snap-screen",text:"截图",label:"截图",defaultValue:"snap",items:{snap:"截图","snap-x":"截图并隐藏当前窗口"},templateName:"toolbar-combo-box-align",editorEvents:{"yne-editing-state-change":"onEditingStateChange"},render:function(){var e,t=this.$el;t.addClass("combo-box-"+this.name),e=o.render("pc",this.templateName,{name:this.name,label:this.label,defaultValue:this.defaultValue,text:this.items[this.defaultValue],items:this.items}),t.html(e),this.valueWrapperEl=t.find(".combo-value-wrapper")[0],this.expandWrapperEl=t.find(".combo-expand-wrapper")[0],this.menuWrapperEl=t.find(".combo-menu-wrapper")[0],t.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},updateValueUI:function(e){var t=r(this.valueWrapperEl),n=t.find(".combo-value"),o=this.items[e];n.removeClass(i.keys(this.items).join(" ")).addClass(e),t.find(".combo-text").text(o),this.$el.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,content:o,delay:[800,300]})},onValueWrapperElClick:function(){var e=this.value;this.hideMenu(),this.select(e),this._snapScreen()},onItemClick:function(e){var t=r(e).data("value");t&&t!==this.value&&this.select(t),this._snapScreen()},onChange:function(){},_snapScreen:function(){this.editor.trigger("yne-snap-screen",this.value)},reset:function(){this.hideMenu(),this.value=this.defaultValue,this.updateValueUI(this.value)},onEditingStateChange:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"undo",label:"撤销",defaultState:!1,state:!1,templateName:"toolbar-button-template",editorEvents:{"command-exec":"_onHistoryChange","undo-stack-change":"_onHistoryChange","cell-edit-view-exit":"_onHistoryChange","cell-edit-view-enter":"_onCellEditViewHistoryChange","cell-edit-view-history-change":"_onCellEditViewHistoryChange"},_onHistoryChange:function(){this.setState(this.editor.canUndo())},_onCellEditViewHistoryChange:function(e){this.setState(e.canUndo)},onClick:function(){!0===this.state&&(this.editor.execCommandByToolbar("undo"),this.editor.trigger("yne-user-action-collection","tab-body-"+this.name+"-click"))},reset:function(){this.setState(!1)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(6),r=n(19);return t.View.extend({className:"toolbar-item toolbar-combo-box toolbar-combo-more",name:"showmore",label:"查看更多",templateName:"toolbar-combo-box-show-more",events:{"click .combo-value-wrapper-showmore":"onValueWrapperClick",mousedown:"onMouseDown"},initialize:function(e){this.editor=e.editor,this.items=e.items,this.render(),this.bindDocumentEvents()},render:function(){var e,t=this.$el;e=r.render("pc",this.templateName,{name:this.name,label:this.label}),t.html(e),this.menuWrapperEl=t.find(".combo-menu-wrapper")[0],this.menuItemContainer=t.find(".combo-menu")[0],this.$split=t.find(".toolbar-more-split"),t.find(".combo-display-wrapper").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-borderless","tooltipster-borderless-customized"],side:"bottom",delay:[800,300]})},bindDocumentEvents:function(){o.bindAll(this,"onDocumentMouseDown"),i(document).on("mousedown",this.onDocumentMouseDown)},onDocumentMouseDown:function(e){var t=e.target;i.contains(this.el,t)||this.hideMenu()},onMouseDown:function(e){e.preventDefault()},onValueWrapperClick:function(){this.toggleMenu()},toggleMenu:function(){i(this.menuWrapperEl).toggleClass("show")},showMenu:function(){var e=this.menuWrapperEl;i(e).addClass("show")},hideMenu:function(){var e=this.menuWrapperEl;i(e).removeClass("show")},resetMenu:function(){var e,t=this.items,n=i(this.menuItemContainer);o.map(t,function(e){n.append(e.$el)}),n.children().length>0?((e=this.$el.prev()).is(".toolbar-split")?e.hide():e.show(),this.$el.show()):this.$el.hide()},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},reset:function(){this.hideMenu()},show:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(170),o=n(1),i=n(6);return t.extend({name:"zoom",label:"缩放",defaultValue:100,items:{100:"100%",125:"125%",150:"150%",175:"175%",200:"200%",225:"225%",250:"250%",275:"275%",300:"300%"},templateName:"toolbar-combo-box-zoom",editorEvents:{"yne-editing-zoom-change":"onEditingZoomChange"},getUnlistedText:function(e){var t=parseInt(e,10);return t&&!isNaN(t)?t+"%":this.defaultValue+"%"},onChange:function(e){o.log("selected item is ",e),this.editor.zoomEditor(e/100)},onEditingZoomChange:function(e){this.select(100*e)},reset:function(){var e;this.hideMenu(),e=this.editor.getCurrentZoomValue(),this.select(100*e)},updateValueUI:function(e){var t=i(this.valueWrapperEl).find(".combo-value")[0];this.items[e]?i(t).text(this.items[e]):(o.warn("unexpected zoom value:",e),i(t).text(this.getUnlistedText(e)||""))}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(170),o=n(6),i=n(0),r=n(7),a=n(1),s=n(142);return t.extend({name:"set-background",defaultValue:r.DEFAULT_BACKGROUND,label:"笔记背景",items:{},templateName:"toolbar-combo-box-set-background",editorEvents:{"set-all-backgrounds":"onAllBackgroundsSet","set-background":"onBackgroundChanged","yne-background-changed":"onBackgroundChanged"},_isAllBackgroundsReady:!1,_isVIPUser:!1,_normalBackground:null,_vipBackground:null,_CSS_SHADOW:"0px 0px 0px 1.5px #4C98EF",enable:function(){this._updateEnableState()},disable:function(){this._updateEnableState()},render:function(){i.isEmpty(this.items)&&this._isAllBackgroundsReady&&(this.items={normalUser:this._normalBackground,VIP:this._vipBackground}),t.prototype.render.apply(this)},onAllBackgroundsSet:function(e,t){var n,o=this,r=0,a=0,l={};o._isVIPUser=!!t,o._normalBackground=[],o._vipBackground=[],l.URI=o.defaultValue,l.isForVIP="false",(n=JSON.parse(e)).unshift(l),i.each(n,function(e){s.parseToBoolean(e.isForVIP,!1)?(o._vipBackground[a]||(o._vipBackground[a]=[]),o._vipBackground[a].push(e.URI),3===o._vipBackground[a].length&&a++):(o._normalBackground[r]||(o._normalBackground[r]=[]),o._normalBackground[r].push(e.URI),3===o._normalBackground[r].length&&r++)}),o.items={},o._isAllBackgroundsReady=!0,o.render(),o.show()},onBackgroundChanged:function(e,t){var n,r,s,l=this,c=[t,l.defaultValue];l._resetAllSelection(),i.some(c,function(e){return 0!==(r=l.$el.find('[data-value="'+e+'"]')).length&&(n=e,!0)}),o(r[0]).css("box-shadow",l._CSS_SHADOW),s=o(r[0]).find(".background-cell-check-mark"),o(s).css("visibility","visible"),l.value=n,n!==t&&(a.error("failed to find specified URI:",t),l.editor.trigger("background-failed-update",1,n))},onChange:function(e){this.editor.updateBackground(e)},onItemClick:function(e){var n=this,i=o(e).data("value");n.editor.trigger("yne-is-vip-user",function(e){null!==e&&(n._isVIPUser=!!e)}),n._isVIPUser||!n._isVIPBackground(i)?t.prototype.onItemClick.apply(n,[e]):n.editor.trigger("background-failed-update",0)},show:function(){var e=!1;return this._isAllBackgroundsReady?(e=!0,this.$el.show(),this._updateEnableState()):this.$el.hide(),e},reset:function(){this.value=null,this.$el.find(".background-cell").css("box-shadow",""),this.$el.find(".background-cell-check-mark").css("visibility","hidden"),this._updateEnableState()},_isBackgroundDisabled:function(){return(this.editor.getEditorProps()||{}).disableBackground},_isVIPBackground:function(e){var t=!0;return i.some(this._normalBackground,function(n){if(i.contains(n,e))return t=!1,!0}),t},_resetAllSelection:function(){this.$el.find(".background-cell-check-mark").css("visibility","hidden"),this.$el.find(".background-cell").css("box-shadow","")},_updateEnableState:function(){this._isBackgroundDisabled()?t.prototype.disable.apply(this):t.prototype.enable.apply(this)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(148).extend({name:"edit",text:"编辑"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(148).extend({name:"insert",text:"插入"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(148).extend({name:"more",text:"更多"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(148).extend({name:"view",text:"视图"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(148).extend({name:"export",text:"导出"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(171),o=n(743);return t.extend({name:"code-language",label:"语言",defaultValue:"javascript",items:o,templateName:"toolbar-combo-box-font-size",onChange:function(e){var t=this.editor.controller.getNoteRange().getStartBlockRange().block;this.editor.execCommandByToolbar("comp.SetCodeLanguage",{block:t,newLanguage:e})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{javascript:"JavaScript",java:"Java",python:"Python",php:"PHP",csharp:"C#",cpp:"C++",css:"CSS",ruby:"Ruby",c:"C",objectivec:"Objective-C",swift:"Swift",scala:"Scala",shell:"Shell",go:"Go",r:"R",typescript:"Typescript",html:"HTML",markdown:"Markdown",kotlin:"Kotlin",json:"JSON",xml:"XML",sql:"SQL",matlab:"MATLAB"}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(171).extend({name:"code-theme",label:"主题",defaultValue:"default",items:{default:"默认主题",tomorrow:"宁静深邃",coy:"清新条纹",okaidia:"暗夜繁星",Ateliersulphurpool:"轻快蓝调",vs:"简约线条"},templateName:"toolbar-combo-box-font-size",onChange:function(e){var t=this.editor.controller.getNoteRange().getStartBlockRange().block;this.editor.execCommandByToolbar("comp.SetCodeTheme",{block:t,newTheme:e})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(149),o=n(0),i=n(6);return t.extend({name:"table-justify",label:"垂直对齐",defaultValue:"middle",isVisible:!1,items:{top:"顶端对齐",middle:"水平居中",bottom:"底端对齐"},templateName:"toolbar-combo-box-align",updateValueUI:function(e){var t=i(this.valueWrapperEl).find(".combo-value")[0];i(t).removeClass(o.keys(this.items).join(" ")),i(t).addClass(e)},onEditingStateChange:function(){this.enable()},onChange:function(e){var t=this.editor;e&&t.execCommandByToolbar("comp.SetTableCellBlockStyle",{styles:{verticalAlign:e}})},onSelectionChange:function(){var e;e=this.editor.querySelectionBlockStyle("verticalAlign"),this.items[e]?this.select(e):this.select(this.defaultValue)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"table-wrap",label:"自动换行",defaultState:!0,isVisible:!1,templateName:"toolbar-button-template",onEditingStateChange:function(){var e;e=this.editor.querySelectionBlockStyle("wrap"),this.setState(null==e?this.defaultState:e)},onClick:function(){this.editor.execCommandByToolbar("comp.SetTableCellBlockStyle",{toggle:"wrap",default:this.defaultState})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(149),o=n(102),i=n(0),r=n(6);return t.extend({name:"table-operate",label:"操作表格",defaultValue:"",isVisible:!1,items:{insertRowUp:"在上方插入行",insertRowDown:"在下方插入行",deleteRow:"删除整行",insertColLeft:"在左侧插入列",insertColRight:"在右侧插入列",deleteCol:"删除整列",deleteTable:"删除整个表格"},templateName:"toolbar-combo-box-align",updateValueUI:function(e){var t=r(this.valueWrapperEl).find(".combo-value")[0];r(t).removeClass(i.keys(this.items).join(" ")),r(t).addClass(e)},onChange:function(e){var t,n,i=this.editor;e&&("insertRowUp"===e&&(t=o.UP),"insertRowDown"===e&&(t=o.DOWN),"insertColLeft"===e&&(n=o.LEFT),"insertColRight"===e&&(n=o.RIGHT),t&&i.execCommandByToolbar("comp.InsertTableRowCol",{describe:{row:t}}),n&&i.execCommandByToolbar("comp.InsertTableRowCol",{describe:{col:n}}),"deleteRow"===e&&i.execCommandByToolbar("comp.DeleteTableRowCol",{describe:{row:!0}}),"deleteCol"===e&&i.execCommandByToolbar("comp.DeleteTableRowCol",{describe:{col:!0}}),"deleteTable"===e&&i.execCommandByToolbar("comp.DeleteNoteRange",{isTableDelete:!0}),this.value="")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(298),o=n(0);return t.extend({name:"table-split",isVisible:!1,initialize:function(e){this.editor=e.editor,this.bindEditorEvents(),this.isVisible||this.hide()},editorEvents:{"yne-selection-change":"onSelectionChange"},bindEditorEvents:function(){var e=this,t=e.editor,n=e.editorEvents;n&&o.each(n,function(n,o){t.on(o,e[n].bind(e))})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(37).extend({name:"table-merge",label:"合并单元格",defaultState:!1,isVisible:!1,templateName:"toolbar-button-template",onClick:function(){this.editor.execCommandByToolbar("comp.ToggleMergeTableCell")},onSelectionChange:function(){var e=this.editor.controller.getNoteRange().getStartBlockRange(),t=e.getAsRectRange&&e.getAsRectRange(),n=t&&t.onlyMergePointAndCell();this.label=n?"拆分单元格":"合并单元格",this.render(),this.setState(n)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(298),o=n(0);return t.extend({name:"no-table-split",isVisible:!1,initialize:function(e){this.editor=e.editor,this.bindEditorEvents(),this.isVisible||this.hide()},editorEvents:{"yne-selection-change":"onSelectionChange"},bindEditorEvents:function(){var e=this,t=e.editor,n=e.editorEvents;n&&o.each(n,function(n,o){t.on(o,e[n].bind(e))})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(296),o=n(297).get("toggle-tab"),i=n(752),r=n(753),a=n(754),s=n(755),l=n(756),c=n(0),u=n(6),d=n(142);return t.extend({className:"bulb-tab-body",initialize:function(e){var t;this._editor=e.editor,this._parentEl=e.parentEl,this.isRendered=!1,this._toggleTabButton=null,this._current=null,t={editor:e.editor,shrinkOffset:this.shrinkOffsetForPanel.bind(this)},this._toolPanels={edit:new i(t)},this._editor.isLegacyHost()&&(this._toolPanels.insert=new r(t),this._toolPanels.view=new s(t),this._toolPanels.export=new l(t),this._toolPanels.more=new a(t)),this.render(),this.switchTo("edit")},shrinkOffsetForPanel:function(){return this._toggleTabButton?0-this._toggleTabButton.$el.outerWidth(!0):0},render:function(){var e=this;e.isRendered||(e.isRendered=!0,u(e._parentEl).append(e.$el),e._editor.isLegacyHost()&&(e._toggleTabButton=new o({editor:e._editor}),e.$el.append(e._toggleTabButton.$el),e._toggleTabButton.on("toggle-tab",function(){e.trigger("toggle-tab")})),c.each(e._toolPanels,function(t,n){if(!t)throw"No panel objecet for "+n;e.$el.append(t.$el)}))},switchTo:function(e){var t=this,n=t._toolPanels;t._current!==e&&n[e]&&c.each(n,function(n,o){o===e?(n.show(),t._current=e):n.hide()})},_setEnable:function(e){c.each(this._toolPanels,function(t){t&&(e&&t.enable?t.enable():!e&&t.disable&&t.disable())})},enable:function(){this._setEnable(!0)},disable:function(){this._setEnable(!1)},reset:function(){c.each(this._toolPanels,function(e){e.reset()}),this._current=null,this.switchTo("edit")},enterFullScreen:function(){this._toggleTabButton&&this._toggleTabButton.hide()},exitFullScreen:function(){this._toggleTabButton&&this._toggleTabButton.show()},getCurrentTabName:function(){return this._current},toggle:function(e){null!=e?(e=d.parseToBoolean(e,!0),this.$el.toggle(e)):this.$el.toggle()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(147),o=n(3),i=n(297),r=n(362),a=n(0),s=n(6),l=t.extend({className:"tool-panel tool-panel-edit",buttonConfig:["undo","redo","remove-format","format-painter","---","heading","no-table-split","code-language","font-family","---","font-size","code-theme","bold","italic","underline","strike","---","color","back-color","no-table-split","unordered-list","ordered-list","todo","quote","code","---","align","table-justify","indent","outdent","line-height","table-wrap","table-operate","table-split","table-merge"],_morePanelName:".tool-panel-edit-more",_btnToggleAllItems:null,_$morePanel:null,_lastRangeType:null,initialize:function(){l.__super__.initialize.apply(this,arguments),this._bindEvents()},_bindEvents:function(){var e=this,t=e._editor,n=r.EDITOR_BUTTON_STATE_MAP;l.__super__._bindEvents.apply(e,arguments),t.on("yne-editing-state-change",function(){var i,s=t.getNoteRange(),l=t.hasHandWriteBlock(),c=r.RANGE_DEFAULT;s&&(i=s.getStartBlockRange().block,o.isHeaderFooter(i)?c=l?r.HANDWRITE_DEFAULT:r.RANGE_HEADER_FOOTER:o.isImage(i)?c=r.RANGE_IMAGE:o.isAttachment(i)?c=r.RANGE_ATTACHMENT:o.isCatalogue(i)?c=l?r.HANDWRITE_DEFAULT:r.RANGE_CATALOGUE:s.isSingleTableSelected()?c=r.RANGE_TABLE_CELL:o.isQuote(i)?c=r.RANGE_QUOTE:o.isCode(i)&&(c=r.RANGE_CODE)),e._lastRangeType!==c&&(e._$morePanel&&e._$morePanel.css("height",e._$morePanel.height()),e._lastRangeType=c,a.each(e._items,function(e){var t,o=n[e.name],i=r.ACTION_SHOW_ENABLE;switch(a.each(o,function(e){e.on===r.RANGE_DEFAULT&&(i=e.action),e.on===c&&(t=e.action)}),null==t&&(t=i),t){case r.ACTION_SHOW_ENABLE:e.show(),e.enable();break;case r.ACTION_HIDE:e.hide();break;case r.ACTION_ENABLE:e.enable();break;case r.ACTION_DISABLE:e.show(),e.disable()}}),e._reShrink())})},_addButtons:function(e){var t;l.__super__._addButtons.apply(this,[e]),this._editor.isLegacyHost()||(t=i.get("toggle-allItems"),this._btnToggleAllItems=new t({editor:this._editor}),this.addItems(this._btnToggleAllItems),this._btnToggleAllItems.bind("toggle-allItems",this._onToggleAllItems.bind(this)))},_shrink:function(){var e,t=this;e=l.__super__._shrink.apply(t),t._editor.isLegacyHost()||(null==t._$morePanel&&(t.$el.after('<div class="tool-panel tool-panel-edit-more"></div>'),t._$morePanel=s(t._morePanelName),t._$morePanel.hide()),0===e.length?(t._$morePanel.slideUp(500,function(){t._editor.updateNoteViewWrapperSize()}),t._btnToggleAllItems.hide()):(t._$morePanel.empty(),a.each(e,function(e){t._$morePanel.append(e.$el)}),t._btnToggleAllItems.show()),t._onToggleAllItems())},_onToggleAllItems:function(){var e=this;null!=e._$morePanel&&null!=e._btnToggleAllItems&&(e._btnToggleAllItems.isCollapsed()||!1===e._btnToggleAllItems.isVisible?e._$morePanel.slideUp(500,function(){e._editor.updateNoteViewWrapperSize()}):(e._$morePanel.css("height","auto"),e._$morePanel.slideDown(250,function(){e._editor.updateNoteViewWrapperSize()})))}});return l}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(147).extend({className:"tool-panel tool-panel-insert",buttonConfig:["undo","redo","img","attachment","table","hr","link","catalogue","snap-screen"]})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(147).extend({className:"tool-panel tool-panel-more",buttonConfig:["undo","redo","zoom","view-mode","export-pdf","set-background"]})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(147).extend({className:"tool-panel tool-panel-view",buttonConfig:["undo","redo","view-mode","zoom","set-background"]})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(147).extend({className:"tool-panel tool-panel-export",buttonConfig:["undo","redo","export-pdf","export-word","download-file"]})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(758),o=n(26),i=n(0),r=n(38),a=new t({}),s={color:{valueInView:"#393939",compareEqual:function(e,t){return r.equals(e,t)}},"font-family":{valueInView:["-apple-system","BlinkMacSystemFont","PingFang SC","Helvetica","Tahoma","Arial","Hiragino Sans GB","Microsoft YaHei","微软雅黑","SimSun","宋体","Heiti","黑体","sans-serif"].join(",")},"color-catalogue":{valueInView:"#003884",value:o.getDefault("color"),compareEqual:function(e,t){return r.equals(e,t)}}};return i.each(s,function(e,t){var n={name:t,valueInView:e.valueInView,value:o.getDefault(t)||e.value,compareEqual:e.compareEqual};a.addMappingRule(n)}),a}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){return n(759).extend({name:"InlineStyleViewMapper"})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(21),o=n(1);return t.extend({initialize:function(){this._mappingRules={},delete this.options},_isValidMappingRule:function(e){return!(!e||!e.name||null==e.value||null==e.valueInView)},addMappingRule:function(e){var t,n=this._mappingRules;this._isValidMappingRule(e)?n[t=e.name]?o.error("Failed to add mapping rule, mapping rule do exists",e):this._mappingRules[t]=e:o.error("Failed to add mapping rule, parameter is not valid",e)},valueFromView:function(e,t){var n=this._mappingRules[e],i=t;return n&&(n.compareEqual?n.compareEqual(t,n.valueInView):t===n.valueInView)&&(i=n.value),o.log("valueFromView name/valueInView => value: "+e+"/"+t+" => "+i),i},valueToView:function(e,t){var n=this._mappingRules[e],o=t;return n&&(n.compareEqual?n.compareEqual(t,n.value):t===n.value)&&(o=n.valueInView),o}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(1),i=n(761);return t=i.extend({render:function(){var e=this;t.__super__.render.apply(e,arguments),e.options.noteviewFrame.off("contextmenu"),e.options.noteviewFrame.contextmenu(function(t){e._onContextMenu(t)}),o.log("PC noteview render done.")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(6),i=n(27),r=n(7),a=n(204),s=n(193),l=n(194),c=n(22),u=n(76),d=n(762),p=n(3),h=n(766),f=n(59),g=n(62),y=n(47),m=n(1),v=n(46),b=n(131),_=n(47),I=n(819),k=n(200),w=n(820),C=n(367);return i.View.extend({className:"note-view",attributes:{tabIndex:1,spellcheck:!1,contenteditable:"true"},directionKeyJustMoved:!1,_isOnMouseDown:!1,events:{textInput:"_onTextInput",compositionstart:"_onCompositionStart",compositionend:"_onCompositionEnd",mousedown:"_onMouseDown",mouseup:"_onMouseUp",selectstart:"_onSelectStart",contextmenu:"_onContextMenu",dragstart:"_onDragDropEvent",dragover:"_onDragDropEvent",drop:"_onDragDropEvent",dragend:"_onDragEnd",copy:"_onCopy",cut:"_onCut",paste:"_onPaste","click a[href]":"_onAnchorClick",click:"_onClick",blur:"_onBlur",focus:"_onFocus"},note:null,blockViews:null,tableViews:null,headerView:null,footerView:null,_keyMonitor:null,_inlineStyleViewMapper:null,isOnComposition:!1,_isSilent:!1,_noteEvents:{"insert-block":"_onInsertBlock","remove-block":"_onRemoveBlock","replace-block":"_onReplaceBlock","read-only-change":"_onReadOnlyChange","high-light":"_onHighlight","next-high-light":"_onNextHighlight","pre-high-light":"_onPreHighlight","content-parse-done":"_onContentParseDone","header-footer-changed":"_OnHeaderFooterChanged","clear-high-light":"_onClearHighlight","copy-prohibited":"_onCopyPSrohibited"},_docEvents:{selectionchange:"_onSelectionChange"},_shouldStopComposition:!1,_affectedViewsByComposition:null,_pageBatchTimer:null,_pageBatchPendingQueue:null,_viewMode:null,_renderBatchTimer:null,_currentZoom:null,_disableOCR:null,initialize:function(e){this._bindEventHandlers(),this.setOptions(e),this._bindEventsForDoc(),this._bindEventsForThis(),this.highlightView=new I,this._pageBatchPendingQueue=[],e.inlineStyleViewMapper&&(this._inlineStyleViewMapper=e.inlineStyleViewMapper),this._currentZoom=1},createHeaderFooterView:function(e){var t,n,o,i;if(null!=(n=(t=this).note))return(o=n.getHeaderFooter(e))||(o=k.createBlank(e),n.setHeaderFooter(o,e)),(i=new w(o,t.isReadOnly())).on("focus",function(){t.trigger("set-range",c.createForHeaderFooter(o),!0,!0)}).on("blur",function(e){t.trigger("selectionchange",e)}).on("text-input",function(e){t.trigger("header-footer-view-text-change",e,i.block)}),i},_renderHeaderFooterView:function(e){e.prepend(this.headerView.$el),e.append(this.footerView.$el)},_removeHeaderFooterView:function(){null!=this.headerView&&(this.headerView.remove(),this.headerView=null),null!=this.footerView&&(this.footerView.remove(),this.footerView=null)},_OnHeaderFooterChanged:function(e){var t=this.options.noteviewFrame;this.isInPageMode()&&(e?(null!=this.footerView&&this.footerView.remove(),this.footerView=this.createHeaderFooterView(e),null!=t&&t.append(this.footerView.$el)):(null!=this.headerView&&this.headerView.remove(),this.headerView=this.createHeaderFooterView(e),null!=t&&t.prepend(this.headerView.$el)))},_bindEventHandlers:function(){var e=this,n=function(n){m.log("bindHandlers: "+n),t.bindAll(e,n)};t.each(e._noteEvents,n),t.each(e._docEvents,n)},_setNote:function(e){this.removeNote(),this.note=e,this._bindEventsForNote()},removeNote:function(){this.note&&this._unbindEventsForNote(),this.note=null},reset:function(){var e;(this.removeNote(),this.$el.html(""),this.blockViews=this._clearBlockViews(this.blockViews),this.options&&(this.options.note=null,this.options.isNoteSet=!1,(e=this.options.noteviewFrame)&&(e.find(".header-footer-input").prop("contenteditable",!0),e.removeClass("has-handwrite"))),this.$el.removeClass("read-only"),this._keyMonitor&&this._keyMonitor.clearCache(),o(document.head).find("style.note-style").remove(),this._isSilent=!1,window.parent!==window)&&window.getSelection().removeAllRanges();this._pageBatchTimer&&(window.clearTimeout(this._pageBatchTimer),this._pageBatchTimer=null),this._renderBatchTimer&&(clearTimeout(this._renderBatchTimer),this._renderBatchTimer=null),this._pageBatchPendingQueue=[],this._removeHeaderFooterView()},setOptions:function(e){if(e=e||{},null==this.options)this.options=t.clone(e);else for(var n in e)e.hasOwnProperty(n)&&(this.options[n]=e[n]);null!=this.options.note&&this._setNote(this.options.note),null!=this.options.viewMode&&(this._viewMode=this.options.viewMode),this._disableOCR=!!this.options.disableOCR},render:function(){var e=this.$el,t=this.highlightView,n=this.options.noteviewFrame;this.blockViews=this.blockViews?this._clearBlockViews(this.blockViews):[],this.tableViews=[],e.html(""),o(document.head).find("style.note-style").remove(),o(document.head).append('<style class="note-style"></style>'),e.append(t.$el),this.isInPageMode()?this._enablePageMode(!1):this._disablePageMode(this._viewMode),window.YNE_PLATFORM&&e.addClass("platform-"+window.YNE_PLATFORM),null!=n&&n.find(".header-footer-input").prop("contenteditable",!this.isReadOnly()),null!=this._renderBatchTimer&&(clearTimeout(this._renderBatchTimer),this._renderBatchTimer=null),this._renderInBatch(0)},_renderInBatch:function(e){var t,n,o=this.note,i=Date.now();if(null!=o){for(;e<o.blocks.length&&(t=o.blocks[e],(n=this._createBlockView(t))||m.warn("Failed to create block view!"),this.blockViews.push(n),this.$el.append(n.$el),n.render(),this._bindEventsForBlockView(t,n),this._setPageInfo(e),e++,!(Date.now()-i>100)););e<o.blocks.length&&(this._renderBatchTimer=setTimeout(this._renderInBatch.bind(this,e),10))}},_repairBlockViews:function(e){var n,o,i,r=this,a=[];e&&e.length>0&&(n=e.shift(),a.push(n),e.length>0&&(o=e.pop(),a.push(o)),r._isElementExisting(n.cid)||((i=r.getBlockViewIndex(n)-1)>=0?r.getBlockViewAt(i).$el.after(n.$el):r.getBlockViewAt(0).$el.before(n.$el)),o&&!r._isElementExisting(o.cid)&&n.$el.after(o.$el),r.reRenderTextBlockView(a),t.each(e,function(e){r._isElementExisting(e.cid)||o.$el.before(e.$el)}))},_isElementExisting:function(e){return this.$el.find('[data-yne-cid="'+e+'"]').length>0},reRenderTextBlockView:function(e){e=e||this.blockViews,t.each(e,function(e){var t=e.block;p.isTextBlock(t)&&e.render()})},_listenerEventsForBlockView:function(e){var n={command:"onCommand","get-read-only-status":"_onGetReadOnlyStatus"};return p.isTable(e)&&(n=t.extend(n,{"select-all":"onSelectAll","save-content":"_onSaveContent"})),n},_bubbleEventsForBlockView:function(e){var n={"locked-change":!0};switch(p.getType(e)){case p.IMAGE:n=t.extend(n,{contextmenu:!0,"replace-img-url":!0,"get-exif-data":!0,"yne-replace-image":!0,"yne-open-image":!0,"yne-download-image":!0,"get-image-items":!0,"img-title-edit-start":!0,"img-title-edit-end":!0,"img-title-edit-focus":!0,"img-title-edit-exit":!0,"img-title-edit-update":!0,"yne-image-ocr":!0,"yne-request-image-rendered-src":!0});break;case p.ATTACHMENT:n=t.extend(n,{"yne-replace-attachment":!0,"yne-open-attachment":!0,"yne-download-attachment":!0,"yne-mac-preview":!0});break;case p.TABLE:n=t.extend(n,{"yne-download-attachment":!0,"yne-on-paste":!0,"get-note-range":!0,"link-menu-show":!0,"link-menu-hide":!0,"move-caret":!0,"set-range":!0,"global-redo":!0,"global-undo":!0,copy:!0,cut:!0,"cell-edit-view-selection-change":!0,"cell-edit-view-enter":!0,"cell-edit-view-exit":!0,"cell-edit-view-history-change":!0,"cell-edit-view-command-executed":!0,"yne-blob-paste":!0});break;case p.QUOTE:case p.TODO:case p.PARAGRAPH:case p.HEADING:n=t.extend(n,{"link-menu-show":!0,"link-menu-hide":!0,"get-entity":!0});break;case p.LIST_ITEM:n=t.extend(n,{"get-editing-styles":!0,"link-menu-show":!0,"link-menu-hide":!0});break;case p.CATALOGUE:n=t.extend(n,{"inner-goto":!0})}return n},_unbindEventsForBlockView:function(e,n){var o=function(e){e&&t.each(e,function(e,t){n.off(t)})};o(this._listenerEventsForBlockView(e)),o(this._bubbleEventsForBlockView(e))},_bindEventsForBlockView:function(e,t,n){var o;(n=!1!==n)&&this._unbindEventsForBlockView(e,t),o=this._listenerEventsForBlockView(e),v.addListeners(o,t,this),o=this._bubbleEventsForBlockView(e),v.bubble(o,t,this)},setHtmlContentEditable:function(e){this.$el.attr("contenteditable",!!e)},getHtmlContentEditable:function(){return"true"===this.el.contentEditable+""},updateFormatPainterCursorUI:function(e){e?this.$el.addClass("format-painter-active"):this.$el.removeClass("format-painter-active")},_handleNoteEvents:function(e){var n=this,o=n.note;o&&o.on&&o.off?t.each(n._noteEvents,function(t,i){e?o.on(i,n[t]):o.off(i,n[t])}):m.warn("Failed to bind note events!")},_bindEventsForNote:function(){this._handleNoteEvents(!0)},_unbindEventsForNote:function(){this._handleNoteEvents(!1)},_bindEventsForDoc:function(){var e=this,n=o(document);t.each(e._docEvents,function(t,o){m.log("bind document event: "+o+" -> "+t),m.log(e[t]),n.on(o,e[t])})},_bindEventsForThis:function(){this.on("draw-range",this._onDrawRange.bind(this)),this.on("resize",this._onResize.bind(this))},_onChangeHandwriteBlock:function(e){var t=this.options.noteviewFrame;e?t.addClass("has-handwrite"):this.note.hasHandWriteBlock()||t.removeClass("has-handwrite")},bindKey:function(e){var t=this,n=t._keyMonitor;e&&(n||(t._keyMonitor=n=new a({el:t.el})),n.unbind(e),n.bind(e,function(n){t.trigger("key-pressed",e,n)}),t._keyMonitor=n)},unbindKey:function(e){var t=this._keyMonitor;t&&e&&t.unbind(e)},_onDrawRange:function(e,t){var n=this;n._silentDo(function(){n._drawRange(e,t)})},_updateSelectionUI:function(e){var t,n,o,i,r,a;e?null!=this.note?(c.isNoteRange(e)?(o=e.getStartBlockRange(),i=e.getEndBlockRange(),t=this.note.getBlockIndex(o.block),n=this.note.getBlockIndex(i.block)):(r=this.getBlockViewContainer(e.startContainer),a=this.getBlockViewContainer(e.endContainer),t=this.getBlockViewIndex(r),n=this.getBlockViewIndex(a)),this._selectAttachments(t,n,e),this._selectCatalogueTables(t,n)):m.warn("Note has been dettached."):m.warn("The range is not valid!")},_selectAttachments:function(e,n){-1!==e&&-1!==n?e!==n&&t.each(this.blockViews,function(t,o){if(t){var i=o>=e&&o<=n;t.selectAttachment&&t.selectAttachment(i)}}):m.warn("start or end is -1")},_selectCatalogueTables:function(e,n){var o,i=[];-1!==e&&-1!==n&&t.each(this.blockViews,function(t,r){if(t){var a=r>=e&&r<=n;if(t.selectTable)t.selectTable(a);else if(t.selectCatalogue){if(o=t.getOwnerId(),!a&&i[o])return;i[o]=!0,t.selectCatalogue(a)}}})},_drawRange:function(e,t){if(e&&e.canDrawedByNative){var n,o,i,r,a=e.getStartBlockRange(),s=a.block;if(t=!1!==t,this._clearCustomSelectionUI(s),p.isCode(s)&&(r=this.getBlockViewByBlock(s)),e.canDrawedByNative())this.setHtmlContentEditable(!0),this._updateSelectionUI(e),n=e.toNativeRange(this),u.setRange(n,window),t&&this._scrollNativeSelectionIntoWrapper(n,r);else{if(this.setHtmlContentEditable(!1),e.isInMultiBlock())return void m.warn("The note range is note valid!");a=e.getStartBlockRange(),null!=this.note&&(o=this.note.getBlockIndex(a.block),(i=this.getBlockViewAt(o))&&i.trigger("draw-range",a,s))}}else m.log("note range is not valid!")},_isZeroRect:function(e){return!e||0===e.width&&0===e.height},_scrollNativeSelectionIntoWrapper:function(e,t){var n,o;this._isOnMouseDown||(e?(e.collapsed?(n=e.getClientRects()[0],this._isZeroRect(n)&&(n=e.getBoundingClientRect())):n=e.getBoundingClientRect(),this._isZeroRect(n)&&(1!==(o=e.commonAncestorContainer).nodeType&&(o=o.parentNode),n=o.getBoundingClientRect()),this._isZeroRect(n)?m.error("can not get selection client rect"):this._scrollRectIntoWrapper(n,t)):m.warn("range not found"))},_getWrapper:function(){for(var e=this.el.parentNode;e;){if(o(e).is(".note-view-wrapper"))return e;e=e.parentNode}},_scrollRectIntoWrapper:function(e,t){var n,o,i=this._getWrapper(),r=i.getBoundingClientRect(),a=r.top,s=r.bottom,l=r.height,c=r.left,u=r.right,d=e.top*this._currentZoom,p=e.bottom*this._currentZoom,h=e.height*this._currentZoom,f=e.left*this._currentZoom,g=null,y=null,m=c+30+10;this._isZeroRect(e)||(t&&(o=(n=t._getContentContainer().get(0)).clientWidth),i.scrollHeight!==i.clientHeight&&(s-=11,l-=11),i.scrollBarWidth!==i.clientWidth&&(u-=11),h>l?(p<0||d>l)&&(y=p-l):d<a||d-a<=10?y=-1*Math.abs(d-a):p>s||s-p<=10?y=Math.abs(p-s):p===s&&(y=10),f>=u||u-f<=10?g=Math.abs(f-u):(f<=c||f-c<=10)&&(g=-1*Math.abs(f-c)),this._scrollWrapperBy(g,y),n&&(f>o||f<m)&&(n.scrollLeft+=f-m))},_scrollWrapperBy:function(e,n){var o=this._getWrapper();e>0?e+=20:e<0&&(e-=20),n>0?n+=20:n<0&&(n-=20),t.isNumber(e)&&(o.scrollLeft+=e),t.isNumber(n)&&(o.scrollTop+=n)},parseNativeRange:function(e){if(e&&e.startContainer){var t=e.startContainer,n=e.endContainer;if(w.isHeaderView(t))return[new d[p.HEADER_FOOTER]({block:this.note.getHeaderFooter(!1)})];if(w.isFooterView(t))return[new d[p.HEADER_FOOTER]({block:this.note.getHeaderFooter(!0)})];var o,i,r,a,s=this.getBlockViewContainer(t),l=this.getBlockViewContainer(n),c=this.getBlockViewIndex(s),u=this.getBlockViewIndex(l),h=[];if(-1!==c&&-1!==u){if(null!=this.note){for(o=c;o<=u;o++)r=this.blockViews[o],i=this.note.getBlockAt(o),(a=r.parseNativeRange(e,i,o!==c&&o!==u))?h.push(a):m.warn("Failed to parse native range to block range!");return h}m.warn("note has been dettached.")}else m.warn("start/end block index is -1 !")}else m.warn("no native range!")},_isRangeInTableBlock:function(){return u.isRangeInSelector(".block-view.table-view")},_onSelectionChange:function(e){var t=!u.isRangeInNode(this.el),n=u.getRange(),o=null;if(this._updateSelectionUI(n),t?(o="The native range is not in note view!",m.log(o)):C.isRangeInCellEditArea(n)?(o="The native range is in table cell edit area",m.log(o)):this._isSilent?o="The _isSilent flag is true!":this.isOnComposition&&(o="The isOnComposition flag is true!"),!o){if(this._isRangeInTableBlock()){if(!this.directionKeyJustMoved)return o="The selection/range is in table box!",m.log("  selection change deprecated!XXXXXXX"),void m.log(o);this.directionKeyJustMoved=!1}this.trigger("selectionchange",e),this._scrollNativeSelectionIntoWrapper(n)}},_silentDo:function(e){var t=this;if(t._isSilent=!0,m.DEBUG)e();else try{e()}catch(e){m.warn("silent do error")}window.setTimeout(function(){t._isSilent=!1},0)},clearNativeSelectionUI:function(){u.getSelection(window).removeAllRanges()},_clearCustomSelectionUI:function(e){var n=this.blockViews;t.each(n,function(t){t.trigger("draw-range",null,e)})},_appendBlankLineIfNeed:function(){var e,t=this.note;t&&((e=t.getLastBlock())&&(!e||t.lastBlockIsEasyInput()&&!e.isLocked())||this.trigger("note-append-blankparagraph",e))},focusLastBlankLine:function(){var e=this;e._appendBlankLineIfNeed(),window.setTimeout(function(){var t=e.getLastBlockView();o(t.el).trigger("mousedown")},50)},isReadOnly:function(){var e=this.note;return null==e||e&&e.isReadOnly()},isDragProhibited:function(){var e=this.note;return null==e||e&&e.isDragProhibited()},isCopyProhibited:function(){var e=this.note;return null==e||e&&e.isCopyProhibited()},_onGetReadOnlyStatus:function(e){e&&e(this.isReadOnly())},_isAtEndOfTextBlock:function(e,t){if(!document.caretRangeFromPoint)return!1;var n,i,r=document.caretRangeFromPoint(e.clientX,e.clientY),a=t.querySelector(".para-text");if(!a||!r||!r.collapsed)return!1;if(n=r.commonAncestorContainer,g.isText(n)){if(r.startOffset!==n.nodeValue.length)return!1;n=n.parentNode}if(!o.contains(a,n))return!1;for(;n&&n!==a;){if((i=n.parentNode).lastChild!==n)return!1;n=i}return!0},_onMouseDown:function(e){var t,n,i,r,a,s,l,u=3===(e.keyCode||e.which);if(this._isOnMouseDown=!0,this._clearHighlight(),this.$el.removeClass("highlight"),!this.isReadOnly()&&(t=this.getBlockViewContainer(e.target),n=this.getBlock(e.target),this._preventSelectStart=!1,!u||(_.isSafari()&&t&&this._isAtEndOfTextBlock(e,t)&&(this._preventSelectStart=!0),o(t).is(".image-view, .attachment-view, .table-view")))){if(!n||n.isLocked())return m.log("_onMouseDown(): block is null or locked!"),void this.focusLastBlankLine();if(this.trigger("mouse-down",e),i=p.getType(n),s=d[i])switch(r=new s({block:n}),a=new c({startRange:r,endRange:r}),i){case p.IMAGE:case p.ATTACHMENT:case p.HANDWRITE:this.setHtmlContentEditable(!0),t.focus(),this.trigger("set-range",a,!0,!0);break;case p.QUOTE:case p.CODE:case p.TODO:case p.PARAGRAPH:case p.LIST_ITEM:case p.HEADING:case p.CATALOGUE:(e=e.originalEvent||e).detail>2?(e.preventDefault(),r.expandToEnd(),l=!0):(l=!1,a=document.caretRangeFromPoint(e.clientX,e.clientY)),this.setHtmlContentEditable(!0),this._clearCustomSelectionUI(n),this.trigger("backup-drag-range"),window.Cypress?setTimeout(function(){this.trigger("set-range",a,!0,!0)}.bind(this),0):this.trigger("set-range",a,l,!0);break;case p.TABLE:break;case p.HR:this.trigger("set-range",a,!0,!0);break;case p.UNKNOWN:this.setHtmlContentEditable(!1),this.trigger("set-range",a,!0,!0)}else m.warn("_onMouseDown is not handled, block type is "+i);this.lastBlock=n}},_clearHighlight:function(){this.highlightView.$el.remove(),this._onClearHighlight()},_onMouseUp:function(){this._isOnMouseDown=!1},_onAnchorClick:function(e){var t,n=e.currentTarget;if(e.preventDefault(),t=n&&n.getAttribute("href"))return b.isNoteLinkUrl(t)?this.trigger("open-link",b.getNoteId(t),!0):void this.trigger("open-link",t)},_onSelectStart:function(e){if(!0===this._preventSelectStart)return e.preventDefault(),e.stopPropagation(),!1;this.trigger("selectstart",e)},_onTextInput:function(e){var t,n;e.preventDefault(),this.isReadOnly()||(n=e.originalEvent||e)&&(t=n.data+"")&&this.trigger("text-input",t)},_onCompositionStart:function(e){var t=this;if(t.isReadOnly())e.preventDefault();else{if(m.log("note view compositionstart ----------\x3e>>>>>"),window.clearTimeout(t._compositionEndTimer),t.setCompositionState(!0),t._shouldStopComposition=!1,t._affectedViewsByComposition=null,t.trigger("onCompositionStart",function(e,n){t._shouldStopComposition=e,t._affectedViewsByComposition=n}),t._shouldStopComposition)return e.preventDefault(),void e.stopPropagation();t.trigger("delete-selection")}},_onCompositionEnd:function(e){var t=this,n=e.originalEvent||e;if(t.isReadOnly()||t._shouldStopComposition)return e.preventDefault(),void(t._affectedViewsByComposition&&t._repairBlockViews(t._affectedViewsByComposition));m.log("note view compositionend ----------\x3e>>>>>"),n.data||t.trigger("delete-selection"),t._compositionEndTimer=window.setTimeout(function(){t.setCompositionState(!1)},0)},setCompositionState:function(e){var t;e&&(t=u.getRange(),this.trigger("set-range",t,!1,!1)),this.isOnComposition=e},_onInsertBlock:function(e,t){var n=this._createBlockView(t);f(n),this._bindEventsForBlockView(t,n),this._insertBlockView(e,n)},_onRemoveBlock:function(e,t){this._removeBlockView(e),!1!==t&&this._setPageInfo(e)},_onReplaceBlock:function(e,t){var n=this._createBlockView(t);f(n),this._replaceBlockView(e,n)},_createBlockView:function(e){var t,n=p.getType(e),o=h(n),i={};return this.isInPageMode()?this.options.pageType===r.PAGE_TYPE_A4?(i.height=r.PAGE_HEIGHT_A4,i.width=r.PAGE_WIDTH_A4):this.options.pageType===r.PAGE_TYPE_B5?(i.height=r.PAGE_HEIGHT_B5,i.width=r.PAGE_WIDTH_B5):this.options.pageType===r.PAGE_TYPE_TEST?(i.height=r.PAGE_HEIGHT_TEST,i.width=r.PAGE_WIDTH_TEST):this.options.pageType===r.PAGE_TYPE_NONE?(i.height=r.PAGE_HEIGHT_NONE,i.width=r.PAGE_WIDTH_NONE):(m.debugAlert("Invalid pageType in PageMode:",this.options.pageType),i.height=r.PAGE_HEIGHT_NONE,i.width=r.PAGE_WIDTH_NONE):(i.height=r.PAGE_HEIGHT_NONE,i.width=r.PAGE_WIDTH_NONE),f(!!o),(t=new o({editor:this.options.editor,block:e,isReadOnly:e.isReadOnly(),inlineStyleViewMapper:this._inlineStyleViewMapper,pageSize:i,pageBreakContainer:this.options.noteviewFrame,noteView:this,disableOCR:this._disableOCR})).on("view-height-changed",this._onBlockViewHeightChanged.bind(this)),t.on("pageBreak-inserted",this._onPageBreakInserted.bind(this)),t.on("pageBreak-positionChanged",this._onPageBreakPosChanged.bind(this)),t instanceof h(p.HANDWRITE)&&this._onChangeHandwriteBlock(!0),t},_insertBlockView:function(e,t){var n,o=this.blockViews,i=t.block,r=this.$el,a=r.children().filter(".block-view"),s=a.length;p.isQuote(i)&&(n=i.getDefaultSetFont()),o.splice(e,0,t),e===s?r.append(t.$el):a.eq(e).before(t.$el),t.render(n)},_removeBlockView:function(e){var n,o,i,r,a=this.blockViews,s=this.$el,l=this.tableViews;n=a.splice(e,1)[0],(i=t.indexOf(l,n))>=0&&l.splice(i,1),(o=(r=s.children().filter(".block-view")).eq(e))&&(o.attr("data-yne-cid")===n.cid?r.eq(e).remove():m.warn("skip div deletion whose attr is "+o.attr("data-yne-cid"))),n instanceof h(p.HANDWRITE)&&this._onChangeHandwriteBlock(!1),n.clearPageBreaks(),n.off(),n.onDestroy()},_replaceBlockView:function(e,t){var n=this.blockViews,o=this.$el;this._clearBlockViews(n.splice(e,1,t)),o.children().filter(".block-view").eq(e).replaceWith(t.$el),t.render()},getBlockViewAt:function(e){return this.blockViews[e]},getLastBlockView:function(){var e=this.blockViews;return e[e.length-1]},getBlockViewContainer:function(e){var t,n;return o(e).is(".highlight-view")?(t=this.getBlockViewAt(0))&&(n=t.el):n=o(e).closest(".block-view")[0],n},getBlockViewIndex:function(e){if(!e)return-1;return this.$el.find(">.block-view").index(e)},getBlock:function(e){var t,n,o=this.note;if(null!=o)return t=this.getBlockViewContainer(e),n=this.getBlockViewIndex(t),o.getBlockAt(n)},getBlockViewByBlock:function(e){var t;if(null!=this.note)return t=this.note.getBlockIndex(e),this.getBlockViewAt(t)},onCommand:function(e,t){var n,o,i;null==t.range&&(t.imageBlockView?(n=t.imageBlockView,t.imageBlockView=null,i=new l({block:n.block}),o=new c({blockRanges:[i]}),t.range=o):t.attachmentBlockView&&(n=t.attachmentBlockView,t.attachmentBlockView=null,i=new s({block:n.block}),o=new c({blockRanges:[i]}),t.range=o)),this.trigger("command",e,t)},_onCopy:function(e){this.trigger("copy",e)},_onCut:function(e){this.isReadOnly()?e.preventDefault():this.trigger("cut",e)},_onPaste:function(e){this.isReadOnly()?e.preventDefault():this.trigger("paste",e)},_onContextMenu:function(e){e.preventDefault(),e.stopPropagation(),this.isReadOnly()||this.trigger("contextmenu",e)},_onDragDropEvent:function(e){var t;if(!this.isReadOnly()&&!this.isDragProhibited())switch((e=e.originalEvent).type){case"dragstart":t=this.getBlock(e.srcElement),this.trigger("dragstart",e,t);break;case"dragover":t=this.getBlock(e.srcElement),this.trigger("dragover",e,t);break;case"drop":this.trigger("drop",e)}},_onDragEnd:function(e){this.trigger("dragend",e)},_onBlur:function(){this.trigger("blur")},_onFocus:function(){window.parent!==window&&y.isSafari()&&window.parent.getSelection().removeAllRanges()},_onClick:function(){this.trigger("yne-click")},onSelectAll:function(){var e,n=document.createRange();e=p.isTodo(t.first(this.note.blocks))?this.el.firstChild.querySelector(".todo-input"):this.el.firstChild,n.setStart(e,0),n.setEnd(this.el.lastChild,1),u.setRange(n,window),this.parseNativeRange(n)},_onSaveContent:function(){this.trigger("save-content")},_onReadOnlyChange:function(){var e=this.isReadOnly(),t=this.options.noteviewFrame;this.setHtmlContentEditable(!e),e?(this.$el.addClass("read-only"),null!=t&&t.find(".header-footer-input").prop("contenteditable",!1)):(this.$el.removeClass("read-only"),null!=t&&t.find(".header-footer-input").prop("contenteditable",!0))},_checkHighlightView:function(){this.$el.children()[0]!==this.highlightView.$el.get(0)&&this.$el.prepend(this.highlightView.$el)},_onHighlight:function(e){var t,n=this.options.noteviewFrame,o=this.options.noteviewWrapper.get(0);e.length?(o.style.background=this.$el.css("background"),n.css("background","transparent"),this.$el.css("background",""),this.$el.addClass("highlight"),this._checkHighlightView()):((t=o.style.background)&&this.$el.css("background",t),this.$el.removeClass("highlight")),this.highlightView.showHighlight(this.el,e)},_onCopyPSrohibited:function(){this.isCopyProhibited()&&this.$el.addClass("copyProhibited")},_onClearHighlight:function(){t.each(this.blockViews,function(e){e.clearHighlight()})},_onNextHighlight:function(){this._checkHighlightView(),this.highlightView.nextHighlight()},_onPreHighlight:function(){this._checkHighlightView(),this.highlightView.preHighlight()},_onResize:function(e){var n=this;t.isNumber(e)&&(n._currentZoom=e),t.each(n.blockViews,function(e){e.trigger("resize"),n.isInPageMode()&&e.coincideAllPageBreaks()}),n._scrollNativeSelectionIntoWrapper(u.getRange())},_clearBlockViews:function(e){return t.each(e,function(e){e.onDestroy()}),[]},isInPageMode:function(){return 2===this._viewMode},setViewMode:function(e,t){this._viewMode=e,this.isInPageMode()?this._enablePageMode(t):this._disablePageMode(e)},_calcNoteViewFrameHeight:function(){var e,n,o,i,a,s=t.last(this.blockViews),l=this.options.noteviewFrame;if(null!=s){if(e=(s.getLastTransPageIndex()||0)+1,this.options.pageType===r.PAGE_TYPE_A4?n=r.PAGE_HEIGHT_A4:this.options.pageType===r.PAGE_TYPE_B5?n=r.PAGE_HEIGHT_B5:this.options.pageType===r.PAGE_TYPE_TEST&&(n=r.PAGE_HEIGHT_TEST),null!=n&&e>1){if(o=e-2,0===(i=l.find('[data-page-id="'+o+'"]')).length)return void m.debugAlert("Failed to find pageBreak:",o);i.length>1&&(m.debugAlert("Should not find more than one pageBreak:",o),i=i.first()),(a=n-(l.height()-parseInt(this.$el.css("padding-bottom"))-parseInt(i.css("top"))-i.height()))<0&&m.log("lastPageShortHeight < 0",a),l.height(l.height()+a),s.$el.position().top-parseInt(this.$el.css("padding-top"))+s.$el.height()>this.$el.height()&&(m.debugAlert("noteview content is overflowed"),l.height("auto"))}else l.height(n+parseInt(this.$el.css("padding-top"))+parseInt(this.$el.css("padding-bottom")));this._coincideAllPageBreaks()}},_coincideAllPageBreaks:function(){t.each(this.blockViews,function(e){e.coincideAllPageBreaks()})},_disablePageMode:function(e){var n=this.options.noteviewFrame;this._pageBatchTimer&&(window.clearTimeout(this._pageBatchTimer),this._pageBatchTimer=null),n?(n.removeClass(r.PAGE_CLASS_A4),n.removeClass(r.PAGE_CLASS_B5),n.removeClass(r.PAGE_CLASS_TEST),t.each(this.blockViews,function(e){e.disablePageMode()}),this._viewMode=e,this._removeHeaderFooterView(),n.css("height","auto")):m.debugAlert("noteviewFrame should NOT be null when _disablePageMode")},_enablePageMode:function(e){var n=this,o=n.options.noteviewFrame;n._pageBatchTimer&&(window.clearTimeout(n._pageBatchTimer),n._pageBatchTimer=null),n._pageBatchPendingQueue=[],o?(o.removeClass(r.PAGE_CLASS_A4),o.removeClass(r.PAGE_CLASS_B5),o.removeClass(r.PAGE_CLASS_TEST),n.options.pageType===r.PAGE_TYPE_A4?o.addClass(r.PAGE_CLASS_A4):n.options.pageType===r.PAGE_TYPE_B5?o.addClass(r.PAGE_CLASS_B5):n.options.pageType===r.PAGE_TYPE_TEST&&o.addClass(r.PAGE_CLASS_TEST),n._removeHeaderFooterView(),n.headerView=n.createHeaderFooterView(!1),n.footerView=n.createHeaderFooterView(!0),n._renderHeaderFooterView(o),!0===e&&null!=n.note&&(t.each(n.blockViews,function(e){e.enablePageMode(n.options.pageType)}),n._setPageInfo(0))):m.debugAlert("noteviewFrame should NOT be null when _enablePageMode")},_getBlockViewIndexByCID:function(e){var n;return t.some(this.blockViews,function(t,o){return t.cid===e&&(n=o,!0)}),n},_onBlockViewHeightChanged:function(e){var t;null!=(t=this._getBlockViewIndexByCID(e))&&this._setPageInfo(t)},_onContentParseDone:function(){this.isInPageMode()&&this._calcNoteViewFrameHeight()},_onPageBreakInserted:function(){},_onPageBreakPosChanged:function(){},_setPageInfo:function(e,t){var n,o,i,r;if(this.isInPageMode()&&null!=this.blockViews&&0!==this.blockViews.length&&null!=(n=this.blockViews[e])&&null!=n.cid)if(this._setPageInfoInBatch(e),!0===t&&(this._pageBatchTimer=null),this._pageBatchPendingQueue.length>0){if(null==this._pageBatchTimer){for(r=null;null==r&&this._pageBatchPendingQueue.length>0;)i=this._pageBatchPendingQueue.shift(),r=null!=(o=this.blockViews[i.index])&&o.cid===i.cid?i.index:this._getBlockViewIndexByCID(i.cid);m.log("resetPageInfo: startTimer for ",r),null!=r&&(this._pageBatchTimer=setTimeout(this._setPageInfo.bind(this,r,!0),10))}}else this._pageBatchTimer=null,this.note.isParsingData()?this.options.noteviewFrame.height("auto"):this._calcNoteViewFrameHeight()},_setPageInfoInBatch:function(e){var t,n,o,i,r,a,s,l,c=Date.now();if(null!=this.blockViews&&0!==this.blockViews.length&&null!=e&&null!=(o=this.blockViews[e]))for(m.log("Start PageInfoInBatch from:",o,e),t=0===e?0:o.getFirstTransPageIndex();e<this.blockViews.length;){if(o=this.blockViews[e],0===e)s=o.resetPageInfo(0,0),n=0;else{if(null==(n=(i=this.blockViews[e-1]).getLastTransPageIndex()))break;-1===(a=i.getBottomPosInPage(n))&&(a=0),s=o.resetPageInfo(n,a)}if(e++,null!=n&&null!=t&&n-t,!0===s){if(p.isImage(o.block)&&o.isOnFloat()&&(l=n+1),(null==l||l<=n)&&Date.now()-c>100){null!=(r=this.blockViews[e])&&this._pageBatchPendingQueue.push({cid:r.cid,index:e});break}}else if(null==l||l<=n)break}}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(3),n(193),n(763),n(248),n(192),n(764),n(249),n(194),n(765),n(82),n(363),n(140),n(93),n(364),n(261)],void 0===(i=function(e,t,n,o,i,r,a,s,l,c,u,d,p,h,f,g,y){var m={};return m[n.ATTACHMENT]=o,m[n.CATALOGUE]=i,m[n.HEADING]=s,m[n.HR]=l,m[n.IMAGE]=c,m[n.LIST_ITEM]=u,m[n.PARAGRAPH]=d,m[n.TABLE]=f,m[n.TODO]=g,m[n.QUOTE]=p,m[n.CODE]=h,m[n.HANDWRITE]=r,m[n.HEADER_FOOTER]=a,m[n.UNKNOWN]=y,m}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(82)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.HEADING},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(82)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.HEADING},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(3),n(82)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.type=n.LIST_ITEM},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(3),o=n(87),i={};return i[t.ATTACHMENT]=n(768),i[t.CATALOGUE]=n(769),i[t.HANDWRITE]=n(770),i[t.HEADING]=n(771),i[t.HR]=n(772),i[t.IMAGE]=n(773),i[t.LIST_ITEM]=n(776),i[t.PARAGRAPH]=n(133),i[t.TABLE]=n(367),i[t.TODO]=n(814),i[t.QUOTE]=n(815),i[t.CODE]=n(816),i[t.UNKNOWN]=n(818),function(e){var t=i[e];return t||o}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(7),i=n(19),r=n(1),a=n(6);return t.View.extend({className:"page-break-view",templateName:"page_break_view",PLACEHOLDER_PREFIX:"p_",_$placeholder:null,_$pageBreak:null,_$container:null,_isAtViewBeginning:null,_topBlankHeight:null,_bottomBlankHeight:null,coincide:function(){var e,t,n,o;e=this._getOffsetTopPos(this.getPlaceholder()),t=this.getTopBlankHeight(),n=this.getPageBreak(),o=e+t,r.log("placeHolderTop/pageBreakTop/topBlankHeight:",e,o,this.getTopBlankHeight()),n.offset({top:o}),n.css({"margin-top":-t})},destroy:function(){this._$pageBreak.remove(),this._$placeholder.remove()},getPlaceholder:function(){return this._$placeholder},getPageBreak:function(){return this._$pageBreak},getTopBlankHeight:function(){return this._topBlankHeight},initialize:function(e){var t,n,s,l,c=e.pageIndex;this._topBlankHeight=e.topBlankHeight||0,this._bottomBlankHeight=e.bottomBlankHeight||0,this._$placeholder=e.placeholder||a('<div class="page-break-placeholder"></div>'),this._$pageBreak=a(i.render("common",this.templateName,{})),this._$container=e.container,this._$pageBreak.prepend(e.noteView.createHeaderFooterView(!0).$el),this._$pageBreak.append(e.noteView.createHeaderFooterView(!1).$el),0!==(l=this._$container.find('[data-page-id="'+c+'"]')).length&&l.attr("data-page-cid")===this.cid&&(r.debugAlert("should not create existing pageBreak for same view"),l.remove()),this._topBlankHeight<0&&(r.debugAlert("topBlankHeight should not be less than 0"),this._topBlankHeight=0),this._bottomBlankHeight<0&&(r.debugAlert("bottomBlankHeight should not be less than 0"),this._bottomBlankHeight=0),this._$pageBreak.attr("data-page-id",c),this._$pageBreak.attr("data-page-cid",this.cid),this._$pageBreak.attr("contenteditable","false"),t=this._$pageBreak.find(".bottomSpan"),n=this._$pageBreak.find(".topSpan"),s=this._$pageBreak.find(".middleSpan"),n.outerHeight(o.PAGE_SPLIT_BLANK_HEIGHT),t.outerHeight(o.PAGE_SPLIT_BLANK_HEIGHT),s.outerHeight(o.PAGE_SPLIT_MIDDLE_HEIGHT),this._$pageBreak.appendTo(this._$container),this._$pageBreak.height(n.outerHeight()+s.outerHeight()+t.outerHeight()),this._$placeholder.attr("data-page-id",this.PLACEHOLDER_PREFIX+this._$pageBreak.attr("data-page-id")),this._$placeholder.attr("data-page-cid",this.PLACEHOLDER_PREFIX+this._$pageBreak.attr("data-page-cid")),this._$placeholder.attr("contenteditable","false"),this._$placeholder.height(this._$pageBreak.height()+this._topBlankHeight+this._bottomBlankHeight)},isAtViewBeginning:function(){return!0===this._isAtViewBeginning},setAtViewBeginning:function(e){this._isAtViewBeginning=!0===e},_getOffsetTopPos:function(e){return e.offset().top}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(300);var t=n(87),o=n(6),i=n(0),r=n(19),a=n(193),s=n(1),l=n(76),c=n(47),u=n(11),d=n(71),p=n(7),h=n(169);return t.extend({className:"block-view attachment-view",DEFAULT_HEIGHT:100,timer:null,events:{"dblclick .attachment-container":"_onImgDblclick","mousemove .attachment-container":"_onMouseMove","mouseout .attachment-container":"_onMouseOut","click .attachment-download":"_onDownloadClick","dragstart .attachment-mask":"_onDragstart","dragend .attachment-mask":"_onDragEnd"},_isFloatSwitch:!1,_viewFrameHeight:null,initialize:function(){t.prototype.initialize.apply(this,arguments),i.bindAll(this,"_onStyleChange","_onContentChange","_onMouseMove","_onMouseOut"),this.block.on("style-change",this._onStyleChange),this.block.on("content-change",i.debounce(this._onContentChange,100)),this.bindSelectionEvents()},render:function(){var e,n,i,a,l,f=this,g=f.block,y=g.getSource(!0),m=g.getFileName(),v=g.getFileLength();u.IS_PC&&(y=d(y)),(u.IS_WEB_NOTE||u.IS_WEB_GROUP)&&!0===g.getFakeLoading()&&(y=p.LOADING_IMAGE_PATH,g.setFakeLoading(!1)),n=(e=h.getFileType(m))?"src--svg--type_"+e+"_large":"src--svg--type_other_large",a=void 0===v?"未知大小":h.getSizeString(v),l=h.splitFileFullName(m),i=r.render("common","attachment-view-attachment-container",{name:n,fileName:l.fileName,fileType:l.fileType,size:a,title:m,draggable:!0}),f.$el.find(".attachment-container").remove(),f.$el.append(i),f._viewFrameHeight=f.$el.outerHeight(!0)-f.$el.height(),f.$el.find(".attachment-container").tooltipster({animation:"",animationDuration:0,theme:["tooltipster-attachment","tooltipster-attachment-customized"],side:"bottom",delay:[800,300],arrow:!1,functionPosition:function(e,t,n){var i,r,a=o(t.tooltipClone);return i=f.mousePosY+a.height()>document.body.clientHeight?f.mousePosY-a.height()+10:f.mousePosY-10,r=f.mousePosX+a.width()>document.body.clientWidth?f.mousePosX-a.width()-10:f.mousePosX+10,n.coord.top=i>0?i:0,n.coord.left=r>0?r:0,n}}),f._renderStyles(),c.isSafari()&&f.$el.find(".attachment-container").attr("contenteditable","true"),t.prototype.render.apply(f,arguments),s.log("Attachment width/height",f.$el.width(),f.$el.height())},_renderStyles:function(){var e=this,t=e.block.getBlockStyles();i.each(t,function(t,n){e._setStyle(n,t)})},_setStyle:function(e,t){var n=this.$el,o=n.find(".attachment-block-container");switch(e){case"align":n.css("text-align",t);break;case"float":n.css("float")!==t?(this._isFloatSwitch=!0,n.css("float",t)):this._isFloatSwitch=!1;break;case"back-color":o.css("background-color",t),t||n.css("margin","");break;case"padding":o.css("padding",t),"0px"===n.css("padding-top")&&n.find(".attachment-block-container").css({"padding-top":"4px","padding-bottom":"4px"})}},_onStyleChange:function(e,t){this._setStyle(e,t),this.trigger("view-height-changed",this.cid)},_onContentChange:function(){this.render(),s.log("redraw attachment"),this.trigger("view-height-changed",this.cid)},getImgElement:function(){return this.$el.find("img").get(0)},getAttachmentContainerElm:function(){return this.$el.find(".attachment-container").get(0)},convertToNativeRange:function(){var e=document.createRange(),t=this.$el.get(0);return e.setStart(t,0),e.setEnd(t,t.childNodes.length),e},parseNativeRange:function(e,t,n){if(n||l.isNodeInRange(this.getAttachmentContainerElm(),e)||l.isRangeInNode(this.el,e)||this._isSelected())return new a({block:t})},_removeFocusedClass:function(){this.$el.removeClass("focused")},_addFocusedClass:function(){this.$el.addClass("focused")},onDrawRange:function(e){var t;e?(this._addFocusedClass(),(t=document.createRange()).selectNodeContents(this.$el.find(".attachment-container")[0]),l.setRange(t,window)):(this._removeFocusedClass(),this.selectAttachment())},_onImgDblclick:function(){var e=this.block.getResource(),t=this.block.getFileName();u.IS_PC&&this.trigger("yne-open-attachment",e,t),u.IS_MAC&&this.trigger("yne-mac-preview",e,t)},_onDownloadClick:function(){var e=this.block,t=e.getResource(),n=e.getFileName();(u.IS_WEB_GROUP||u.IS_WEB_NOTE||u.IS_MAC||u.IS_PC)&&this.trigger("yne-download-attachment",t,n)},_onDragstart:function(){this.$el.find(".attachment-mask").css("opacity",1)},_onDragEnd:function(){this.$el.find(".attachment-mask").css("opacity",0)},_isSelected:function(){return this.$el.find(".attachment-container").hasClass("selected")},selectAttachment:function(e){e?this.$el.find(".attachment-container").addClass("selected"):this.$el.find(".attachment-container").removeClass("selected")},disablePageMode:function(){t.prototype.disablePageMode.apply(this),this.$el.css("max-height","none")},_isPagingContinue:function(){return this._isFloatSwitch},_setViewMaxHeight:function(e){var t,n=this._pageInfo[e-1],o=0,i=this._getTopPosInPage(e);n&&(o=this._getPageBreakBottomPosInView(e-1)),(t=this.PAGE_HEIGHT+o-this._viewFrameHeight-i)<p.PAGE_SPLIT_BLANK_HEIGHT/2&&(t=p.PAGE_SPLIT_BLANK_HEIGHT/2),this.$el.css("max-height",t),s.log("Attachment max-height",this.$el.css("max-height"))},_onMouseMove:function(e){var t=this;clearTimeout(t.timer),t.timer=setTimeout(function(){t.mousePosX=e.originalEvent.x||e.originalEvent.layerX||0,t.mousePosY=e.originalEvent.y||e.originalEvent.layerY||0},200)},_onMouseOut:function(){clearTimeout(this.timer)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6),o=n(19),i=n(7),r=n(38),a=n(133),s=n(82),l=n(34),c=n(146),u=n(26),d=n(52),p=n(131),h=a.extend({className:"block-view catalogue-view",events:{"click a":"_onAnchorClick"},_forcePageBreakBegin:!0,initialize:function(){a.prototype.initialize.apply(this,arguments);var e=this,t=e.block;t.on("sorting-change",function(){e._renderSorting()}),t.on("focus",e.focus.bind(e)),t.on("blur",e.blur.bind(e))},_renderTemplate:function(){this.$el.html(o.render("common","catalogue_view",{isFirst:this.block.isFirst()}))},_renderText:function(){var e,n=this.block.getReadOnlyText(),o=this._inlineStyleViewMapper,i=this.$el.find(".para-text"),a=t("<a></a>");e=l.rich2html(n,{styleRules:{color:function(e){var t=e.color;return e.href!==u.getDefault("href")&&r.equals(e.color,"blue")?"#003884":null!=t&&o?o.valueToView("color-catalogue",t):void 0},"font-family":function(e){var t,n=e["font-family"];return null!=n&&o&&(t=o.valueToView("font-family",n)),n!==t?t:d.getAllValueByFont(n)||n}}}),a.html(e),i.html(a),this._renderSorting(),this._addLinkMenu()},_onAnchorClick:function(e){var t=this.block.getHref();e.stopPropagation(),c.test(t)?this.trigger("open-link",t):this.trigger("inner-goto",t)},_addLinkMenu:function(){var e,t=this,n=t.block,o=t.$el.find("a");o.off("hover"),o.hover(function(){p.isNoteLinkUrl(n.getHref())||t.isCollabLocked()||(e=new s({start:0,end:n.getLength(),block:n}),t.trigger("link-menu-show",{linkNode:o[0],href:n.getViewHref(),range:e,block:n}))},function(){t.trigger("link-menu-hide")})},_renderSorting:function(){this._renderFirst(),this._renderLast()},_renderFirst:function(){var e,t,n=this,o=n.block,i=n.$el;if(!o.isFirst())return i.removeClass("catalogue-first");i.addClass("catalogue-first"),e=i.find(".catalogue-refresh"),t=i.find(".catalogue-delete"),e.off("click"),t.off("click"),e.on("click",function(){n.trigger("command","comp.RefreshCatalogue",{ownerId:o.getOwnerId()})}),t.on("click",function(){n.trigger("command","comp.RefreshCatalogue",{ownerId:o.getOwnerId(),delete:!0})})},_renderLast:function(){if(!this.block.isLast())return this.$el.removeClass("catalogue-last");this.$el.addClass("catalogue-last")},_setStyle:function(e,t){var n=this.$el,o=n.find(".para-text"),r=this.block;switch(e){case"indent":t=(t=r.getBlockStyle("text-indent")+t)>0?t:0,o.css("text-indent",t*i.INDENT_WIDTH||"");break;case"text-indent":t=(t=r.getBlockStyle("indent")+t)>0?t:0,o.css("text-indent",t*i.INDENT_WIDTH||"");break;case"href":n.find("a").attr("href",r.getViewHref());break;case"back-color":n.css("background-color",t);break;case"padding":n.css("padding",t),n.css("padding-top","0px");break;default:a.prototype._setStyle.call(this,e,t)}},_onLockedChange:function(e){var t=this.block.getOwnerList();a.prototype._onLockedChange.call(this,e),t.updateLockState(this.isLocked())},getOwnerId:function(){return this.block.getOwnerId()},selectCatalogue:function(e){var t=this.block;e?t.trigger("select"):t.trigger("remove-select")},focus:function(){this.$el.addClass("catalogue-focus")},blur:function(){this.$el.removeClass("catalogue-focus")},_getHeightInPage:function(e){var t=h.__super__._getHeightInPage.apply(this,[e]),n=parseInt(this.$el.css("marginTop")),o=parseInt(this.$el.css("marginBottom"));return isNaN(n)||(t+=n),isNaN(o)||(t+=o),t}});return h}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(87),n(19),n(11),n(248),n(76),n(47)],void 0===(i=function(e,t,n,o,i,r,a,l){var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this._viewProps={block:t.block},this.bindSelectionEvents()},t.prototype.convertToNativeRange=function(){var e=document.createRange(),t=this.$el.get(0);return e.setStart(t,0),e.setStart(t,t.childNodes.length),e},t.prototype.getImgElement=function(){return this.$el.find("img").get(0)},t.prototype.onDrawRange=function(e){var t;if(e){if(this._addFocusedClass(),t=document.createRange(),!this.$el.children(".handwrite-copy-hack")[0])return;t.selectNodeContents(this.$el.children(".handwrite-copy-hack")[0]),a.setRange(t,window)}else this._removeFocusedClass(),this.selectHandWrite(!1)},t.prototype.parseNativeRange=function(e,t,n){if(n||this._isHandWriteInNativeRange(e)||this._isNativeRangeInHandWriteView(e)||this._isSelected())return new r({block:t})},t.prototype.selectHandWrite=function(e){e?this.$el.find(".attachment-container").addClass("selected"):this.$el.find(".attachment-container").removeClass("selected")},t.prototype.render=function(){var t,n;e.prototype.render.call(this),n=this.block.getSource(i.IS_PC),t=o.render("common","handwrite-view-container",{src:n,needCopyHack:i.IS_MAC||l.isSafari()}),this.$el.html(t)},t.prototype._addFocusedClass=function(){this.$el.addClass("focused")},t.prototype._isHandWriteInNativeRange=function(e){var t,n=this.getImgElement(),o=window.Range;return(t=n.ownerDocument.createRange()).selectNode(n),e.compareBoundaryPoints(o.START_TO_START,t)<1&&e.compareBoundaryPoints(o.END_TO_END,t)>-1},t.prototype._isNativeRangeInHandWriteView=function(e){var t,n=this.el;return 3===(t=e.commonAncestorContainer).nodeType&&(t=t.parentNode),!(t!==n&&!$.contains(n,t))},t.prototype._isSelected=function(){return this.$el.find(".attachment-container").hasClass("selected")},t.prototype._removeFocusedClass=function(){this.$el.removeClass("focused")},t}(n);return delete c.prototype.constructor,c.prototype.className="block-view handwrite-view",n.extend(c.prototype)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(133);return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},className:"block-view heading-view",_renderText:function(){this.$el.find(".para-text").attr("id",this.block.getId()),t.prototype._renderText.apply(this)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(87),i=n(249);return o.extend({className:"block-view hr-view",initialize:function(){o.prototype.initialize.apply(this,arguments),t.bindAll(this,"_onStyleChange"),this.block.on("style-change",this._onStyleChange)},render:function(){var e=this.block,t=e.getBlockStyle("width"),n=e.getBlockStyle("height");this.$el.html('<div class="hr-container"></div>').css({"text-align":e.getBlockStyle("align")}).find(".hr-container").css({width:t+"%",height:n,backgroundColor:e.getBlockStyle("color")}),o.prototype.render.apply(this,arguments),this._renderStyles()},_renderStyles:function(){var e=this,n=e.block.getBlockStyles();t.each(n,function(t,n){e._setStyle(n,t)})},_setStyle:function(e,t){var n=this.$el;switch(e){case"back-color":n.css("background-color",t);break;case"padding":t?(n.css({padding:t,margin:"0 20px"}),"0px"===n.css("padding-top")&&n.css({"padding-top":"4px","padding-bottom":"4px"})):n.css({padding:t})}},_onStyleChange:function(e,t){this._setStyle(e,t)},convertToNativeRange:function(){var e=document.createRange(),t=this.$el.get(0);return e.setStart(t,0),e.setEnd(t,t.childNodes.length),e},parseNativeRange:function(e,t,n){if(n||this._isHrInNativeRange(e))return new i({block:t})},_isHrInNativeRange:function(e){var t,n=this.$el.find(".hr-container").get(0);return(t=n.ownerDocument.createRange()).selectNode(n),e.compareBoundaryPoints(Range.START_TO_START,t)<1&&e.compareBoundaryPoints(Range.END_TO_END,t)>-1}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(87),o=n(6),i=n(0),r=n(19),a=n(194),s=n(1),l=n(774),c=n(76),u=n(47),d=n(71),p=n(365),h=n(366),f=n(11),g=n(107),y=n(775),m=n(7),v=n(358);return t.extend({className:"block-view image-view",DEFAULT_HEIGHT:100,_isFloatSwitch:!1,_isImgError:!1,_$imgDiv:null,_$imgContainerDiv:null,_$imgTitle:null,_viewFrameHeight:null,_isImgLoaded:null,events:{contextmenu:"_onContextMenu","mousedown .resize-handle":"_onMouseDownResizeHandle","mousedown img":"_onMouseDownImgPreview",mouseenter:"_onMouseEnter",mouseleave:"_onMouseLeave","mouseleave .menu-wrapper":"_onMouseLeaveMenuWrapper","click .yne-button-item":"_onButtonItemClick","click .yne-popup-item":"_onPopupMenuItemClick","dblclick img":"_onImgDblclick","click img":"_onImgClick","mousedown .image-title":"_onMouseDownImageTitleHandle"},_imageResizeStartInfo:null,_imageResizeEventNS:null,_imgHeightInData:null,_imgWidthInData:null,_imgHeightBeforeLoad:null,_imgLoadWidth:null,_disableOCR:null,_OCRHighlightInfo:null,_OCRHighlightItem:null,initialize:function(e){var n=this;t.prototype.initialize.apply(n,[e]),n._imageResizeEventNS=".img-resize-"+i.uniqueId(),i.bindAll(n,"_onStyleChange","_onContentChange","_onChangeImageTitle","_onUpdateImageTitle","_editImgTitle","_handlerImgTitle","_onWinResize","_onHighlight","_onHideImageTitle"),n.block.on("edit-image-title",n._editImgTitle),n.block.on("style-change",n._onStyleChange),n.block.on("content-change",n._onContentChange),n.block.on("extra-info-change",n._onContentChange),n.block.on("view-resize",n._onWinResize),n.block.on("high-light",n._onHighlight),n.block.on("hide-image-title",n._onHideImageTitle),n.bindSelectionEvents(),n.on("resize",n._onWinResize),n.on("locked-change",function(){n.isLocked()&&(n.trigger("img-title-edit-exit"),n._removeFocusedClass())}),n._disableOCR=!!e.disableOCR||!f.IS_PC,n._OCRHighlightItem=[],n._OCRHighlightInfo=null},render:function(){var e=this.block,t=e.getSource(!0),n="";this.renderImageSource(t),g.isNoteImageSource(t)||(e.getResId()===e.getSource()&&(n=e.getResId()),this.trigger("replace-img-url",{resId:n,url:t,blockId:e.blockId}))},updateRenderedSource:function(e){f.IS_PC&&(e=d(e)),/^\//.test(e)&&!f.IS_MAC&&(e=window.location.origin+e),this._$imgDiv.attr("src",h.getURL(p.addIfNeeded(e))),this._$imgDiv.show()},rotateImage:function(e){this._$imgDiv=this.$el.find("img"),this._$imgDiv.css({transform:y.orentationMap[e.Orientation]||""})},renderImageSource:function(e){var n,o,i=this,r=i.block,a=r.getImageInfo(),s=null,l=r.getTitle(),c=e;a&&(e="/yws/res/thumb/"+a.resId,a.rawWide<=620?(s=a.rawWide,a.rawHeight):s=620),i._imgLoadWidth=s,f.IS_PC&&(e=d(e)),(f.IS_WEB_NOTE||f.IS_WEB_GROUP)&&!0===r.getFakeLoading()&&(e=m.LOADING_IMAGE_PATH,r.setFakeLoading(!1)),i._renderWithLoadedImage(e),i._isImgLoaded=!1,i._$imgContainerDiv=i.$el.find(".image-container"),i._$imgDiv=i.$el.find("img"),i._$imgTitle=i.$el.find(".image-title"),i._viewFrameHeight=i.$el.outerHeight(!0)-i.$el.height(),i._imgHeightInData=r.getBlockStyle("height",!0),i._imgWidthInData=r.getBlockStyle("width",!0),i._imgHeightBeforeLoad=i._$imgDiv.height(),n=i._imgWidthInData<=10||!i._imgWidthInData?620:i._imgWidthInData,o=i._imgHeightInData?i._imgHeightInData:6*i._imgWidthInData/8,i._$imgContainerDiv.css({width:n+"px",height:o+"px",background:"#F5F6F7"}),i._$imgDiv.load(function(){i.$el.hasClass("focused")&&i._onUpdateImageTitle(!0),i._$imgContainerDiv.css({width:"inherit",height:"inherit",background:"transparent"}),i._onImgLoaded()}),i._$imgDiv.error(function(){i._renderWithLoadedImage(null,!0)}),/^\//.test(e)&&!f.IS_MAC&&(e=window.location.origin+e),i._$imgDiv.attr("src",h.getURL(p.addIfNeeded(e))),i._renderStyles(),u.isSafari()&&i._$imgContainerDiv.attr("contenteditable","true"),t.prototype.render.apply(i,arguments),i.title=l,i._$imgTitle&&(l?i._$imgTitle.text(l):i._$imgTitle.hide()),(f.IS_WEB_NOTE||f.IS_WEB_GROUP)&&i._loadOriginImg(c)},_renderWithLoadedImage:function(e,t){var n,o,a,s=this.block.getImageInfo();s&&(s.rawWide<=620?(o=s.rawWide,a=s.rawHeight):o=620),this._imgLoadWidth=o,n=r.render("common","image-view-image-container",{randomId:i.uniqueId("img-view"),width:o,height:a,src:e,isImgError:t,hasOCR:!this._disableOCR,needCopyHack:f.IS_MAC||u.isSafari()}),this.$el.html(n)},_renderStyles:function(){var e=this,t=e.block.getBlockStyles();i.each(t,function(t,n){e._setStyle(n,t)})},_setStyle:function(e,t){var n,i=this.$el,r=i.find(".image-block-container"),a=r.find(".image-container"),l=o("body").find(".image-title-hidden");switch("100%"===t&&a.css("display","block"),e){case"align":i.css("text-align",t),l.length&&l.css("text-align",t);break;case"width":n=this.getImgElement(),null==t&&null==this._imgLoadWidth?o(n).css("width",""):null==t&&this._imgLoadWidth?o(n).css("width",this._imgLoadWidth):this._setImageWidth(t);break;case"float":i.css("float")!==t?(this._isFloatSwitch=!0,i.css("float",t)):this._isFloatSwitch=!1,!1===this.isOnFloat()&&this._resetImageMaxWidth();break;case"height":break;case"back-color":r.css("background-color",t),t?i.css({"padding-top":0,"padding-bottom":0}):i.css({"padding-top":"","padding-bottom":""});break;case"padding":r.css("padding",t),"0px"===r.css("padding-top")&&r.css({"padding-top":"4px","padding-bottom":"4px"});break;default:s.error("unkown style name:",e)}},_onStyleChange:function(e,t){this._setStyle(e,t),this.trigger("view-height-changed",this.cid)},_onContentChange:function(){var e=this.block,t=this.$el,n=e.getTitle(),o=e.getSource(!0);f.IS_PC&&(o=d(o)),o=h.getURL(p.addIfNeeded(o)),t.find("img").attr("src",o),this._$imgTitle&&(this._$imgTitle.text(n),this.title=n,this._handlerImgTitle(),this.trigger("img-title-edit-exit"),this.trigger("view-height-changed",this.cid))},getImgElement:function(){return this.$el.find("img").get(0)},convertToNativeRange:function(){var e=document.createRange(),t=this.$el.get(0);return e.setStart(t,0),e.setEnd(t,t.childNodes.length),e},parseNativeRange:function(e,t,n){if(n||c.isNodeInRange(this.getImgElement(),e)||c.isRangeInNode(this.el,e))return new a({block:t})},_showButtonGroup:function(){this._hidePopupMenu(),l.adjustMenu(this.$el)},_hideButtonGroup:function(){this.$el.find(".menu-wrapper").hide(),this._hidePopupMenu()},_onButtonItemClick:function(e){var t=e.currentTarget.dataset.buttonName;if(!this.isLocked())switch(t){case"menu":default:this._togglePopupMenu()}},_togglePopupMenu:function(){var e,t,n,o,i=this.$el.find(".yne-popup-menu");i.toggle(),i.is(":visible")?(e=this.$el.find(".yne-button-group").outerHeight(),n=(t=i.get(0).getBoundingClientRect()).top+(o=t.height)>document.documentElement.clientHeight?-(o+5):e+5,i.css({top:n+"px"})):i.css({top:""})},_hidePopupMenu:function(){var e=this.$el.find(".yne-popup-menu");e.hide(),e.css({top:""})},_onContextMenu:function(e){e.preventDefault(),e.stopPropagation(),this._isReadOnly||this._isImgError||this.trigger("contextmenu",e)},_onMouseEnter:function(){var e=this.block;this.isLocked()||e.isReadOnly()||this._showButtonGroup()},_onMouseLeave:function(){this.isLocked()||this._hideButtonGroup()},_onMouseLeaveMenuWrapper:function(){this.isLocked()||this._hidePopupMenu()},_onPopupMenuItemClick:function(e){var t=e.currentTarget,n=o(t).attr("data-cm-name"),r={},a=this.block;if(!this.isLocked()&&!a.isReadOnly()){switch(this._hidePopupMenu(),n){case"image-title":this._editImgTitle();break;case"float-left":case"float-right":case"clear-float":r.float="float-left"===n?"left":"float-right"===n?"right":"none";break;case"clear-resize":r.width=null;break;case"delete":this.trigger("command","comp.DeleteNoteRange",{range:null,imageBlockView:this});break;case"download":this.trigger("yne-download-image",a.getSource(!0));break;case"image-ocr":this.trigger("yne-image-ocr",v(a))}i.isEmpty(r)||this.trigger("command","comp.ApplyStyles",{range:null,imageBlockView:this,blockStyles:r})}},_removeFocusedClass:function(){!this.$el.hasClass("focused")||this.isLocked()||this.block.isReadOnly()||(this.trigger("img-title-edit-end"),this.trigger("img-title-edit-exit"),this._handlerImgTitle()),this.$el.removeClass("focused")},_onUpdateImageTitle:function(e){var t=this,n=function(){if(t._$imgTitle){var e=t._$imgTitle.offset();return{left:e.left,top:e.top,width:t.$el.width(),height:t._$imgTitle.height(),textAlign:t.block.getStyles("align")}}};t.isLocked()||t.block.isReadOnly()||(e?t.trigger("img-title-edit-update",n):t.$el.hasClass("focused")||t.trigger("img-title-edit-start",t.block.getTitle(),n,t._onChangeImageTitle,t._$imgTitle,t.block.getId()))},_addFocusedClass:function(){this._onUpdateImageTitle(),this.$el.addClass("focused")},_drawNativeRange:function(){var e=document.createRange(),t=this.getImgElement();e.selectNode(t),e.collapse(!0),c.setRange(e)},onDrawRange:function(e){var t;e&&!this.isLocked()?(this._addFocusedClass(),(t=document.createRange()).selectNode(this.$el.find(".image-container")[0]),c.setRange(t,window)):this._removeFocusedClass()},_onMouseDownResizeHandle:function(e){var t,n,i=this.getImgElement(),r=e.pageX,a=e.pageY,s={centerX:0,centerY:0,startWidth:0,startHeight:0,startToCenter:0},l=this.block;this.isLocked()||l.isReadOnly()||i&&(t=o(i),s.startWidth=t.width(),s.startHeight=t.height(),n=t.offset(),s.centerX=n.left+s.startWidth/2,s.centerY=n.top+s.startHeight/2,s.startToCenter=Math.sqrt(Math.pow(s.centerX-r,2)+Math.pow(s.centerY-a,2)),this._imageResizeStartInfo=s,this._bindEventsForResize(),e.preventDefault(),this.$el.css("height",this.$el.height()))},_bindEventsForResize:function(){var e=this.el.ownerDocument,t=this._imageResizeEventNS;this._unbindEventsForResize(),o(e).bind("mousemove"+t,this._onResizeMove.bind(this)).bind("mouseup"+t,this._onResizeEnd.bind(this))},_unbindEventsForResize:function(){var e=this.el.ownerDocument;o(e).unbind(this._imageResizeEventNS)},_onResizeMove:function(e){this._handleImageResize(e.pageX,e.pageY)},_onResizeEnd:function(e){this.$el.css("height","auto"),this._unbindEventsForResize(),this._handleImageResize(e.pageX,e.pageY,!0)},_handleImageResize:function(e,t,n){var o,i,r=this._imageResizeStartInfo,a={};r&&(i=(o=Math.sqrt(Math.pow(r.centerX-e,2)+Math.pow(r.centerY-t,2)))*r.startWidth/r.startToCenter,o*r.startHeight/r.startToCenter,this.getImgElement()?(this._setImageWidth(i),!0===n?(a.width=this._$imgDiv.width(),a.height=this._$imgDiv.height(),this.trigger("command","comp.ApplyStyles",{range:null,imageBlockView:this,blockStyles:a})):this._onUpdateImageTitle(!0)):s.warn("no image element!"))},_onImgDblclick:function(){var e=this.block.getSource(!0);f.IS_PC&&this.trigger("yne-open-image",e)},_onImgClick:function(e){this.trigger("img-title-edit-end"),(f.IS_WEB_GROUP||f.IS_WEB_NOTE||f.IS_MAC)&&(this.showImgPreview||this.isLocked()||this.block.isReadOnly())&&this.trigger("get-image-items",this.block),e.preventDefault(),e.stopPropagation()},_onMouseDownImgPreview:function(){this.showImgPreview=this.$el.hasClass("focused")},_onChangeImageTitle:function(e,t,n,o){var r=this.block,a=[],s=[],l={};return e!==r.getTitle()&&(a.push({source:r.getSource(),title:e}),s.push(r),i.extend(l,{resources:s,resProps:a}),t&&i.extend(l,{endingRange:n}),this.trigger("command","comp.ReplaceResource",l)),!e&&o&&this._$imgTitle.hide(),!0},_onMouseDownImageTitleHandle:function(e){e.preventDefault()},onDestroy:function(){this.trigger("img-title-edit-exit")},_onWinResize:function(){this.$el.hasClass("focused")&&this._onUpdateImageTitle(!0)},_onHighlight:function(e,t,n){var o=this.block.getHighlight(e,t);o&&this._convertToData(o,n)},_convertToData:function(e,t){var n=this;if(n._$imgTitle){var o,r=n._$imgTitle.get(0).firstChild;n._OCRHighlightInfo=null,i.each(e,function(e){null==e.imageInfo?((o=document.createRange()).setStart(r,e.start),o.setEnd(r,e.end),t(o)):n._OCRHighlightInfo=e.imageInfo}),n._createHighlightMark()}},_editImgTitle:function(){var e=this;setTimeout(function(){e._$imgTitle.show(),e._onUpdateImageTitle(!0),e.trigger("img-title-edit-focus")},0)},_onHideImageTitle:function(){this.trigger("img-title-edit-exit")},_handlerImgTitle:function(){this.title?this._$imgTitle.show():this._$imgTitle.hide()},clearHighlight:function(){this._OCRHighlightInfo=null,this._clearHighlightMark()},_clearHighlightMark:function(){i.each(this._OCRHighlightItem,function(e){e.remove()}),this._OCRHighlightItem=[]},disablePageMode:function(){t.prototype.disablePageMode.apply(this),this.$el.hasClass("focused")&&this._onUpdateImageTitle(!0),this.$el.css("max-height","none"),this._resetImageMaxWidth()},_contentHeightOverflowCheck:function(){var e,t,n,o,i=this._$imgTitle.height(),r=0,a=this._$imgDiv.height();return this._isInPageMode()?(null!=(e=this.getLastTransPageIndex())&&(t=this._getTopPosInPage(e),a=Math.ceil(a),r=Math.ceil(t+a+i+this._viewFrameHeight)-this.PAGE_HEIGHT),r>0&&((n=this._$imgDiv.height()-r)<m.PAGE_SPLIT_BLANK_HEIGHT/2&&(n=m.PAGE_SPLIT_BLANK_HEIGHT/2),o=this._$imgDiv.width()*n/this._$imgDiv.height(),this._$imgDiv.css("max-width",o)),r):r},_isPagingContinue:function(){return this._isFloatSwitch},_onImgLoaded:function(){var e;this._isImgLoaded=!0,this.$el.height("auto"),this._$imgDiv.height("auto"),e=this._$imgDiv.height(),this._imgHeightInData!==e||null==this._imgWidthInData?(this.block.setStyles("height",e),/^-?\d+%$/.test(this._imgWidthInData)?this.block.setStyles("width",this._imgWidthInData):this.block.setStyles("width",this._$imgDiv.width()),this._imgHeightInData=e):this._imgHeightBeforeLoad!==e?this.trigger("view-height-changed",this.cid):s.log("No height change after image loaded",this),this._createHighlightMark()},_createHighlightMark:function(){var e=this,t=e._OCRHighlightInfo;if(e._clearHighlightMark(),null!=t){var n=e._$imgContainerDiv.width()/t.width;i.each(t.pos,function(t){var i=o(r.render("common","high_light_item",{top:t.top*n-1,left:t.left*n-2,height:(t.bottom-t.top)*n,width:(t.right-t.left)*n}));i.appendTo(e._$imgContainerDiv),e._OCRHighlightItem.push(i)})}},_resetImageMaxWidth:function(){null!=this._$imgDiv&&this._$imgDiv.css("max-width","")},_setImageWidth:function(e){null!=e&&(/^-?\d+%$/.test(e)||(this._$imgContainerDiv.css("display","inline-block"),e=Math.ceil(e)),this._$imgDiv.width(e),this._resetImageMaxWidth(),null!=this._imgHeightInData&&!1===this._isImgLoaded&&this._$imgDiv.height(Math.ceil(this._imgHeightInData*this._$imgDiv.width()/e)))},_setViewMaxHeight:function(e){var t=this._pageInfo[e-1],n=0,o=this._getTopPosInPage(e);t&&(n=this._getPageBreakBottomPosInView(e-1)),this.$el.css("max-height",this.PAGE_HEIGHT+n-this._viewFrameHeight-o),this._contentHeightOverflowCheck()},_loadOriginImg:function(e){var t=this;e=h.getURL(p.addIfNeeded(e)),o("<img />").attr("src",e).load(function(){t._$imgDiv.attr("src",e),t._$imgDiv.removeClass("filter-blur")}).error(function(){t._$imgDiv.unbind("error")}),t._$imgDiv.error(function(){t._$imgDiv.attr("src",e),t._$imgDiv.removeClass("filter-blur")})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(6);return{adjustMenu:function(e){var n=e.find(".menu-wrapper"),o=n.width(),i=t(e.children()[0]),r=e.offsetParent().width(),a=i.position().left;a<o&&i.width()<o?n.addClass("menu-wrapper-left"):n.removeClass("menu-wrapper-left"),r-a-i.width()<o?i.width()<o?(n.addClass("menu-wrapper-mini"),n.removeClass("menu-wrapper-right")):(n.addClass("menu-wrapper-right"),n.removeClass("menu-wrapper-mini")):(n.removeClass("menu-wrapper-mini"),n.removeClass("menu-wrapper-right")),n.show()}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.orentationMap={1:"",2:"scale(-1, 1)",3:"rotate(180deg)",4:"scale(-1, 1) rotate(180deg)",5:"scale(-1, 1) rotate(90deg) translateZ(0)",6:"rotate(90deg) translateZ(0)",7:"scale(-1, 1) rotate(270deg) translateZ(0)",8:"rotate(270deg) translateZ(0)"}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(133),i=n(19),r=n(139);return o.extend({className:"block-view list-item-view paragraph-view",_template:i.getTemplate("common","list_item_view"),_styleSheet:null,initialize:function(){o.prototype.initialize.apply(this,arguments),this._initEvents()},_initEvents:function(){var e=this.block,n=e.getOwnerList();if(!n)throw"no ownerList!";t.bindAll(this,"_onLevelChange","_onIndexChange","_onTypeChange","_onStyleChange"),e.on("level-change",this._onLevelChange),e.on("index-change",this._onIndexChange),n.on("type-change",this._onTypeChange),e.on("style-change",this._onStyleChange)},_renderLevel:function(){var e=this.block,t=e.getLevel(),n=this.$el.find(".li-box"),o=r.makeHtmlMarker(e);n.attr("data-level",t),o&&o.listStyleType&&n.attr("data-style-type",o.listStyleType)},_renderText:function(){o.prototype._renderText.apply(this,arguments),this._renderMarkerText(),this._renderBlockstyles()},_renderMarkerText:function(){var e,t=this,n=t.block.getText(),o=t.$el.find("li");o.attr("style",""),n.getLength()?e=r.convertToCssStyle(n.getStylesAtIndex(0),t._inlineStyleViewMapper):t.trigger("get-editing-styles",function(n){e=r.convertToCssStyle(n,t._inlineStyleViewMapper)}),e&&o.css(e)},_renderIndex:function(){var e=this.block;this.$el.find(".li-box").attr("start",e.getIndex())},_setContainerStyles:function(){var e=this,n=e.block.getBlockStyles();t.each(n,function(t,n){e._setContainerStyle(n,t)})},_setContainerStyle:function(e,t){var n=this.$el.find(".li-box");switch(e){case"back-color":n.parent().css("background-color",t);break;case"padding":n.css("padding",t)}},render:function(){o.prototype.render.apply(this,arguments),this._renderLevel(),this._renderIndex(),this._setContainerStyles(),this.trigger("view-height-changed",this.cid)},_renderTemplate:function(){var e=this.block;this.$el.html(this._template({isOrdered:e.isOrdered()}))},_onLevelChange:function(){this._renderLevel(),this._renderIndex(),this.trigger("view-height-changed",this.cid)},_onIndexChange:function(){this._renderIndex(),this.trigger("view-height-changed",this.cid)},_onTypeChange:function(){this.block.setLocked(!1),this.render()},_onStyleChange:function(e,t){var n=this.$el.find("li");switch(o.prototype._onStyleChange.apply(this,arguments),this._setContainerStyle(e,t),e){case"align":n.css("text-align",t);break;case"line-height":n.css("line-height",t)}},_renderBlockstyles:function(){var e=this.$el.find("li"),t=this.block.getBlockStyle("align"),n=this.block.getBlockStyle("line-height");t&&e.css("text-align",t),n&&e.css("line-height",n)},_onContentChange:function(){0===this.$el.find(".para-text").length&&this.render(),this._renderText(),this.trigger("view-height-changed",this.cid)},_getContentContainer:function(){return this.$el.find(".li-box")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(62);return function(e,n){if(t.isNode(e)){if(n=!1!==n,e.removeNode&&n)return e.removeNode(e,n);if(e.parentNode&&e.parentNode.removeChild){if(!n)for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);return e.parentNode.removeChild(e)}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(260);return t.View.extend({tagName:"div",className:"selection-layer",initialize:function(e){var t=e.tableView;this._tableView=t},render:function(){this.$el.attr("contenteditable","false")},hide:function(){this.$el.hide()},_computeViewRect:function(e){if(e){var t,n,i,r,a=this._tableView,s=e.getAsRectRange();if(s&&(t=s.getFirstCell(),n=s.getLastCell(),t&&t.cell&&n&&n.cell))return i=a.getBoundingRectByCell(t.cell),r=a.getBoundingRectByCell(n.cell),o.union(i,r)}},draw:function(e){var t=this._computeViewRect(e);t&&t.width>0&&t.height>0?this.$el.css({top:t.top,left:t.left,width:t.width,height:t.height}).show():this.$el.hide()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(27),i=n(6),r=n(1),a=n(0),s=n(35),l=n(204),c=n(46),u=n(8),d=n(781),p=n(60),h=n(195),f=n(9),g=n(84),y=n(62),m=n(782),v=n(76),b=n(103),_=n(198),I=n(52),k=n(38),w=n(19),C=n(790),S=n(301),x=n(791),A=n(792),T=n(144),N=n(95);return n(793),t=o.View.extend({tagName:"div",className:"cell-edit",_editBox:null,_changeMonitor:null,_isDirty:!1,_editingCellId:null,_rangeWhenBlur:null,_editingInlineStates:null,events:{contextmenu:"_onPreventAndStop",mousedown:"_onStopPropagation",copy:"_onStopPropagation",cut:"_onStopPropagation",paste:"_onPaste",dblclick:"_onDblclick"},_onPreventAndStop:function(e){e.preventDefault(),e.stopPropagation()},_onStopPropagation:function(e){e.stopPropagation()},initialize:function(e){this._table=e.table,this._tableView=e.tableView,this._styleRules=e.styleRules,this._mapper=e.mapper,this._isRendered=!1,this._commander=m({editHost:this}),this._uid=a.unique("cell-edit-view-"),this._eventNS="."+this._uid,delete this.options},render:function(){var e=w.render("common","table_cell_edit",{}),t=this.el;!0!==this._isRendered&&(this._isRendered=!0,t.innerHTML=e,this._editBox=t.querySelector(".cell-edit-box"),this._initEvents())},_initEvents:function(){var e=this._editBox;c.addListeners({focus:"_onFocus",blur:"_onBlur",textInput:"_onTextInput",compositionstart:"_onCompositionStart",compositionend:"_onCompositionEnd",click:"_onClick"},i(e),this),this._initKeyHandlerManager(),this._changeMonitor=d.create({el:e}),c.addListeners({"content-change":"_onContentChange"},this._changeMonitor,this),this._history=A.create(),c.addListeners({undo:"_onHistoryUndo",redo:"_onHistoryRedo",change:"_onHistoryChange"},this._history,this)},_bindKey:function(e){var t=this,n=t._keyMonitor;e&&(n||(t._keyMonitor=n=new l({el:t._editBox,beforeMatch:function(e){e.stopPropagation()}})),n.unbind(e),n.bind(e,function(n){t._keyHandlerManager&&t._keyHandlerManager.execWithKey(e,t,n)}))},_unbindKey:function(e){var t=this._keyMonitor;t&&e&&t.unbind(e)},_initKeyHandlerManager:function(){var e=new u({scope:"table-cell-edit"}),t=e.getAvailableHandlerNames();e.on("bind-key",this._bindKey.bind(this)),e.on("unbind-key",this._unbindKey.bind(this)),a.each(t,function(t){e.bind(t)}),this._keyHandlerManager=e},blur:function(){this._editBox.blur()},_onBlur:function(){this._isOnToolbarLinkView()?this._rangeWhenBlur=this.getNativeRange():(this.trigger("blur"),this._commitChange())},_onFocus:function(){r.log("on focus")},_recognizeLink:function(e){var t,n,o=this.getNativeRange(),i=this.getEditBox(),r=S.getUrlInfoBeforeRange(o,i)||{};if((this._compositionStartUriInfo||{}).alreadyUrl||r.alreadyUrl)return e.preventDefault(),(n=document.createElement("div")).innerHTML=e.data,t=b.create({name:"insertHTML",value:"<span></span>"+n.innerText,isNative:!0}),void this.execCommand(t);r.startNode&&(" "!==e.data||r.alreadyUrl||(e.preventDefault(),(o=document.createRange()).setStart(r.startNode,r.startOffset),o.setEnd(r.endNode,r.endOffset),this.setNativeRange(o),t=b.create({name:"insertLink",value:r.uri}),this.execCommand(t),(o=this.getNativeRange()).collapse(!1),this.setNativeRange(o),t=b.create({name:"insertHTML",value:" ",isNative:!0}),this.execCommand(t)))},_onTextInput:function(e){var t=e.originalEvent||e;t.stopPropagation(),r.log("text",t.data),this._recognizeLink(t)},_onCompositionStart:function(e){var t=this.getNativeRange(),n=this.getEditBox();e.stopPropagation(),r.log("composition start"),this._isOnComposition=!0,this._compositionStartUriInfo=S.getUrlInfoBeforeRange(t,n)},_onCompositionEnd:function(e){e.stopPropagation(),r.log("composition end"),this._isOnComposition=!1,this._compositionStartUriInfo=null},_onClick:function(e){e.stopPropagation()},_onContentChange:function(){this._isDirty=!0,this._handleChangeWithDebounce()},_snapshot:function(){var e,t=this._editBox,n=this.getNativeRange();if(n)return e=x.jsonlify(t,n),{html:t.innerHTML,jsonRange:e};r.warn("Failed to create snapshot",n)},_saveHistory:function(){var e=this._lastSnapshot||this._baseSnapshot,t=this._snapshot();this._history.save({snapshotBefore:e,snapshotAfter:t}),this._lastSnapshot=t},_clearTimeoutOfHandleChange:function(){this._timeoutOfHandleChange&&(window.clearTimeout(this._timeoutOfHandleChange),this._timeoutOfHandleChange=null)},_handleChangeWithDebounce:function(){var e=this;e._clearTimeoutOfHandleChange(),e._timeoutOfHandleChange=window.setTimeout(function(){if(e._isOnComposition)return!1;e._saveHistory()},500)},_silentDo:function(e){this._changeMonitor&&!1===this._changeMonitor.isMonitoring()?e():(this._changeMonitor.disconnect(),e(),this._changeMonitor.observe())},silentDocSelectionChangeDo:function(e){var t=this;t._stopListenerDocSelectionChange?e():(t._stopListenerDocSelectionChange=!0,e(),window.clearTimeout(t._timeoutForStopListenerDocSelectionChange),t._timeoutForStopListenerDocSelectionChange=window.setTimeout(function(){t._stopListenerDocSelectionChange=!1},0))},undo:function(){var e=this._history;return this._clearTimeoutOfHandleChange(),!!e&&e.undo()},redo:function(){var e=this._history;return this._clearTimeoutOfHandleChange(),!!e&&e.redo()},_restoreSnapshot:function(e){if(e){var t=this;t._clearTimeoutOfHandleChange(),t._silentDo(function(){var n;t._editBox.innerHTML=e.html,n=x.parseJSON(t._editBox,e.jsonRange),t.setNativeRange(n)})}},_onHistoryUndo:function(e){this._restoreSnapshot(e)},_onHistoryRedo:function(e){this._restoreSnapshot(e)},_onHistoryChange:function(){var e=this._history;this.trigger("cell-edit-view-history-change",{canUndo:e.canUndo(),canRedo:e.canRedo()})},_handleContentWhenShowAndEdit:function(e,t){var n,o,i=!1;return null!=e?e instanceof g||(n=e instanceof f?e:f.create(e+""),i=!(o=g.create({richText:n})).isEmpty()):t.getType()===p.TEXT&&(o=t.getContent()).isEmpty()&&(o=null),{lines:o,isDirty:i}},showAndEdit:function(e){if(e&&null!=e.row&&null!=e.col){var t,n,o,s,l=this,c=l._table.getCell(e.row,e.col),u=l._tableView.$el.width(),d=i(".page-A4").get(0)?85:25,p=i(l._editBox),h={};c&&(l._changeMonitor.disconnect(),l._editingCellId=c.getCellId(),(t=l._tableView.getBoundingRectAt(e.row,e.col))&&((o=(n=l._handleContentWhenShowAndEdit(e.content,c)).lines)||(o=g.createBlank(!0),s=!0),l._isDirty=n.isDirty,t.width+t.left>u&&(t.width=u-t.left+d),d+t.left<0&&(t.left=-d,t.width=d+t.right),p.css({left:t.left,top:t.top,width:t.width,minHeight:t.height-3}),l._renderLines(o),l.$el.show(),l._focusEditBox(!0),s&&(a.each(c.getStylesForEmpty(),function(e,t){var n,o={};if(o[t]=e,n=C.createCmdBall("comp.ApplyStyles",{inlineStyles:o}),r.log("stylesForEmpty to cmdBall",t,e,n),!n)return!1;h[n.name]=n}),h.fontSize&&(l.execCommand(h.fontSize),delete h.fontSize),a.each(h,function(e){l.execCommand(e)})),l._changeMonitor.observe(),l._addListenerForDocSelectionChange(),l._baseSnapshot=l._snapshot(),l.trigger("cell-edit-view-enter",{canUndo:l._history.canUndo(),canRedo:l._history.canRedo()})))}else r.warn("Failed to show cell edit view, parameter is not valid",e)},_onSelectionChange:function(){var e=this.getNativeRange();this._clearEditingInlineStates(),this.trigger("cell-edit-view-selection-change",e)},_addListenerForDocSelectionChange:function(){var e=this;i(document).on("selectionchange"+e._eventNS,function(t){e.getNativeRange()?e._stopListenerDocSelectionChange?r.log("selection change NOT listener"):e._onSelectionChange(t):r.log("native range is not in cell edit view")})},_removeListenerForDocSelectionChange:function(){i(document).off("selectionchange"+this._eventNS)},_renderLines:function(e){var t=e.toHtml({styleRules:this._styleRules}),n=this._editBox;i(n).html(t)},_focusEditBox:function(e){var t,n=this._editBox;if(e){var o=v.getRange(),i=n.querySelector(".table-cell-line");if(!i||!o)return;t=i.lastChild||i,o.setStart(t,t.childNodes.length),o.setEnd(t,t.childNodes.length),v.setRange(o)}n.focus()},hide:function(){this.$el.hide()},_filterToLinesHtml:function(){var e=this._editBox,t=function(e){a.each(e,function(e){var n=e.style.textDecorationLine;n&&(e.style.textDecoration=n),e.hasChildNodes()&&t(e.children)})};t(e.children)},_getContentAsLines:function(){var e,t,n=g.createBlank();return this._viewStyleToData(),this._filterToLinesHtml(),e=this._editBox.innerHTML,t=h(e,{holdSpaces:!0})||[],a.each(t,function(e){var t=N.blockToCellContent(e);t instanceof g&&n.appendLines(t)}),n},_viewStyleToData:function(){var e=this,t=e._editBox,n=e._styleRules,o=e._mapper;a.map(n,function(n,i){var r,s,l;r=t.querySelectorAll("font"),"font-family"!==i?(e._elsViewStyleToData(r,o,i),e._elsViewStyleToData(t.querySelectorAll("span"),o,i)):a.forEach(r,function(e){s=e.getAttribute("face"),(s=I.getFontFirstValue(s))&&(l=o.valueFromView(i,s))&&e.setAttribute("face",l)})})},_elsViewStyleToData:function(e,t,n){var o,i,r=!1;a.forEach(e,function(e){(o=e.getAttribute(n))?r=!0:o=e.style[n],o&&("color"===n&&(o=k(o).toHexString()),(i=t.valueFromView(n,o))&&(r?e.setAttribute(n,i):e.style[n]=i))})},_commitChange:function(){var e;r.log("commit change"),this._isDirty&&(e=this._getContentAsLines(),this.trigger("set-cell-content",this._editingCellId,e)),this.exit()},_isOnToolbarLinkView:function(){return i(".combo-menu-link .link-input").is(":visible")},isFocused:function(){var e=document.activeElement;return e===this.el||i.contains(this.el,e)},_isShow:function(){return this.$el.is(":visible")},isOnEdit:function(){return!!this.isFocused()||this._isOnToolbarLinkView()&&this._isShow()},getNativeRange:function(){var e=v.getRange();if(v.isRangeInNode(this._editBox,e))return e;r.warn("native range is null or not in cell edit view",e)},setNativeRange:function(e){v.isRangeInNode(this._editBox,e)?v.setRange(e):r.warn("Failed to set native range to cell edit view",e)},_formatStyles:function(e){return e},_queryStyles:function(e){var t,n,o=this.getNativeRange();if(o)return t=o.startContainer,y.isText(t)&&(t=t.parentNode),n=window.getComputedStyle(t,null),n=this._formatStyles(n),e?n[e]:n},_queryInlineStylesForBulb:function(){var e=this._queryStyles(),t={},n={style:e},o=a.keys(C.INLINE_STYLES_CMD_MAP);return a.forEach(o,function(e){t[e]=T[e].action(n)}),t},queryInlineStylesForBulb:function(){var e,t,n,o=this.getNativeRange();if(o)return e=this._queryInlineStylesForBulb(),o.collapsed&&this._editingInlineStates?(t=a.clone(this._editingInlineStates),a.defaults(t,e),n=t):n=e,n.cellEditViewRangeCollapsed=o.collapsed,n},toggleInlineStyle:function(e){var t,n;-1!==a.keys(C.TOGGLE_INLINE_STYLES_CMD_MAP).indexOf(e)?(n=C.getCmdNameByStyleName(e),t=b.create({name:n,tryNativeIfNeeded:!0}),this.execCommand(t)):r.warn("toggleInlineStyle does NOT supprot",e)},_shouldModifyEditingInlineStates:function(e,t,n){return!!(e&&e.name&&t&&t.collapsed&&1===n)&&a.values(C.INLINE_STYLES_CMD_MAP).indexOf(e.name)>-1},_grabEditingInlineStates:function(e){if(e&&e.name){var t;this._editingInlineStates||(t=this._queryInlineStylesForBulb(),this._editingInlineStates=t)}},_updateEditingInlineStates:function(e){if(e&&e.name){var t=e.name,n=e.value,o=C.getStyleNameByCmdName(t),i=a.keys(C.TOGGLE_INLINE_STYLES_CMD_MAP);o&&this._editingInlineStates&&(i.indexOf(o)>-1&&!0!==n&&!1!==n&&(n=!this._editingInlineStates[o]),this._editingInlineStates[o]=n)}},_clearEditingInlineStates:function(){this._editingInlineStates=null},execCommand:function(e){var t,n,o=this.getNativeRange();return r.log("execCommand",e),o?(this._nestLevel||(this._nestLevel=0),this._nestLevel++,t=this._shouldModifyEditingInlineStates(e,o,this._nestLevel),1===this._nestLevel&&(t?this._grabEditingInlineStates(e):this._clearEditingInlineStates()),(n=this._commander.exec(e))&&1===this._nestLevel&&(t?this._updateEditingInlineStates(e):this._clearEditingInlineStates(),this.trigger("cell-edit-view-command-executed")),this._nestLevel--,n):(r.warn("nativeRange  is not in editBox"),!1)},exit:function(){this._isDirty=!1,this._editingCellId=null,this._clearTimeoutOfHandleChange(),this._lastSnapshot=null,this._baseSnapshot=null,this._removeListenerForDocSelectionChange(),this._changeMonitor.disconnect(),this._history.reset(),this.trigger("cell-edit-view-exit"),this.hide()},_filterTable:function(e){var t=e.querySelectorAll("table");a.each(t,function(e){var t=e.querySelectorAll("td"),n="";a.each(t,function(e){n+=e.innerHTML}),e.innerHTML=n})},_filterHtml:function(e){var t=s(e),n=["img"];return t?(this._filterTable(t),a.each(_,function(e,t){!1===e&&n.push(t)}),a.each(n,function(e){var n=t.querySelectorAll(e);a.each(n,function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})}),t.innerHTML.trim()):""},_onPaste:function(e){var t,n,o=(e.originalEvent||e).clipboardData;e.stopPropagation(),e.preventDefault(),o&&o.types&&(-1!==a.indexOf(o.types,"text/html")?(t=o.getData("text/html"),t=this._filterHtml(t),n=b.create({name:"insertHTML",isNative:!0,value:t})):-1!==a.indexOf(o.types,"text/plain")&&(t=o.getData("text/plain"),n=b.create({name:"insertText",isNative:!0,value:t})),this.execCommand(n))},_onDblclick:function(e){e.stopPropagation()},editFromToolbar:function(e,t){var n,o=this.getNativeRange(),i=this.queryInlineStylesForBulb();return this._rangeWhenBlur&&(o=this._rangeWhenBlur,v.setRange(o)),!!o&&(!!(n=C.createCmdBall(e,t,i))&&(this.execCommand(n),this._rangeWhenBlur=null,!0))},getEditBox:function(){return this._editBox}},{create:function(e){if(e&&e.table&&e.tableView)return new t(e);r.warn("Failed to create CellEditView",e)},isRangeIn:function(e){if(!e)return!1;return v.isRangeInSelector("div.cell-edit",e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o,i=n(0),r={ACTION_SHOW_ENABLE:1,ACTION_HIDE:2,ACTION_ENABLE:3,ACTION_DISABLE:4},a={RANGE_DEFAULT:1,RANGE_HEADER_FOOTER:2,RANGE_TABLE_CELL:3,RANGE_CATALOGUE:4,RANGE_IMAGE:5,RANGE_ATTACHMENT:6,RANGE_QUOTE:7,RANGE_CODE:8},s={EDITOR_BUTTON_STATE_MAP:{undo:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE}],redo:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE}],"remove-format":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"format-painter":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"no-table-split":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE}],heading:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"base-split":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE}],"font-family":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"font-size":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],bold:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],italic:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],underline:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],strike:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],color:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"back-color":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"unordered-list":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"ordered-list":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],todo:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],quote:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],align:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_QUOTE,action:r.ACTION_DISABLE}],"table-justify":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],indent:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE},{on:a.RANGE_QUOTE,action:r.ACTION_DISABLE}],outdent:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE},{on:a.RANGE_QUOTE,action:r.ACTION_DISABLE}],code:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],"code-theme":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_CODE,action:r.ACTION_SHOW_ENABLE}],"code-language":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_CODE,action:r.ACTION_SHOW_ENABLE}],"line-height":[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_IMAGE,action:r.ACTION_DISABLE},{on:a.RANGE_ATTACHMENT,action:r.ACTION_DISABLE}],"table-wrap":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],"table-operate":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],"table-split":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],"table-merge":[{on:a.RANGE_DEFAULT,action:r.ACTION_HIDE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_SHOW_ENABLE}],table:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],hr:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],link:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],img:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],attachment:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}],catalogue:[{on:a.RANGE_DEFAULT,action:r.ACTION_SHOW_ENABLE},{on:a.RANGE_HEADER_FOOTER,action:r.ACTION_DISABLE},{on:a.RANGE_TABLE_CELL,action:r.ACTION_HIDE},{on:a.RANGE_CATALOGUE,action:r.ACTION_DISABLE}]}},l=["font-family","font-size","table","table-justify","table-wrap","table-operate","table-split","table-merge"];return t=["undo","redo","code","code-language","code-theme"].concat(l),o={on:a.RANGE_CODE,action:r.ACTION_DISABLE},Object.keys(s.EDITOR_BUTTON_STATE_MAP).forEach(function(e){t.indexOf(e)>-1||s.EDITOR_BUTTON_STATE_MAP[e].push(o)}),function(e,t){e.forEach(function(e){s.EDITOR_BUTTON_STATE_MAP[e]&&s.EDITOR_BUTTON_STATE_MAP[e].push(t)})}(l,{on:a.RANGE_CODE,action:r.ACTION_HIDE}),i.extend(s,r,a)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(17),i=n(6),r=n(1),a=window.MutationObserver||window.WebKitMutationObserver;return t=o.extend({initialize:function(e){var t=this;e=e||{},t._el=e.el,t._monitoring=!1,t._hasBindDOMSubtreeModified=!1,delete t.options,a&&(t._observer=new a(function(){t._fireChange()}))},_fireChange:function(){!0===this._monitoring&&this.trigger("content-change")},observe:function(){this.isMonitoring()||(this._observer?this._observer.observe(this._el,{childList:!0,attributes:!0,subtree:!0,characterData:!0,attributeFilter:["style"]}):!1===this._hasBindDOMSubtreeModified&&(this._hasBindDOMSubtreeModified=!0,i(this._el).on("DOMSubtreeModified",this._fireChange.bind(this))),this._monitoring=!0)},disconnect:function(){this._monitoring=!1,this._observer&&this._observer.disconnect()},destroy:function(){this._observer?(this._observer.disconnect(),this._observer=null):!0===this._hasBindDOMSubtreeModified&&i(this._el).off("DOMSubtreeModified")},isMonitoring:function(){return this._monitoring}},{create:function(e){if(e&&e.el)return new t(e);r.warn("Failed to create ChangeMonitor")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(783),o=n(784),i=[n(785),n(786),o,n(787),n(788),n(789)];return function(e){var n=t.create(e);return n.addCmds(i),n}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(1),r=n(21),a=["undo","redo","fontSize"];return t=r.extend({initialize:function(e){e=o.defaults(e||{},{editHost:null}),this._commands={},this._editHost=e.editHost,delete this.options},addCmd:function(e){var t=this._commands;if(e&&e.name&&e.action){if(t[e.name])return void i.warn("command has defined: ",e.name);t[e.name]=e}},addCmds:function(e){var t=this;o.each(e,function(e){t.addCmd(e)})},exec:function(e){var t,n=this;return e&&e.name?(!0===e.stopSelectionChange?n._editHost.silentDocSelectionChangeDo(function(){t=n._exec(e)}):t=n._exec(e),t):(i.warn("Failed to exec cmdBall",e),!1)},_exec:function(e){var t,n,o,r=this._commands;if(t=e.name,!e.isNative){if((o=r[t])&&o.action)return n=o.action.apply(o,[e.value,this,this._editHost]),e.callback&&e.callback(n),n;if(i.warn("no command",t),!e.tryNativeIfNeeded)return!1;i.warn("try to exec native command",t)}return a.indexOf(t)>-1?(i.error("native command is unvalid",t),!1):(n=this.execNative(t,e.value),e.callback&&e.callback(n),n)},execNative:function(e,t){if(document.queryCommandSupported(e)){document.execCommand("styleWithCSS",!1,!0);var n=document.execCommand(e,!1,t||"");return n||i.error("Failed to exec command",e,t),n}i.error("command is not supported",e)}},{create:function(e){return new t(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(103);return{name:"fontSize",action:function(e,n,o){var i,r=o.getNativeRange();return!!r&&(r.collapsed?(o.execCommand(t.create({name:"insertHTML",isNative:!0,value:'<span style="font-size: '+e+'px;"> </span>'})),o.execCommand(t.create({name:"delete",isNative:!0}))):(i=t.create({name:"applyInlineStyle",value:{name:"fontSize",value:e+"px"},isNative:!1}),o.execCommand(i)))}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(62),i=n(1),r=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},a=function(e,t,n){if(n===e)return null;if(e.firstChild&&!t)return e.firstChild;if(!e.parentNode)return null;for(var o=e.nextSibling||a(e.parentNode,!0,n);r(o,n);)o=o.firstChild;return o},s=function(e,t,n){var i,r=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset;for(o.isElement(r)&&0!==s&&(r=(i=r.childNodes[s])||r.nextSibling,s=0),o.isElement(l)&&c!==l.length&&(c=(l=0===c?l.previousSibling:(i=l.childNodes[c-1])||l.previousSibling).length),i=r;i;i=a(i,t,l))n(i)},l=function(e){if(e.parentNode){var n=t.toArray(e.childNodes),o=e.parentNode;(function(e,t){if(e&&e.tagName)return(e.tagName+"").toLowerCase()===(t+"").toLowerCase()})(e,"span")&&0===e.attributes.length&&(t.each(n,function(t){e.removeChild(t),o.insertBefore(t,e)}),o.removeChild(e)),t.each(n,function(e){l(e)})}},c=function(e,t,n){var i;!function(e){var t,n=e.startContainer,i=e.endContainer,r=e.startOffset,a=e.endOffset;o.isText(i)&&a!==i.length&&i.splitText(a),o.isText(n)&&0!==r&&(t=n.splitText(r),n===i&&(i=t,a=t.length),n=t,r=0),e.setStart(n,r),e.setEnd(i,a)}(e),i=function(e){return{startNode:e.startContainer,endNode:e.endContainer,startOffset:e.startOffset,endOffset:e.endOffset}}(e),function(e,t){s(e,!1,function(e){o.isElement(e)&&(e.style[t]="")}),l(e.commonAncestorContainer)}(e,t),s(e,!0,function(i){var r;o.isElement(i)?i.style[t]=n:o.isText(i)&&!/^\s*$/.test(i.data)&&((r=e.startContainer.ownerDocument.createElement("span")).style[t]=n,i.parentNode.insertBefore(r,i),i.parentNode.removeChild(i),r.appendChild(i))}),function(e,t){e.setStart(t.startNode,t.startOffset),e.setEnd(t.endNode,t.endOffset)}(e,i)};return{name:"applyInlineStyle",action:function(e,t,n){var o=e.name,r=e.value,a=n.getNativeRange();return a&&!function(e){var t=e.startContainer,n=e.endContainer,o=e.startOffset,i=e.endOffset;return t===n&&o===i}(a)?(c(a,o,r),n.setNativeRange(a),!0):(i.warn("Failed to execute applyInlineStyle",a),!1)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(103),i=n(369);return{name:"applyInlineStyles",action:function(e,n,r){var a=!1;return t.map(i.INLINE_STYLES_CMD_MAP,function(n,i){if(t.has(e,i)){if(null==e[i])return;r.execCommand(o.create({name:n,value:e[i],stopSelectionChange:"fontSize"===n})),a=!0}}),a}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(103),o=n(172),i=n(91);return{name:"insertLink",action:function(e,n,r){return!!(e=i.safeHref(e))&&(r.execCommand(t.create({name:"underline",value:!0})),r.execCommand(t.create({name:"createLink",value:o.completeUrl(e||"")})),!0)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{name:"undo",action:function(e,t,n){return n.undo()}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{name:"redo",action:function(e,t,n){return n.redo()}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(103),o=n(52),i=n(0),r=n(1),a=n(369);return{TOGGLE_INLINE_STYLES_CMD_MAP:a.TOGGLE_INLINE_STYLES_CMD_MAP,INLINE_STYLES_CMD_MAP:a.INLINE_STYLES_CMD_MAP,getStyleNameByCmdName:function(e){var t;return i.some(this.INLINE_STYLES_CMD_MAP,function(n,o){if(n===e)return t=o,!0}),t},getCmdNameByStyleName:function(e){if(e)return this.INLINE_STYLES_CMD_MAP[e]},_createInlineStyleCmdBall:function(e){e=e||{};var n;return i.some(this.INLINE_STYLES_CMD_MAP,function(r,a){if(i.has(e,a))return"font-family"===a&&(e[a]=o.getAllValueByFont(e[a])||e[a]),n=t.create({name:r,value:e[a],stopSelectionChange:"fontSize"===r}),!0}),n},_createFormatPainterCmdBall:function(e,n){return i.map(n,function(t,o){e[o]===n[o]&&delete e[o]}),t.create({name:"applyInlineStyles",value:e})},createCmdBall:function(e,n,o){var i;switch(n=n||{},e){case"comp.RemoveFormat":i=t.create({name:"removeFormat"});break;case"comp.FormatPainter":if(!n.data||!n.data.inlineStyles)return;i=this._createFormatPainterCmdBall(n.data.inlineStyles,o);break;case"comp.ApplyStyles":n.inlineStyles&&(i=this._createInlineStyleCmdBall(n.inlineStyles));break;case"comp.InsertLink":if(!n.src)return;i=t.create({name:"insertLink",value:n.src});break;case"undo":i=t.create({name:"undo",isNative:!1,tryNativeIfNeeded:!1});break;case"redo":i=t.create({name:"redo",isNative:!1,tryNativeIfNeeded:!1})}return i?r.log("toolbarAdapter handles name/args/ball",e,n,i):r.warn("toolbarAdapter do NOT handle: ",e,n),i}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(62),i=n(1);return{jsonlify:function(e,n){if(e&&n){var r=function(n){var i,r={};return o.isText(n)?(i=n.parentNode,r.childIndex=t.indexOf(i.childNodes,n)):i=n,r.isRoot=i===e,r.isRoot?r:(r.tagName=i.tagName,r.tagIndex=t.indexOf(e.querySelectorAll(r.tagName),i),r)},a={collapsed:n.collapsed,startContainer:r(n.startContainer),startOffset:n.startOffset};return i.log(a),a.collapsed?a:(a.endContainer=r(n.endContainer),a.endOffset=n.endOffset,a)}},parseJSON:function(e,t){if(e&&t){var n,o=function(t){var n;return t.isRoot?null!=t.childIndex?e.childNodes[t.childIndex]:e:(n=e.querySelectorAll(t.tagName)[t.tagIndex],null!=t.childIndex?n.childNodes[t.childIndex]:n)},i=e.ownerDocument.createRange(),r=o(t.startContainer);return i.setStart(r,t.startOffset),t.collapsed?i.setEnd(r,t.startOffset):(n=o(t.endContainer),i.setEnd(n,t.endOffset)),i}}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(17),i=n(1);return t=o.extend({initialize:function(){delete this.options,this.reset()},reset:function(){this._undo=[],this._redo=[],this.trigger("change")},save:function(e){if(!e||!e.snapshotBefore||!e.snapshotAfter)return i.warn("parameter is unvalid",e),!1;return this._undo.push(e),this._redo=[],this.trigger("change"),i.log("history save operation",this._undo.length,e),!0},canUndo:function(){return this._undo.length>0},canRedo:function(){return this._redo.length>0},undo:function(e){var t;for(e=e||1,i.log("history undo",e);e&&e>0&&this.canUndo();)t=this._undo.pop(),this._redo.push(t),e--;return!!t&&(i.log("history undo",t.snapshotBefore),this.trigger("undo",t.snapshotBefore),this.trigger("change"),!0)},redo:function(e){var t;for(e=e||1,i.log("history redo",e);e&&e>0&&this.canRedo();)t=this._redo.pop(),this._undo.push(t),e--;return!!t&&(i.log("history redo",t.snapshotAfter),this.trigger("redo",t.snapshotAfter),this.trigger("change"),!0)}},{create:function(e){return new t(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(794),n(795),n(796),n(797),n(798),n(799),n(800)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8),o=n(103),i=n(301);t.register({name:"enter",scope:"table-cell-edit",key:"enter",action:function(e){var t,n,r=e.getNativeRange(),a=e.getEditBox();(t=i.getUrlInfoBeforeRange(r,a))?(t.alreadyUrl||((r=document.createRange()).setStart(t.startNode,t.startOffset),r.setEnd(t.endNode,t.endOffset),e.setNativeRange(r),n=o.create({name:"insertLink",value:t.uri}),e.execCommand(n),(r=e.getNativeRange()).collapse(!1),e.setNativeRange(r)),n=o.create({name:"insertHTML",value:"<div><br/></div>",isNative:!0})):n=o.create({name:"insertLineBreak",isNative:!0}),e.execCommand(n)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8),o=n(103),i=n(301),r=function(e){var t,n,r=e.getNativeRange(),a=e.getEditBox();(t=i.getUrlInfoBeforeRange(r,a))?(t.alreadyUrl||((r=document.createRange()).setStart(t.startNode,t.startOffset),r.setEnd(t.endNode,t.endOffset),e.setNativeRange(r),n=o.create({name:"insertLink",value:t.uri}),e.execCommand(n),(r=e.getNativeRange()).collapse(!1),e.setNativeRange(r)),n=o.create({name:"insertHTML",value:"<div><br/></div>",isNative:!0})):n=o.create({name:"insertLineBreak",isNative:!0}),e.execCommand(n)};t.register({name:"altEnter",scope:"table-cell-edit",key:"alt+enter",action:r}),t.register({name:"shiftEnter",scope:"table-cell-edit",key:"shift+enter",action:r})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(8).register({name:"esc",scope:"table-cell-edit",key:"esc",action:function(e){e.exit()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8);n(0).each({"mod+b":"bold","mod+i":"italic","mod+e":"strike","mod+u":"underline"},function(e,n){t.register({name:e,scope:"table-cell-edit",key:n,action:function(t){t.toggleInlineStyle(e)}})})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8),o=n(103);t.register({name:"modZ",scope:"table-cell-edit",key:"mod+z",action:function(e){var t=o.create({name:"undo",isNative:!1,tryNativeIfNeeded:!1});e.execCommand(t)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8),o=n(103),i=function(e){var t=o.create({name:"redo",isNative:!1,tryNativeIfNeeded:!1});e.execCommand(t)};t.register({name:"modShiftZ",scope:"table-cell-edit",key:"mod+shift+z",action:i}),t.register({name:"modY",scope:"table-cell-edit",key:"mod+y",action:i})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(8).register({name:"save",scope:"table-cell-edit",key:"mod+s",action:function(){}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(27),i=n(0),r=n(1),a=n(46),s=n(204),l=n(76),c=new Array(3).join(" "),u=[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,112,113,114,115,116,117,118,119,120,121,122,123,144,145,229];return t=o.View.extend({tagName:"input",className:"hidden-input",_lastKeyDownCode:null,initialize:function(){this._initEvents(),delete this.options},_initEvents:function(){a.addListeners({keydown:"_onKeyDown",textInput:"_onTextInput",compositionstart:"_onCompositionStart",compositionend:"_onCompositionEnd",copy:"_onCopyCutPaste",cut:"_onCopyCutPaste",paste:"_onCopyCutPaste"},this.$el,this)},bindKey:function(e){var t=this,n=t._keyMonitor;e&&(n||(t._keyMonitor=n=new s({el:t.el,beforeMatch:function(e){e.stopPropagation()},afterMatch:function(e,n){n||-1!==i.indexOf(u,e.keyCode)||e.ctrlKey||e.metaKey||t._onPrintableKeyDown(e)}})),n.unbind(e),n.bind(e,function(n){t.trigger("key-monitor",e,n)}))},unbindKey:function(e){var t=this._keyMonitor;t&&e&&t.unbind(e)},render:function(){this.$el.val(c)},isFocused:function(){return document.activeElement===this.el},isOnEdit:function(){return this.isFocused()&&this.getValue()!==c},focus:function(e){var t=this.el;e&&this.setPosition(e.left,e.top),t.select()},blur:function(){this.el.blur()},setPosition:function(e,t){var n=this.el;n.style.left=e+"px",n.style.top=t+"px"},setWidth:function(e){this.el.style.width=e+"px"},bringToFront:function(){this.el.value="",this.el.style.zIndex=255},hideBehind:function(){this.el.style.zIndex=-255},_onPrintableKeyDown:function(e){this._printableKeyDown=!0,32===e.keyCode&&(e.preventDefault(),this.$el.trigger("textInput",e))},_onKeyDown:function(e){this._lastKeyDownCode=e.keyCode},_onTextInput:function(e){e=e.originalEvent||e,r.log("hiddenInputView textInput",e),e.stopPropagation();var t=this,n=e.data;if(this._printableKeyDown)return e.preventDefault(),this._triggerTextInput(n),void(this._printableKeyDown=!1);229===t._lastKeyDownCode&&window.setTimeout(function(){t._triggerTextInput(n)},50)},_onCompositionStart:function(e){r.log("hiddenInputView compositionstart",e),e.stopPropagation(),this.bringToFront()},_onCompositionEnd:function(e){if(e=e.originalEvent||e,r.log("hiddenInputView compositionend",e),e.stopPropagation(),!this.locked){var t=e.data||this.$el.val();t&&i.defer(function(){this._triggerTextInput(t)}),this.hideBehind()}},_onCopyCutPaste:function(e){var t=e.type;e.preventDefault(),e.stopPropagation(),r.log("on copy/cut/paste",t,e),this.trigger(t,e)},_triggerTextInput:function(e){this.trigger("text-input",e),this.clearValue()},clearValue:function(){this.el.value=c},getValue:function(){return this.el.value}},{create:function(e){return new t(e)},isRangeIn:function(e){if(e){return l.isRangeInSelector("input.hidden-input",e)}}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(368),i=n(46),r=n(102),a=n(19),s=n(0);return t.View.extend({className:"cell-resize-layer",initialize:function(e){var t=e.tableView,n=t.$el;this._tableView=t,this._draggable=new o({el:this.el,disableDocSelection:!0}),this._active=!0,this._onDrag=!1,this._resizeDirection=null,this._cellInfo=null,this._rowLine=n.find(".row-resize-line"),this._colLine=n.find(".col-resize-line"),this._bindEvents()},onDestroy:function(){this.draggable.off()},_bindEvents:function(){var e=this._draggable,t=this._tableView,n={};s.bindAll(this,"_onCellEnter"),n[o.DRAG_START]="_onDragStart",n[o.DRAGGING]="_onDragging",n[o.DRAG_END]="_onDragEnd",i.addListeners(n,e,this),t.on("cell-enter",this._onCellEnter)},render:function(){var e=a.render("common","table_cell_resize",{});this.$el.html(e),this.showAt()},showAt:function(e){e&&null!=e.width&&this.$el.css({width:e.width,height:e.height,top:e.top,left:e.left}).show()},hide:function(){this.$el.hide()},enable:function(){this._active=!0},disable:function(){this._active=!1,this.hide()},isActive:function(){return this._active},_parseType:function(e){var t,n=e.className;return s.some(r,function(e,o){var i=o.toLowerCase();if(n.indexOf(i)>-1)return t=e,!0}),t||r.UP},_onDragStart:function(e){var t,n=this._tableView;n&&!n.isLocked()&&(e.stopPropagation(),this._onDrag=!0,this._resizeDirection=this._parseType(e.target),t=n.getEventBoundingRect(e),this._startRect=t,this._updateResizeLine(t.left,t.top),n.focusOutTbody())},_onDragging:function(e){var t,n=this._tableView;n&&!n.isLocked()&&(e.stopPropagation(),this._onDrag=!0,t=n.getEventBoundingRect(e),this._updateResizeLine(t.left,t.top))},_onDragEnd:function(e){var t,n,o,i=this._tableView,a=this._cellInfo;i&&!i.isLocked()&&(e.stopPropagation(),this._onDrag=!1,t=i.getEventBoundingRect(e),this._updateResizeLine(t.left,t.top,!0),n=t.left-this._startRect.left,o=t.top-this._startRect.top,a&&(0===a.row&&this._resizeDirection===r.TOP&&(o=0-o),0===a.col&&this._resizeDirection===r.LEFT&&(n=0-n)),this._execResizeCommand(n,o))},_updateResizeLine:function(e,t,n){switch(this._resizeDirection){case r.UP:case r.DOWN:n?this._rowLine.hide():this._rowLine.css({top:t}).show();break;case r.RIGHT:case r.LEFT:n?this._colLine.hide():this._colLine.css({left:e}).show()}},_execResizeCommand:function(e,t){var n,o,i,a,l,c,u,d,p,h,f=this._tableView,g=f.block,y=this._cellInfo;switch(this._resizeDirection){case r.UP:case r.DOWN:n=y.row,this._resizeDirection===r.UP?n-=1:(c=g.getMergePointAttrAt(y.row,y.col).height||0)>1&&(n+=c-1),n=n<0?0:n,i=f.getRowElHeight(n),i+=t,i=s.max([i,10]),this.trigger("set-row-height",n,i);break;case r.RIGHT:case r.LEFT:if(o=y.col,this._resizeDirection===r.LEFT?o-=1:(l=g.getMergePointAttrAt(y.row,y.col).width||0)>1&&(o+=l-1),u=o+1,o=o<0?0:o,d=f.getColElWidth(o),a=s.max([d+e,35]),u>=g.getColumnCount()){this.trigger("set-col-width",o,d+e);break}u!==o?(p=d+g.getColumnWidth(u),h=s.max([p-a,35]),this.trigger("set-cells-size",[{col:u,width:h},{col:o,width:p-h}])):this.trigger("set-col-width",o,a)}},_onCellEnter:function(e){var t,n,o,i=this._tableView,r=i.block;!r.locked&&i&&this.isActive()&&!this._onDrag&&(n=i.getCellElementByTarget(e),(t=r.getCellById(n))&&(this._cellInfo={row:t.row,col:t.col},o=i.getBoundingRect(n),this.showAt(o)))}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(19),o=n(169),i=n(365),r=n(366);return{_renderWrap:function(e){return'<div class="resource-wrap">'+e+"</div>"},renderImage:function(e,t){var n=e.getSource(t),o=document.createElement("img");return o.setAttribute("draggable","false"),o.setAttribute("src",r.getURL(i.addIfNeeded(n))||""),o.setAttribute("width","100%"),o.setAttribute("height","auto"),this._renderWrap(o.outerHTML)},renderAttachment:function(e){var n,i,r,a,s=e.getInfo();return n=o.splitFileFullName(s.fileName),i=o.getSizeString(s.fileLength),a=o.getFileIconByName(s.fileName),r=t.render("common","attachment-view-attachment-container",{name:a,fileName:n.fileName.replace(/ /g,"&nbsp;"),fileType:n.fileType.replace(/ /g,"&nbsp;"),size:i,title:s.fileName.replace(/ /g,"&nbsp;"),draggable:!1}),this._renderWrap(r)}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{encode:function(e){return window.btoa(window.unescape(encodeURIComponent(e)))},decode:function(e){return decodeURIComponent(window.escape(window.atob(e)))}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(806),n(807),n(808),n(809),n(810),n(811),n(812),n(813)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8);n(0).each({"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+e":"strike"},function(e,n){t.register({name:e,scope:"table-hidden-input",key:n,action:function(t){t.toggleInlineStyle(e)}})})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8),o=n(102),i=n(0),r={left:o.LEFT,right:o.RIGHT,up:o.UP,down:o.DOWN,tab:o.RIGHT,"shift+tab":o.LEFT,enter:o.DOWN};i.each(r,function(e,n){t.register({name:n,scope:"table-hidden-input",key:n,action:function(t,n){t.moveWithDirection(e,n)}})})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8);n(0).each(["backspace","del"],function(e){t.register({name:e,scope:"table-hidden-input",key:e,action:function(e){e.clearSelectedCells()}})})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(8).register({name:"save",scope:"table-hidden-input",key:"mod+s",action:function(e){e.trigger("save-content")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(8).register({name:"select-all",scope:"table-hidden-input",key:"mod+a",action:function(e){e.selectAll(!0)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8);t.register({name:"undo",scope:"table-hidden-input",key:"mod+z",action:function(e){e.trigger("global-undo")}}),t.register({name:"redo",scope:"table-hidden-input",key:"mod+y",action:function(e){e.trigger("global-redo")}}),t.register({name:"redo_2",scope:"table-hidden-input",key:"mod+shift+z",action:function(e){e.trigger("global-redo")}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8),o=n(0),i=n(1),r=n(11);n(47).isSafari()&&!r.IS_MAC||o.each(["mod+1","mod+2","mod+3","mod+4","mod+d","mod+h","mod+l","ctrl+q"],function(e){t.register({name:e,scope:"table-hidden-input",key:e,preventDefault:!0,action:function(){i.log("shortcut prevented on table")}}),t.register({name:e,scope:"table-cell-edit",key:e,action:function(){i.log("shortcut prevented on table")}})})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(8);t.register({name:"paste",key:"mod+v",scope:"table-hidden-input",preventDefault:!1,action:function(e){e.setPasteAsText(!1)}}),t.register({name:"pasteAsText",key:"mod+shift+v",scope:"table-hidden-input",preventDefault:!1,action:function(e){e.setPasteAsText(!0)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(133),o=n(0),i=n(19);return t.extend({$checkbox:null,_checked:!1,name:"todo",className:"block-view todo-view",events:{"mousedown .todo-mark":"_onClick"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.options=e,this.block=e.block,o.bindAll(this,"_blockCheckedChange","_onStyleChange"),this.block.on("checked-change",this._blockCheckedChange),this.block.on("style-change",this._onStyleChange)},_renderTemplate:function(){this.$el.html(i.render("common",this.name))},render:function(){var e=this.block;t.prototype.render.apply(this,arguments),this._blockCheckedChange(e.getChecked()),this._setContainerStyles()},_setContainerStyles:function(){var e=this,t=e.block.getBlockStyles();o.each(t,function(t,n){e._setContainerStyle(n,t)})},_setContainerStyle:function(e,t){var n=this.$el.find(".todo-content");switch(e){case"back-color":n.parent().css("background-color",t);break;case"padding":n.css("padding",t)}},_onStyleChange:function(e,n){t.prototype._onStyleChange.apply(this,arguments),this._setContainerStyle(e,n)},_blockCheckedChange:function(e){e?this.$el.addClass("checked"):this.$el.removeClass("checked"),this._checked=e},_onClick:function(e){e.preventDefault(),e.stopPropagation();var t=this._checked;this.trigger("command","comp.SetBlockProps",{blocks:[this.block],props:{checked:!t}})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(6),i=n(133),r=n(87),a=n(363),s=n(34),l=n(38),c=n(26),u=n(131),d=n(167),p=n(52);return i.extend({name:"quote",className:"block-view paragraph-view quote-view",render:function(){this._renderTemplate(),this._renderText(d.getQuoteDefaultStyles()),this._renderStyles(),this._setContainerStyles(),r.prototype.render.apply(this,arguments)},_setContainerStyles:function(){var e=this,n=e.block.getBlockStyles();t.each(n,function(t,n){e._setContainerStyle(n,t)})},_setContainerStyle:function(e,t){var n=this.$el.find(".para-text");switch(e){case"back-color":n.parent().css("background-color",t);break;case"padding":n.css({padding:t,margin:t}),"0px"===n.css("padding-left")&&n.css("padding-left","17px"),n.css("padding-top","0px")}},_renderText:function(e){var n,i,r=this,h=r.block,f=h.getReadOnlyText(),g=r._inlineStyleViewMapper,y=r.$el.find(".para-text");n=f.isEmpty()?this._createHtmlForBlankLine(e):s.rich2html(f,{styles:e,styleRules:{color:function(e){var t=e.color;return e.href!==c.getDefault("href")&&l.equals(e.color,"#003884")?d.getQuoteColor():l.equals(e.color,"#393939")||t===c.getDefault("color")?d.getQuoteColor():null!=t&&g?g.valueToView("color",t):void 0},"font-family":function(e){var t,n=e["font-family"];return n!==c.getDefault("font-family")&&g&&(t=g.valueToView("font-family",n)),n!==t?t:p.getAllValueByFont(n)||n}}}),y.html(n),i=h.getStyleRanges("href"),t.each(i,function(e){var t,n,i;t=new a({start:e.from,end:e.to,block:h}),n=r.convertToNativeRange(t),(i=r._findLinkNode(n.endContainer))&&(o(i).off("hover"),o(i).hover(function(){u.isNoteLinkUrl(i.href)||r.isCollabLocked()||r.trigger("link-menu-show",{linkNode:i,range:t,block:h})},function(){r.trigger("link-menu-hide")}))})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(133),n(87),n(6),n(0),n(817),n(140),n(75),n(91),n(76)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d){var p=function(e){return(e.data||e.innerText||e.innerHTML)===u.escapeHtmlEntities(c.EMPTY_LINE_TAG)},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.className="block-view code-view",t.name="code",t.isSelectedBlock=!1,t}return s(t,e),t.prototype._convertToData=function(){},t.prototype._getContentContainer=function(){return this.$el},t.prototype.getBlock=function(){return this.block},t.prototype.initialize=function(){o.prototype.initialize.apply(this,arguments),n.prototype.initialize.apply(this,arguments);var e=this.getBlock();e.injectTokenizer(a),e.injectRenderParams({YNE_HEAD_CLASS:"yne",PLAIN_STRING_CLASS:"plain"}),r.bindAll(this,"renderText","_onContentChange","onClickBlock","onDrawRange"),this.on("draw-range",this.onDrawRange),e.on("content-change",this.renderText),e.on("content-change",this._onContentChange)},t.prototype.render=function(){this.renderText(),this.renderBackColor(),o.prototype.render.apply(this,arguments)},t.prototype.renderText=function(e){e?this.update(e):(this.renderAll(),this.updateTheme(),this.getCodeLineContainer().on("mousedown",this.onClickBlock))},t.prototype.renderBackColor=function(){var e=this.getBlock().getBlockStyles()["back-color"];this._getContentContainer().css("background-color",e)},t.prototype.onClickBlock=function(e){this.isSelectedBlock=e.currentTarget===e.toElement,this.drawSelectAllRange()},t.prototype.onDrawRange=function(e,t){e||this.getBlock()===t||(this.isSelectedBlock=!1,this.drawSelectAllRange())},t.prototype.onSetRange=function(e){var t=document.createRange();e&&(t.selectNodeContents(this.getCodeLineContainer()[0]),d.setRange(t,window),this.isSelectedBlock=!0,this.getBlock().isSelectedBlock=!0,this.getCodeLineContainer().addClass("selectAll"))},t.prototype.drawSelectAllRange=function(e){var t=this,n=e||this.isSelectedBlock;this.isSelectedBlock=n,this.getBlock().isSelectedBlock=n,n?this.getCodeLineContainer().addClass("selectAll"):this.getCodeLineContainer().removeClass("selectAll"),n?setTimeout(function(){t._getContentContainer().parent().attr("contenteditable",!1)},0):this._getContentContainer().parent().attr("contenteditable",!0),this._getContentContainer().attr("draggable",n)},t.prototype.scrollToStart=function(){this._getContentContainer().scrollLeft(0)},t.prototype.scrollRightByIndex=function(e){var t,n=(t=e,this.get$CodeLine(t)).children(),o=this._getContentContainer(),i=0;n.each(function(e){var t=Number(n.eq(e).width());isNaN(t)||(i+=t)}),o.scrollLeft(i)},t.prototype.updateTheme=function(){var e=this.className+" "+("yne-code-theme-"+this.getBlock().getTheme());this._getContentContainer().attr("class",e)},t.prototype.renderAll=function(){var e=this.getBlock().code2html();this._getContentContainer().html('<div class="para-text"></div>'),this.getCodeLineContainer().html(e)},t.prototype.update=function(e){var t=this;for(var n=e.preRichText,o=e.newRichText,i=this.getBlock(),r=i.toCodeLines(n.toString()),a=i.toCodeLines(o.toString()),s=[],l=[];r.length>0&&a.length>0&&r[0]===a[0];)s.push(r[0]),r.shift(),a.shift();for(r.reverse(),a.reverse();r.length>0&&a.length>0&&r[0]===a[0];)l.push(r[0]),r.shift(),a.shift();var c=s.length,u=s.length;r.forEach(function(e,n){var o=c+1;t.get$CodeLine(o).remove()}),a.forEach(function(e,n){var o=i.codeLineToHtml(u+n+1);t.insertAfter(u+n,o)})},t.prototype.parseNativeRange=function(e,t,n){var o=function(e){for(var t=i(e);"PRE"!==t.prop("tagName")&&!(t=t.parent()).is(document.body););return 1+t.prevAll("pre").length},r=function(e,t){if(p(e)||p(e.parentElement))return 0;"drop-hint"===e.id&&(t=e.parentElement.innerText.length),e.nextSibling&&"drop-hint"===e.nextSibling.id&&(t=e.wholeText.length),e.previousSibling&&"drop-hint"===e.previousSibling.id&&(t=i(e.parentElement).text().length-e.wholeText.length);var n=e.parentElement;return i(n).prevAll().text().length+t},a=function(e){for(;;){if(/code-view/.test(e.className))return!0;if(/note-view/.test(e.className))return!1;e=e.parentElement}};if(this.isSelectedBlock)return new l({block:t,selectWholeBlock:!0});var s=e.commonAncestorContainer.className,c=e.startContainer.className,u=/para-text/;if(n||u.test(s)&&u.test(c))return l.createSelectToEndRange(t);if(/note-view/.test(s)){if(a(e.startContainer))return l.createSelectToEndRange(t,o(e.startContainer),r(e.startContainer,e.startOffset));if(a(e.endContainer)){var d=o(e.endContainer),h=r(e.endContainer,e.endOffset);return new l({block:t,startLineIndex:1,startLineCharIndex:0,endLineIndex:d,endLineCharIndex:h})}return l.createSelectToEndRange(t)}var f=r(e.startContainer,e.startOffset),g=r(e.endContainer,e.endOffset),y=o(e.startContainer),m=o(e.endContainer);return new l({block:t,startLineCharIndex:f,endLineCharIndex:g,startLineIndex:y,endLineIndex:m,selectWholeBlock:this.isSelectedBlock})},t.prototype.convertToNativeRange=function(e){var t=this,n=document.createRange();e.selectWholeBlock&&(this.drawSelectAllRange(!0),e=l.createBeginRange(e.block));var o=function(e){return t.get$CodeLine(e)},i=function(e,t){var n={node:null,offset:0};return e.children().each(function(){n.node||(p(this)?n.node=this:(t-=this.innerText.length)<=0&&(n.node=this.firstChild,n.offset=t+this.innerText.length))}),n},r=o(e.startLineIndex),a=o(e.endLineIndex),s=i(r,e.startLineCharIndex),c=i(a,e.endLineCharIndex);return n.setStart(s.node,s.offset),n.setEnd(c.node,c.offset),n},t.prototype.insertAfter=function(e,t){0===e?this.getCodeLineContainer().prepend(i(t)):this.get$CodeLine(e).after(t)},t.prototype.getCodeLineContainer=function(){return this._getContentContainer().find(".para-text")},t.prototype.get$CodeLine=function(e){return this.getCodeLineContainer().children("pre").eq(e-1)},t}(n);return delete h.prototype.constructor,h.prototype.className="block-view code-view",o.extend(h.prototype)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){(function(o){var i;void 0===(i=function(t,n){"use strict";var i="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},r=function(){var e=/\blang(?:uage)?-([\w-]+)\b/i,t=0,n=i.Prism={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof o?new o(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e,t){var o=n.util.type(e);switch(t=t||{},o){case"Object":if(t[n.util.objId(e)])return t[n.util.objId(e)];var i={};for(var r in t[n.util.objId(e)]=i,e)e.hasOwnProperty(r)&&(i[r]=n.util.clone(e[r],t));return i;case"Array":if(t[n.util.objId(e)])return t[n.util.objId(e)];i=[];return t[n.util.objId(e)]=i,e.forEach(function(e,o){i[o]=n.util.clone(e,t)}),i}return e}},languages:{extend:function(e,t){var o=n.util.clone(n.languages[e]);for(var i in t)o[i]=t[i];return o},insertBefore:function(e,t,o,i){var r=(i=i||n.languages)[e];if(2==arguments.length){for(var a in o=arguments[1])o.hasOwnProperty(a)&&(r[a]=o[a]);return r}var s={};for(var l in r)if(r.hasOwnProperty(l)){if(l==t)for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);s[l]=r[l]}var c=i[e];return i[e]=s,n.languages.DFS(n.languages,function(t,n){n===c&&t!=e&&(this[t]=s)}),s},DFS:function(e,t,o,i){for(var r in i=i||{},e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],o||r),"Object"!==n.util.type(e[r])||i[n.util.objId(e[r])]?"Array"!==n.util.type(e[r])||i[n.util.objId(e[r])]||(i[n.util.objId(e[r])]=!0,n.languages.DFS(e[r],t,r,i)):(i[n.util.objId(e[r])]=!0,n.languages.DFS(e[r],t,null,i)))}},plugins:{},highlightAll:function(e,t){n.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,o){var i={callback:o,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",i);for(var r,a=i.elements||e.querySelectorAll(i.selector),s=0;r=a[s++];)n.highlightElement(r,!0===t,i.callback)},highlightElement:function(t,o,r){for(var a,s,l=t;l&&!e.test(l.className);)l=l.parentNode;l&&(a=(l.className.match(e)||[,""])[1].toLowerCase(),s=n.languages[a]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,t.parentNode&&(l=t.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+a));var c={element:t,language:a,grammar:s,code:t.textContent};if(n.hooks.run("before-sanity-check",c),!c.code||!c.grammar)return c.code&&(n.hooks.run("before-highlight",c),c.element.textContent=c.code,n.hooks.run("after-highlight",c)),void n.hooks.run("complete",c);if(n.hooks.run("before-highlight",c),o&&i.Worker){var u=new Worker(n.filename);u.onmessage=function(e){c.highlightedCode=e.data,n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,r&&r.call(c.element),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},u.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else c.highlightedCode=n.highlight(c.code,c.grammar,c.language),n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},highlight:function(e,t,i){var r={code:e,grammar:t,language:i};return n.hooks.run("before-tokenize",r),r.tokens=n.tokenize(r.code,r.grammar),n.hooks.run("after-tokenize",r),o.stringify(n.util.encode(r.tokens),r.language)},matchGrammar:function(e,t,o,i,r,a,s){var l=n.Token;for(var c in o)if(o.hasOwnProperty(c)&&o[c]){if(c==s)return;var u=o[c];u="Array"===n.util.type(u)?u:[u];for(var d=0;d<u.length;++d){var p=u[d],h=p.inside,f=!!p.lookbehind,g=!!p.greedy,y=0,m=p.alias;if(g&&!p.pattern.global){var v=p.pattern.toString().match(/[imuy]*$/)[0];p.pattern=RegExp(p.pattern.source,v+"g")}p=p.pattern||p;for(var b=i,_=r;b<t.length;_+=t[b].length,++b){var I=t[b];if(t.length>e.length)return;if(!(I instanceof l)){if(g&&b!=t.length-1){if(p.lastIndex=_,!(A=p.exec(e)))break;for(var k=A.index+(f?A[1].length:0),w=A.index+A[0].length,C=b,S=_,x=t.length;x>C&&(w>S||!t[C].type&&!t[C-1].greedy);++C)k>=(S+=t[C].length)&&(++b,_=S);if(t[b]instanceof l)continue;T=C-b,I=e.slice(_,S),A.index-=_}else{p.lastIndex=0;var A=p.exec(I),T=1}if(A){f&&(y=A[1]?A[1].length:0);w=(k=A.index+y)+(A=A[0].slice(y)).length;var N=I.slice(0,k),E=I.slice(w),D=[b,T];N&&(++b,_+=N.length,D.push(N));var M=new l(c,h?n.tokenize(A,h):A,m,A,g);if(D.push(M),E&&D.push(E),Array.prototype.splice.apply(t,D),1!=T&&n.matchGrammar(e,t,o,b,_,!0,c),a)break}else if(a)break}}}}},tokenize:function(e,t){var o=[e],i=t.rest;if(i){for(var r in i)t[r]=i[r];delete t.rest}return n.matchGrammar(e,o,t,0,0,!1),o},hooks:{all:{},add:function(e,t){var o=n.hooks.all;o[e]=o[e]||[],o[e].push(t)},run:function(e,t){var o=n.hooks.all[e];if(o&&o.length)for(var i,r=0;i=o[r++];)i(t)}}},o=n.Token=function(e,t,n,o,i){this.type=e,this.content=t,this.alias=n,this.length=0|(o||"").length,this.greedy=!!i};if(o.stringify=function(e,t,i){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var r={type:e.type,content:o.stringify(e.content,t,i),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:i};if(e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,a)}n.hooks.run("wrap",r);var s=Object.keys(r.attributes).map(function(e){return e+'="'+(r.attributes[e]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+(s?" "+s:"")+">"+r.content+"</"+r.tag+">"},!i.document)return i.addEventListener?(n.disableWorkerMessageHandler||i.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,r=t.code,a=t.immediateClose;i.postMessage(n.highlight(r,n.languages[o],o)),a&&i.close()},!1),i.Prism):i.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,n.manual||r.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),i.Prism}();e.exports&&(e.exports=r),void 0!==o&&(o.Prism=r),r.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),r.languages.xml=r.languages.markup,r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},r.languages.css.atrule.inside.rest=r.languages.css,r.languages.markup&&(r.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:!0,inside:r.languages.css,alias:"language-css",greedy:!0}}),r.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:r.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:r.languages.css}},alias:"language-css"}},r.languages.markup.tag)),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},/\b(?:as|async|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/],number:/\b(?:(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+)n?|\d+n|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\(|\.(?:apply|bind|call)\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[[^\]\r\n]+]|\\.|[^\/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"},constant:/\b[A-Z][A-Z\d_]*\b/}),r.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}}}),r.languages.markup&&r.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:r.languages.javascript,alias:"language-javascript",greedy:!0}}),r.languages.js=r.languages.javascript,r.languages.c=r.languages.extend("clike",{keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*\/%&|^!=<>]=?/,number:/(?:\b0x[\da-f]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?)[ful]*/i}),r.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+(?:[^\r\n\\]|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(?:<.+?>|("|')(?:\\?.)+?\2)/,lookbehind:!0},directive:{pattern:/(#\s*)\b(?:define|defined|elif|else|endif|error|ifdef|ifndef|if|import|include|line|pragma|undef|using)\b/,lookbehind:!0,alias:"keyword"}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete r.languages.c["class-name"],delete r.languages.c.boolean,r.languages.csharp=r.languages.extend("clike",{keyword:/\b(?:abstract|add|alias|as|ascending|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|descending|do|double|dynamic|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|from|get|global|goto|group|if|implicit|in|int|interface|internal|into|is|join|let|lock|long|namespace|new|null|object|operator|orderby|out|override|params|partial|private|protected|public|readonly|ref|remove|return|sbyte|sealed|select|set|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|value|var|virtual|void|volatile|where|while|yield)\b/,string:[{pattern:/@("|')(?:\1\1|\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*?\1/,greedy:!0}],"class-name":[{pattern:/\b[A-Z]\w*(?:\.\w+)*\b(?=\s+\w+)/,inside:{punctuation:/\./}},{pattern:/(\[)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/(\b(?:class|interface)\s+[A-Z]\w*(?:\.\w+)*\s*:\s*)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/((?:\b(?:class|interface|new)\s+)|(?:catch\s+\())[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}}],number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)f?/i}),r.languages.insertBefore("csharp","class-name",{"generic-method":{pattern:/\w+\s*<[^>\r\n]+?>\s*(?=\()/,inside:{function:/^\w+/,"class-name":{pattern:/\b[A-Z]\w*(?:\.\w+)*\b/,inside:{punctuation:/\./}},keyword:r.languages.csharp.keyword,punctuation:/[<>(),.:]/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),r.languages.dotnet=r.languages.csharp,function(e){var t={variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\([^)]+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},/\$(?:[\w#?*!@]+|\{[^}]+\})/i]};e.languages.bash={shebang:{pattern:/^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/,alias:"important"},comment:{pattern:/(^|[^"{\\])#.*/,lookbehind:!0},string:[{pattern:/((?:^|[^<])<<\s*)["']?(\w+?)["']?\s*\r?\n(?:[\s\S])*?\r?\n\2/,lookbehind:!0,greedy:!0,inside:t},{pattern:/(["'])(?:\\[\s\S]|\$\([^)]+\)|`[^`]+`|(?!\1)[^\\])*\1/,greedy:!0,inside:t}],variable:t.variable,function:{pattern:/(^|[\s;|&])(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|npm|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|[\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&])(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|[\s;|&])/,lookbehind:!0},boolean:{pattern:/(^|[\s;|&])(?:true|false)(?=$|[\s;|&])/,lookbehind:!0},operator:/&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/,punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];]/};var n=t.variable[1].inside;n.string=e.languages.bash.string,n.function=e.languages.bash.function,n.keyword=e.languages.bash.keyword,n.boolean=e.languages.bash.boolean,n.operator=e.languages.bash.operator,n.punctuation=e.languages.bash.punctuation,e.languages.shell=e.languages.bash}(r),r.languages.cpp=r.languages.extend("c",{keyword:/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(?:true|false)\b/,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*\/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),r.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)\w+/i,lookbehind:!0}}),r.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),function(e){e.languages.ruby=e.languages.extend("clike",{comment:[/#.*/,{pattern:/^=begin(?:\r?\n|\r)(?:.*(?:\r?\n|\r))*?=end/m,greedy:!0}],keyword:/\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|protected|private|public|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.languages.ruby}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[gim]{0,3}/,greedy:!0,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,greedy:!0,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,greedy:!0,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,greedy:!0,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,greedy:!0,inside:{interpolation:t}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:{pattern:/(^|[^:]):[a-zA-Z_]\w*(?:[?!]|\b)/,lookbehind:!0}}),e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z]\w*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,greedy:!0,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,greedy:!0,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,greedy:!0,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,greedy:!0,inside:{interpolation:t}},{pattern:/("|')(?:#\{[^}]+\}|\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:t}}]}(r),r.languages["markup-templating"]={},Object.defineProperties(r.languages["markup-templating"],{buildPlaceholders:{value:function(e,t,n,o){e.language===t&&(e.tokenStack=[],e.code=e.code.replace(n,function(n){if("function"==typeof o&&!o(n))return n;for(var i=e.tokenStack.length;-1!==e.code.indexOf("___"+t.toUpperCase()+i+"___");)++i;return e.tokenStack[i]=n,"___"+t.toUpperCase()+i+"___"}),e.grammar=r.languages.markup)}},tokenizePlaceholders:{value:function(e,t){if(e.language===t&&e.tokenStack){e.grammar=r.languages[t];var n=0,o=Object.keys(e.tokenStack),i=function(a){if(!(n>=o.length))for(var s=0;s<a.length;s++){var l=a[s];if("string"==typeof l||l.content&&"string"==typeof l.content){var c=o[n],u=e.tokenStack[c],d="string"==typeof l?l:l.content,p=d.indexOf("___"+t.toUpperCase()+c+"___");if(p>-1){++n;var h,f=d.substring(0,p),g=new r.Token(t,r.tokenize(u,e.grammar,t),"language-"+t,u),y=d.substring(p+("___"+t.toUpperCase()+c+"___").length);if(f||y?(h=[f,g,y].filter(function(e){return!!e}),i(h)):h=g,"string"==typeof l?Array.prototype.splice.apply(a,[s,1].concat(h)):l.content=h,n>=o.length)break}}else l.content&&"string"!=typeof l.content&&i(l.content)}};i(e.tokens)}}}}),r.languages.go=r.languages.extend("clike",{keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,builtin:/\b(?:bool|byte|complex(?:64|128)|error|float(?:32|64)|rune|string|u?int(?:8|16|32|64)?|uintptr|append|cap|close|complex|copy|delete|imag|len|make|new|panic|print(?:ln)?|real|recover)\b/,boolean:/\b(?:_|iota|nil|true|false)\b/,operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,number:/(?:\b0x[a-f\d]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e[-+]?\d+)?)i?/i,string:{pattern:/(["'`])(\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0}}),delete r.languages.go["class-name"],r.languages.java=r.languages.extend("clike",{keyword:/\b(?:var|abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp-]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?[df]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|([-+&|])\2|[?:~]|[-+*\/%&|^!=<>]=?)/m,lookbehind:!0}}),r.languages.insertBefore("java","function",{annotation:{alias:"punctuation",pattern:/(^|[^.])@\w+/,lookbehind:!0}}),r.languages.insertBefore("java","class-name",{generics:{pattern:/<\s*\w+(?:\.\w+)?(?:\s*,\s*\w+(?:\.\w+)?)*>/i,alias:"function",inside:{keyword:r.languages.java.keyword,punctuation:/[<>(),.:]/}}}),r.languages.json={property:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/i,string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},number:/-?\d+\.?\d*([Ee][+-]?\d+)?/,punctuation:/[{}[\],]/,operator:/:/g,boolean:/\b(?:true|false)\b/i,null:/\bnull\b/i},r.languages.jsonp=r.languages.json,function(e){e.languages.kotlin=e.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[/\w+(?=\s*\()/,{pattern:/(\.)\w+(?=\s*\{)/,lookbehind:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete e.languages.kotlin["class-name"],e.languages.insertBefore("kotlin","string",{"raw-string":{pattern:/("""|''')[\s\S]*?\1/,alias:"string"}}),e.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),e.languages.insertBefore("kotlin","function",{label:{pattern:/\w+@|@\w+/,alias:"symbol"}});var t=[{pattern:/\$\{[^}]+\}/,inside:{delimiter:{pattern:/^\$\{|\}$/,alias:"variable"},rest:e.languages.kotlin}},{pattern:/\$\w+/,alias:"variable"}];e.languages.kotlin.string.inside=e.languages.kotlin["raw-string"].inside={interpolation:t}}(r),r.languages.markdown=r.languages.extend("markup",{}),r.languages.insertBefore("markdown","prolog",{blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},code:[{pattern:/^(?: {4}|\t).+/m,alias:"keyword"},{pattern:/``.+?``|`[^`\n]+`/,alias:"keyword"}],title:[{pattern:/\w+.*(?:\r?\n|\r)(?:==+|--+)/,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#+.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:/(^|[^\\])(\*\*|__)(?:(?:\r?\n|\r)(?!\r?\n|\r)|.)+?\2/,lookbehind:!0,inside:{punctuation:/^\*\*|^__|\*\*$|__$/}},italic:{pattern:/(^|[^\\])([*_])(?:(?:\r?\n|\r)(?!\r?\n|\r)|.)+?\2/,lookbehind:!0,inside:{punctuation:/^[*_]|[*_]$/}},url:{pattern:/!?\[[^\]]+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)| ?\[[^\]\n]*\])/,inside:{variable:{pattern:/(!?\[)[^\]]+(?=\]$)/,lookbehind:!0},string:{pattern:/"(?:\\.|[^"\\])*"(?=\)$)/}}}}),r.languages.markdown.bold.inside.url=r.languages.markdown.url,r.languages.markdown.italic.inside.url=r.languages.markdown.url,r.languages.markdown.bold.inside.italic=r.languages.markdown.italic,r.languages.markdown.italic.inside.bold=r.languages.markdown.bold,r.languages.matlab={comment:[/%\{[\s\S]*?\}%/,/%.+/],string:{pattern:/\B'(?:''|[^'\r\n])*'/,greedy:!0},number:/(?:\b\d+\.?\d*|\B\.\d+)(?:[eE][+-]?\d+)?(?:[ij])?|\b[ij]\b/,keyword:/\b(?:break|case|catch|continue|else|elseif|end|for|function|if|inf|NaN|otherwise|parfor|pause|pi|return|switch|try|while)\b/,function:/(?!\d)\w+(?=\s*\()/,operator:/\.?[*^\/\\']|[+\-:@]|[<>=~]=?|&&?|\|\|?/,punctuation:/\.{3}|[.,;\[\](){}!]/},r.languages.objectivec=r.languages.extend("c",{keyword:/\b(?:asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while|in|self|super)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,string:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|@"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),function(e){e.languages.php=e.languages.extend("clike",{keyword:/\b(?:and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0}}),e.languages.insertBefore("php","string",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),e.languages.insertBefore("php","keyword",{delimiter:{pattern:/\?>|<\?(?:php|=)?/i,alias:"important"},variable:/\$+(?:\w+\b|(?={))/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),e.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}});var t={pattern:/{\$(?:{(?:{[^{}]+}|[^{}]+)}|[^{}])+}|(^|[^\\{])\$+(?:\w+(?:\[.+?]|->\w+)*)/,lookbehind:!0,inside:{rest:e.languages.php}};e.languages.insertBefore("php","string",{"nowdoc-string":{pattern:/<<<'([^']+)'(?:\r\n?|\n)(?:.*(?:\r\n?|\n))*?\1;/,greedy:!0,alias:"string",inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},"heredoc-string":{pattern:/<<<(?:"([^"]+)"(?:\r\n?|\n)(?:.*(?:\r\n?|\n))*?\1;|([a-z_]\w*)(?:\r\n?|\n)(?:.*(?:\r\n?|\n))*?\2;)/i,greedy:!0,alias:"string",inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:t}},"single-quoted-string":{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0,alias:"string"},"double-quoted-string":{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,alias:"string",inside:{interpolation:t}}}),delete e.languages.php.string,e.hooks.add("before-tokenize",function(t){if(/(?:<\?php|<\?)/gi.test(t.code)){e.languages["markup-templating"].buildPlaceholders(t,"php",/(?:<\?php|<\?)[\s\S]*?(?:\?>|$)/gi)}}),e.hooks.add("after-tokenize",function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")})}(r),r.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:_INSERT|COL)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURNS?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:TRUE|FALSE|NULL)\b/i,number:/\b0x[\da-f]+\b|\b\d+\.?\d*|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|IN|LIKE|NOT|OR|IS|DIV|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},r.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"triple-quoted-string":{pattern:/("""|''')[\s\S]+?\1/,greedy:!0,alias:"string"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},r.languages.r={comment:/#.*/,string:{pattern:/(['"])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},"percent-operator":{pattern:/%[^%\s]*%/,alias:"operator"},boolean:/\b(?:TRUE|FALSE)\b/,ellipsis:/\.\.(?:\.|\d+)/,number:[/\b(?:NaN|Inf)\b/,/(?:\b0x[\dA-Fa-f]+(?:\.\d*)?|\b\d+\.?\d*|\B\.\d+)(?:[EePp][+-]?\d+)?[iL]?/],keyword:/\b(?:if|else|repeat|while|function|for|in|next|break|NULL|NA|NA_integer_|NA_real_|NA_complex_|NA_character_)\b/,operator:/->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\|\|?|[+*\/^$@~]/,punctuation:/[(){}\[\],;]/},r.languages.typescript=r.languages.extend("javascript",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield|module|declare|constructor|namespace|abstract|require|type)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console)\b/}),r.languages.ts=r.languages.typescript,r.languages.scala=r.languages.extend("java",{keyword:/<-|=>|\b(?:abstract|case|catch|class|def|do|else|extends|final|finally|for|forSome|if|implicit|import|lazy|match|new|null|object|override|package|private|protected|return|sealed|self|super|this|throw|trait|try|type|val|var|while|with|yield)\b/,string:[{pattern:/"""[\s\S]*?"""/,greedy:!0},{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0}],builtin:/\b(?:String|Int|Long|Short|Byte|Boolean|Double|Float|Char|Any|AnyRef|AnyVal|Unit|Nothing)\b/,number:/\b0x[\da-f]*\.?[\da-f]+|(?:\b\d+\.?\d*|\B\.\d+)(?:e\d+)?[dfl]?/i,symbol:/'[^\d\s\\]\w*/}),delete r.languages.scala["class-name"],delete r.languages.scala.function,r.languages.swift=r.languages.extend("clike",{string:{pattern:/("|')(\\(?:\((?:[^()]|\([^)]+\))+\)|\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/\\\((?:[^()]|\([^)]+\))+\)/,inside:{delimiter:{pattern:/^\\\(|\)$/,alias:"variable"}}}}},keyword:/\b(?:as|associativity|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic(?:Type)?|else|enum|extension|fallthrough|final|for|func|get|guard|if|import|in|infix|init|inout|internal|is|lazy|left|let|mutating|new|none|nonmutating|operator|optional|override|postfix|precedence|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|Self|set|static|struct|subscript|super|switch|throws?|try|Type|typealias|unowned|unsafe|var|weak|where|while|willSet|__(?:COLUMN__|FILE__|FUNCTION__|LINE__))\b/,number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,constant:/\b(?:nil|[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,atrule:/@\b(?:IB(?:Outlet|Designable|Action|Inspectable)|class_protocol|exported|noreturn|NS(?:Copying|Managed)|objc|UIApplicationMain|auto_closure)\b/,builtin:/\b(?:[A-Z]\S+|abs|advance|alignof(?:Value)?|assert|contains|count(?:Elements)?|debugPrint(?:ln)?|distance|drop(?:First|Last)|dump|enumerate|equal|filter|find|first|getVaList|indices|isEmpty|join|last|lexicographicalCompare|map|max(?:Element)?|min(?:Element)?|numericCast|overlaps|partition|print(?:ln)?|reduce|reflect|reverse|sizeof(?:Value)?|sort(?:ed)?|split|startsWith|stride(?:of(?:Value)?)?|suffix|swap|toDebugString|toString|transcode|underestimateCount|unsafeBitCast|with(?:ExtendedLifetime|Unsafe(?:MutablePointers?|Pointers?)|VaList))\b/}),r.languages.swift.string.inside.interpolation.inside.rest=r.languages.swift}.apply(t,[n,t]))||(e.exports=i)}).call(this,n(54))},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(87),o=n(261);return t.extend({className:"block-view unknown-view",initialize:function(){t.prototype.initialize.apply(this,arguments)},render:function(){this.$el.html("<div>当前版本不支持的内容</div>"),t.prototype.render.apply(this,arguments)},convertToNativeRange:function(){},parseNativeRange:function(e,t,n){if(n)return new o({block:t})}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(6),i=n(0),r=n(19);return t.View.extend({className:"highlight-view",_baseRect:null,_focusIndex:-1,_list:[],initialize:function(){i.bindAll(this,"_extractData","onHide","nextHighlight")},_extractData:function(e){var t=this,n=e.getClientRects(),a=[];i.each(n,function(e){e.width<2||a.push(o(r.render("common","high_light_item",{top:e.top-t._baseRect.top-1,left:e.left-t._baseRect.left-2,height:e.height-2,width:e.width})).appendTo(t.$el).get(0))}),t._list.push(o(a))},_reset:function(){this._list=[],this._focusIndex=-1,this.$el.empty()},showHighlight:function(e,t){return e&&t?0===t.length?(this._reset(),void this.onHide()):(this.$el.empty(),this.$el.show(),this._list=[],this._baseRect=this.el.getBoundingClientRect(),i.each(t,this._extractData),this._focusIndex=0,this._list[this._focusIndex].addClass("focused"),void this._list[this._focusIndex].get(0).scrollIntoViewIfNeeded()):(this._reset(),void this.onHide())},nextHighlight:function(e){0!==this._list.length&&(this.$el.show(),e=e||1,this._list[this._focusIndex].removeClass("focused"),this._focusIndex=(this._focusIndex+this._list.length+e)%this._list.length,this._list[this._focusIndex].addClass("focused"),this._list[this._focusIndex].get(0).scrollIntoViewIfNeeded())},preHighlight:function(){this.nextHighlight(-1)},onHide:function(){this.$el.hide()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(19),i=n(6),r=n(0),a=n(1),s=n(204),l=n(357),c=i('<div class="collab-editing-view-wrapper"><div class="collab-session-view"></div></div>'),u="header-footer-view";function d(e){var t=null;do{r.contains(e.classList,u)&&(r.contains(e.classList,"page-header")?t="header":r.contains(e.classList,"page-footer")&&(t="footer")),e=e.parentElement}while(e);return t}return t.View.extend({className:u,name:"header-footer",_focus:!1,_isReadOnly:!1,$input:null,events:{"focus .header-footer-input":"_onFocus","blur .header-footer-input":"_onBlur","keydown .header-footer-input":"_onKeyDown","input .header-footer-input":"_onTextInput","paste .header-footer-input":"_onPaste"},initialize:function(e,t){e=e||{};this.block=e,this._contentOnFocus=null,this._keyMonitor=new s({el:this.el}),this.isFooter=!0===e.isFooter,this._isReadOnly=!!t,r.bindAll(this,"_onLockedChange","_updateViewByModel","_onPaste","_onHighlight"),e.on("high-light",this._onHighlight),e.on("locked-change",this._onLockedChange),e.on("change",this._updateViewByModel),this.render()},render:function(){var e,t=this.block,n=this.$el,i="page-"+(t.isFooter?"footer":"header"),r="点击编辑"+(t.isFooter?"页脚":"页眉");e=o.render("common",this.name,{readonly:this._isReadOnly}),n.html(e),n.addClass(i).attr("title",r),this.$input=n.find(".header-footer-input"),this._updateViewByModel(t.getContent(),t.getAlign()),this._updateLockState(this.isLocked())},_updateViewByModel:function(e,t){this._focus||void 0===e||this.setContent(e),void 0!==t&&this.setAlign(t)},_onHighlight:function(e,t,n){var o=this.block.getHighlight(e,t);o&&this._convertToData(o,n)},_convertToData:function(e,t){var n,o=this.$input.get(0).firstChild;r.each(e,function(e){(n=document.createRange()).setStart(o,e.start),n.setEnd(o,e.end),t(n)})},_onPaste:function(e){var t,n,o=e.originalEvent;e.preventDefault(),o.clipboardData&&o.clipboardData.getData?(n=(t=o.clipboardData.getData("text/plain"))&&t.replace(/\r?\n/g," "),document.execCommand("insertHTML",!1,n)):window.clipboardData&&window.clipboardData.getData&&(t=window.clipboardData.getData("Text"),l(t))},_onLockedChange:function(e){this._updateLockState(this.isLocked()),this._updateLockIndicator(this.block.isLocked(),e),this.trigger("locked-change")},isLocked:function(){var e=this.block,t=!1;return e&&(t=e.isLocked()),t},_updateLockIndicator:function(e,t){var n=c.clone(),o=n.find(".collab-session-view"),i=t&&t.lockColor,r=t&&t.nickname;e?(this.$el.addClass("collab-editing-view"),void 0!==r&&(o.css("background-color",i),o.text(r),this.$el.find(".collab-editing-view-wrapper").remove(),this.$el.prepend(n))):(this.$el.removeClass("collab-editing-view"),this.$el.find(".collab-editing-view-wrapper").remove())},_updateLockState:function(e){e?this.$el.addClass("collab-locked"):this.$el.removeClass("collab-locked")},_onTextInput:function(){this.trigger("text-input",this.$input.text())},_onFocus:function(){this._focus=!0,this._contentOnFocus=this.$input.text()||"",a.log("content on focus: "+this._contentOnFocus),this.trigger("focus")},_onBlur:function(){var e=this.$input.text();this._focus=!1,a.log("content on blur: "+e),e!==this._contentOnFocus&&this.trigger("text-change",e),this.trigger("blur"),this._contentOnFocus=null},_stopPropagation:function(e){e.stopPropagation()},_onKeyDown:function(e){var t=this._keyMonitor;t.isEventMatchKey(e,"enter")?(e.stopPropagation(),e.preventDefault(),this.$el.blur()):t.isEventMatchKey(e,"tab")?(e.stopPropagation(),e.preventDefault(),document.execCommand("insertHTML",!1,"&emsp;")):t.isEventMatchKey(e,"mod+z")||t.isEventMatchKey(e,"mod+y")?(e.stopPropagation(),e.preventDefault()):r.some(["mod+s","mod+shift+r","mod+f"],function(n){return t.isEventMatchKey(e,n)})?e.preventDefault():e.stopPropagation()},getAlign:function(){return this.$input.css("text-align")},setAlign:function(e){var t="left"===e||"right"===e?e:"center";this.$input.css("text-align",t)},setContent:function(e){this.$input.text(e)},getContent:function(){return this.$input.text()},checkChange:function(){var e=this.$input.text()||"";null!=this._contentOnFocus&&e!==this._contentOnFocus&&(this.trigger("text-change",e),this._contentOnFocus=e)}},{isHeaderView:function(e){return"header"===d(e)},isFooterView:function(e){return"footer"===d(e)}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(822),n(1),n(209)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onPaste=function(e){var t,n,o=e.originalEvent.clipboardData;e.preventDefault(),this.isPasteAsText?this.trigger("yne-on-paste",!0,e):(n=o.getData("text/yne-json"),t=o.getData("text/yne-table-json"),!n&&t&&this.pasteYTableJson(t)||this.trigger("yne-on-paste",!1,e))},t.prototype.focusEditor=function(){var e=this.getNoteRange();o.log("focusEditor",e),this.isReadOnly()||(this.isValidNoteRange(e)||(e=this.defaultNoteRange()),this.noteSelection.setRange(e,null,null,!1))},t.prototype.getRangeData=function(t){var n,o=e.prototype.getRangeData.call(this,t),r=o["text/html"],a=this.note.getExtraInfo("pcResMap");return n=i(r,a),o["text/html"]=n,o},t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(45),n(4),n(36),n(76),n(199),n(46),n(11),n(17),n(1),n(143),n(823),n(871),n(7),n(3),n(16),n(9),n(81),n(26),n(108),n(8),n(41),n(22),n(872),n(377),n(370),n(371),n(47),n(873)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m,v,b,_,I,k,w,C,S,x,A,T,N,E){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="xml",t.dataFixed=!1,t}return s(t,e),t.prototype.addDragHint=function(e,t){var n,o,i=this.getRangeByPoint(e,t),r=this.noteView.parseNativeRange(i)[0];return this.getNoteRange()?(n=this.getNoteRange().getStartBlockRange())&&r?!(r.block===n.block&&r.start>=n.start&&r.start<n.end)&&(this.lastDragOver?o=this.lastDragSpace.parentNode.removeChild(this.lastDragSpace):((o=document.createElement("span")).id="drop-hint",this.lastDragOver={}),this.lastDragOver.x=e,this.lastDragOver.y=t,this.lastDragSpace=o,void i.insertNode(o)):(p.error("addDragHint:startRange and dragRange should not be null",n,r),!1):(p.error("addDragHint:Failed to get NoteRange"),!1)},t.prototype.canRemoveFormat=function(){var e=this.getNoteRange();return e&&!e.isCollapsed()},t.prototype.canUndo=function(){return this.cmdManager.canUndo()},t.prototype.canRedo=function(){return this.cmdManager.canRedo()},t.prototype.createCmd=function(e,t){return this._createCmd(e,t)},t.prototype.defaultNoteRange=function(){var e,t,n=this.note;if(n&&(e=n.getBlockAt(0)))return t=C.createRangeByBlock({allContent:!1,block:e,collapseToStart:!0}),new S({endRange:t,startRange:t})},t.prototype.execBackTab=function(){this.execCommand("comp.KeyTab",{inlineStyles:this.editingInlineStates,withShiftKey:!0})},t.prototype.execCommand=function(e,t){var o,r,a=this;if(r=(t=n.defaults(t||{},{collabProperties:a.editor.buildCollabProperties()})).collabProperties.isCollabCmd,!a.isReadOnly()||r)if(t.isOriginalCmd=!0,(o=a._createCmd(e,t))&&!o.cmdError){if(!i.isInlineStateSetCommand(o))return a.isCollabEnabled()?(o.isOriginalCmd=!0,r?a._executeCollabCmd(o,t):a._handleLocalCmdInCollabMode(o,t),t.collabProperties.dataCmdError&&p.error(t.collabProperties.dataCmdError),o):a._executeLocalCmd(o,t);n.each(t.inlineStyles,function(e,t){a.setEditingInlineState(t,e)})}else p.error("Failed to create/initialize command:"+e);else a.editor.notifyErrorToHost(y.INVALIDACTION_EDIT_READ_ONLY)},t.prototype.execCmdByShortCut=function(e,t){this.editor.execCommandByToolbar(e,t)},t.prototype.execDeleteBackward=function(e){var t,n;n=(t=(e=e||this.getNoteRange()).getStartBlockRange()).block,e?(m.isHeading(n)&&e.isCollapsed()&&t.isCollapsed()&&0===t.start?this.resetEditingInlineStates():n.isEmpty()||this._updateDeleteInlineStates(this.queryBackwardFirstInlineStyles(e)),this.execCommand("comp.KeyBackspace",{inlineStyles:this.editingInlineStates})):p.error("noteRange not found")},t.prototype.execDeleteForward=function(){var e=this.getNoteRange();e?(this._updateDeleteInlineStates(this.queryForwardFirstInlineStyles(e)),this.execCommand("comp.KeyDelete")):p.error("noteRange not found")},t.prototype.execDeleteToEnd=function(){var e,t=this.getNoteRange();if(t){if(!t.isCollapsed())return this._onDeleteSelection();e=t.clone(!0),t.getEndBlockRange().expandToEnd(),this.execDeleteBackward(e)}},t.prototype.execInsertDate=function(){var e,t=new Date,n=function(e){return o.pad(e,2,"0","left")};e=" "+t.getFullYear()+"/"+n(t.getMonth()+1)+"/"+n(t.getDate())+" "+n(t.getHours())+":"+n(t.getMinutes())+" ",this.insertText(e,!1)},t.prototype.execKeyHandler=function(e){this.keyHandlerManager.execWithName(e,this,{})},t.prototype.getDefaultFont=function(){return this.defaultFont},t.prototype.getEditingInlineState=function(e){var t=this.editingInlineStates||{};return e?t[e]:t},t.prototype.getNextCaretBlockRange=function(){var e,t,n,o=this.getNoteRange().getStartBlockRange().block;return m.isTextOrTableBlock(o)||(e=this._getNextCaretBlock(o))&&(t=C.createRangeByBlock({allContent:!1,block:e,collapseToStart:!0}),n=new S({endRange:t,startRange:t}),this.noteSelection.setRange(n)),n},t.prototype.getNoteRange=function(){var e=this.noteSelection.getRange();return e||(e=this.defaultNoteRange()),e},t.prototype.getRangeByPoint=function(e,t){var n,o;return n=document.caretRangeFromPoint(e,t),(o=document.createRange()).setStart(n.startContainer,n.startOffset),o},t.prototype.hasKeyHandler=function(e){return this.keyHandlerManager.hasHandler(e)},t.prototype.innerGoto=function(e){var t,n;if(t=document.getElementById(e),this.pageViewManager&&!t&&(this.pageViewManager.activePageByBlockId(e),t=document.getElementById(e)),!t)return p.warn("No find the block!");window.location.hash="#"+e,(n=document.createRange()).setStart(t.lastChild,1),n.setEnd(t.lastChild,1),a.setRange(n,window),window.location.hash=""},t.prototype.insertAttachment=function(e){var t,n=this.getNoteRange();if(!e||!e.src)return p.log("Error: attachment data is invald! "+e);switch(t=e.resource&&e.fileName?"attachment":"image",this.noteSelection.setRange(n),t){case"attachment":this.execCommand("comp.InsertAttachment",{fileLength:e.fileLength,fileName:e.fileName,resource:e.resource,src:e.src});break;case"image":this.insertImage(e.src)}},t.prototype.insertImage=function(e){var t=this.getNoteRange();e&&(this.noteSelection.setRange(t),this.execCommand("comp.InsertImage",{src:e}))},t.prototype.insertText=function(e,t){var o,i,r=I.getAllDefault();e instanceof b?o=e:(i=this.editingInlineStates,o=new b({text:e}),n.isEqual(r,i)||o.setStyles(0,o.getLength(),i)),this.execCommand("comp.KeyTextInput",{recogLink:t,text:o})},t.prototype.isDragProhibited=function(){return this.dragProhibited},t.prototype.isCopyProhibited=function(){return this.isCopyProhibited},t.prototype.isCollabEnabled=function(){return null!=this.editor&&this.editor.isCollabEnabled&&this.editor.isCollabEnabled()},t.prototype.isReadOnly=function(){return this.readOnly},t.prototype.isSameList=function(e){var t=this.note,n=this.getNoteRange();return!!n&&t.isSameList(n,e)},t.prototype.isValidNoteRange=function(e){var t=this,n=function(e){var n;return!(!e||!e.block)&&(n=e.block,t.note.getBlockIndex(n)>-1)};return!!e&&(t.isValidHeaderFooterRange(e)||n(e.getStartBlockRange())&&n(e.getEndBlockRange()))},t.prototype.isValidHeaderFooterRange=function(e){var t=this.note,o=e.getStartBlockRange(),i=e.getEndBlockRange();return n.all([o,i],function(e){if(!e||!e.block)return!1;var n=e.block;return t.getHeaderFooter(!0)===n||t.getHeaderFooter(!1)===n})},t.prototype.moveCaretWithDirection=function(e,t){this._onMoveCaretWithDirection(e,t)},t.prototype.lockBlockById=function(e){this.isCollabEnabled()&&this._sendBlockLockInfo(e)},t.prototype.onCommand=function(e,t){this.execCommand(e,t)},t.prototype.onUpdateSelection=function(e,t,n){var o;n&&n.inlineStyles&&(o=n.inlineStyles),this.noteSelection.setRange(e,A.createCommandTypeEvent(t),o)},t.prototype.onPaste=function(e){var t,n,o,i,r,a,s;if(e.preventDefault(),u.IS_MAC)this._pasteForMac();else{if(t=new T({event:e}),this.isPasteAsText)return s=t.getData("text/plain"),void this._pastePlain(s,this.isPasteAsText);n=t.getData("text/yne-json"),o=t.getData("text/yne-image-json"),r=t.getData("text/yne-note-id"),n&&this._pasteJSON(n,o,r)||(i=t.getData("text/yne-table-json"))&&this.pasteYTableJson(i)||((a=t.getData("text/html"))&&this._pasteHTML(a)?p.log("paste html ok"):(s=t.getData("text/plain"))?this._pastePlain(s,this.isPasteAsText):this._pasteBlobImg(e))}},t.prototype.pasteForTable=function(e){var t,n=this.getNoteRange(),o=n.getStartBlockRange(),i=n.getEndBlockRange(),r=o.block,a=i.block,s=this.noteView;return!(!m.isTable(r)||r.getId()!==a.getId())&&(!(!(t=s.getBlockViewByBlock(r))||!t.pasteBlockList)&&t.pasteBlockList(e))},t.prototype.queryBackwardFirstInlineStyles=function(e,t){var n,o,i,r,a,s=I.getAllDefault();if(e=e||this.getNoteRange()){if(o=(n=e.getStartBlockRange()).block,m.isTextBlock(o))return o.isEmptyContent()?o.getInlineStylesForEmpty()||t||this.getDefaultFont()||s:(r=n.start,a=o.getLength(),(e.isCollapsed()||r>=a)&&(r=r>0?r-1:0),i=o.getTextStylesAtIndex(r),this._omitLinkStylesIfNeeded(i,e))}else p.warn("noteRange is null")},t.prototype.queryForwardFirstInlineStyles=function(e){var t,n,o,i,r;if(e=e||this.getNoteRange()){if(n=(t=e.getEndBlockRange()).block,m.isTextBlock(n))return n.isEmptyContent()?n.getInlineStylesForEmpty()||I.getAllDefault():(i=t.end,r=n.getLength(),(!e.isCollapsed()||i>=r)&&(i=i>0?i-1:0),o=n.getTextStylesAtIndex(i),this._omitLinkStylesIfNeeded(o,e))}else p.error("noteRange is null")},t.prototype.querySelectionCodeInfo=function(e){if(e=e||this.getNoteRange()){var t=e.getStartBlockRange().block;return{"code-theme":t.getTheme(),"code-language":t.getLanguage()}}p.warn("noteRange not found")},t.prototype.querySelectionInlineStyle=function(e,t){var n=this.note;if(t=t||this.getNoteRange())return n.getCommonInlineStyle(t,e);p.warn("noteRange not found")},t.prototype.querySelectionBlockStyle=function(e,t){var n=this.note;if(t=t||this.getNoteRange())return n.getRangeBlockStyle(t,e);p.warn("noteRange not found")},t.prototype.querySelectionInlineStyles=function(e){var t,o,i,r,a=this,s={},l=I.getStyleNames();if(e=e||a.getNoteRange())return t=e.getStartBlockRange(),e.isSingleTableSelected()&&t.isOnCellEdit()&&(o=t.block,i=a.noteView.getBlockViewByBlock(o))?(r=i.getCellEditView(),s=r.queryInlineStylesForBulb()):(n.each(l,function(t){s[t]=a.querySelectionInlineStyle(t,e)}),s);p.warn("noteRange not found")},t.prototype.querySelectionBlockStyles=function(e){var t,o,i=this,r={};if(e=e||i.getNoteRange())return t=_.getAllStyleNames(),o=k.getAllStyleNames(),t=t.concat(o),n.each(t,function(t){r[t]=i.querySelectionBlockStyle(t,e)}),r;p.warn("noteRange not found")},t.prototype.redo=function(){var e=this.cmdManager;if(!this.isCollabEnabled())return e.redo();var t={collabProperties:{coreEditor:this.editor,isCollabRedo:!0}};return this._redoUndoLocalCmdInCollabMode(t)},t.prototype.removeDragHint=function(){this.lastDragSpace&&this.lastDragSpace.parentNode&&this.lastDragSpace.parentNode.removeChild(this.lastDragSpace),this.lastDragOver=this.lastDragSpace=null},t.prototype.removeShortCut=function(e){var t=this.keyHandlerManager;t&&t.unbind(e)},t.prototype.reset=function(){this.cmdManager&&this.cmdManager.reset(),this.noteSelection&&this.noteSelection.reset(),this.resetEditingInlineStates(),this.defaultFont=null,this.readOnly=!1},t.prototype.resetEditingInlineStates=function(){var e=I.getAllDefault();this.setEditingInlineStates(null),this.trigger("yne-editing-state-change",e)},t.prototype.setEditingInlineStyles=function(e){this.setEditingInlineStates(e),e||(e=I.getAllDefault()),this.trigger("yne-editing-state-change",e)},t.prototype.resizeSpecialBlock=function(){var e=this.note;n.each(e.blocks,function(e){(m.isTable(e)||m.isImage(e))&&e.trigger("view-resize")})},t.prototype.selectAll=function(){return this.noteView.onSelectAll()},t.prototype.setDefaultFont=function(e,t){this.defaultFont=this.defaultFont||{},e&&(this.defaultFont["font-family"]=e,this.setEditingInlineState("font-family",e)),t&&(this.defaultFont["font-size"]=t,this.setEditingInlineState("font-size",t))},t.prototype.setEditingInlineState=function(e,t){var n={};this.isReadOnly()||(this.editingInlineStates||(this.editingInlineStates={}),this.editingInlineStates[e]=t,n[e]=t,this.trigger("yne-editing-state-change",n),this.isLinkStylesChanged=this._isLinkStyles(e))},t.prototype.setEditingInlineStates=function(e){this.editingInlineStates=e,this.isLinkStylesChanged=!1},t.prototype.setOptions=function(e){var t;this.reset(),this.readOnly=e.isReadOnly,t=this.note=e.note,c.bubble(["color-picker-show","yne-user-action-collection"],t,this,!0),c.addListeners({"get-block-view":"_onGetBlockView","get-default-set-font":"_onGetDefaultSetFont"},t,this,!0)},t.prototype.setPasteAsText=function(e){this.isPasteAsText=e},t.prototype.setEntity=function(e,t){this.note.setEntityCache(e),this.note.setEntity(e,t)},t.prototype.setDragProhibited=function(e){e=!!e,this.dragProhibited=e,this.note.setDragProhibited(e)},t.prototype.setCopyProhibited=function(e){e=!!e,this.note.setCopyProhibited(e)},t.prototype.setReadOnly=function(e){var t=this;e=!!e,t.isReadOnly()!==e&&(t.readOnly=e,n.each(["note"],function(n){var o=t[n];o&&o.setReadOnly&&o.setReadOnly(e)}))},t.prototype.toggleInlineStyle=function(e){var t,n=this.getNoteRange(),o={};n?(t=n.isCollapsed()?!this.editingInlineStates[e]:!0!==(t=this.querySelectionInlineStyle(e)),o[e]=t,this.execCommand("comp.ApplyStyles",{inlineStyles:o})):p.warn("noteRange not found")},t.prototype.undo=function(){var e=this.cmdManager;if(!this.isCollabEnabled())return e.undo();var t={collabProperties:{coreEditor:this.editor,isCollabUndo:!0}};return this._redoUndoLocalCmdInCollabMode(t)},t.prototype.updateShortCut=function(e,t){var n=this.keyHandlerManager;n&&n.updateKey(e,t)},t.prototype.zoomInEditor=function(){this.editor.setZoomPercent(1)},t.prototype.zoomOutEditor=function(){this.editor.setZoomPercent(-1)},t.prototype.zoomEditor=function(){this.editor.zoomEditor(1,!0)},t.prototype.setInputType=function(e){this.inputType="html"===e||"json"===e?e:"xml"},t.prototype.getInputType=function(){return this.inputType},t.prototype.setDataFixed=function(e){this.dataFixed=e},t.prototype.isDataFixed=function(){return this.dataFixed},t.prototype.getOutputType=function(e){var t,n=this.inputType;if("string"==typeof e&&["xml","html","json"].indexOf(e)>-1)return e;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return"xml"}return e&&(t=e[n]),t&&["xml","html","json"].indexOf(t)>-1?t:"xml"},t.prototype.getRangeData=function(e){var t=this.note,n={"text/yne-json":e.getDataAsJSON(t),"text/html":'<meta charset="utf-8">'+e.getDataAsHtml(t),"text/plain":e.getDataAsPlain(t),"text/yne-note-id":t.getNoteId()},o=this._getImgDomInRange(e);return n["text/yne-image-json"]=this._getImageDataAsJson(o),this._addYneTableData(t,e,n),n},t.prototype.initialize=function(e){var t=e.noteView;this.cmdManager=new g(e),this.cmdFactory=new f(e),this.removeLocalImg=e.removeLocalImg||!1,this.setOptions(e),this.noteView=t,this.noteSelection=new x({noteView:this.noteView}),this._initKeyHandlerManager(e.keyHandlerNames),this.editor=e.editor,this.imgTitleInput=e.imgTitleInput,this._bindEvents()},t.prototype.pasteYTableJson=function(e){if(n.isString(e))try{e=JSON.parse(e)}catch(e){return void p.error("parse ytable json  string error")}return this._pasteJSON([{blockType:m.TABLE,data:e}])},t.prototype._addYneTableData=function(e,t,n){if(t.isSingleTableSelected()){var o=t.getStartBlockRange().getDataAsJSON(!0);o&&(n["text/yne-table-json"]=JSON.stringify(o))}},t.prototype._bindEvents=function(){var e=this,t=e.cmdManager,n=e.noteView;c.addListeners({"update-selection":"onUpdateSelection","command-exec":"_onCommandExec"},t,e),c.bubble(["redo-stack-change","undo-stack-change"],t,e),c.addListeners({"selection-change":"_onSelectionChange"},e.noteSelection,e),c.bubble({contextmenu:!0,selectstart:!0,"mouse-down":!0,"yne-replace-image":!0,"yne-replace-attachment":!0,"yne-download-image":!0,"yne-preview-image":!0,"yne-get-exif-data":!0,"yne-download-attachment":!0,"yne-get-entity":!0,"yne-replace-img-url":!0,"yne-mac-preview":!0,"yne-open-image":!0,"yne-open-attachment":!0,"yne-on-paste":!0,"yne-blob-paste":!0,"open-link":"yne-open-link","cell-edit-view-exit":!0,"cell-edit-view-history-change":!0,"yne-image-ocr":!0},n,e),c.bubble(["link-menu-hide","locked-change"],n,e.editor.linkView),c.addListeners({"delete-selection":"_onDeleteSelection","text-input":"_onTextInput","key-pressed":"_onKey",command:"onCommand",copy:"_onCopy",cut:"_onCut",paste:"onPaste",dragstart:"_onDragStart",dragover:"_onDragOver",drop:"_onDrop",dragend:"_onDragEnd","note-append-blankparagraph":"_onAppendBlankParagraph",onCompositionStart:"_onCompositionStart","inner-goto":"innerGoto","header-footer-view-text-change":"_onHeaderFooterViewTextChange","backup-drag-range":"_onBackupDragRange","get-note-range":"_onGetNoteRange","move-caret":"_onMoveCaretWithDirection","global-redo":"redo","global-undo":"undo","cell-edit-view-enter":"_onEnterTableEdit","cell-edit-view-selection-change":"_onCellEditViewSelectionChange","cell-edit-view-command-executed":"_onCellEditViewSelectionChange","save-content":"_onSaveContent"},n,e),n.on("get-editing-styles",function(t){t(e.editingInlineStates)}),n.on("get-entity",e._getEntity),n.on("replace-img-url",e._requestImagSrc),n.on("get-exif-data",e._getExifData),e.editor&&e.editor.onDocSelectionChange&&e.noteSelection.on("doc-change-selection",e.editor.onDocSelectionChange,e.editor),n.on("yne-click",function(){e.editor.recoverFromIdleTimeout(),e.trigger("yne-click")}),n.on("link-menu-show",function(t){e.editor.linkView.trigger("link-menu-show",t)}),n.on("get-image-items",e._getImgItems),e.imgTitleInput&&c.bubble(["img-title-edit-start","img-title-edit-end","img-title-edit-focus","img-title-edit-exit","img-title-edit-update","locked-change"],n,e.imgTitleInput)},t.prototype._createCmd=function(e,t){var n=this.cmdFactory;return t.range||i.isCollabCommand(t)||(t.range=this.getNoteRange()||S.createMock()),n.create(e,this.note,t)},t.prototype._executeCollabCmd=function(e,t){var n=this.getNoteRange();!1===this.cmdManager.exec(e,n,t)&&t.collabProperties.isOwnCmd&&this.editor.notifyErrorToHost(y.INVALIDACTION_FAILED_COLLABCMD)},t.prototype._executeLocalCmd=function(e,t){var n;if(!e||!1!==e.isReadyToApply)return n=this.getNoteRange(),this.cmdManager.exec(e,n,t)},t.prototype._getImgDomInRange=function(e){var t,o,i,r,a=this.note,s=this.noteView,l=e.getStartBlockRange(),c=e.getEndBlockRange(),u=a.getBlockIndex(l.block),d=a.getBlockIndex(c.block),p={};for(t=u;t<=d;t++)o=null,i=a.getBlockAt(t),m.isImage(i)&&(r=s.blockViews[t].getImgElement(),p[i.getId()]={img:r,source:i.getSource()}),m.isTable(i)&&(t===u&&(o=l),t===d&&(o=c),n.extend(p,s.blockViews[t].getImageDomMapByTableRange({selectAll:!o,tableRange:o})));return p},t.prototype._getImageDataAsJson=function(e){var t=l.getBase64Data(e);return JSON.stringify(t)},t.prototype._getNextCaretBlock=function(e){for(var t=this.note.getNextBlock(e);t&&(!this._isCaretBlock(t)||t.isLocked());)t=this.note.getNextBlock(t);return t},t.prototype._getImgItems=function(e){var t=this.note.blocks,o=[],i=0;n.each(t,function(t){if(t&&m.isImage(t)){var n=t.getSource().replace(location.protocol+"//"+location.hostname,"");e===t&&(i=o.length),o.push({index:o.length,name:t.getTitle(),preSrc:n,src:n})}}),this.trigger("yne-preview-image",[i,o])},t.prototype._getEntity=function(e,t){var n;if(this.note.entityExistInCache(t)){if((n=this.note.getBlockById(e))&&n instanceof v){var o=this.note.getEntityCache(t);n.setEntity(o)}}else this.trigger("yne-get-entity",t,e)},t.prototype._requestImagSrc=function(e){var t=this;e.noteId=this.note.getNoteId(),setTimeout(function(){t.trigger("yne-replace-img-url",e)})},t.prototype._getExifData=function(e){var t=this;setTimeout(function(){t.trigger("yne-get-exif-data",e)})},t.prototype._getPreCaretBlock=function(e){for(var t=this.note.getPreBlock(e);t&&(!this._isCaretBlock(t)||t.isLocked());)t=this.note.getPreBlock(t);return t},t.prototype._getUploadData=function(e,t,o){var i,r=0,a=[],s={},c={};if(!(n.isEmpty(e)||n.isEmpty(t)&&n.isEmpty(o)))return i=l.setBlockIds(o,e),n.each(e,function(e,t){e.base64&&(a.push({id:r,url:t,blob:l.base64ToBlob(e.base64),isGroup:u.isFromWebGroup(t)}),s[r]=e.imgBlockIds,r++)}),n.each(t,function(e){var t=e.getSource(),o=t+"_"+e.getResource(),i=e.getId();n.isUndefined(c[o])?(c[o]=r,s[r]=[i],a.push({id:r,source:t,resource:e.getResource(),isGroup:u.isFromWebGroup(t)}),r++):s[c[o]].push(i)}),{data:a,map:s,replaceImgList:i}},t.prototype._handleLocalCmdInCollabMode=function(e,t){var n,o,i,r=!0;n=this.getNoteRange(),e.setCmdOriginalNoteVersion(this.note.getFileVersion()),this.editor.isValidLocalDataCmd(e)?(o=this.noteView.isOnComposition&&"comp.KeyBackspace"===e.name,i=e.isSingleBlockAffected()&&this.editor.isMyOwnLockedBlock(t.range)&&this.editor.isLastOwnDataCmdExecuted(),o||i?!1===this.cmdManager.exec(e,n,t)?(r=!1,this.editor.notifyErrorToHost(y.INVALIDACTION_FAILED_LOCALCMD)):e.effected?e.isLocalExecutedCmd=!0:r=!1:e.isLocalExecutedCmd=!1,r?this.editor.pushLocalDataCommand(e,o):p.warn("NotReadyToSend:",e)):p.warn("skip invalid local command")},t.prototype._initKeyHandlerManager=function(e){var t=this,o=t.keyHandlerManager=new w({});o.on("bind-key",function(e){var n=t.noteView;n&&n.bindKey(e)}),o.on("unbind-key",function(e){var n=t.noteView;n&&n.unbindKey(e)}),e=e||o.getAvailableHandlerNames(),n.each(e,function(e){o.bind(e)})},t.prototype._isCaretBlock=function(e){return m.isTextBlock(e)||m.isImage(e)||m.isAttachment(e)||m.isTable(e)},t.prototype._isLinkStyles=function(e){return n.contains(["color","underline"],e)},t.prototype._isPartlyOverlapWithAnchor=function(e){var t,n,o,i,r,a,s;return!(!e||!e.isInSingleBlock())&&((n=(t=e.getStartBlockRange()).block)instanceof v&&((o=t.start)===(i=t.end)?(o>0&&(a=n.getTextStyle("href",o-1,o)[0]),o<n.getLength()&&(s=n.getTextStyle("href",o,o+1)[0]),(a||s)&&a!==s):(r=n.getCommonInlineStyle("href",{end:i,start:o}))&&r===y.INTERM))},t.prototype._onMoveCaretWithDirection=function(e,t){var n,o,i,r,a,s;(n=this.getNoteRange())?n.canDrawedByNative()?p.log("The noteRange can be drawed by native selection!"):(o=n.getStartBlockRange().block,(m.isImage(o)||m.isAttachment(o)||m.isTable(o)||m.isHr(o)||m.isUnknown(o)||m.isHandWrite(o))&&(e?(i=this._getNextCaretBlock(o),r=!0):(i=this._getPreCaretBlock(o),r=!1),i?(a=C.createRangeByBlock({allContent:!1,block:i,collapseToStart:r}),s=new S({endRange:a,startRange:a}),this.noteSelection.setRange(s),t&&t.preventDefault()):e&&this.noteView.focusLastBlankLine())):p.log("The noteRange is null!")},t.prototype._notifyEditingStatesChange=function(){var e,t,o,i=this,r=i.getNoteRange(),a=i.editingInlineStates||{},s=!1;!i.isReadOnly()&&r&&(e=r.getStartBlockRange(),r.isInSingleBlock()&&m.isTextBlock(e.block)&&e.block.getLength()<e.start&&(s=!0),(s||a&&r.isCollapsed())&&(!r.isSingleTableSelected()||e.getAsRectRange())||(a=i.querySelectionInlineStyles(r)||{}),o=n.clone(a),(t=r.clone(!0)).collapse(!0),n.each(["font-family","font-size"],function(e){var n;a[e]===y.INTERM&&(n=i.querySelectionInlineStyle(e,t),a[e]=n)}),m.isCode(e.block)&&Object.assign(a,i.querySelectionCodeInfo(r)),a.heading=null,i.trigger("yne-editing-state-change",a,o))},t.prototype._onAppendBlankParagraph=function(){this.execCommand("comp.AppendBlank",{inlineStyles:this.editingInlineStates})},t.prototype._onCellEditViewSelectionChange=function(){var e,t=this.getNoteRange().getStartBlockRange().block,n=this.noteView.getBlockViewByBlock(t);n&&(e=n.getCellEditView().queryInlineStylesForBulb(),this.trigger("yne-editing-state-change",e))},t.prototype._onCommandExec=function(e,t){this.trigger("command-exec",e,t)},t.prototype._onCompositionStart=function(e){var t,o,i=this,r=i.getNoteRange(),a=[],s=!1;if(r){if(i.isCollabEnabled()){if(o=i.note.getInterBlocks(r.getStartBlockRange().block,r.getEndBlockRange().block,!0),n.each(o,function(e){var t=i.noteView.getBlockViewByBlock(e);a.push(t),t.isCollabLocked()&&(s=!0)}),e(s,a),s)return;(t=r.getStartBlockRange())&&r.isInSingleBlock()&&m.isTextBlock(t.block)&&!i.editor.isMyOwnLockedBlock(t)&&(i.editor.sendCachedDataCommand(),i._sendBlockLockInfo(t.block.getId()))}}else p.error("_onCompositionStart:noteRange should not be null")},t.prototype._omitLinkStylesIfNeeded=function(e,t){return e&&e.href&&this._isPartlyOverlapWithAnchor(t)&&(e.href=void 0,this.isLinkStylesChanged||(e.color="#393939",e.underline=!1)),e},t.prototype._onCut=function(e){var t=this.getNoteRange();e.preventDefault(),p.log("on cut!"),this._setClipboardByRange(t,e),!t||t.isCollapsed()||t.isSingleTableSelected()||this.execCommand("comp.DeleteNoteRange",{range:t})},t.prototype._onCopy=function(e){var t=this.getNoteRange();p.DEBUG&&(p.profile("on-copy"),p.time("on-copy")),e.preventDefault(),p.log("on copy!"),this._setClipboardByRange(t,e),p.DEBUG&&(p.timeEnd("on-copy"),p.profileEnd("on-copy"))},t.prototype._onDeleteSelection=function(){var e=this.getNoteRange();e&&!e.isCollapsed()&&this.execDeleteBackward(e)},t.prototype._onGetDefaultSetFont=function(e){e(this.getDefaultFont())},t.prototype._onKey=function(e,t){var n=this.noteView,o=this.keyHandlerManager;n&&(n.directionKeyJustMoved=!1),o.execWithKey(e,this,t)},t.prototype._onBackupDragRange=function(){var e=this.getNoteRange();e&&!e.isCollapsed()&&(this.dragTextRange=e)},t.prototype._onDragStart=function(e,t){var n,o,i,r=this.getNoteRange().getStartBlockRange();n=m.isTextBlock(t,r)?this.dragTextRange:this.getNoteRange(),this.startNoteRange=n,n&&!n.isCollapsed()?(i=new N({event:e}),o={"text/html":n.getDataAsHtml(this.note),"text/plain":n.getDataAsPlain(this.note),"text/yne-json":n.getDataAsJSON(this.note)},i.setDataMap(o),i.clearData("text/uri-list"),i.setProperty("effectAllowed","move")):p.log("no note range or note range is collapsed!")},t.prototype._onDragOver=function(e,t){var o=e.clientX,i=e.clientY,r=e.dataTransfer.types;if(!n.contains(r,"text/yne-json"))return n.contains(r,"Files")&&(e.preventDefault(),e.stopPropagation()),!0;if(e.preventDefault(),e.stopPropagation(),!this.lastDragOver||this.lastDragOver.x!==o||this.lastDragOver.y!==i){if(!m.isTextBlock(t)&&!m.isListItem(t))return e.dataTransfer.dropEffect="none",void this.removeDragHint();e.dataTransfer.dropEffect="move",!1===this.addDragHint(o,i)&&(e.dataTransfer.dropEffect="none")}},t.prototype._onDrop=function(e){var t,o,r,a,s,l=e.dataTransfer,c=l.types,d=this.noteView;e.preventDefault(),e.stopPropagation(),s=d.getBlock(e.target),(u.IS_MAC||E.isSafari())&&s&&m.isTable(s)?((r=document.createRange()).setStart(e.target,0),r.collapse()):r=this.getRangeByPoint(e.clientX,e.clientY),n.contains(c,"text/yne-json")&&(t=l.getData("text/yne-json"),o=h.parseJSON(t),n.map(o,function(e){e.setId(i.newGUID())}),(a=d.parseNativeRange(r)[0])&&a.isCollapsed()&&d.trigger("command","comp.DragBlocks",{blocks:o,dropRange:a,range:this.startNoteRange})),n.contains(c,"Files")&&this.noteSelection.setRange(r),this.removeDragHint()},t.prototype._onDragEnd=function(){this.removeDragHint()},t.prototype._onHeaderFooterViewTextChange=function(e,t){this.onCommand("comp.SetHeaderFooter",{content:e,headerFooter:t,range:S.createForHeaderFooter(t)})},t.prototype._onGetNoteRange=function(e){e(this.getNoteRange())},t.prototype._onGetBlockView=function(e,t){var n=this.noteView;n&&t(n.getBlockViewByBlock(e))},t.prototype._onEnterTableEdit=function(e){e.blockId&&(this.editor.sendCachedDataCommand(),this._sendBlockLockInfo(e.blockId)),this.trigger("cell-edit-view-enter",e)},t.prototype._onSaveContent=function(){this.trigger("yne-save-content")},t.prototype._onSelectionChange=function(e,t){this.lastDeleteInlineStates?(this.setEditingInlineStates(this.lastDeleteInlineStates),this.lastDeleteInlineStates=null):this._shouldKeepEditingStates(e)||this._updateEditingStates(t),this._notifyEditingStatesChange(),this.trigger("yne-selection-change")},t.prototype._onTextInput=function(e){this.insertText(e,!1)},t.prototype._pasteBlobImg=function(e){var t,n,o=this;(t=e.originalEvent.clipboardData.items)&&1===t.length&&0===t[0].type.indexOf("image")&&(n=t[0].getAsFile(),o.trigger("yne-blob-paste",{data:n,isImg:!0},function(e){e&&e.source&&o.insertImage(e.source)}))},t.prototype._pasteForMac=function(){var e,t,o,i,r,a,s,l=this,c=l.editor,u=window.ynote;if(u&&u.macClipboardData||p.error("YNote does not exist!"),l.isPasteAsText)return e=c.callMacNativeApi("macClipboardData",["text/plain"]),void l._pastePlain(e,l.isPasteAsText);if(!((t=c.callMacNativeApi("macClipboardData",["text/yne-table-json"]))&&l.pasteYTableJson(t)||(o=c.callMacNativeApi("macClipboardData",["text/yne-json"]),i=c.callMacNativeApi("macClipboardData",["text/yne-image-json"]),r=c.callMacNativeApi("macClipboardData",["text/yne-note-id"]),o&&l._pasteJSON(o,i,r))))if((a=c.callMacNativeApi("macClipboardData",["text/html"]))&&l._pasteHTML(a))p.log("mac paste html ok");else{if(s=c.callMacNativeApi("macClipboardData",["image"]))return s=JSON.parse(s),void n.each(s,function(e){l.insertImage(e)});(e=c.callMacNativeApi("macClipboardData",["text/plain"]))&&l._pastePlain(e,l.isPasteAsText)}},t.prototype._pasteJSON=function(e,t,o){p.log("Paste JSON\n",e);var a,s,c=this,u={},d=this.getNoteRange();d.isInSingleBlock()&&m.isCode(d.getStartBlockRange().block)&&(s=!0);var f,g=l.parseImageJson(t),y=h.parseJSON(e,s),v=[],b=[],_={},I={};return n.each(y,function(e){m.isHeading(e)&&(_[e.getId()]=e)}),n.each(y,function(e){var t,n;m.isCatalogue(e)?(t=_[e.getHref()])&&(e.setIndent(t.getLevel()-1),n=i.newGUID(),I[n]=!0,t.setId(n),e.setHref(n)):m.isHeading(e)||(e.setId(i.newGUID()),m.isListItem(e)?(a=e.getListId(),u[a]||(u[a]=r.getOrCreateListById(c.note.getAllBlocks(),a,e.getListType())),e.setOwnerList(u[a])):m.isAttachment(e)?v.push(e):m.isImage(e)&&b.push(e))}),n.each(_,function(e){I[e.getId()]||e.setId(i.newGUID())}),c.note.isSameNote(o)||(f=c._uploadImageData(g||{},v,b)),c._pasteBlockList(y,f)},t.prototype._pasteHTML=function(e){p.log("Paste HTML\n",e);var t=this,o={},r={},a=h.parseHtml(e);return n.each(a,function(e){m.isHeading(e)&&(o[e.getId()]=e)}),n.each(a,function(e){var n,a;if(m.isCatalogue(e)&&(n=o[e.getHref()])&&(e.setIndent(n.getLevel()-1),a=i.newGUID(),r[a]=!0,n.setId(a),e.setHref(a)),m.isTextBlock(e)){var s=t.getNoteRange().getStartBlockRange().block;e.setBlockStyles(s.getBlockStyles())}}),n.each(o,function(e){r[e.getId()]||e.setId(i.newGUID())}),t._pasteBlockList(a)},t.prototype._pastePlain=function(e,t){var o,i,r,a=this,s=a.getNoteRange();return t&&(i=null,r=a.querySelectionBlockStyles(s)),o=h.parsePlain(e,i,r,t),n.each(o,function(e){if(m.isTextBlock(e)){var t=a.getNoteRange().getStartBlockRange().block;e.setBlockStyles(t.getBlockStyles())}}),a._pasteBlockList(o)},t.prototype._pasteBlockList=function(e,t){var o;if(e&&e.length&&(!0===this.removeLocalImg&&(e=n.filter(e,function(e){var o=/^(http:\/\/|https:\/\/|\/\/)/i;return e.getBlockStyle("back-color")&&e.setBlockStyle("back-color",""),m.isImage(e)&&-1===n.indexOf(t||[],e)?o.test(e.getSource())||/^data:.+;base64/i.test(e.getSource()):!m.isAttachment(e)||o.test(e.getResource())})),e&&e.length))return o=this.editingInlineStates,this.editingInlineStates=null,this.execCommand("comp.InsertBlocks",{blocks:e}),this.editingInlineStates=o,!0},t.prototype._redoUndoLocalCmdInCollabMode=function(e){var t;e.collabProperties.isCollabUndo?t=this.cmdManager.getUndoCmd():e.collabProperties.isCollabRedo&&(t=this.cmdManager.getRedoCmd()),t?((t=n.clone(t)).setCmdOriginalNoteVersion(this.note.getFileVersion()),t.isLocalExecutedCmd=!1,e.collabProperties.isCollabUndo?(t.setCollabUndo(!0),t.setCollabRedo(!1)):e.collabProperties.isCollabRedo&&(t.setCollabRedo(!0),t.setCollabUndo(!1)),this.editor.isValidLocalDataCmd(t)?i.isInlineStateSetCommand(t)||this.editor.pushLocalDataCommand(t,!0):p.warn("skip invalid redo/undo local command")):p.warn("skip empty redo/undo local command")},t.prototype._setClipboardByRange=function(e,t){var n,o;e&&!e.isCollapsed()?(n=this.getRangeData(e),new T({event:t}).setDataMap(n),o=e.isInSingleBlock()&&m.isAttachment((e.getStartBlockRange()||{}).block),this.trigger("yne-clipboard-set",o)):p.log("no note range or note range is collapsed!")},t.prototype._sendBlockLockInfo=function(e){this.editor.hasCachedDataCmd()?window.setTimeout(this._sendBlockLockInfo.bind(this,e),100):this.editor.sendBlockLockInfo(e)},t.prototype._shouldKeepEditingStates=function(e){var t,o,i;return!!(e&&e.isCommandType&&e.isCommandType())&&(o=(t=e.getData()||{}).cmdType,i=t.cmdName,n.contains({do:["key.Space","key.Enter","comp.ApplyStyles","comp.IndentOutdent","comp.InsertAttachment","comp.InsertHorizontalRule","comp.InsertImage","comp.InsertList","comp.InsertTable","comp.KeyTab","comp.KeyTextInput"],redo:["comp.ApplyStyles","comp.IndentOutdent","comp.InsertList"],undo:["comp.ApplyStyles","comp.IndentOutdent","comp.InsertList"]}[o],i))},t.prototype._updateDeleteInlineStates=function(e){e&&e.href&&(e=null),this.lastDeleteInlineStates=e},t.prototype._updateEditingStates=function(e){var t=this.getNoteRange(),n=this.queryBackwardFirstInlineStyles(t,e);this.setEditingInlineStates(n)},t.prototype._uploadImageData=function(e,t,o){if(!(n.isEmpty(e)||n.isEmpty(t)&&n.isEmpty(e.data))){var i,r,a,s,l=this,c=e.data,u=l.note,d=l.editor;if(a=l._getUploadData(c,t,o))return i=a.data,r=a.map,s=a.replaceImgList,d.trigger("yne-upload-image",{data:i,isImg:!0},function(e){setTimeout(function(){var t=[],o=[];n.each(e,function(e,i){n.each(r[i],function(i){var r=u.getBlockById(i);r&&(t.push(r),m.isImage(r)?o.push(n.defaults(e,{source:r.getSource()||"uploadfail"})):m.isAttachment(r)&&o.push(n.defaults(e,{resource:r.getResource(),source:r.getSource()})))})}),t.length>0&&(l.execCommand("comp.ReplaceResource",{ignoreUndoRedo:!0,resProps:o,resources:t}),n.each(t,function(e){e.trigger("content-change")}))})},function(){n.each(n.union(t,s),function(e){e.setFakeLoading(!0)})}),s}},t}(d)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(21),o=n(1),i=n(5),r=n(22),a=n(4);return n(824),t.extend({_editor:null,initialize:function(e){this._editor=e.editor},create:function(e,t,n){var s,l=null;if(n.collabProperties=n.collabProperties||{},e+="",s=i.get(e)){if(l=new s({note:t,args:n}),!this._editor.isCollabEnabled())return l.isSimple||l.setStartingRange(n.range),l;if(n.collabProperties.dataCmdError)return o.error(n.collabProperties.dataCmdError),null;if(l.isSimple)return l;!a.isCollabCommand(n)&&l.isOriginalCmd&&(r.isNoteRange(n.range)?l.setStartingRange(n.range):(n.collabProperties.dataCmdError="original cmd args.range should be noteRange",l=null))}else o.warn("No class for `"+e+"` command");return l}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){n(372),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(839),n(840),n(842),n(843),n(844),n(845),n(846),n(847),n(848),n(849),n(850),n(851),n(853),n(854),n(855),n(857),n(859),n(861),n(863),n(864),n(866),n(868),n(869),n(870)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(23),a=n(44),s=n(129),l=n(4);return t=o.extend({name:"comp.AppendBlank",_cmdArgs:null,_note:null,_newBlkId:null,_preBlkId:null,_preBlock:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},l.isCollabCommand(this._cmdArgs)||(this._newBlkId=l.newGUID(),this._preBlock=this._note.getLastBlock(),this._preBlock&&(this._preBlkId=this._preBlock.getId())),t.__super__.initialize.apply(this,arguments)},apply:function(){var e,t;return e=r.createNewParagraph(this._preBlock,this._newBlkId,""),r.setBlockStyle(e,this._cmdArgs.inlineStyles),!1!==this.executeAtomicCommand(new a({note:this._note,newBlks:[e],preBlk:this._preBlock}))&&(t=s.buildNoteRangeFromParagraph(e,0,0),this.setEndingRange(t),!0)},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;e&&(this._newBlkId=e.newBlkId,e.preBlkId&&(this._preBlock=this._note.getBlockById(e.preBlkId))),t.__super__.fromCollabJSON.apply(this)},toCollabJSON:function(){var e;return this.rangeIsRequired=!1,this.resetAffectedBlockIds(),(e=t.__super__.toCollabJSON.apply(this)).newBlkId=this._newBlkId,this._preBlkId&&(e.preBlkId=this._preBlkId),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(0),s=n(23),l=n(4);return t=o.extend({name:"comp.ApplyStyles",_note:null,_cmdArgs:null,_blockStyleNameValues:null,_inlineStyleNameValues:null,initialize:function(){var e;if(this._note=this.options.note,this._cmdArgs=this.options.args,e=this._cmdArgs.range,t.__super__.initialize.apply(this),!l.isCollabCommand(this._cmdArgs)){if(!e)return r.error("note range should NOT be null:",this.name),void(this.isReadyToApply=!1);this._blockStyleNameValues=this._cmdArgs.blockStyles,this._inlineStyleNameValues=this._cmdArgs.inlineStyles}},apply:function(){var e=this._cmdArgs.range;return!s.setStylesOnNoteRange(this,this._note,e,a.clone(this._blockStyleNameValues),a.clone(this._inlineStyleNameValues))&&(this.setEndingRange(e),!0)},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;e&&(e.blockStyles&&(this._blockStyleNameValues=e.blockStyles),e.inlineStyles&&(this._inlineStyleNameValues=e.inlineStyles)),t.__super__.fromCollabJSON.apply(this)},isInlineStateSet:function(){var e=this._cmdArgs.range,t=!1;return e&&e.isCollapsed()&&(!this._blockStyleNameValues||a.isEmpty(this._blockStyleNameValues))&&this._inlineStyleNameValues&&!a.isEmpty(this._inlineStyleNameValues)&&(t=!0),t},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e&&(this._blockStyleNameValues&&!a.isEmpty(this._blockStyleNameValues)&&(e.blockStyles=this._blockStyleNameValues),this._inlineStyleNameValues&&!a.isEmpty(this._inlineStyleNameValues)&&(e.inlineStyles=this._inlineStyleNameValues)),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(375),i=n(5),r=n(1),a=n(4);return t=o.extend({name:"comp.DeleteNoteRange",_cmdArgs:null,_note:null,initialize:function(){var e;if(this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this),!a.isCollabCommand(this._cmdArgs)){if(!(e=this._cmdArgs.range))return this.isReadyToApply=!1,void r.error("note range should NOT be null",this.name);if(e.isCollapsed()&&!this._cmdArgs.isTableDelete&&!this._cmdArgs.isCodeDelete)return this.isReadyToApply=!1,r.error("should NOT trigger the cmd when NoteRange is collapsed",e),!1}},isSingleBlockAffected:function(){var e,n,o=this._args.range,i=t.__super__.isSingleBlockAffected.apply(this),r=0;return i&&o&&o.isCollapsed()&&(e=(n=o.getStartBlockRange()).block,r=n.start,this._note.getNextBlock(e)&&r===e.getEndOffset()&&(i=!1)),i}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(0),s=n(3),l=n(75),c=n(9),u=n(23),d=n(22),p=n(44),h=n(134),f=n(173),g=n(110),y=n(48),m=n(41),v=n(206),b=n(4);return t=o.extend({name:"comp.DragBlocks",_note:null,_cmdArgs:null,_dropBlockRange:null,_insertedBlocks:null,_newEndBlankParaId:null,_insertedBlocksJSON:null,initialize:function(){var e,n=this;if(n._note=n.options.note,n._cmdArgs=n.options.args,t.__super__.initialize.apply(n),!b.isCollabCommand(n._cmdArgs)){if(!(e=n._cmdArgs.range))return r.error(n.name+":note range should NOT be null"),void(n.isReadyToApply=!1);if(n._dropBlockRange=n._cmdArgs.dropRange,n._insertedBlocks=[],n._insertedBlocksJSON=[],a.each(n._cmdArgs.blocks,function(e){n._insertedBlocks.push(e),n._insertedBlocksJSON.push(e.toCollabJSON())}),n._newEndBlankParaId=b.newGUID(),!(n._dropBlockRange&&n._dropBlockRange.block&&s.isTextBlock(n._dropBlockRange.block)&&n._dropBlockRange.isCollapsed()))return n.isReadyToApply=!1,void r.error("drag destination should be a single pos in text block",n._dropBlockRange);if(n._isDropRangeInStartNoteRange(n._dropBlockRange))return n.isReadyToApply=!1,void r.error("dropBlockRange should not be in the startNoteRange",e,n._dropBlockRange)}},apply:function(){var e;return e=m.createRangeByBlock({block:this._dropBlockRange.block,start:this._dropBlockRange.start,end:this._dropBlockRange.end}),this._dropBlockRange.hasOwnProperty("startLineCharIndex")&&(e=this._dropBlockRange.clone()),e=this._handleStartNoteRangeData(e),this._insertDraggedData(e),!0},_handleStartNoteRangeData:function(e){var t,n,o,i,r,l,c,d=this._cmdArgs.range,p=[];if(n=(t=d.getStartBlockRange()).block,i=(o=d.getEndBlockRange()).block,c=this._isFullSelectionInTextBlock(t),d.isCollapsed()||t.selectWholeBlock||u.deleteSelectedContent(this,this._note,d),d.isInMultiBlock())s.isTextBlock(n)&&!n.isEmpty()||(p.push(n),n=null),s.isTextBlock(i)&&!i.isEmpty()||(p.push(i),i=null),a.isEmpty(p)&&(e.block.getId()===i.getId()&&(e=this._rebuildDropRangeWhenNoteRangeMerge(t,o,e)),s.isCode(n)||s.isCode(i)||(this.executeAtomicCommand(new h({block:n,start:n.getLength(),text:i.getText()})),p.push(i))),p.length&&this.executeAtomicCommand(new y({note:this._note,blocks:p}));else if(s.isTextBlock(n,t))c&&(r=this._note.getPreBlock(n),l=this._note.getNextBlock(n),s.isImage(r)||s.isImage(l)||s.isAttachment(r)||s.isAttachment(l)||s.isTable(r)||s.isTable(l)||(this.executeAtomicCommand(new y({note:this._note,blocks:[n]})),n=null));else{if(s.isCode(n)&&u.replaceBlockWithParagraph(this,this._note,n,""),s.isCode(e.block))return e;u.replaceBlockWithParagraph(this,this._note,n,""),n=null}return e},_insertDraggedData:function(e){var t,n,o,i,r,l,c=this._cmdArgs.range,f=this._insertedBlocks[0],v=a.last(this._insertedBlocks),b=e.block;(t=c.getStartBlockRange()).block.getId(),(n=c.getEndBlockRange()).block.getId(),this._tuneDropBlockRange(e,t,n),s.isCode(e.block)?this._handleInCode(e):(s.isTextBlock(f,t)&&!s.isHeading(f)?(this._insertedBlocks.shift(),this.executeAtomicCommand(new h({block:e.block,start:e.start,text:f.getText()})),l=r=m.createRangeByBlock({block:e.block,start:e.start,end:e.start+f.getLength()}),e.start+=f.getLength(),e.end=e.start):l=r=m.createRangeByBlock({block:this._insertedBlocks[0]}),a.isEmpty(this._insertedBlocks)||(o=e.block.sliceText(e.start,e.block.getLength()),c.isInMultiBlock()&&(l=s.isTextBlock(v)?m.createRangeByBlock({block:v,start:0,end:v.getLength()}):m.createRangeByBlock({block:v})),0===e.start?(b=this._note.getPreBlock(e.block),s.isTextBlock(v,n)?(v.append(o),this.executeAtomicCommand(new y({note:this._note,blocks:[e.block]}))):0===e.block.getLength()&&this.executeAtomicCommand(new y({note:this._note,blocks:[e.block]}))):e.start<e.block.getLength()&&(this.executeAtomicCommand(new g({block:e.block,start:e.start,end:e.block.getLength()})),s.isTextBlock(v,n)?(v.append(o),s.isCode(v)&&(this._insertedBlocks.pop(),v=u.createNewParagraph(e.block,null,v.getText()),this._insertedBlocks.push(v))):(i=s.isListItem(e.block)?u.createNewListItem(e.block,this._newEndBlankParaId,o):s.isHeading(e.block)?u.createNewHeading(e.block,this._newEndBlankParaId,o,e.block.getLevel()):s.isTodo(e.block)?u.createNewTodo(e.block,{id:this._newEndBlankParaId,text:o,checked:e.block.getChecked()}):s.isQuote(e.block)?u.createNewQuote(e.block,{id:this._newEndBlankParaId,text:o}):s.isCode(e.block)?u.createNewCode(e.block,{id:this._newEndBlankParaId,text:e.block.getText()}):u.createNewParagraph(e.block,this._newEndBlankParaId,o),this._insertedBlocks.push(i),c.isInMultiBlock()&&(l=m.createRangeByBlock({block:i,start:0,end:0})))),this.executeAtomicCommand(new p({note:this._note,newBlks:this._insertedBlocks,preBlk:b}))),this.setEndingRange(d.create({startRange:r,endRange:l})))},_isDropRangeInStartNoteRange:function(e){var t,n=this._cmdArgs.range,o=n.getStartBlockRange(),i=n.getEndBlockRange(),r=e,s=r.block.getId(),l=!1;return s===o.block.getId()&&r.start>=o.start&&r.start<=o.end&&(l=!0),!l&&n.isInMultiBlock()&&(s===i.block.getId()&&r.start>=i.start&&r.start<=i.end?l=!0:(t=this._note.getInterBlocks(o.block,i.block),a.some(t,function(e){return s===e.getId()&&(l=!0),l}))),l},_isFullSelectionInTextBlock:function(e){var t=!1,n=0;return s.isTextBlock(e.block)&&(n=e.block.getLength()),n>0&&0===e.start&&e.end===n&&(t=!0),t},_handleInCode:function(e){var t,n=e,o=[];a.each(this._insertedBlocks,function(e){s.isTextBlock(e)&&o.push(e.getText().toString())}),o.length&&(this.executeAtomicCommand(new f({block:n.block,startBlockRange:n,text:new c({text:o.join(l.LINE_BREAK)})})),(t=o.reduce(function(e,t){var n=t.split(l.LINE_BREAK);return t.length>0&&t[t.length-1]===l.LINE_BREAK&&n.pop(),e.concat(n)},[])).length>1?u.expandCodeRange(this,n,t[t.length-1].length,t.length-1):u.expandCodeRange(this,n,t[0].length))},_rebuildDropRangeWhenNoteRangeMerge:function(e,t,n){var o;return o=n.start+e.start-t.end,m.createRangeByBlock({block:e.block,start:o,end:o})},_tuneDropBlockRange:function(e,t,n){var o=t.block.getId(),i=n.block.getId();e.block.getId()===o&&e.start>t.end&&(e.start-=t.end-t.start,e.end-=e.start),o!==i&&e.block.getId()===i&&e.start>n.end&&(e.start-=n.end-n.start,e.end-=e.start)},fromCollabJSON:function(){var e=this,n=e.options.args,o=n.collabProperties.cmdJSON,i=n.collabProperties.coreEditor;t.__super__.fromCollabJSON.apply(e),o&&(e._newEndBlankParaId=o.newEndBlkId,e._dropBlockRange=i.buildBlockRangeFromJSON(o.dropRange),e._insertedBlocks=[],a.each(o.insertedBlocks,function(t){e._insertedBlocks.push(v.buildBlockFromJSON(t,i))}))},isSingleBlockAffected:function(){var e=this._cmdArgs.range,t=e.getStartBlockRange();return!(!e.isInSingleBlock()||this._dropBlockRange.block.getId()!==t.block.getId())},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e&&(e.newEndBlkId=this._newEndBlankParaId,e.dropRange=this._dropBlockRange.toCollabJSON(),e.insertedBlocks=this._insertedBlocksJSON),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(23),a=n(7),s=n(0),l=n(1),c=n(4);return t=o.extend({name:"comp.FormatPainter",_cmdArgs:null,_note:null,_inlineStyles:null,_blockStyles:null,initialize:function(){var e;if(this._note=this.options.note,this._cmdArgs=this.options.args||{},e=this._cmdArgs.range,t.__super__.initialize.apply(this,arguments),!c.isCollabCommand(this._cmdArgs)){if(!e)return l.error(this.name+":note range should NOT be null"),void(this.isReadyToApply=!1);this._inlineStyles=this._cmdArgs.data.inlineStyles,this._blockStyles=this._cmdArgs.data.blockStyles}},apply:function(){var e=this._cmdArgs.range,t={},n={};return!!e.isCollapsed()||(s.each(this._inlineStyles,function(e,n){"href"!==n&&e!==a.INTERM&&null!=e&&(t[n]=e)}),s.each(this._blockStyles,function(e,t){e!==a.INTERM&&null!=e&&(n[t]=e)}),r.resetAllStyles(this,this._note,e),r.setStylesOnNoteRange(this,this._note,e,n,t),this.setEndingRange(e),!0)},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;e&&(this._inlineStyles=e.inlineStyles,this._blockStyles=e.blockStyles),t.__super__.fromCollabJSON.apply(this)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this)).inlineStyles=this._inlineStyles,e.blockStyles=this._blockStyles,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(3),a=n(23),s=n(1),l=n(208),c=n(4);return t=o.extend({name:"comp.IndentOutdent",_cmdArgs:null,_note:null,_indentStep:null,initialize:function(){var e,n;if(this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),!c.isCollabCommand(this._cmdArgs)){if(e=this._cmdArgs.range,this._indentStep=this._cmdArgs.indentStep,!e||!e.canDrawedByNative())return s.error(this.name+":note range should NOT be null or cannot be Drawed by native"),void(this.isReadyToApply=!1);if(n=e.getStartBlockRange().block,e.isInSingleBlock()&&!r.isTextBlock(n))return void(this.isReadyToApply=!1)}},apply:function(){var e,t,n,o=this._cmdArgs.range;return e=o.getStartBlockRange().block,t=o.getEndBlockRange().block,o.isInMultiBlock()?(n=this._note.getInterBlocks(e,t,!0),a.isInSameList(n)?this._isFirstListItem(n[0])?a.updateBlocksIndentLevel(this,n[0].getOwnerList().getItems(),this._indentStep):this.executeAtomicCommand(new l({listItems:n,deltaLevel:this._indentStep})):a.updateBlocksIndentLevel(this,n,this._indentStep),this.setEndingRange(o),!0):(r.isListItem(e)?this._isFirstListItem(e)?a.updateBlocksIndentLevel(this,e.getOwnerList().getItems(),this._indentStep):this.executeAtomicCommand(new l({listItems:[e],deltaLevel:this._indentStep})):a.updateBlocksIndentLevel(this,[e],this._indentStep),this.setEndingRange(o),!0)},_isFirstListItem:function(e){return 1===e.getLevel()&&1===e.getIndex()},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;e&&(this._indentStep=e.indentStep),t.__super__.fromCollabJSON.apply(this)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.indentStep=this._indentStep),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(174),i=n(5),r=n(3),a=n(101),s=n(70),l=n(44),c=n(150),u=n(4),d=n(23);return t=o.extend({name:"comp.InsertAttachment",_cmdArgs:null,_note:null,_attachBlkId:null,_attachSrc:null,_attachRes:null,_attachFileName:null,_attchFileLen:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),u.isCollabCommand(this._cmdArgs)||(this._attachBlkId=u.newGUID(),this._attachSrc=this._cmdArgs.src,this._attachRes=this._cmdArgs.resource,this._attachFileName=this._cmdArgs.fileName,this._attchFileLen=this._cmdArgs.fileLength)},insertResource:function(e,t,n){var o,i=this._cmdArgs.range,s=[];return r.isTable(e)&&i.isSingleTableSelected()?this._insertAttachmentInTable(e):(o=new a({source:this._attachSrc,resource:this._attachRes,fileName:this._attachFileName,fileLength:this._attchFileLen}),d.setResourceBlockStyleByPreBlock(o,e),t&&s.push(t),s.push(o),n&&s.push(n),o.setId(this._attachBlkId),this.executeAtomicCommand(new l({note:this._note,newBlks:s,preBlk:e})),o)},_insertAttachmentInTable:function(e){var t,n=this._cmdArgs.range.getStartBlockRange().getAsRectRange();if(n)return t=n.getFirstCellRect(),this.executeAtomicCommand(new c({table:e,cellRect:t,content:new s({source:this._attachSrc,resource:this._attachRes,fileName:this._attachFileName,fileLength:this._attchFileLen})})),e},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._attachBlkId=e.newBlkId,this._attachSrc=e.src,this._attachRes=e.attachRes,this._attachFileName=e.fileName,this._attchFileLen=e.fileLen)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this._attachBlkId,e.src=this._attachSrc,e.attachRes=this._attachRes,e.fileName=this._attachFileName,e.fileLen=this._attchFileLen),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(0),s=n(3),l=n(23),c=n(22),u=n(44),d=n(134),p=n(173),h=n(48),f=n(110),g=n(303),y=n(41),m=n(206),v=n(9),b=n(75),_=n(4);return t=o.extend({name:"comp.InsertBlocks",_note:null,_cmdArgs:null,_insertedBlocks:null,_newEndBlankParaId:null,_insertedBlocksJSON:null,initialize:function(){var e=this;if(e._note=e.options.note,e._cmdArgs=e.options.args,t.__super__.initialize.apply(e),!_.isCollabCommand(e._cmdArgs)){if(!e._cmdArgs.range)return r.error(e.name+":note range should NOT be null"),void(e.isReadyToApply=!1);e._insertedBlocks=[],e._insertedBlocksJSON=[],a.each(e._cmdArgs.blocks,function(t){e._insertedBlocks.push(t),e._insertedBlocksJSON.push(t.toCollabJSON())}),e._newEndBlankParaId=_.newGUID()}},apply:function(){var e,t,n,o=this,i=o._note,r=o._cmdArgs.range,c=r.getStartBlockRange(),u=c.block,d=u.getBlockStyles(),p=a.last(o._insertedBlocks);return o._getCollabRequiredData(o._insertedBlocks),o._insertedBlocks=o._insertedBlocks.map(function(e){return d&&d["back-color"]&&e.setBlockStyle("back-color",d["back-color"]),e}),s.isTextBlock(p)?t=y.createRangeByBlock({block:p,start:p.getLength(),end:p.getLength()}):(n=i.getNextBlock(o.startingRange.getEndBlockRange().block),s.isTextBlock(n)&&(t=y.createRangeByBlock({block:n,start:n.getLength(),end:n.getLength()}))),r.isCollapsed()||s.isCode(u)||l.deleteSelectedContent(o,o._note,r),s.isCode(u)&&!c.selectWholeBlock?(o._handleInCode(),!0):(o._insertedBlocks=o._insertedBlocks.reduce(function(e,t,n){var i;return 0!==n&&n!==o._insertedBlocks.length-1||t.isSelectedBlock?e.push(t):(i=l.convertCodeToPara(t),Array.isArray(i)?i.map(function(t){e.push(t)}):e.push(i)),e},[]),e=r.isInMultiBlock()?o._handleMultiBlockSelection(t):o._handleSingleBlockSelection(t),o.setEndingRange(e),!0)},_handleMultiBlockSelection:function(e){var t=this._cmdArgs.range,n=t.getStartBlockRange(),o=n.block,i=t.getEndBlockRange(),r=i.block,a=this._insertedBlocks[0];return 1===this._insertedBlocks.length&&s.isTextBlock(a)&&s.isTextBlock(o)&&s.isTextBlock(r)?(this._insertedBlocks.shift(),e=y.createRangeByBlock({block:o,start:o.getLength()+a.getLength(),end:o.getLength()+a.getLength()}),a.append(r.getText()),this.executeAtomicCommand(new h({note:this._note,blocks:[r]})),this.executeAtomicCommand(new d({block:o,start:o.getLength(),text:a.getText()}))):e=this._insertBlocksBetweenStartEndBlock(n,i,e),c.create({startRange:e,endRange:e})},_getCollabRequiredData:function(e){var t=[];e&&e.length>0&&a.each(e,function(e){t.push(e.getId())}),t.push(this._newEndBlankParaId),this.pushAffectedBlockIds(t)},_handleSingleBlockSelection:function(e){var t,n=this,o=n._cmdArgs.range.getStartBlockRange(),i=o.block;return t=s.isTextBlock(i,o)?n._handleSingleTextStartBlock(i,e):n._handleSingleNonTextStartBlock(i,e),a.isEmpty(n._insertedBlocks)||(t.needToRebuildLIs&&n._rebuildListItems(n._insertedBlocks,t.refBlockForInsert,t.deltaLevel),s.isQuote(t.refBlockForInsert)&&(n._insertedBlocks=n._insertedBlocks.map(function(e){return s.isParagraph(e)?new l.createNewQuote(e,{id:e.getId(),text:e.getText(),checked:n._checked}):e})),n.executeAtomicCommand(new u({note:n._note,newBlks:n._insertedBlocks,preBlk:t.refBlockForInsert}))),c.create({startRange:t.newEndBlockRange,endRange:t.newEndBlockRange})},_handleSingleNonTextStartBlock:function(e,t){var n=this._insertedBlocks[0],o=a.last(this._insertedBlocks),i=this._note.getPreBlock(e),r=this._note.getNextBlock(e),c={};return c.refBlockForInsert=i,c.newEndBlockRange=t,c.needToRebuildLIs=!1,this.executeAtomicCommand(new h({note:this._note,blocks:[e]})),s.isTextBlock(n)||s.isTextBlock(i)||this._insertedBlocks.unshift(l.createNewParagraph(e,e.getId(),"")),s.isTextBlock(o)||s.isTextBlock(r)||(this._insertedBlocks.push(l.createNewParagraph(e,this._newEndBlankParaId,"")),c.newEndBlockRange=y.createRangeByBlock({block:a.last(this._insertedBlocks),start:0,end:0})),c},_handleSingleTextStartBlock:function(e,t){var n,o=this._cmdArgs.range.getStartBlockRange(),i=this._note.getPreBlock(e),r=this._note.getNextBlock(e),l=this._insertedBlocks[0],c=a.last(this._insertedBlocks),u="",p=1===this._insertedBlocks.length,m={};return m.refBlockForInsert=e,m.newEndBlockRange=t,m.needToRebuildLIs=!1,m.deltaLevel=0,o.start<e.getLength()&&(u=e.sliceText(o.start,e.getLength())),p&&s.isTextBlock(l)&&!s.isCode(l)||(s.isTextBlock(c)&&!s.isCode(l)?(n=u instanceof v?u:v.createBlank(),c.append(n),this.executeAtomicCommand(new f({block:e,start:o.start,end:e.getLength()}))):""===u&&s.isTextBlock(r)?m.newEndBlockRange=y.createRangeByBlock({block:r,start:0,end:0}):(this._insertedBlocks.push(this._buildNewBlockFromStartBlock(e,this._newEndBlankParaId,u)),m.newEndBlockRange=y.createRangeByBlock({block:a.last(this._insertedBlocks),start:0,end:0}),this.executeAtomicCommand(new f({block:e,start:o.start,end:e.getLength()})))),s.isTextBlock(l)&&!s.isCode(l)?e.getLength()>0||s.isListItem(e)||!s.isListItem(l)&&!s.isHeading(l)&&!s.isCatalogue(l)&&!s.isTodo(l)&&!s.isQuote(l)?(this._insertedBlocks.shift(),p&&(m.newEndBlockRange=y.createRangeByBlock({block:e,start:o.start+l.getLength(),end:o.start+l.getLength()})),this.executeAtomicCommand(new g({blocks:[e],styleNameValues:l.getBlockStyles()})),this.executeAtomicCommand(new d({block:e,start:o.start,text:l.getText()})),s.isListItem(e)&&s.isListItem(this._insertedBlocks[0])&&(m.needToRebuildLIs=!0,s.isListItem(l)&&(m.deltaLevel=this._insertedBlocks[0].getLevel()-l.getLevel()))):(m.refBlockForInsert=i,this.executeAtomicCommand(new h({note:this._note,blocks:[e]})),s.isListItem(i)&&s.isListItem(l)&&(m.needToRebuildLIs=!0,m.deltaLevel=1-i.getLevel())):0===e.getLength()&&s.isTextBlock(i)&&(m.refBlockForInsert=i,this.executeAtomicCommand(new h({note:this._note,blocks:[e]}))),m},_handleInCode:function(){var e,t=this._cmdArgs.range,n=t.getStartBlockRange(),o=[];a.each(this._insertedBlocks,function(e){s.isTextBlock(e)&&o.push(e.getText().toString())}),t.isCollapsed()||l.deleteSelectedContent(this,this._note,t),o.length&&(this.executeAtomicCommand(new p({block:n.block,startBlockRange:n,text:new v({text:o.join(b.LINE_BREAK)})})),(e=o.reduce(function(e,t){var n=t.split(b.LINE_BREAK);return t.length>0&&t[t.length-1]===b.LINE_BREAK&&n.pop(),e.concat(n)},[])).length>1?l.setCodeBlockAsEndingRange(this,n,e[e.length-1].length,e.length-1):l.setCodeBlockAsEndingRange(this,n,e[0].length))},_buildNewBlockFromStartBlock:function(e,t,n){return s.isHeading(e)?l.createNewHeading(e,t,n,e.getLevel()):s.isCatalogue(e)?l.createNewCatalogue(e,{paraId:t,text:n,href:e.getHref()}):s.isListItem(e)?l.createNewListItem(e,t,n):s.isTodo(e)?l.createNewTodo(e,{id:t,text:n,checked:e.getChecked()}):s.isQuote(e)?l.createNewQuote(e,{id:t,text:n}):l.createNewParagraph(e,t,n)},_insertBlocksBetweenStartEndBlock:function(e,t,n){var o=e.block,i=t.block,r=this._note.getPreBlock(o),c=this._note.getNextBlock(i),u=this._insertedBlocks[0],p=a.last(this._insertedBlocks),f=o,g=[],m=0;return s.isTextBlock(i)?s.isTextBlock(p)?(g.push(i),p.append(i.getText())):s.isTextBlock(p)||(n=y.createRangeByBlock({block:i,start:0,end:0})):(g.push(i),s.isTextBlock(c)||s.isTextBlock(p)?s.isTextBlock(p)||(n=y.createRangeByBlock({block:c,start:0,end:0})):(this._insertedBlocks.push(l.createNewParagraph(i,i.getId(),"")),n=y.createRangeByBlock({block:a.last(this._insertedBlocks),start:0,end:0}))),s.isTextBlock(o)?s.isTextBlock(u)?o.getLength()>0||s.isListItem(o)||!s.isListItem(u)?(this._insertedBlocks.shift(),this.executeAtomicCommand(new d({block:o,start:o.getLength(),text:u.getText()})),s.isListItem(u)&&s.isListItem(this._insertedBlocks[0])&&(m=this._insertedBlocks[0].getLevel()-u.getLevel())):(f=r,this.executeAtomicCommand(new h({note:this._note,blocks:[o]}))):0===o.getLength()&&s.isTextBlock(r)&&(f=r,this.executeAtomicCommand(new h({note:this._note,blocks:[o]}))):(g.push(o),f=r,s.isTextBlock(r)||s.isTextBlock(u)||this._insertedBlocks.unshift(l.createNewParagraph(o,o.getId(),""))),a.isEmpty(g)||this.executeAtomicCommand(new h({note:this._note,blocks:g})),this._insertedRemainedBlocks(f,m),n},_insertedRemainedBlocks:function(e,t){a.isEmpty(this._insertedBlocks)||(s.isListItem(this._insertedBlocks[0])&&s.isListItem(e)&&this._rebuildListItems(this._insertedBlocks,e,t),this.executeAtomicCommand(new u({note:this._note,newBlks:this._insertedBlocks,preBlk:e})))},_rebuildListItems:function(e,t,n){var o,i,r,l=e[0];isNaN(n)&&(n=0),i=l.listId,o=t.getOwnerList(),r=t.getLevel()-l.getLevel()+n,a.chain(e).groupBy(function(e){if(s.isListItem(e))return e.listId}).each(function(e,t){e.length>0&&t===i&&a.each(e,function(e){0!==r&&e.setLevel(e.getLevel()+r),e.setOwnerList(o)})})},fromCollabJSON:function(){var e=this,n=e.options.args,o=n.collabProperties.cmdJSON,i=n.collabProperties.coreEditor;t.__super__.fromCollabJSON.apply(e),o&&(e._newEndBlankParaId=o.newEndBlkId,e._insertedBlocks=[],a.each(o.insertedBlocks,function(t){e._insertedBlocks.push(m.buildBlockFromJSON(t,i))}))},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e&&(e.newEndBlkId=this._newEndBlankParaId,e.insertedBlocks=this._insertedBlocksJSON),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(174),r=n(5),a=n(73),s=n(74),l=n(7),c=n(23),u=n(44),d=n(4);return t=i.extend({name:"comp.InsertCatalogue",_cmdArgs:null,_note:null,_blkId:null,_ownerId:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),this._initBlocks()},_initBlocks:function(){var e,t,n=this,i=n._note.blocks,r=[],u=[];n._ownerId=n._ownerId||d.newGUID(),t=new s({id:n._ownerId}),o.each(i,function(e){c.isForCatalogueBlock(e)&&r.push(e)}),n._catalogueIds=n._catalogueIds||[],o.each(r,function(o,i){e=new a({indent:o.getLevel()-1,text:o.getText().toString().trim(),href:o.getId(),ownerList:t}),u.push(e),n._catalogueIds[i]?e.setId(n._catalogueIds[i]):n._catalogueIds[i]=e.getId()}),0===r.length&&(e=new a({indent:0,text:l.INSERT_BLANK_CATALOGUE_TEXT,ownerList:t}),u.push(e),n._catalogueIds[0]?e.setId(n._catalogueIds[0]):n._catalogueIds[0]=e.getId()),n._newCatalogues=u},insertResource:function(e,t,n){var i=this._newCatalogues,r=i[i.length-1];return o.each(i,function(t){c.setResourceBlockStyleByPreBlock(t,e)}),i.length<1?e:(t&&i.unshift(t),n&&i.push(n),this.executeAtomicCommand(new u({note:this._note,newBlks:i,preBlk:e})),r)},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._ownerId=e.listId,this._catalogueIds=e.blockIds)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.listId=this._ownerId,e.blockIds=this._catalogueIds),e}}),r.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(23),r=n(5),a=n(22),s=n(41),l=n(4),c=n(3);return t=o.extend({name:"comp.InsertHeading",_cmdArgs:null,_note:null,_blkId:null,_level:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},this._level=this._cmdArgs.level,t.__super__.initialize.apply(this,arguments),l.isCollabCommand(this._cmdArgs)||(this._blkId=l.newGUID())},apply:function(){var e,t,n,o=this,r=o._cmdArgs.range,l=r.getStartBlockRange(),u=r.getEndBlockRange(),d=l.block,p=u.block;if(r.isInMultiBlock())(n=o._note.getInterBlocks(d,p,!0)).forEach(function(i,r){0!==r?r!==n.length-1?o._helpSetBlock(i):t=o._helpSetBlock(i):e=o._helpSetBlock(i)}),o.setEndingRange(new a({startRange:s.createRangeByBlock({block:e,start:l.start,end:l.end}),endRange:s.createRangeByBlock({block:t,start:u.start,end:u.end})}));else{if(!c.isTextBlock(p))return!1;t=o._helpSetBlock(p),i.setTextBlockAsEndingRange(o,t,u.start,u.end)}},_helpSetBlock:function(e){return c.isTextBlock(e)?"default"===this._level||c.isHeading(e)&&e.getLevel()===this._level?i.replaceBlockWithParagraph(this,this._note,e,e.getText(),"",!0):i.replaceBlockWithHeading(this,this._note,e,e.getText(),this._level):e},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._blkId=e.blockId,this._level=e.listType)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.blockId=this._blkId,e.listType=this._level),e}}),r.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(174),i=n(5),r=n(100),a=n(44),s=n(4);return t=o.extend({name:"comp.InsertHorizontalRule",_cmdArgs:null,_note:null,_hLineBlkId:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),s.isCollabCommand(this._cmdArgs)||(this._hLineBlkId=s.newGUID())},insertResource:function(e,t,n){var o,i,s=[];return(o=new r).setId(this._hLineBlkId),e&&((i=e.getBlockStyles())["back-color"]&&o.setBlockStyle("back-color",i["back-color"]),i.padding&&o.setBlockStyle("padding",i.padding)),t&&s.push(t),s.push(o),n&&s.push(n),this.executeAtomicCommand(new a({note:this._note,newBlks:s,preBlk:e})),o},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._hLineBlkId=e.newBlkId)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this._hLineBlkId),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(174),i=n(5),r=n(3),a=n(61),s=n(53),l=n(44),c=n(150),u=n(4),d=n(23);return t=o.extend({name:"comp.InsertImage",_cmdArgs:null,_note:null,_imgBlkId:null,_imgSrc:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),u.isCollabCommand(this._cmdArgs)||(this._imgBlkId=u.newGUID(),this._imgSrc=this._cmdArgs.src)},insertResource:function(e,t,n){var o,i,a=this._cmdArgs.range,c=[];return r.isTable(e)&&a.isSingleTableSelected()?this._insertImageInTable(e):(i=new s({source:this._imgSrc}),e&&((o=e.getBlockStyles())["back-color"]&&i.setBlockStyle("back-color",o["back-color"]),o.padding&&i.setBlockStyle("padding",o.padding)),d.setResourceBlockStyleByPreBlock(i,e),t&&c.push(t),c.push(i),n&&c.push(n),i.setId(this._imgBlkId),this.executeAtomicCommand(new l({note:this._note,newBlks:c,preBlk:e})),i)},_insertImageInTable:function(e){var t,n=this._cmdArgs.range.getStartBlockRange().getAsRectRange();if(n)return t=n.getFirstCellRect(),this.executeAtomicCommand(new c({table:e,cellRect:t,content:new a({source:this._imgSrc})})),e},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._imgBlkId=e.newBlkId,this._imgSrc=e.src)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this._imgBlkId,e.src=this._imgSrc),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(9),a=n(23),s=n(1),l=n(0),c=n(3),u=n(172),d=n(134),p=n(302),h=n(838),f=n(150),g=n(4);return t=o.extend({name:"comp.InsertLink",_cmdArgs:null,_note:null,_linkSrc:null,initialize:function(){var e,n;if(this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this,arguments),!g.isCollabCommand(this._cmdArgs)){if(n=(e=this._cmdArgs.range).getStartBlockRange().block,!this._cmdArgs.src)return void(this.isReadyToApply=!1);if(!c.isTable(n)){if(!e||!e.canDrawedByNative())return s.error(this.name+":note range should NOT be null or cannot be Drawed by native"),void(this.isReadyToApply=!1);if(e.isInMultiBlock()||!c.isTextBlock(n))return this.isReadyToApply=!1,void s.error("Cannot be executed in multi-selected blocks or non-text blocks:",this.name)}this._linkSrc=u.completeUrl(this._cmdArgs.src||""),this._linkStyles=this._cmdArgs.styles||{}}},apply:function(){var e,t,n,o,i,u=this._cmdArgs.range,f=l.extend(this._linkStyles,{color:"#003884",underline:!0,href:this._linkSrc});return(e=u.getStartBlockRange())?(t=e.block,c.isTable(t)?(this._setTableBlock(f,u),void this.setEndingRange(u)):c.isCatalogue(t)?(0===t.getLength()?(n=new r({text:this._linkSrc}),o=n.getLength(),this.executeAtomicCommand(new d({block:t,start:e.start,text:n})),this.executeAtomicCommand(new h({block:t,href:this._linkSrc})),a.setTextBlockAsEndingRange(this,t,o,o)):(this.executeAtomicCommand(new h({block:t,href:this._linkSrc})),this.setEndingRange(u)),!0):(e.isCollapsed()?(n=new r({text:this._linkSrc}),o=n.getLength(),n.setStyle(0,o,"href",this._linkSrc),l.each(f,function(e,t){n.setStyle(0,o,t,e)}),i=e.start+o,this.executeAtomicCommand(new d({block:t,start:e.start,text:n})),a.setTextBlockAsEndingRange(this,t,i,i)):(f.href=this._linkSrc,this.executeAtomicCommand(new p({blocks:[t],styleNameValues:f,start:e.start,end:e.end})),this.setEndingRange(u)),!0)):(s.error(this.name+":startBlockRange should not be null"),!1)},_setTableBlock:function(e,t){var n=this,o=n._linkSrc,i=t.getStartBlockRange(),a=i.block,s=i.getAsRectRange();s&&s.forEach(function(t,i){var s,l,c,u,d;(c=a.getCell(t,i)).isMergedCell()||(s=c.getContent(t,i),c.isTextNoEmptyCell()&&(d=(l=s.toRichText()).getLength()),d=d||o.length,(u=l||new r({text:o})).setStyles(0,d,e),n.executeAtomicCommand(new f({table:a,content:u,cellRect:{row:t,col:i}})))})},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._linkSrc=e.src,this._linkStyles=e.inlineStyles)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e&&(e.src=this._linkSrc,e.inlineStyles=this._linkStyles),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(4);return t=o.extend({name:"atom.SetCatalogueHref",_href:null,_block:null,_oldHref:null,initialize:function(){var e=this.options,n=e.args;r.isCollabCommand(n)||(this._block=e.block||n.block,this._href=e.href||n.href),t.__super__.initialize.apply(this,arguments)},apply:function(){var e=this._href,t=this._block;t.setHref&&(this._oldHref=t.getHref(),t.setHref(e))},doUnapply:function(){this._block.setHref(this._oldHref)},getEndingRange:function(){return this.options.args.range},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._block=e.getBlockById(o.blockId),this._href=o.styleNameValues,this._oldHref=o.oldStyleNameValues)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.blockId=this._block.getId(),e.styleNameValues=this._href,e.oldStyleNameValues=this._oldHref),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(140),a=n(16),s=n(9),l=n(44),c=n(48),u=n(4),d=n(23),p=n(3);return t=o.extend({name:"comp.InsertCode",_cmdArgs:null,_note:null,newBlkId:null,multiResult:null,splitCodeResult:null,convertToCodeResult:null,_checked:!1,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),this.options.args.range&&this.calculateNewBlocks()},apply:function(){var e,t,n,o=this._cmdArgs.range,i=o.getStartBlockRange(),a=o.getEndBlockRange(),s=i.block,u=a.block,h=this._note.getPreBlock(s);if(this.multiResult||this.splitCodeResult||this.convertToCodeResult||this.calculateNewBlocks(),o.isInMultiBlock())return e=this.multiResult.selectedBlocks,n=this.multiResult.willBeInsertedBlocks,this.executeAtomicCommand(new c({note:this._note,blocks:e})),this.executeAtomicCommand(new l({note:this._note,newBlks:n,preBlk:h})),p.isCode(n[0])?(t=r.createBeginRange(n[0]),d.setCodeBlockAsEndingRange(this,t,i.start,0)):d.setTextBlockAsEndingRange(this,n[0],0,0),!0;this.handleInSingleBlock(u)},calculateNewBlocks:function(){var e,t=this.options.args.range;t&&(e=t.getEndBlockRange().block),t&&t.isInMultiBlock()?this.multiResult=this.handleInMultiBlock():p.isCode(e)?this.splitCodeResult=this.splitCodeBlock(e):this.convertToCodeResult=this.convertToCode(e)},handleInSingleBlock:function(e){var t,n,o=this._note,i=this._note.getPreBlock(e),a=this._cmdArgs.range.getStartBlockRange(),s=0;p.isCode(e)?(this.executeAtomicCommand(new c({note:this._note,blocks:[e]})),t=this.splitCodeResult,this.executeAtomicCommand(new l({note:o,newBlks:t,preBlk:i})),d.setTextBlockAsEndingRange(this,t[a.startLineIndex-1],a.startLineCharIndex,a.startLineCharIndex)):(this.executeAtomicCommand(new c({note:o,blocks:[e]})),this.executeAtomicCommand(new l({note:o,newBlks:this.convertToCodeResult.newBlocks,preBlk:i})),p.isTextBlock(a.block)&&(s=a.start),n=r.createBeginRange(this.convertToCodeResult.newCode),d.setCodeBlockAsEndingRange(this,n,s,0))},handleInMultiBlock:function(){var e,t,n,o=this,i=o._cmdArgs.range,r=i.getStartBlockRange(),l=i.getEndBlockRange(),c=r.block,u=l.block,h=o._note.getNextBlock(u);if(i.isInMultiBlock())return t=(e=o._note.getInterBlocks(c,u,!0)).map(function(e){return p.isTextBlock(e)?e.getText():e}),n=(n=t.reduce(function(t,n,i){var r,a=0===t.length?null:t[t.length-1];return n instanceof s?a&&p.isCode(a)?a.pushNewLineText(n):((r=d.createNewCode(e[i],{id:e[i].getId(),checked:o._checked})).pushNewLineText(n),t.push(r)):t.push(n),t},[])).reduce(function(e,t,o){var i=o+1<n.length?n[o+1]:h;return p.isCode(t)?(e.push(t),(!i||i&&!p.isTextBlock(i))&&e.push(a.createBlank())):e.push(t),e},[]),o.handleNewBlockIds(n),{selectedBlocks:e,willBeInsertedBlocks:n}},splitCodeBlock:function(e){var t;return t=e.getRichTexts().map(function(t){return d.createNewParagraph(e,null,t)}),this.handleNewBlockIds(t),t},convertToCode:function(e){var t,n=e.getId(),o=this._note.getPreBlock(e),i=this._note.getNextBlock(e),r=[];return t=d.createNewCode(e,{id:n,checked:this._checked}),p.isTextBlock(e)?t.pushNewLineText(e.getText()):t.pushNewLineText(""),r.push(t),!p.isCode(i)&&p.isTextBlock(i)||r.push(a.createBlank()),o&&p.isTextBlock(o)&&!p.isCode(o)||r.unshift(a.createBlank()),this.handleNewBlockIds(r),{newBlocks:r,newCode:t}},handleNewBlockIds:function(e){var t=this;t.newBlkId||(t.newBlkId=[]),t.newBlkId.length?e.forEach(function(e){e.setId(t.newBlkId.shift())}):e.forEach(function(e){var n=u.newGUID();t.newBlkId.push(n),e.setId(n)})},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this.newBlkId=e.newBlkId)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this.newBlkId),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(23),a=n(1),s=n(3),l=n(0),c=n(22),u=n(41),d=n(39),p=n(36),h=n(48),f=n(44),g=n(841),y=n(4);return t=o.extend({name:"comp.InsertList",_cmdArgs:null,_note:null,_listType:null,_listId:null,initialize:function(){var e,n;if(this._note=this.options.note,this._cmdArgs=this.options.args,e=this._cmdArgs.range,t.__super__.initialize.apply(this,arguments),!y.isCollabCommand(this._cmdArgs)){if(!e)return this.isReadyToApply=!1,void a.error(this.name+":note range should NOT be null");if(n=e.getStartBlockRange().block,e.isInSingleBlock()&&!s.isTextBlock(n))return this.isReadyToApply=!1,void a.error("Single Block must be text block:",this.name,e);if(e.isInSingleBlock()&&s.isListItem(n)&&l.some(n.getOwnerList().getItems(),function(e){return e.isLocked()}))return void(this.isReadyToApply=!1);this._listType=this._cmdArgs.type,this._listId=y.newGUID()}},apply:function(){return this._cmdArgs.range.isInSingleBlock()?this._handleSingleBlockSelection():this._handleMultiBlockSelection(),!0},_handleMultiBlockSelection:function(){var e,t,n,o,i,a,g,y,m=this._cmdArgs.range,v=m.getStartBlockRange(),b=v.block,_=this._note.getPreBlock(b),I=m.getEndBlockRange(),k=I.block,w=this._note.getInterBlocks(b,k,!0),C=[],S=!0;for(o=0;o<w.length;++o)if(e=w[o],s.isListItem(e)){if(t=e.getOwnerList(),n&&n.getId()!==t.getId()){S=!1;break}n=t}else if(s.isTextBlock(e)){S=!1;break}S&&n.getType()===this._listType?l.each(w,function(e){"getLevel"in e&&e.getLevel()&&e.setBlockStyle("indent",e.getLevel()-1),s.isTextBlock(e)?C.push(r.createNewParagraph(e,e.getId(),e.getText())):C.push(e)}):(a=s.isListItem(_)&&_.getType()===this._listType?_.getOwnerList():new d({type:this._listType,listId:this._listId}),l.each(w,function(e){e.resetLockState(),s.isTextBlock(e)?s.isListItem(e)?((i=new p({id:e.getId(),level:e.getLevel(),list:a,text:e.getText()})).setBlockStyles(e.getBlockStyles()),C.push(i)):((i=new p({id:e.getId(),level:1,list:a,text:e.getText()})).setBlockStyles(e.getBlockStyles()),g=i.getBlockStyle("indent")||0,y=i.getBlockStyle("text-indent")||0,0!==g&&(i.setLevel(g+i.getLevel()),i.setBlockStyle("indent",0)),0!==y&&(i.setLevel(y+i.getLevel()),i.setBlockStyle("text-indent",0)),C.push(i)):C.push(e)})),l.isEmpty(C)||(this.executeAtomicCommand(new h({note:this._note,blocks:w})),this.executeAtomicCommand(new f({note:this._note,newBlks:C,preBlk:_})),s.isTextBlock(v.block)&&(v=u.createRangeByBlock({block:C[0],start:v.start,end:v.end})),I=C.length>1&&s.isTextBlock(I.block)?u.createRangeByBlock({block:l.last(C),start:I.start,end:I.end}):v,m=c.create({startRange:v,endRange:I})),this.setEndingRange(m)},_handleSingleBlockSelection:function(){var e,t,n,o,i=this._cmdArgs.range,a=i.getStartBlockRange().block;s.isListItem(a)?(n=a.getOwnerList()).getType()!==this._listType?(this.executeAtomicCommand(new g({lists:[n],isToggle:!0})),this.setEndingRange(i)):(o=r.replaceBlockWithParagraph(this,this._note,a,a.getText()),r.setTextBlockAsEndingRange(this,o,o.getLength(),o.getLength())):(e=this._note.getPreBlock(a),t=this._note.getNextBlock(a),e&&s.isListItem(e)&&e.getOwnerList().getType()===this._listType?o=r.replaceBlockWithListItem(this,this._note,e,a,a.getText(),e):t&&s.isListItem(t)&&t.getOwnerList().getType()===this._listType?o=r.replaceBlockWithListItem(this,this._note,t,a,a.getText(),e):(n=new d({type:this._listType,listId:this._listId}),(o=new p({id:a.getId(),level:1,list:n,text:a.getText()})).setBlockStyles(a.getBlockStyles()),this.executeAtomicCommand(new h({note:this._note,blocks:[a]})),this.executeAtomicCommand(new f({note:this._note,newBlks:[o],preBlk:e}))),r.setTextBlockAsEndingRange(this,o,o.getLength(),o.getLength()))},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._listId=e.listId,this._listType=e.listType)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e&&(e.listId=this._listId,e.listType=this._listType),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(39),s=n(3),l=n(4);return t=o.extend({name:"atom.SetListType",_lists:null,_newTypes:null,_oldTypes:null,initialize:function(){var e=this,n=e.options,o=n.args;t.__super__.initialize.apply(e),l.isCollabCommand(o)||(e._lists=n.lists,e._newTypes={},n.newType?r.each(e._lists,function(t,o){e._newTypes[o]=n.newType}):n.isToggle&&r.each(e._lists,function(t,n){e._newTypes[n]=t.isOrdered()?a.UNORDERED:a.ORDERED}))},apply:function(){var e=this;return e._oldTypes={},r.each(e._newTypes,function(t,n){e._oldTypes[n]=e._lists[n].getType(),t!==e._lists[n].getType()&&e._lists[n].setType(t)}),!0},doUnapply:function(){var e=this;return r.each(e._oldTypes,function(t,n){e._lists[n].getType()!==t&&e._lists[n].setType(t)}),!0},fromCollabJSON:function(){var e,n=this.options.args,o=n.collabProperties.cmdJSON;o&&(e=n.collabProperties.coreEditor.getNote(),o.dataBefore&&(this._oldTypes=o.dataBefore),this._newTypes=o.dataAfter,this._lists=this._getListByIds(e,o.listId)),t.__super__.fromCollabJSON.apply(this)},toCollabJSON:function(){var e=[],n=t.__super__.toCollabJSON.apply(this);return this._oldTypes&&(n.dataBefore=this._oldTypes),n.dataAfter=this._newTypes,r.each(this._lists,function(t){e.push(t.getId())}),n.listId=e,n},_getListByIds:function(e,t){var n=[];return r.some(e.getAllBlocks(),function(e){return s.isListItem(e)&&e.getOwnerList()&&r.contains(t,e.getOwnerList().getId())&&n.push(e.getOwnerList()),n.length===t.length}),n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(174),i=n(5),r=n(83),a=n(44),s=n(4),l=n(96),c=n(23);return t=o.extend({name:"comp.InsertTable",_cmdArgs:null,_note:null,_tableBlkId:null,_columnNums:null,_rowNums:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),s.isCollabCommand(this._cmdArgs)||(this._tableBlkId=s.newGUID(),this.skipBlockLocking=!0,this._columnNums=1,this._rowNums=1,this._cmdArgs.cols&&(this._columnNums=this._cmdArgs.cols),this._cmdArgs.rows&&(this._rowNums=this._cmdArgs.rows))},insertResource:function(e,t,n){var o,i=[];return o=r.createBlankTable(this._columnNums,this._rowNums,this._tableBlkId,l.DEFAULT_TABLE_WIDTH),c.setResourceBlockStyleByPreBlock(o,e),t&&i.push(t),i.push(o),n&&i.push(n),this.executeAtomicCommand(new a({note:this._note,newBlks:i,preBlk:e})),o},_initArray:function(e,t){for(var n=[];e--;)n[e]=t;return n},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._tableBlkId=e.newBlkId,this._columnNums=e.colNums,this._rowNums=e.rowNums)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this._tableBlkId,e.colNums=this._columnNums,e.rowNums=this._rowNums),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(41),a=n(22),s=n(44),l=n(48),c=n(4),u=n(23),d=n(3);return t=o.extend({name:"comp.InsertTodo",_cmdArgs:null,_note:null,_todoBlkId:null,_checked:!1,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),c.isCollabCommand(this._cmdArgs)||(this._todoBlkId=c.newGUID(),this._checked=this._cmdArgs.checked)},apply:function(){var e,t,n,o,i=this,s=i._cmdArgs.range,l=s.getStartBlockRange(),c=s.getEndBlockRange(),p=l.block,h=c.block;s.isInMultiBlock()?(o=i._note.getInterBlocks(p,h,!0),n=o.every(function(e){return d.isTodo(e)||!d.isTextBlock(e)}),o.forEach(function(r,a){0!==a?a!==o.length-1?i._helpSetBlock(r,n):t=i._helpSetBlock(r,n):e=i._helpSetBlock(r,n)}),l=r.createRangeByBlock({block:e,start:l.start,end:l.end}),c=r.createRangeByBlock({block:t,start:c.start,end:c.end}),s=a.create({startRange:l,endRange:c}),i.setEndingRange(s)):(t=i._helpSetBlock(h,!0),u.setTextBlockAsEndingRange(i,t,c.start,c.end))},_helpSetBlock:function(e,t){var n,o,i=this._note,r=e.getId();return d.isTodo(e)?n=t?u.replaceBlockWithParagraph(this,this._note,e,e.getText()):e:d.isTextBlock(e)&&(o=i.getPreBlock(e),n=u.createNewTodo(e,{id:r,text:e.getText(),checked:this._checked}),this.executeAtomicCommand(new l({note:i,blocks:[e]})),this.executeAtomicCommand(new s({note:i,newBlks:[n],preBlk:o}))),n},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._todoBlkId=e.newBlkId,this._checked=e.simpleValue1)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this._todoBlkId,e.simpleValue1=this._checked),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(41),a=n(22),s=n(44),l=n(48),c=n(4),u=n(23),d=n(3);return t=o.extend({name:"comp.InsertQuote",_cmdArgs:null,_note:null,_quoteBlkId:null,_checked:!1,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},t.__super__.initialize.apply(this,arguments),c.isCollabCommand(this._cmdArgs)||(this._quoteBlkId=c.newGUID())},apply:function(){var e,t,n,o,i=this,s=i._cmdArgs.range,l=s.getStartBlockRange(),c=s.getEndBlockRange(),p=l.block,h=c.block;s.isInMultiBlock()?(o=i._note.getInterBlocks(p,h,!0),n=o.every(function(e){return d.isQuote(e)||!d.isTextBlock(e)}),o.forEach(function(r,a){0!==a?a!==o.length-1?i._helpSetBlock(r,n):t=i._helpSetBlock(r,n):e=i._helpSetBlock(r,n)}),l=r.createRangeByBlock({block:e,start:l.start,end:l.end}),c=r.createRangeByBlock({block:t,start:c.start,end:c.end}),s=a.create({startRange:l,endRange:c}),i.setEndingRange(s)):(t=i._helpSetBlock(h,!0),u.setTextBlockAsEndingRange(i,t,c.start,c.end))},_helpSetBlock:function(e,t){var n,o,i=this._note,r=e.getId();return d.isQuote(e)?n=t?u.replaceBlockWithParagraph(this,this._note,e,e.getText()):e:d.isTextBlock(e)&&(o=i.getPreBlock(e),n=u.createNewQuote(e,{id:r,text:e.getText(),checked:this._checked}),this.executeAtomicCommand(new l({note:i,blocks:[e]})),this.executeAtomicCommand(new s({note:i,newBlks:[n],preBlk:o}))),n},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._quoteBlkId=e.newBlkId)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.newBlkId=this._quoteBlkId),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(3),s=n(23),l=n(305),c=n(48),u=n(110),d=n(205),p=n(134),h=n(303),f=n(208),g=n(172),y=n(129),m=n(4);return t=o.extend({name:"comp.KeyBackspace",_cmdArgs:null,_note:null,initialize:function(){var e,n;if(this._note=this.options.note,this._cmdArgs=this.options.args,this._inlineStyles=this._cmdArgs.inlineStyles,t.__super__.initialize.apply(this),!m.isCollabCommand(this._cmdArgs)){if(n=(e=this._cmdArgs.range).getStartBlockRange().block,!e)return this.isReadyToApply=!1,void r.error(this.name+":note range should NOT be null");if(e.isInSingleBlock()&&a.isTable(n))return this.isReadyToApply=!1,void r.error("should NOT trigger the cmd when in Table.")}},apply:function(){var e,t,n,o,i,r,l,u,d=this._cmdArgs.range,h=[];if(t=(e=d.getStartBlockRange()).block,i=o=d.getEndBlockRange().block,r=this._note.getPreBlock(t),u=this._cmdArgs.inlineStyles,a.isCode(t))return e.selectWholeBlock?(i=s.replaceBlockWithParagraph(this,this._note,t,""),s.setTextBlockAsEndingRange(this,i,0,0)):d.isCollapsed()?(n=this._deleteCodeText(t,e),s.setCodeBlockAsEndingRange(this,n,0)):(s.deleteSelectedContent(this,this._note,d),s.setCodeBlockAsEndingRange(this,e,0)),!0;if(d.isCollapsed()||s.deleteSelectedContent(this,this._note,d),d.isCollapsed()&&a.isTextBlock(t))return 0===e.start?this._deleteAtTextBlockStart(r,t,u):this._deleteAtTextBlockMiddle(t,e.start);if(d.isInSingleBlock()&&a.isTextBlock(t))return s.setTextBlockAsEndingRange(this,t,e.start,e.start),!0;if(a.isTextBlock(t)||(r&&!a.isTable(r)?(h.push(t),i=r,a.isTextBlock(r)&&(l=r.getLength())):(i=s.replaceBlockWithParagraph(this,this._note,t,""),l=0)),d.isInMultiBlock(o)&&(a.isTextBlock(o)?a.isTextBlock(t)&&!a.isCode(o)?(this.executeAtomicCommand(new p({block:t,start:t.getLength(),text:o.getText()})),h.push(o),l=e.start,i=t):(l=0,i=o):h.push(o)),h.length>0&&this.executeAtomicCommand(new c({note:this._note,blocks:h})),a.isTextBlock(i)){if(a.isCode(i))return s.setCodeBlockAsEndingRange(),!0;s.setTextBlockAsEndingRange(this,i,l,l)}else this.setEndingRange(y.buildNoteRangeFromNonTextBlock(i));return!0},_deleteAtTextBlockStart:function(e,t,n){var o,i,r;return a.isListItem(t)?(t.getIndex()>0&&t.getLevel()>1?this.executeAtomicCommand(new f({listItems:[t],newLevel:t.getLevel()-1})):t=s.replaceBlockWithParagraph(this,this._note,t,t.getText(),n),s.setTextBlockAsEndingRange(this,t,0,0),!0):a.isTodo(t)||a.isQuote(t)?(t=s.replaceBlockWithParagraph(this,this._note,t,t.getText(),n),s.setTextBlockAsEndingRange(this,t,0,0),!0):(i=t.getBlockStyle("text-indent"))&&i>0?(this.executeAtomicCommand(new h({blocks:[t],styleNameValues:{"text-indent":i-1}})),s.setTextBlockAsEndingRange(this,t,0,0),!0):(o=t.getBlockStyle("indent"))&&o>0?(this.executeAtomicCommand(new h({blocks:[t],styleNameValues:{indent:o-1}})),s.setTextBlockAsEndingRange(this,t,0,0),!0):e?!a.isTextBlock(e)||a.isCode(e)?(a.isHr(e)?(this.executeAtomicCommand(new c({note:this._note,blocks:[e]})),s.setTextBlockAsEndingRange(this,t,0,0)):this.setEndingRange(y.buildNoteRangeFromNonTextBlock(e)),!0):(r=e.getLength(),this.executeAtomicCommand(new p({block:e,start:e.getLength(),text:t.getText()})),this.executeAtomicCommand(new c({note:this._note,blocks:[t]})),s.setTextBlockAsEndingRange(this,e,r,r),!0):(s.setTextBlockAsEndingRange(this,t,0,0),!0)},_deleteAtTextBlockMiddle:function(e,t){g.isAtHrefBorder(e,t,!0)?this._deleteHrefAtCursorPos(e,t):(this.executeAtomicCommand(new u({block:e,start:t-1,end:t,inlineStyles:this._inlineStyles})),s.setTextBlockAsEndingRange(this,e,t-1,t-1))},_deleteHrefAtCursorPos:function(e,t){var n;-1!==(n=g.findHrefBorder(e,t,!0))&&s.deleteHref(this,e,n,t)},_deleteCodeText:function(e,t){var n=t.clone(),o=t.block.getLineInfo(t.startLineIndex),i=t.block.getLineInfo(t.startLineIndex-1);return 0===t.startLineCharIndex?i&&(n.startLineIndex=t.startLineIndex-1,n.startLineCharIndex=i.lineLength):o.lineStartSpacesNum===t.startLineCharIndex?l.keyBackspace.currentLineIsEmpty.backToLineStart||!i?n.startLineCharIndex=0:(n.startLineIndex=t.startLineIndex-1,n.startLineCharIndex=i.lineLength):n.startLineCharIndex=t.startLineCharIndex-1,n.startLineIndex<t.startLineIndex&&s.getNoteView(this).getBlockViewByBlock(e).scrollRightByIndex(n.startLineIndex),this.executeAtomicCommand(new d({block:e,start:t.start,startBlockRange:n,endBlockRange:t,inlineStyles:this._inlineStyles})),n},isSingleBlockAffected:function(){var e,n=this._args.range,o=t.__super__.isSingleBlockAffected.apply(this),i=0;return o&&n.isCollapsed()&&(i=(e=n.getStartBlockRange()).start,this._note.getPreBlock(e.block)&&0===i&&(o=!1)),o}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(375),i=n(5),r=n(1),a=n(3),s=n(4);return t=o.extend({name:"comp.KeyDelete",_cmdArgs:null,_note:null,initialize:function(){var e,n,o,i,l;if(this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this),!s.isCollabCommand(this._cmdArgs)){if(i=(n=(e=this._cmdArgs.range).getStartBlockRange()).block,l=(o=e.getEndBlockRange()).block,!e)return this.isReadyToApply=!1,void r.error(this.name+":note range should NOT be null");if(e.isInSingleBlock()&&a.isTable(i))return this.isReadyToApply=!1,void r.error("should NOT trigger the cmd when in Table.");if(e.isInSingleBlock()&&a.isTextBlock(i)&&e.isCollapsed()&&n.start===i.getLength()&&!this._note.getNextBlock(i))return this.isReadyToApply=!1,void r.warn("do NOT support the command at the end of note:",this.name);a.isTextBlock(l)&&o.end===l.getLength()&&a.isCatalogue(this._note.getNextBlock(l))&&(this.isReadyToApply=!1,r.warn("do NOT support when next is Catalogue block."))}},isSingleBlockAffected:function(){var e,n,o=this._args.range,i=t.__super__.isSingleBlockAffected.apply(this),r=0;return i&&o.isCollapsed()&&(e=(n=o.getStartBlockRange()).block,r=n.start,this._note.getNextBlock(e)&&r===e.getEndOffset()&&(i=!1)),i},isValidStartNoteRange:function(){var e,t,n=!0;return(e=this.getStartingRange())&&e.isInSingleBlock()&&(t=e.getStartBlockRange().block,a.isTable(t)&&(n=!1)),n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(0),s=n(3),l=n(9),c=n(75),u=n(23),d=n(305),p=n(44),h=n(173),f=n(110),g=n(48),y=n(208),m=n(172),v=n(4);return t=o.extend({name:"comp.KeyEnter",_note:null,_cmdArgs:null,_newBlkId:null,initialize:function(){var e,n;if(this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this),!v.isCollabCommand(this._cmdArgs)){if(n=(e=this._cmdArgs.range).getStartBlockRange().block,!e)return this.isReadyToApply=!1,void r.error(this.name+":note range should NOT be null");if(e.isInSingleBlock()&&s.isTable(n))return this.isReadyToApply=!1,void r.error("should NOT trigger the cmd when in Table.");this._newBlkId=v.newGUID()}},apply:function(){var e,t,n,o,i,r,l=this._cmdArgs.range,c=!1,d=null,p=[];return i=t=(e=l.getStartBlockRange()).block,r=n=l.getEndBlockRange().block,l.isCollapsed()||u.deleteSelectedContent(this,this._note,l),s.isTextBlock(t)&&!s.isCode(t)&&(s.isCatalogue(t)||(i=s.isQuote(t)&&t.richText.getLength()?u.createNewQuote(t,{id:t.getId(),text:t.getText()}):u.createNewParagraph(t,t.getId(),t.getText()),m.isAtHrefBorder(i,e.start,!0)&&u.deleteHref(this,i,0,t.getLength())),u.recogLink(this,t,0,t.getLength())),l.isInMultiBlock()?(s.isTextBlock(t)||(i=u.replaceBlockWithParagraph(this,this._note,t,"")),s.isTextBlock(n)||(r=u.replaceBlockWithParagraph(this,this._note,n,"")),s.isListItem(i)?r=this._replaceBlockWithListItem(r,i,r.getText()):s.isTextBlock(i)&&s.isListItem(r)&&(r=u.replaceBlockWithParagraph(this,this._note,r,r.getText())),u.setTextBlockAsEndingRange(this,r,0,0),!0):(s.isTextBlock(t)?s.isCode(t)||(o=t.sliceText(e.start,t.getLength()),this.executeAtomicCommand(new f({block:t,start:e.start,end:t.getLength()}))):i=u.replaceBlockWithParagraph(this,this._note,t,""),s.isListItem(t)?t.isEmpty()&&0===o.getLength()?r=i=this._reduceListItemLevel(t):(r=this._insertListItem(t,this._newBlkId,o,this._cmdArgs.inlineStyles),c=!0):(s.isHeading(t)?r=o.toString().length>0?this._insertHeading(i,this._newBlkId,o,t.getLevel()):this._insertParagraph(i,this._newBlkId,o):s.isCatalogue(t)?r=this._insertCatalogueHelp(i,{startBlock:t,paraId:this._newBlkId,text:o}):s.isTodo(t)?r=t.isEmpty()&&0===o.getLength()?u.replaceBlockWithParagraph(this,this._note,t,""):this._insertTodo(i,{startBlock:t,id:this._newBlkId,text:o,checked:!1,inlineStyles:this._cmdArgs.inlineStyles}):s.isQuote(t)?r=t.isEmpty()&&0===o.getLength()?u.replaceBlockWithParagraph(this,this._note,t,""):this._insertQuote(i,{id:this._newBlkId,text:o,inlineStyles:this._cmdArgs.inlineStyles}):s.isCode(t)?e.selectWholeBlock?r=u.replaceBlockWithParagraph(this,this._note,t,""):d=this._insertCodeLine(e):r=this._insertParagraph(i,this._newBlkId,o,this._cmdArgs.inlineStyles),c=!0),r.setInlineStylesForEmpty(this._cmdArgs.inlineStyles),s.isCode(r)?(u.getNoteView(this).getBlockViewByBlock(r).scrollToStart(),u.setCodeBlockAsEndingRange(this,e,d.newCursorOffset,Number(!!d.insertedChars))):u.setTextBlockAsEndingRange(this,r,0,0),a.each(this._note.getInterBlocks(t,n,!0),function(e){p.push(e.getId())}),c&&p.push(this._newBlkId),this.pushAffectedBlockIds(p),!0)},_insertListItem:function(e,t,n,o){var i;return i=u.createNewListItem(e,t,n),u.setBlockStyle(i,o),this.executeAtomicCommand(new p({note:this._note,newBlks:[i],preBlk:e})),i},_insertParagraph:function(e,t,n,o){var i;if(i=u.createNewParagraph(e,t,n,!o))return o&&u.setBlockStyle(i,o),this.executeAtomicCommand(new p({note:this._note,newBlks:[i],preBlk:e})),i},_insertHeading:function(e,t,n,o){var i;return i=u.createNewHeading(e,t,n,o,!0),this.executeAtomicCommand(new p({note:this._note,newBlks:[i],preBlk:e})),i},_insertTodo:function(e,t){var n;return n=u.createNewTodo(e,t),u.setBlockStyle(n,t.inlineStyles),this.executeAtomicCommand(new p({note:this._note,newBlks:[n],preBlk:e})),n},_insertQuote:function(e,t){var n;return n=u.createNewQuote(e,t),u.setBlockStyle(n,t.inlineStyles),this.executeAtomicCommand(new p({note:this._note,newBlks:[n],preBlk:e})),n},_insertCodeLine:function(e){var t,n,o,i,r=0,a=e.block.getLineInfo(e.startLineIndex);return e.startLineCharIndex===a.lineLength&&(r=d.keyEnter.whenEndCharIs[a.lineEndChar]||d.keyEnter.whenEndCharIs.default),e.startLineCharIndex===a.lineLength-1&&(n=a.lineText.slice(a.lineText.length-2),(o=["{}","()","[]"].indexOf(n)>-1)&&(r=4)),t=c.LINE_BREAK+" ".repeat(a.lineStartSpacesNum+r),o&&(t+=c.LINE_BREAK+" ".repeat(a.lineStartSpacesNum)),i=new l({text:t}),this.executeAtomicCommand(new h({block:e.block,startBlockRange:e,text:i})),{insertedChars:t,isBetweenPairs:o,newCursorOffset:o?t.length-a.lineStartSpacesNum-2:t.length-1}},_insertCatalogueHelp:function(e,t){var n=t.startBlock;return t.text.getLength()<1?t.href="":t.href=n.getHref(),this._insertCatalogue(e,t)},_insertCatalogue:function(e,t){var n;return n=u.createNewCatalogue(e,t),this.executeAtomicCommand(new p({note:this._note,newBlks:[n],preBlk:e})),n},_reduceListItemLevel:function(e){var t=e;return e.getLevel()<=1?t=u.replaceBlockWithParagraph(this,this._note,e,""):this.executeAtomicCommand(new y({listItems:[e],newLevel:e.getLevel()-1})),t},_replaceBlockWithListItem:function(e,t,n){return this.executeAtomicCommand(new g({note:this._note,blocks:[e]})),this._insertListItem(t,e.getId(),n,this._cmdArgs.inlineStyles)},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._newBlkId=e.newBlkId)},isSingleBlockAffected:function(){return!1},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.newBlkId=this._newBlkId,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(3),s=n(9),l=n(23),c=n(305),u=n(110),d=n(173),p=n(205),h=n(208),f=n(4);return t=o.extend({name:"comp.KeyTab",_cmdArgs:null,_note:null,_withShiftKey:!1,initialize:function(){var e,n;if(this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this),!f.isCollabCommand(this._cmdArgs)){if(e=this._cmdArgs.range,this._cmdArgs.withShiftKey&&(this._withShiftKey=!0),!e||!e.canDrawedByNative())return r.error(this.name+":note range should NOT be null"),void(this.isReadyToApply=!1);if(n=e.getStartBlockRange().block,e.isInSingleBlock()&&!a.isTextBlock(n))return void(this.isReadyToApply=!1)}},apply:function(){var e,t,n,o,i,r,s=this._cmdArgs.range,c=1;if(t=(e=s.getStartBlockRange()).block,n=s.getEndBlockRange().block,this._withShiftKey&&(c=-1),(i=s.isInMultiBlock())||0===e.start&&e.end===t.getLength())return r=!i,o=this._note.getInterBlocks(t,n,!0),l.isInSameList(o)?this._isFirstListItem(o[0])?l.updateBlocksIndentLevel(this,o[0].getOwnerList().getItems(),c):this.executeAtomicCommand(new h({listItems:o,deltaLevel:c})):this._withShiftKey&&r?t.getBlockStyle("text-indent")?this._updateBlockTextIndent(t,c):l.updateBlocksIndentLevel(this,[t],c):r&&0===e.end?this._updateBlockTextIndent(t,c):l.updateBlocksIndentLevel(this,o,c),this.setEndingRange(s),!0;0===e.start?a.isListItem(t)?this._isFirstListItem(t)?(l.updateBlocksIndentLevel(this,t.getOwnerList().getItems(),c),this.setEndingRange(s)):(this.executeAtomicCommand(new h({listItems:[t],deltaLevel:c})),this.setEndingRange(s)):this._withShiftKey?t.getBlockStyle("text-indent")?this._updateBlockTextIndent(t,c):(l.updateBlocksIndentLevel(this,[t],c),this.setEndingRange(s)):this._updateBlockTextIndent(t,c):this._withShiftKey?this._handleShiftTabNotAtStart(e):this._insertTabChar()},_handleShiftTabNotAtStart:function(e){var t,n,o,i,r=e.block,s=!0;if(a.isCode(r))return this._decreaseIndent(e);for(t=r.getText().getReadOnlyData(),i=(n=e.start)-1;i>=0;i--)if("\t"!==t[i].char){if(" "!==t[i].char){s=!1;break}n-i==4&&(o=i)}else o||(o=i);s?(o=o||0,this.executeAtomicCommand(new u({block:r,start:o,end:n})),l.setTextBlockAsEndingRange(this,r,o,o)):this._insertTabChar()},_insertTabChar:function(){var e,t,n=this._cmdArgs.inlineStyles,o=this._cmdArgs.range,i=0,r=o.getStartBlockRange(),u=o.getEndBlockRange(),p=r.clone(),h=r.clone();if(a.isCode(r.block)&&o.isInSingleBlock()){for(t=r.startLineIndex;t<=u.endLineIndex;t++)e=new s({text:" ".repeat(c.keyTab.addSpacesNum)}),p.startLineIndex=t,p.startLineCharIndex=0,this.executeAtomicCommand(new d({block:r.block,startBlockRange:p,text:e}));return h.startLineCharIndex+=4,i=h.endLineCharIndex+c.keyTab.addSpacesNum,void(r.isCollapsed()?l.setCodeBlockAsEndingRange(this,h,0):l.expandCodeRange(this,h,i,h.endLineIndex-h.startLineIndex))}l.deleteSelectedContent(this,this._note,o),l.insertTabChar(this,r.block,r.start,n),l.setTextBlockAsEndingRange(this,r.block,r.start+1,r.start+1)},_decreaseIndent:function(e){var t,n,o,i=e.block,r=e.clone(),a=e.clone(),s=[];for(t=e.startLineIndex;t<=e.endLineIndex;t++)0!==(n=i.getLineInfo(t).lineStartSpacesNum)?(o=n<4?n:4,r.startLineIndex=t,r.endLineIndex=t,r.startLineCharIndex=0,r.endLineCharIndex=o,s.push(o),this.executeAtomicCommand(new p({block:e.block,startBlockRange:r,endBlockRange:r}))):s.push(0);a.startLineCharIndex=Math.max(a.startLineCharIndex-s.shift(),0),l.expandCodeRange(this,a,a.endLineCharIndex-s.pop()||0,a.endLineIndex-a.startLineIndex)},_isFirstListItem:function(e){return 1===e.getLevel()&&1===e.getIndex()},_updateBlockTextIndent:function(e,t){l.updateBlockTextIndentLevel(this,e,t),this.setEndingRange(this._cmdArgs.range)},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;e&&e.simpleValue1&&(this._withShiftKey=!0),t.__super__.fromCollabJSON.apply(this)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return this._withShiftKey&&(e.simpleValue1=!0),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(9),a=n(23),s=n(1),l=n(3),c=n(48),u=n(134),d=n(173),p=n(150),h=n(4);return t=o.extend({name:"comp.KeyTextInput",_cmdArgs:null,_note:null,_inputtedText:null,_recogLink:!1,initialize:function(){var e;if(this._note=this.options.note,this._cmdArgs=this.options.args,e=this._cmdArgs.range,t.__super__.initialize.apply(this,arguments),!h.isCollabCommand(this._cmdArgs)){if(!e)return this.isReadyToApply=!1,void s.error(this.name+":note range should NOT be null");this._recogLink=this._cmdArgs.recogLink,this._inputtedText=this._cmdArgs.text}},apply:function(){var e,t,n,o,i,s,p,h,f=!0,g=this._cmdArgs.range;if(n=t=(e=g.getStartBlockRange()).block,i=e.start,o=g.getEndBlockRange().block,g.isInSingleBlock()&&l.isTable(t))return this._insertTextInTable(e,t,this._inputtedText);if(g.isCollapsed()||l.isCode(n)||a.deleteSelectedContent(this,this._note,g),l.isTextBlock(t,e)||(n=a.replaceBlockWithParagraph(this,this._note,t,""),i=0),g.isInMultiBlock()&&(l.isTextBlock(o)&&(h=o.getText()),this.executeAtomicCommand(new c({note:this._note,blocks:[o]}))),s=i+this._inputtedText.getLength(),h&&this._inputtedText.append(h),l.isCode(n)){switch(g.isCollapsed()||a.deleteSelectedContent(this,this._note,g),p=this._inputtedText.toString()){case"{":p+="}";break;case"(":p+=")";break;case"[":p+="]";break;default:f=!1}return this._inputtedText=new r({text:p}),this.executeAtomicCommand(new d({block:n,start:i,text:this._inputtedText,startBlockRange:e})),a.setCodeBlockAsEndingRange(this,e,this._inputtedText.getLength()-Number(f)),!0}return this.executeAtomicCommand(new u({block:n,start:i,text:this._inputtedText})),this._recogLink&&a.recogLink(this,n,0,i),a.setTextBlockAsEndingRange(this,n,s,s),!0},_insertTextInTable:function(e,t,n){var o,i;(o=e.getAsRectRange())&&(i=o.getFirstCell(),this.executeAtomicCommand(new p({table:t,cellRect:{row:i.row,col:i.col},content:n})))},canBeMerged:function(e){var n,o,i;if(t.__super__.canBeMerged.apply(this,[e])){if(!this.startingRange||!e.getStartingRange())return!1;if(n=this.startingRange.getStartBlockRange(),i=e.getStartingRange().getStartBlockRange(),!e.getStartingRange().isCollapsed())return!1;if(this.isLocalExecutedCmd){if(!this.endingRange)return!1;if(o=this.endingRange.getEndBlockRange(),!l.isTextBlock(o))return!1;if(i.getBlockId()!==o.getBlockId())return!1;if(o.end!==i.start)return!1}else{if(n.getBlockId()!==i.getBlockId())return!1;if(n.start!==i.start)return!1}return" "!==e.getInputtedText().toString()}return!1},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._inputtedText=r.fromCollabJSON(e.richText),e.recogLink&&(this._recogLink=!0))},getInputtedText:function(){return this._inputtedText},mergeLocalCmd:function(e){var t,n,o=e.getInputtedText();this.endingRange&&(t=this.endingRange.getEndBlockRange()),o&&o.getLength()>0&&(this._inputtedText.append(o),this.isLocalExecutedCmd&&(n=t.end+o.getLength(),a.setTextBlockAsEndingRange(this,t.block,n,n)))},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e&&(e.richText=this._inputtedText.toCollabJSON(),this._recogLink&&(e.recogLink=this._recogLink)),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(1),a=n(23);return t=o.extend({name:"comp.RemoveFormat",_note:null,_cmdArgs:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this)},apply:function(){var e=this._cmdArgs.range;return!e||e.isCollapsed()?(r.error("collapsed时应该修改编辑器当前样式状态，不应进入此命令",e),!1):(a.resetAllStyles(this,this._note,e,this._args.blockStyles,this._args.inlineStyles,{resetAllStyles:this._args.resetAllStyles,isRemoveFormat:!0}),this.setEndingRange(e),!0)}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(0),a=n(852),s=n(4);return t=o.extend({name:"comp.ReplaceResource",_note:null,_cmdArgs:null,_resources:null,_resProps:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this),s.isCollabCommand(this._cmdArgs)||(this._resources=this._cmdArgs.resources,this._resProps=this._cmdArgs.resProps,this.endingRange=this._cmdArgs.endingRange)},apply:function(){return this.executeAtomicCommand(new a({resources:this._resources,newResProps:this._resProps}),this.endingRange),!0},fromCollabJSON:function(){var e=this,n=e._cmdArgs.collabProperties.coreEditor,o=e._cmdArgs.collabProperties.cmdJSON;o&&(e._resProps=o.simpleValue1,e._resources=[],r.each(o.resIds,function(t){e._resources.push(n.getBlockById(t))}),o.simpleValue2&&(e._cmdArgs.ignoreUndoRedo=!0),o.endNoteRange&&(e.endingRange=o.endNoteRange)),t.__super__.fromCollabJSON.apply(e)},isSingleBlockAffected:function(){return!1},toCollabJSON:function(){var e=[],n=t.__super__.toCollabJSON.apply(this);return n&&(r.each(this._resources,function(t){e.push(t.getId())}),n.simpleValue1=this._resProps,n.resIds=e,this._cmdArgs.ignoreUndoRedo&&(n.simpleValue2=!0),n.endNoteRange=this.endingRange),n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(3),s=n(4);return t=o.extend({name:"atom.SetResourceProps",_resources:null,_newResProps:null,_oldResProps:null,initialize:function(){var e=this.options,n=e.args;t.__super__.initialize.apply(this),s.isCollabCommand(n)||(this._resources=e.resources,this._newResProps=e.newResProps)},apply:function(){var e=this;return e._oldResProps={},r.each(e._resources,function(t,n){e._oldResProps[n]={},a.isImage(t)?(e._newResProps[n].source&&(e._oldResProps[n].source=t.getSource(),t.setSource(e._newResProps[n].source)),r.isUndefined(e._newResProps[n].title)||(e._oldResProps[n].title=t.getTitle(),t.setTitle(e._newResProps[n].title))):a.isAttachment(t)&&(e._newResProps[n].source&&(e._oldResProps[n].source=t.getSource(),t.setSource(e._newResProps[n].source)),e._newResProps[n].resource&&(e._oldResProps[n].resource=t.getResource(),t.setResource(e._newResProps[n].resource)),e._newResProps[n].fileName&&(e._oldResProps[n].fileName=t.getFileName(),t.setFileName(e._newResProps[n].fileName)),e._newResProps[n].fileLength&&(e._oldResProps[n].fileLength=t.getFileLength(),t.setFileLength(e._newResProps[n].fileLength)))}),!0},doUnapply:function(){var e=this;return r.each(e._resources,function(t,n){a.isImage(t)?(e._oldResProps[n].source&&t.setSource(e._oldResProps[n].source),r.isUndefined(e._oldResProps[n].title)||t.setTitle(e._oldResProps[n].title)):a.isAttachment(t)&&(e._oldResProps[n].source&&t.setSource(e._oldResProps[n].src),e._oldResProps[n].resource&&t.setResource(e._oldResProps[n].resource),e._oldResProps[n].fileName&&t.setFileName(e._oldResProps[n].fileName),e._oldResProps[n].fileLength&&t.setFileLength(e._oldResProps[n].fileLength))}),!0},fromCollabJSON:function(){var e,n=this.options.args,o=n.collabProperties.cmdJSON;o&&(e=n.collabProperties.coreEditor.getNote(),o.dataBefore&&(this._oldResProps=o.dataBefore),this._newResProps=o.dataAfter,this._resources=this._getResByIds(e,o.resIds)),t.__super__.fromCollabJSON.apply(this)},toCollabJSON:function(){var e=[],n=t.__super__.toCollabJSON.apply(this);return this._oldResProps&&(n.dataBefore=this._oldResProps),n.dataAfter=this._newResProps,r.each(this._resources,function(t){e.push(t.getId())}),n.resIds=e,n},_getResByIds:function(e,t){var n=[];return r.some(e.getAllBlocks(),function(e){return r.contains(t,e.getId())&&n.push(e),t.length===n.length}),n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(14),r=n(5),a=n(3),s=n(23),l=n(73),c=n(74),u=n(9),d=n(7),p=n(48),h=n(44),f=n(4);return t=i.extend({name:"comp.RefreshCatalogue",_cmdArgs:null,_note:null,_ownerId:null,_delete:!1,_catalogueIds:null,_catalogues:null,_newCatalogues:null,_blankParaId:null,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args||{},this._ownerId=this._cmdArgs.ownerId,this._delete=this._cmdArgs.delete,t.__super__.initialize.apply(this,arguments),this._initBlocks()},_initBlocks:function(){var e,t,n=this,i=n._note.blocks,r=[],u=[],p=[];o.each(i,function(e){a.isCatalogue(e)&&e.getOwnerId()===n._ownerId&&r.push(e),s.isForCatalogueBlock(e)&&u.push(e)}),(r.length>0||!n._ownerId)&&(n._catalogueIds=n._catalogueIds||[],n._ownerId=n._ownerId||f.newGUID(),t=new c({id:n._ownerId}),o.each(u,function(o,i){e=new l({indent:o.getLevel()-1,text:o.getText().toString().trim(),href:o.getId(),ownerList:t}),p.push(e),n._catalogueIds[i]?e.setId(n._catalogueIds[i]):n._catalogueIds[i]=e.getId()}),0===u.length&&(e=new l({indent:0,text:d.INSERT_BLANK_CATALOGUE_TEXT,ownerList:t}),p.push(e),n._catalogueIds[0]?e.setId(n._catalogueIds[0]):n._catalogueIds[0]=e.getId())),n._catalogues=r,n._newCatalogues=p,(0===p.length||n._delete)&&(n._blankParaId=n._blankParaId||f.newGUID())},apply:function(){var e=this._catalogues,t=this._newCatalogues,n=e[e.length-1]||this.startingRange.getEndBlockRange().block,i=t[t.length-1];o.each(t,function(e){s.setResourceBlockStyleByPreBlock(e,n)}),this._blankParaId?(i=s.createNewParagraph(null,this._blankParaId,new u({text:""})),s.setResourceBlockStyleByPreBlock(i,n),this.executeAtomicCommand(new h({note:this._note,newBlks:[i],preBlk:n}))):this.executeAtomicCommand(new h({note:this._note,newBlks:t,preBlk:n})),e.length>0&&this.executeAtomicCommand(new p({note:this._note,blocks:this._note.getInterBlocks(e[0],e[e.length-1],!0)})),s.setTextBlockAsEndingRange(this,i,i.getLength(),i.getLength())},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._ownerId=e.listId,this._catalogueIds=e.blockIds,this._delete=e.simpleValue1,this._blankParaId=e.newBlkId)},toCollabJSON:function(){var e;return(e=t.__super__.toCollabJSON.apply(this))&&(e.listId=this._ownerId,e.blockIds=this._catalogueIds,e.simpleValue1=this._delete,e.newBlkId=this._blankParaId),e}}),r.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(4);return t=o.extend({_cmdArgs:null,_oldData:null,_content:null,_align:null,_headerFooter:null,name:"comp.SetHeaderFooter",initialize:function(e){this._oldData={},this._cmdArgs=e.args,r.isCollabCommand(this._cmdArgs)||(this._content=this._cmdArgs.content,this._align=this._cmdArgs.align,this._headerFooter=this._cmdArgs.headerFooter),this.startingRange=e.args.range,this.endingRange=e.args.endingRange,t.__super__.initialize.apply(this)},apply:function(){var e=this._align,t=this._content,n=this._headerFooter;n&&(null!=e&&(this._oldData.align=n.getAlign()),null!=t&&(this._oldData.content=n.getContent(!1)),n.setContentAndStyle(t,e),this.effected=!0)},doReapply:function(){var e=this._align,t=this._content;this._headerFooter.setContentAndStyle(t,e)},doUnapply:function(){var e=this._headerFooter,t=this._oldData;t&&e.setContentAndStyle(t.content,t.align)},fromCollabJSON:function(){var e=this._cmdArgs.collabProperties,n=e.cmdJSON,o=e.coreEditor.note;t.__super__.fromCollabJSON.apply(this),n&&(this._content=n.headerFooterInfo.content,this._align=n.headerFooterInfo.align,this._headerFooter=o.getHeaderFooter(n.headerFooterInfo.isFooter))},toCollabJSON:function(){var e,n=t.__super__.toCollabJSON.apply(this);return n&&((e={}).content=this._content,e.align=this._align,e.isFooter=this._headerFooter.isFooter,n.headerFooterInfo=e),n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(14),r=n(5),a=n(856),s=n(364),l=n(22),c=n(4);return t=i.extend({name:"comp.SetBlockProps",_cmdArgs:null,_note:null,_blocks:null,_props:null,updateSelectionDisabled:!0,initialize:function(){this._note=this.options.note,this._cmdArgs=this.options.args,t.__super__.initialize.apply(this),c.isCollabCommand(this._cmdArgs)||(this._blocks=this._cmdArgs.blocks,this._props=this._cmdArgs.props)},apply:function(){var e=this._blocks[0],t=new s({block:e,start:e.getEndOffset(),end:e.getEndOffset()});return this.executeAtomicCommand(new a({blocks:this._blocks,props:this._props}),new l({startRange:t,endRange:t})),!0},fromCollabJSON:function(){var e=this,n=e._cmdArgs.collabProperties.cmdJSON;n&&(e._blocks=[],o.each(n.blockIds,function(t){e._blocks.push(e._note.getBlockById(t))}),e._props=n.simpleValue1),t.__super__.fromCollabJSON.apply(e)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this),n=[];return o.each(this._blocks,function(e){n.push(e.getId())}),e.blockIds=n,e.simpleValue1=this._props,e}}),r.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(0),a=n(4);function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e){return"set"+s(e)}return t=o.extend({name:"atom.SetBlockProps",_blocks:null,_oldPropsMap:{},_props:null,initialize:function(e){var n=this.options.args;this._oldPropsMap={},a.isCollabCommand(n)||(this._blocks=e.blocks,this._props=e.props),t.__super__.initialize.apply(this,arguments)},apply:function(){var e,t=this;r.each(t._blocks,function(n){e={},r.each(t._props,function(t,o){e[o]=n[function(e){return"get"+s(e)}(o)](),n[l(o)](t)}),t._oldPropsMap[n.getId()]=e})},doUnapply:function(){var e,t=this;r.each(t._blocks,function(n){e=t._oldPropsMap[n.getId()],r.each(e,function(e,t){n[l(t)](e)})})},fromCollabJSON:function(){var e=this,n=e.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(e),e._note=n.coreEditor.getNote(),o&&(e._blocks=[],r.each(o.blockIds,function(t){e._blocks.push(e._note.getBlockById(t))}),e._props=o.simpleValue1,e._oldPropsMap=o.simpleValue2)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this),n=[];return r.each(this._blocks,function(e){n.push(e.getId())}),e.blockIds=n,e.simpleValue1=this._props,e.simpleValue2=this._oldPropsMap,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(858),a=n(4);return t=o.extend({name:"comp.SetCodeLanguage",_codeBlock:null,_language:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._codeBlock=this.options.args.block,this._language=this.options.args.newLanguage),t.__super__.initialize.apply(this)},apply:function(){var e=this.options.args,t=this.startingRange.startRange.block;return a.isCollabCommand(e)&&t&&(this._codeBlock=t),this.executeAtomicCommand(new r({block:this._codeBlock,newLanguage:this._language})),!0},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._language=e.language)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.language=this._language,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(4);return t=o.extend({name:"atom.SetCodeLanguage",_codeBlock:null,_language:null,_preLanguage:null,initialize:function(){var e=this.options.args;r.isCollabCommand(e)||(this._codeBlock=this.options.block,this._language=this.options.newLanguage,this._preLanguage=this.options.block.getLanguage()),t.__super__.initialize.apply(this)},apply:function(){return!!this._language&&(this._codeBlock.setLanguage(this._language),!0)},doUnapply:function(){this._codeBlock&&this._preLanguage&&this._codeBlock.setLanguage(this._preLanguage)},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._language=e.language)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.language=this._language,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(860),a=n(4);return t=o.extend({name:"comp.SetCodeTheme",_codeBlock:null,_theme:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._codeBlock=this.options.args.block,this._theme=this.options.args.newTheme),t.__super__.initialize.apply(this)},apply:function(){var e=this.options.args,t=this.startingRange.startRange.block;return a.isCollabCommand(e)&&t&&(this._codeBlock=t),this.executeAtomicCommand(new r({block:this._codeBlock,newTheme:this._theme})),!0},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._theme=e.theme)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.theme=this._theme,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(4);return t=o.extend({name:"atom.SetCodeTheme",_codeBlock:null,_theme:null,_preTheme:null,initialize:function(){var e=this.options.args;r.isCollabCommand(e)||(this._codeBlock=this.options.block,this._theme=this.options.newTheme,this._preTheme=this.options.block.getTheme()),t.__super__.initialize.apply(this)},apply:function(){return!!this._theme&&(this._codeBlock.setTheme(this._theme),!0)},doUnapply:function(){this._codeBlock&&this._preTheme&&this._codeBlock.setTheme(this._preTheme)},fromCollabJSON:function(){var e=this.options.args.collabProperties.cmdJSON;t.__super__.fromCollabJSON.apply(this),e&&(this._theme=e.theme)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.theme=this._theme,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(862),a=n(4);return t=o.extend({name:"comp.SetTableCellsSize",_table:null,_sizes:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._table=e.table,this._sizes=e.sizes),t.__super__.initialize.apply(this)},apply:function(){var e=this,t=e._table,n=e._sizes;return!(n.length<1)&&(n.forEach(function(n){e.executeAtomicCommand(new r({table:t,size:n}))}),!0)},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._sizes=o.simpleValue1)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._sizes,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(4);return t=o.extend({name:"atom.SetTableCellSize",_table:null,_size:null,_oldSize:null,effected:!1,initialize:function(){var e=this.options.args;this._oldSize={},t.__super__.initialize.apply(this),r.isCollabCommand(e)||(this._table=this.options.table,this._size=this.options.size)},apply:function(){var e=this._table,t=this._size;return null!=t.row&&(this._oldSize.row=t.row,this._oldSize.height=e.getRowHeight(t.row),e.setRowHeight(t.row,t.height),this.effected=!0),null!=t.col&&(this._oldSize.col=t.col,this._oldSize.width=e.getColumnWidth(t.col),e.setColumnWidth(t.col,t.width),this.effected=!0),this.effected},doUnapply:function(){var e=this._table,t=this._oldSize;null!=t.row&&e.setRowHeight(t.row,t.height),null!=t.col&&e.setColumnWidth(t.col,t.width)},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._size=o.simpleValue1,this._oldSize=o.simpleValue2)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._size,e.simpleValue2=this._oldSize,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(23),a=n(102),s=n(126),l=n(376),c=n(4);return t=o.extend({name:"comp.InsertTableRowCol",_table:null,_rect:null,_cellsData:null,effected:!1,initialize:function(){var e,n=this.options.args;this._rect={},t.__super__.initialize.apply(this),c.isCollabCommand(n)||(this._cellsData=n.cellsData,this._sizes=n.sizes,(e=n.range)?this._transformRangeToData(e,n):(this._rect=n.rect,this._table=n.table))},_transformRangeToData:function(e,t){var n,o=e.getStartBlockRange(),i=o.getAsRectRange(),r=t.describe;i&&(n=i.getRect(),this._cellsData||(this._cellsData=this._calculateInsertData(r,n)),null!=r.row&&(this._rect.row=r.row===a.UP?n.top:n.top+n.height),null!=r.col&&(this._rect.col=r.col===a.LEFT?n.left:this._rect.col=n.left+n.width),this._table=o.block)},apply:function(){var e=this,t=e._rect,n=e._cellsData,o=e._sizes;null!=t.row&&(n.forEach(function(n){e._insertRows(t.row,[n],o)}),this.effected=!0),null!=t.col&&(n.forEach(function(n){e._insertCols(t.col,[n],o)}),this.effected=!0)},_insertRows:function(e,t,n){var o=this,i=o._table;t.forEach(function(n,a){0===n.length&&(n=i.creatRowData(e+a)),t[a]=n,r.fixMergeCellBeforeRowColChange({index:e+a,table:i,cmd:o,insertData:n})}),o.executeAtomicCommand(new l({cellsData:t,sizes:n,rect:this._rect,table:i}))},_insertCols:function(e,t,n){var o,i=this,a=i._table,s=a.getCells().length,c=[];t.forEach(function(t,n){for(c.push([]),o=0;o<s;o++)c[n].push(t[o]||a.createCell());r.fixMergeCellBeforeRowColChange({index:e+n,table:a,cmd:i,isCol:!0,insertData:c[n]})}),i.executeAtomicCommand(new l({cellsData:c,sizes:n,rect:this._rect,table:a}))},_calculateInsertData:function(e,t){return e.hasOwnProperty("col")?new Array(t.width).fill([]):e.hasOwnProperty("row")?new Array(t.height).fill([]):void 0},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._rect=o.simpleValue1,this._sizes=o.simpleValue2,this._cellsData=s.cellsFromCollabJSON(o.dataBefore))},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._rect,e.simpleValue2=this._sizes,e.dataBefore=s.cellsToCollabJSON(this._cellsData),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(48),a=n(865),s=n(23),l=n(22),c=n(93),u=n(4);return t=o.extend({name:"comp.DeleteTableRowCol",_table:null,_rect:null,_oldData:null,_count:null,_range:null,effected:!1,initialize:function(){var e,n=this.options.args;this._rect={},t.__super__.initialize.apply(this),u.isCollabCommand(n)||((e=n.range)?this._transformRangeToData(e,n):(this._rect=n.rect,this._count=n.count,this._table=n.table))},_transformRangeToData:function(e,t){var n,o,i=e.getStartBlockRange(),r=t.describe;(n=i.getAsRectRange())&&(o=n.getRect(),r.row&&(this._rect.row=o.top,this._count=o.height),r.col&&(this._rect.col=o.left,this._count=o.width),this._rectOfRectRange=o,this._table=i.block)},apply:function(){var e,t,n,o,i,r,u=this._count,d=this._rect,p=this._table;if(null!=d.row){if(e=p.getRowCount(),0===d.row&&e===u)return this._deleteTable();for(n=0;n<u;n++)s.fixMergeCellBeforeRowColChange({index:d.row,table:p,cmd:this,isDelete:!0}),this.executeAtomicCommand(new a({count:1,rect:d,table:p}));this.effected=!0}if(null!=d.col){if(t=p.getColumnCount(),0===d.col&&t===u)return this._deleteTable();for(n=0;n<u;n++)s.fixMergeCellBeforeRowColChange({index:d.col,table:p,cmd:this,isDelete:!0,isCol:!0}),this.executeAtomicCommand(new a({count:1,rect:d,table:p}));this.effected=!0}this._rectOfRectRange&&((o=c.create({block:p,type:c.TYPES.NORMAL,rect:this._rectOfRectRange}))&&(i=o.getAsRectRange()),i||(o=c.create({block:p,type:c.TYPES.FIRST_CELL})),r=l.create({startRange:o,endRange:o}),this.setEndingRange(r))},_deleteTable:function(){this._applyCommandToComposite(new r({blocks:[this._table],note:this.options.note})),this.setEndingRange(l.createMock()),this.effected=!0},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._rect=o.simpleValue1,this._count=o.simpleValue2)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._rect,e.simpleValue2=this._count,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(29),i=n(5),r=n(126),a=n(4);return t=o.extend({name:"atom.DeleteTableRowCol",_table:null,_rect:null,_oldCellsData:null,_count:null,effected:!1,initialize:function(){var e=this.options,n=e.args;a.isCollabCommand(n)||(this._count=e.count,this._rect=e.rect,this._table=e.table),t.__super__.initialize.apply(this)},apply:function(){var e=this._rect,t=this._table,n=this._count;null!=e.row&&(this._oldCellsData=t.deleteRows(e.row,n),this.effected=!0),null!=e.col&&(this._oldCellsData=t.deleteCols(e.col,n),this.effected=!0)},doUnapply:function(){var e=this._rect,t=this._table,n=this._oldCellsData;null!=e.row&&t.insertRows(e.row,n.rowsData,n.heights),null!=e.col&&t.insertCols(e.col,n.colsData,n.widths)},fromCollabJSON:function(){var e,n,o=this.options.args.collabProperties,i=o.cmdJSON;t.__super__.fromCollabJSON.apply(this),n=o.coreEditor.getNote(),i&&(this._table=n.getBlockById(i.blockId),this._rect=i.simpleValue1,this._count=i.simpleValue2,(e=i.dataBefore)&&(this._oldCellsData=e,e.rowsData&&(this._oldCellsData.rowsData=r.cellsFromCollabJSON(e.rowsData)),e.colsData&&(this._oldCellsData.colsData=r.cellsFromCollabJSON(e.colsData))))},toCollabJSON:function(){var e,n=t.__super__.toCollabJSON.apply(this);return n.blockId=this._table.getId(),n.simpleValue1=this._rect,n.simpleValue2=this._count,(e=this._oldCellsData)&&(n.dataBefore=e,e.rowsData&&(n.dataBefore.rowsData=r.cellsToCollabJSON(e.rowsData)),e.colsData&&(n.dataBefore.colsData=r.cellsToCollabJSON(e.colsData))),n}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(304),a=n(207),s=n(867),l=n(4);return t=o.extend({name:"comp.ToggleMergeTableCell",_table:null,_rect:null,_oldData:null,_range:null,effected:!1,initialize:function(){var e,n=this.options.args;l.isCollabCommand(n)||((e=n.range)?this._transformRangeToData(e,n):(this._rect=n.rect,this._table=n.table)),t.__super__.initialize.apply(this)},_transformRangeToData:function(e){var t,n,o=e.getStartBlockRange();(t=o.getAsRectRange())&&(n=t.getRect(),this._range=e,this._rect=n,this._table=o.block)},apply:function(){var e,t,n,o=this._rect,i=this._table,l=!1,c=!1,u=null;if(o&&(1!==o.width||1!==o.height)){for(i.isMergeRect(o)&&(l=!0),t=o.top;t<o.top+o.height;t++)for(n=o.left;n<o.left+o.width;n++)e=i.getCell(t,n),t===o.top&&n===o.left?(e.isEmpty()||(c=!0),this.executeAtomicCommand(new r({table:i,type:r.TYPES.POINT,value:l?null:{width:o.width,height:o.height},rect:{row:t,col:n}}))):(c||u||e.isEmpty()||(u=e.getContent()),l||(this._applyCommandToComposite(new s({args:{table:i,content:"",range:this._range,cellRect:{row:t,col:n}}})),this.executeAtomicCommand(new a({table:i,styles:null,rect:{width:1,height:1,top:t,left:n}}))),this.executeAtomicCommand(new r({table:i,type:r.TYPES.CELL,value:l?null:{dy:t-o.top,dx:n-o.left},rect:{row:t,col:n}})));u&&this._applyCommandToComposite(new s({args:{table:i,content:u,cellRect:{row:o.top,col:o.left}}})),this.effected=!0}},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._rect=o.simpleValue1)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._rect,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(150),a=n(4),s=n(125);return t=o.extend({name:"comp.SetTableCellContent",_table:null,_cellRect:null,_oldContent:null,initialize:function(){var e=this.options.args;a.isCollabCommand(e)||(this._table=e.table,this._cellRect=e.cellRect,this._content=e.content),t.__super__.initialize.apply(this)},apply:function(){this.executeAtomicCommand(new r({table:this._table,cellRect:this._cellRect,content:this._content}))},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._content=s.contentFromCollabJSON(o.simpleValue1),this._oldContent=s.contentFromCollabJSON(o.simpleValue2),this._cellRect=o.newBlkId)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=s.contentToCollabJSON(this._content),e.simpleValue2=s.contentToCollabJSON(this._oldContent),e.newBlkId=this._cellRect,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(207),a=n(4);return t=o.extend({name:"comp.SetTableCellBlockStyle",_table:null,_styles:null,_rect:null,_toggle:null,_default:null,effected:!1,initialize:function(){var e,n=this.options.args;t.__super__.initialize.apply(this),a.isCollabCommand(n)||(e=n.range,this._styles=n.styles,this._toggle=n.toggle,this._default=n.default,this._transformRangeToData(e,n))},_transformRangeToData:function(e){var t,n,o=e.getStartBlockRange();(t=o.getAsRectRange())&&(n=t.getRect(),this._rect=n,this._table=o.block)},apply:function(){if(!this._rect)return this.effected;this.executeAtomicCommand(new r({table:this._table,rect:this._rect,styles:this._styles,toggle:this._toggle,default:this._default})),this.effected=!0},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._rect=o.simpleValue1,this._styles=o.simpleValue2||null,this._toggle=o.newBlkId||null)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._rect,e.simpleValue2=this._styles||null,e.newBlkId=this._toggle||null,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(376),a=n(150),s=n(304),l=n(207),c=n(126),u=n(4);return t=o.extend({name:"comp.InsertTableCells",_table:null,_widths:null,_heights:null,_cellsData:null,_rect:null,effected:!1,initialize:function(){var e=this.options.args;t.__super__.initialize.apply(this),u.isCollabCommand(e)||(this._table=e.table,this._widths=e.widths,this._heights=e.heights,this._cellsData=e.cellsData,this._transformRangeToData(e.range))},_transformRangeToData:function(e){var t,n=e.getStartBlockRange();n.getAsRectRange&&(t=n.getAsRectRange(),this._rect=t.getRect())},apply:function(){var e,t,n,o,i,r,s,c=this._table,u=this._rect,d=this._cellsData;if(!d)return this._clearCellsData();if(!d[0]||d[0].length<1)return!1;for(e=d.length,t=d[0].length,this._handleExtendCol(),this._handleExtendRow(),o=0;o<e;o++)for(r=o+u.top,i=0;i<t;i++)s=i+u.left,n=d[o][i],(e>1||t>1)&&(this._handleOldMergePoint(c.getCell(r,s),r,s),this._handleMergePointCell(n,o,i)),n.isMergedCell()||(this.executeAtomicCommand(new a({content:n.getContent(),table:c,cellRect:{row:o+u.top,col:i+u.left}})),this.executeAtomicCommand(new l({rect:{top:u.top+o,left:u.left+i,width:1,height:1},styles:n.getBlockStyles(),table:c})),this.effected=!0)},_handleExtendCol:function(){var e,t,n,o=this._table,i=this._rect,a=this._widths,s=this._cellsData,l=s[0].length,c=o.getColumnCount(),u=o.getRowCount(),d=[];if((e=i.left+l-c)>0){for(s.forEach(function(t,n){t.slice(-e).forEach(function(e,t){d[t]=d[t]||[],d[t][i.top+n]=e})}),t=0;t<u;t++)for(n=0;n<d.length;n++)d[n][t]=d[n][t]||o.createCell({row:t,col:i.left+n});this.executeAtomicCommand(new r({rect:{col:c},table:o,cellsData:d,sizes:a?a.slice(-e):null})),this.effected=!0}},_handleExtendRow:function(){var e,t,n,o=this._table,i=this._rect,a=this._heights,s=this._cellsData,l=s.length,c=o.getColumnCount(),u=o.getRowCount(),d=[];if((e=i.top+l-u)>0){for(s.slice(-e).forEach(function(e,t){d[t]=d[t]||[],e.forEach(function(e,n){d[t][i.left+n]=e})}),t=0;t<d.length;t++)for(n=0;n<c;n++)d[t][n]=d[t][n]||o.createCell({row:i.top+i.height,col:n});this.executeAtomicCommand(new r({rect:{row:u},table:o,cellsData:d,sizes:a?a.slice(-e):null})),this.effected=!0}},_handleMergePointCell:function(e,t,n){var o=this._table,i=this._rect;e.isMergePoint()?(e.getMergePointAttr(),this.executeAtomicCommand(new s({rect:{row:i.top+t,col:i.left+n},value:e.getMergePointAttr(),type:s.TYPES.POINT,table:o}))):e.isMergedCell()&&this.executeAtomicCommand(new s({rect:{row:i.top+t,col:i.left+n},value:e.getMergedCellAttr(),type:s.TYPES.CELL,table:o}))},_handleOldMergePoint:function(e,t,n){var o,i,r=this._table,a=this._rect,s=this._cellsData,l=s.length,c=s[0].length;if(e&&(e.isMergePoint()&&(o=e.getMergePointAttr(),this._clearCellsAttr(t,n,o.width,o.height)),e.isMergedCell())){if(!(i=r.getCell(t,n,{findMergePointIfNeeded:!0,withPosition:!0}))||a.top+l>=i.row&&a.top<=i.row&&a.left+c>i.col&&a.left<=i.col)return;o=i.cell.getMergePointAttr(),this._clearCellsAttr(i.row,i.col,o.width,o.height)}},_clearCellsAttr:function(e,t,n,o){var i,r,a=this._table;for(i=0;i<o;i++)for(r=0;r<n;r++)this.executeAtomicCommand(new s({table:a,rect:{row:e+i,col:t+r}}))},_clearCellsData:function(){var e,t,n=this._rect,o=this._table;for(e=0;e<n.height;e++)for(t=0;t<n.width;t++)this.executeAtomicCommand(new a({content:"",table:o,cellRect:{row:e+n.top,col:t+n.left}}));this.executeAtomicCommand(new l({rect:n,table:o}))},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._rect=o.simpleValue1,this._widths=o.simpleValue2.widths,this._heights=o.simpleValue2.heights,this._cellsData=c.cellsFromCollabJSON(o.dataBefore))},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._rect,e.simpleValue2={widths:this._widths,height:this._heights},e.dataBefore=c.cellsToCollabJSON(this._cellsData),e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(14),i=n(5),r=n(374),a=n(4);return t=o.extend({name:"comp.SetTableCellInlineStyle",_table:null,_styles:null,_rect:null,_toggle:null,initialize:function(){var e,n=this.options.args;t.__super__.initialize.apply(this),a.isCollabCommand(n)||(e=n.range,this._styles=n.styles,this._toggle=n.toggle,this._transformRangeToData(e,n))},_transformRangeToData:function(e){var t,n,o=e.getStartBlockRange();(t=o.getAsRectRange())&&(n=t.getRect(),this._rect=n,this._table=o.block)},apply:function(){this._rect&&this.executeAtomicCommand(new r({table:this._table,rect:this._rect,styles:this._styles,toggle:this._toggle}))},fromCollabJSON:function(){var e,n=this.options.args.collabProperties,o=n.cmdJSON;t.__super__.fromCollabJSON.apply(this),e=n.coreEditor.getNote(),o&&(this._table=e.getBlockById(o.blockId),this._rect=o.simpleValue1,this._styles=o.simpleValue2||null,this._toggle=o.newBlkId||null)},toCollabJSON:function(){var e=t.__super__.toCollabJSON.apply(this);return e.blockId=this._table.getId(),e.simpleValue1=this._rect,e.simpleValue2=this._styles||null,e.newBlkId=this._toggle||null,e}}),i.add(t),t}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(21),i=n(0),r=n(1),a=n(27),s=n(7),l=n(372),c=function(e){return e&&e.name===l.prototype.name},u=n(129),d=n(22);return t={_editor:null,_undoStack:null,_redoStack:null,_notOwnManagerAdapterStack:null,initialize:function(e){this._undoStack=[],this._redoStack=[],this._notOwnManagerAdapterStack=[],this._editor=e.editor},exec:function(e,t,n){var o,i,a,s,l=!1,u=!0,p=!1;return e?this._editor.isCollabEnabled()&&(l=n.collabProperties.isCollabCmd&&n.collabProperties.isOwnCmd,u=!n.collabProperties.isCollabCmd,l&&(c(e)?this._localManagerAdapterOverriden(e)?e.setIgnoreUndoRedo(!0):p=!0:n.collabProperties.cmdJSON.isLocalExecutedCmd&&(p=!0)),p)?(r.log("Skip local-executed collab command and update noteVersion",e),this._updateUndoCmdFinalVersion(e.cmdId,n.collabProperties.finalNoteVersion),this.trigger("command-exec",e,n),!0):(s=e.apply(),i={cmdName:e.name,cmdType:"do"},o=e.getEndingRange(),!1!==s&&!d.isNoteRange(o)&&e.getStartingRange()&&(r.warn("endingRange should be a noteRange, so set it to be same as startEndingRange:",o),o=e.getStartingRange(),e.setEndingRange(o)),a=u||l,o&&a&&!e.updateSelectionDisabled&&this.trigger("update-selection",o,i,n),a&&!e.effected?(this.trigger("command-exec",e,n),s):(c(e)&&(e.sendInfoToInner({canUndo:this.canUndo(),canRedo:this.canRedo()}),a||this._notOwnManagerAdapterStack.push(e)),this._editor.isCollabEnabled()?n.collabProperties.dataCmdError?(this.trigger("command-exec",e,n),!1):(a&&(e.getIgnoreUndoRedo()||this._pushToUndoStack(e),this._redoStack=[]),this.trigger("command-exec",e,n),!0):(e.getIgnoreUndoRedo()||this._undoStack.push(e),this._redoStack=[],this.trigger("command-exec",e,n),!0))):(r.log("Skip empty local command"),!1)},canUndo:function(){return 0!==this._undoStack.length},undo:function(){if(!this.canUndo())return r.warn("Can Not undo"),!1;var e,t=this._undoStack,n=this._redoStack,o=t.pop();return o.doUnapply(),n.push(o),this.trigger("command-exec",o),e={cmdName:o.name,cmdType:"undo"},this.trigger("update-selection",o.getStartingRange(),e),!0},canRedo:function(){return 0!==this._redoStack.length},redo:function(){if(!this.canRedo())return!1;var e,t=this._undoStack,n=this._redoStack.pop();return n.doReapply(),t.push(n),this.trigger("command-exec",n),e={cmdName:n.name,cmdType:"redo"},this.trigger("update-selection",n.getEndingRange(),e),!0},reset:function(){this._undoStack=[],this._redoStack=[],this._notOwnManagerAdapterStack=[]},registerManager:function(e,t){var n,o=this;e&&e.on?(o.unregisterManager(e),e.on("command-executed",function(i,a){var s=l.create(t,i,a);s?(s.isOriginalCmd=!0,s.isLocalExecutedCmd=!0,s.setCmdOriginalNoteVersion(o._editor.getNoteVersion()),o._pushToUndoStack(s),o._redoStack=[],o.trigger("command-exec",s),e.triggerGlobalUndoStatus(o.canUndo(),o.canRedo()),o._editor.isCollabEnabled()&&(n=window.JSON.parse(a))&&0!==n.colWidths.length&&0!==n.rowHeights.length&&o._editor.pushLocalDataCommand(s,!0)):r.warn("ManagerAdapter failed to create command!")})):r.warn("commandManager is not Valid!")},unregisterManager:function(e){e&&e.on&&e.off("command-executed")},applyCollabCmdRedoUndo:function(e){var t,n=e.options.args,o=n.collabProperties.cmdJSON,i=n.collabProperties.isOwnCmd;if(i&&n.collabProperties.isLocalExecutedCmd)return r.log("skip local-executed-own redo/undo",e),void this.trigger("command-exec",e,n);n.collabProperties.isCollabUndo?(e.setCollabUndo(!0),e.setCollabRedo(!1),t=e.doUnapply(n)):n.collabProperties.isCollabRedo&&(e.setCollabUndo(!1),e.setCollabRedo(!0),t=e.doReapply(n)),!1!==t?(n.collabProperties.isCollabUndo&&e.setStartingRange(u.buildNoteRangeFromJSON(o.startNoteRange,this._editor)),n.collabProperties.isCollabRedo&&e.setEndingRange(u.buildNoteRangeFromJSON(o.endNoteRange,this._editor)),i&&(n.collabProperties.isCollabUndo?(this._pushToRedoStack(this._undoStack.pop()),this.trigger("update-selection",e.getStartingRange())):n.collabProperties.isCollabRedo&&(this._pushToUndoStack(this._redoStack.pop()),this.trigger("update-selection",e.getEndingRange())))):i&&(n.collabProperties.isCollabUndo?this.dropUndoCmds():n.collabProperties.isCollabRedo&&this.dropRedoCmd(),this._editor.notifyErrorToHost(s.INVALIDACTION_FAILED_COLLABCMD,n.collabProperties.coreEditor)),i&&c(e)&&e.sendInfoToInner({canUndo:this.canUndo(),canRedo:this.canRedo()}),this.trigger("command-exec",e,n)},dropRedoCmd:function(){r.log("Drop Redo Command"),this._redoStack.pop(),this.trigger("redo-stack-change")},dropUndoCmds:function(e,t,n){var o;r.log("Drop Undo Command:",e,t,n),e?(o=this._getUndoCmdIndexById(e))>=0&&(n?this._undoStack.splice(o,t,n):this._undoStack.splice(o,t)):this._undoStack.pop(),this.trigger("undo-stack-change")},getRedoCmd:function(){return i.last(this._redoStack)},getUndoCmd:function(){return i.last(this._undoStack)},_getUndoCmdIndexById:function(e){var t=-1,n=0;return i.some(this._undoStack,function(o){return o.getCmdId()===e&&(t=n),t>=0||(n++,!1)}),t},_pushToRedoStack:function(e){e?this._redoStack.push(e):r.log("null command should NOT be pushed to Redo Stack")},_pushToUndoStack:function(e){e?e.getIgnoreUndoRedo()?r.log("this command no need undo redo."):(this._undoStack.push(e),this._undoStack.length>s.MAX_UNDO_STACK_SIZE&&this._undoStack.shift()):r.log("null command should NOT be pushed to Undo Stack")},_localManagerAdapterOverriden:function(e){var t,n=!1,o=0;for(this._notOwnManagerAdapterStack&&(o=this._notOwnManagerAdapterStack.length);o>0&&(t=this._notOwnManagerAdapterStack[o-1]).getCmdOriginalNoteVersion()===e.getCmdOriginalNoteVersion();o--)if(e.getBlockId()===t.getBlockId()){n=!0;break}return n},_updateUndoCmdFinalVersion:function(e,t){i.some(this._undoStack,function(n){if(n.cmdId===e)return n.setCmdFinalNoteVersion(t),!0})}},i.extend(t,a.Events),o.extend(t)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(22),n(46),n(17),n(1),n(76),n(377)],void 0===(i=function(e,t,n,o,i,r,a,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.collapseToStart=function(){this.noteRange&&this.noteRange.collapse&&(this.noteRange.collapse(!0),this._drawRange(),this._triggerSelectionChange())},t.prototype.collapseToEnd=function(){this.noteRange&&this.noteRange.collapse&&(this.noteRange.collapse(!1),this._drawRange(),this._triggerSelectionChange())},t.prototype.getNativeRange=function(){return a.getRange(window)},t.prototype.getRange=function(){return this.noteRange},t.prototype.isCollapsed=function(){var e=this.noteRange;return!!e&&e.isCollapsed()},t.prototype.reset=function(){this.noteRange=null},t.prototype.setRange=function(e,t,n,o){this._setRange(e,{scrollIntoView:o,selectionChangeEvent:t,toDraw:!0,trigger:!0,inlineStyles:n})},t.prototype.initialize=function(e){this.noteView=e.noteView,this._bindEvents()},t.prototype._bindEvents=function(){o.addListeners({selectionchange:"_onDocSelectionChange","set-range":"_onSetRange"},this.noteView,this)},t.prototype._convertToNoteRange=function(e){return n.fromNativeRange(e,this.noteView)},t.prototype._drawRange=function(e){e=!1!==e,this.noteView.trigger("draw-range",this.noteRange,e)},t.prototype._onDocSelectionChange=function(e){var t=a.getRange(),n=this._convertToNoteRange(t);this.noteRange=n,!n||n.canDrawedByNative()?(this.trigger("doc-change-selection",n),this._triggerSelectionChange()):this.setRange(n)},t.prototype._onSetRange=function(e,t,n,o){this._setRange(e,{selectionChangeEvent:o,toDraw:t,trigger:n})},t.prototype._setRange=function(e,t){var n=this._convertToNoteRange(e);n&&n.getStartBlockRange()&&n.getEndBlockRange()?(t=t||{},this.noteRange=n,t.toDraw&&this._drawRange(t.scrollIntoView),t.trigger&&this._triggerSelectionChange(t.selectionChangeEvent,t.inlineStyles)):r.warn("Failed convert native range to note range!")},t.prototype._triggerSelectionChange=function(e,t){e||(e=l.createUserTypeEvent()),this.trigger("selection-change",e,t)},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(874),n(875),n(876),n(877),n(878),n(879),n(880),n(881),n(882),n(883),n(884),n(885),n(886),n(887),n(888),n(889),n(890),n(891),n(892),n(893),n(894),n(895),n(896),n(897),n(898),n(899),n(900),n(901),n(902),n(903),n(904),n(905),n(906)],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"backspace",key:"backspace",action:function(e){e.execDeleteBackward()}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"del",key:"del",action:function(e){e.execDeleteForward()}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8),n(22),n(41),n(3)],void 0===(i=function(e,t,n,o,i,r){var a=this;Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,n){var s=e.noteView;s&&(s.directionKeyJustMoved=!0),e.moveCaretWithDirection(!0,t);var l=e.getNoteRange().getEndBlockRange(),c=l.block,u=e.note.getLastBlock(),d=e.note.getNextBlock(c);if(!c.isEmpty()||r.isHr(d))switch(n){case"right":c.getLength()===l.end&&u===c&&e.execCommand("comp.AppendBlank",{inlineStyles:a.editingInlineStates});break;case"down":u===c&&e.execCommand("comp.AppendBlank",{inlineStyles:a.editingInlineStates})}else if(u!==c&&d){var p=i.createRangeByBlock({allContent:!1,block:d,collapseToStart:!1});e.noteSelection.setRange(new o({startRange:p,endRange:p})),t.preventDefault()}};n.register({name:"down",key:"down",preventDefault:!1,action:s}),n.register({name:"right",key:"right",preventDefault:!1,action:s})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(3),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){var t,o;o=(t=e.getNoteRange()).getEndBlockRange(),t.isInSingleBlock()&&n.isHeading(o.block)&&o.isCollapsed()&&o.start===o.block.getLength()&&e.resetEditingInlineStates(),e.execCommand("comp.KeyEnter",{inlineStyles:e.getEditingInlineState()})};o.register({name:"enter",key:"enter",action:i}),o.register({name:"alt+enter",key:"alt+enter",action:i}),o.register({name:"shift+enter",key:"shift+enter",action:i})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"esc",key:"esc",preventDefault:!1,action:function(e){e.trigger("esc")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(3),n(1),n(8)],void 0===(i=function(e,t,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),i.register({name:"space",key:"space",action:function(e){var t,i=e.getNoteRange();i&&(t=i.getStartBlockRange().block,i.isInSingleBlock()&&t&&n.isTable(t))?o.error("should NOT trigger insertText when select only Table."):e.insertText(" ",!1)}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"tab",key:"tab",action:function(e){var t=e.getEditingInlineState();e.execCommand("comp.KeyTab",{inlineStyles:t})}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){var n=e.noteView;n&&(n.directionKeyJustMoved=!0),e.moveCaretWithDirection(!1,t)};n.register({name:"up",key:"up",preventDefault:!1,action:o}),n.register({name:"left",key:"left",preventDefault:!1,action:o})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8),n(0),n(1)],void 0===(i=function(e,t,n,o,i){Object.defineProperty(t,"__esModule",{value:!0});o.each(["ctrl+backspace","ctrl+del","shift+backspace","shift+del","alt+backspace","alt+del","mod+backspace","mod+del"],function(e){n.register({name:e,key:e,preventDefault:!0,action:function(){i.log("shortcut prevented:",e)}})})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"bold",key:"mod+b",action:function(e){e.toggleInlineStyle("bold")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(45),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return n.pad(e,2,"0","left")};o.register({name:"insertDate",key:"alt+shift+d",action:function(e){var t=new Date,n=t.getFullYear()+"/"+i(t.getMonth()+1)+"/"+i(t.getDate())+" "+i(t.getHours())+":"+i(t.getMinutes());e.insertText(" "+n+" ",!1)}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"italic",key:"mod+i",action:function(e){e.toggleInlineStyle("italic")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){e.redo()};n.register({name:"redo",key:"mod+y",action:o}),n.register({name:"redo_2",key:"mod+shift+z",action:o})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(1),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0}),o.register({name:"reloadPage",key:"mod+shift+r",preventDefault:!1,action:function(){if(n.DEBUG){window.clearJstCache&&(window.clearJstCache(),window.alert("Clear JST cache... Done!"));var e=window.location.href;window.location.href=e}}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"save",key:"mod+s",action:function(e){e.trigger("yne-save-content")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"underline",key:"mod+u",action:function(e){e.toggleInlineStyle("underline")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"undo",key:"mod+z",action:function(e){e.undo()}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"selectAll",key:"mod+a",read:!0,action:function(e){e.selectAll()}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(3),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){var t,o,i=e.getNoteRange(),r=e.noteView;r.getHtmlContentEditable()||i&&i.isInSingleBlock()&&i.isMatchBlockTypes(e.note,[n.IMAGE,n.ATTACHMENT])&&(t=i.getStartBlockRange().block,(o=r.getBlockViewByBlock(t))&&(r.setHtmlContentEditable(!0),o.el.focus(),window.setTimeout(function(){r.setHtmlContentEditable(!1)},0)))};o.register({name:"copy",key:"mod+c",preventDefault:!1,read:!0,action:i}),o.register({name:"cut",key:"mod+x",preventDefault:!1,action:i})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(11),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0}),o.register({name:"paste",key:"mod+v",preventDefault:!1,action:function(e,t){var o=e.editor;e.setPasteAsText(!1),n.IS_MAC&&(t.preventDefault(),o.callMacNativeApi("menuPaste"))}}),o.register({name:"pasteAsText",key:"mod+shift+v",preventDefault:!1,action:function(e){e.setPasteAsText(!0)}}),o.register({name:"pasteAsText_alternative",key:"mod+shift+option+v",preventDefault:!1,action:function(e){e.setPasteAsText(!0)}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(11),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=!0;(n.IS_WEB_NOTE||n.IS_WEB_GROUP)&&(i=!1),o.register({name:"find",key:"mod+f",read:!0,preventDefault:i,action:function(e){e.trigger("find")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"shiftTab",key:"shift+tab",action:function(e){var t=e.getEditingInlineState();e.execCommand("comp.KeyTab",{inlineStyles:t,withShiftKey:!0})}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(11),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0}),n.IS_PC&&(o.register({name:"zoomIn_0",key:"mod+plus",action:function(e){e.zoomInEditor()}}),o.register({name:"zoomIn_1",key:"mod+shift+plus",action:function(e){e.zoomInEditor()}}),o.register({name:"zoomIn_2",key:"mod+=",action:function(e){e.zoomInEditor()}}),o.register({name:"zoomIn_3",key:"mod+shift+=",action:function(e){e.zoomInEditor()}}))}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(11),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0}),n.IS_PC&&(o.register({name:"zoomOut_0",key:"mod+-",action:function(e){e.zoomOutEditor()}}),o.register({name:"zoomOut_1",key:"mod+shift+-",action:function(e){e.zoomOutEditor()}}),o.register({name:"zoomOut_2",key:"mod+0",action:function(e){e.zoomEditor(1,!0)}}))}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(11),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0}),o.register({name:"deleteToEnd",key:"ctrl+k",action:function(e){n.IS_MAC&&e.execDeleteToEnd()}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(11),n(8)],void 0===(i=function(e,t,n,o){Object.defineProperty(t,"__esModule",{value:!0}),o.register({name:"deleteForward",key:"ctrl+d",action:function(e){n.IS_MAC&&e.execDeleteForward()}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(47),n(1),n(11),n(8)],void 0===(i=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:!0});var a={insertHeading_1:"1",insertHeading_2:"2",insertHeading_3:"3",insertHeading_4:"4"},s=function(e,t,n){o.log(t),null!=a[n]?e.execCmdByShortCut("comp.InsertHeading",{level:a[n]}):o.warn("Unsupported shortKey:",n)};n.isSafari()&&!i.IS_MAC||(r.register({name:"insertHeading_1",key:"mod+1",preventDefault:!0,action:s}),r.register({name:"insertHeading_2",key:"mod+2",preventDefault:!0,action:s}),r.register({name:"insertHeading_3",key:"mod+3",preventDefault:!0,action:s}),r.register({name:"insertHeading_4",key:"mod+4",preventDefault:!0,action:s}))}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(8)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n.register({name:"strikeout",key:"mod+e",action:function(e){e.toggleInlineStyle("strike")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(39),n(47),n(1),n(11),n(8)],void 0===(i=function(e,t,n,o,i,r,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,o){var r;if(i.log(t),"insertOrderList"===o)r=n.ORDERED;else{if("insertUnorderList"!==o)return void i.warn("Unsupported shortKey:",o);r=n.UNORDERED}e.execCmdByShortCut("comp.InsertList",{type:r})};o.isSafari()&&!r.IS_MAC||(a.register({name:"insertUnorderList",key:"mod+l",preventDefault:!0,action:s}),a.register({name:"insertOrderList",key:"mod+shift+l",preventDefault:!0,action:s}))}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(47),n(1),n(11),n(8)],void 0===(i=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:!0});n.isSafari()&&!i.IS_MAC||r.register({name:"insertTodo",key:"mod+d",preventDefault:!0,action:function(e,t,n){o.log(t,n),e.execCmdByShortCut("comp.InsertTodo",{checked:!1})}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(47),n(1),n(11),n(8)],void 0===(i=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:!0});n.isSafari()&&!i.IS_MAC||r.register({name:"insertHR",key:"mod+h",preventDefault:!0,action:function(e,t,n){o.log(t,n),e.execCmdByShortCut("comp.InsertHorizontalRule")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(47),n(1),n(11),n(8)],void 0===(i=function(e,t,n,o,i,r){Object.defineProperty(t,"__esModule",{value:!0});n.isSafari()&&!i.IS_MAC||r.register({name:"insertQuote",key:"ctrl+q",preventDefault:!0,action:function(e,t,n){o.log(t,n),e.execCmdByShortCut("comp.InsertQuote")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(47),n(11),n(8)],void 0===(i=function(e,t,n,o,i){Object.defineProperty(t,"__esModule",{value:!0});n.isSafari()&&!o.IS_MAC||i.register({name:"insertCode",key:"ctrl+alt+d",preventDefault:!0,action:function(e,t,n){e.execCmdByShortCut("comp.InsertCode")}})}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(27),o=n(0),i=n(6),r=n(19),a=n(11),s=n(7);return t.View.extend({className:"content-load-progress-view",events:{mouseenter:"_onMouseEnter",mouseleave:"_onMouseLeave"},_progressTracker:null,_$parentEl:null,_progressBarSlideTimer:null,_$messageView:null,_$percentNumberSpan:null,_$progressMark:null,initialize:function(e){this._progressTracker=e.progressTracker,this._$parentEl=e.$parentEl,this.render()},render:function(){var e,t=this.$el;e=r.render("common","content-load-progress"),t.html(e),i(this._$parentEl).before(t),this._$messageView=t.find(".progress-message"),this._$percentNumberSpan=t.find(".progress-message-number"),this._$progressMark=t.find(".progressbar-mark"),this.bindEvents()},bindEvents:function(){o.bindAll(this,"_onProgressUpdate","_onProgressStop"),this._progressTracker.on("progress-update",this._onProgressUpdate),this._progressTracker.on("progress-stop",this._onProgressStop)},_onMouseEnter:function(e){if(a.IS_PC){e.stopPropagation(),this._$messageView.stop(!0),this._$messageView.slideDown({duration:1e3})}},_onMouseLeave:function(e){if(a.IS_PC){e.stopPropagation(),this._$messageView.stop(!0),this._$messageView.slideUp({duration:1e3})}},_onProgressStop:function(){null!=this._progressBarSlideTimer&&(clearTimeout(this._progressBarSlideTimer),this._progressBarSlideTimer=null),this._$messageView.stop(!0),this.$el.hide(),this._$progressMark.width(0)},_onProgressUpdate:function(e){var t=this;if(o.isNumber(e.percent))if(e.percent>=1)t._onProgressStop();else if(0===e.percent){var n=a.IS_PC?s.LATENCY_TO_SHOW_SET_CONTENT_PROGRESS:0;t._progressBarSlideTimer=setTimeout(function(){t.$el.show(),a.IS_PC&&(t._$messageView.slideDown({duration:1e3}),t._progressBarSlideTimer=setTimeout(function(){t._$messageView.slideUp({duration:1e3})},1500))},n)}else t._$percentNumberSpan.text(parseInt(100*e.percent)+"%"),t._$progressMark.width(e.percent*t.$el.width())}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(17),n(0)],void 0===(i=function(e,t,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.stop=function(){this.trigger("progress-stop")},t.prototype.updateContentSetProgress=function(e){o.isNumber(e.percent)&&this.trigger("progress-update",e)},t.prototype.initialize=function(e){},t}(n)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(4),n(7),n(3),n(53),n(9),n(910),n(109),n(306),n(131),n(912),n(142),n(1),n(62),n(35),n(143),n(362),n(209),n(36),n(913)],void 0===(i=function(e,t,n,o,i,r,a,l,c,u,d,p,h,f,g,y,m,v,b,_,I,k){var w=k.convertor,C=k.utils;return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.buildCollabSession=function(t,o){g.log("buildCollabSession");var i,r,a=this;try{null!=t?r=JSON.parse(t):a.coreEditor.isLegacyHost()||(i="propsJSONStr should NOT be Null",g.debugAlert(i),a.trigger("callback-to-native",o,[{resultCode:0,message:i}])),n.isObject(r)||(r={}),e.prototype.buildCollabSession.call(this,r,function(e){a.trigger("callback-to-native",o,[{message:e.message,resultCode:e.resultCode}])})}catch(e){i=e.message,a.trigger("callback-to-native",o,[{resultCode:0,message:i}])}},t.prototype.clearHighlight=function(){g.log("clearHighlight"),this.coreEditor.clearHighlight()},t.prototype.closeCollabSession=function(){g.log("closeCollabSession"),e.prototype.closeCollabSession.call(this),this.coreEditor.toggleStats(!1)},t.prototype.doPaste=function(e,i,s,l,c,u){g.log("doPaste");var d,p,y,m,b=this.coreEditor,_=b.getController(),k=b.getNote(),w=null,C={};(b.getdefaultFontName()||b.getDefaultFontSize())&&(w=b.getDefaultStyle()),e&&(_.setPasteAsText(s),u=f.parseToBoolean(u,!1),i===t.DO_PASTE_CONTENT_TYPE.PLAIN?d=v.parsePlain(e,s?w:b.querySelectionInlineStyles(),b.querySelectionBlockStyles(),s):i!==t.DO_PASTE_CONTENT_TYPE.YNE_JSON&&i!==t.DO_PASTE_CONTENT_TYPE.HTML||(c&&(y=JSON.parse(c)),i===t.DO_PASTE_CONTENT_TYPE.HTML?(e=this.HANDLE_PASTE_OLD_CONTENT(e,y),d=v.parseHtml(e)):d=v.parseJSON(e),s?d=h(d):n.each(y,function(e,t){b.updateResMapWithKey(t,e,!0)})),d&&(d.forEach(function(e){r.isListItem(e)&&(m=e.getListId(),C[m]||(C[m]=I.getOrCreateListById(k.getAllBlocks(),m,e.getListType())),e.setOwnerList(C[m]))}),(p=function(e){var t,i;if(e&&e.length){if(t=n.filter(e,function(e){if(i=b.isCollabEnabled(),e.getBlockStyle("back-color")&&e.setBlockStyle("back-color",""),r.isAttachment(e)){if(u)return!1;if(!i&&/^http/i.test(e.getResource()))return!1}return e&&e.setId&&e.setId(o.newGUID()),!r.isTable(e)||function(e,t,n){var o;return!(1===e.getRowCount()&&1===e.getColumnCount()&&function(e,t,n){if(!e||!e.isAttachmentCell())return!1;if(t)return!0;if(!n){var o=e.getContent();if(o&&/^http/i.test(o.getResource()))return!0}return!1}(e.getCell(0,0),t,n)||(_.dragProhibited&&e.forEach(function(t,n){((o=e.getCell(t,n)).isImageCell()||o.isAttachmentCell())&&e.setCellContent(t,n,"")}),0))}(e,u,i)}),t=n.map(t,function(e){return r.isHandWrite(e)?new a({source:e.getSource(!1)}):e}),_.dragProhibited&&(t=t.filter(function(e){return!r.isImage(e)&&e})),t&&t.length>0){if(_.pasteForTable&&_.pasteForTable(t))return;b.execCommand("comp.InsertBlocks",{blocks:t,range:b.getNoteRange()})}return t}}(d))&&p.length>0&&b.trigger("yne-check-image",k.getNoteId(),k.getAllResourceInfo(d,[r.IMAGE]))))},t.prototype.enterFullScreen=function(){g.log("enterFullScreen"),this.coreEditor.enterFullScreen()},t.prototype.enterPresentation=function(e){g.log("enterPresentation"),this.coreEditor.enterPresentation(e)},t.prototype.exitFullScreen=function(){g.log("exitFullScreen"),this.coreEditor.exitFullScreen()},t.prototype.updateImageByOrigSrc=function(e,t,n){this.coreEditor.updateImageByOrigSrc(e,t,n)},t.prototype.focusEditor=function(){g.log("focusEditor"),this.coreEditor.focusEditor()},t.prototype.getCollabContent=function(t,n,o){g.log("getCollabContent");var i,r=this,a=r.coreEditor.getOutputType(t);return(i=e.prototype.getCollabContent.call(this,function(e){var t=e.content;t&&"json"===a&&(e.content=w.xml2json(t)),r.trigger("callback-to-native",n,[JSON.stringify(e)])},o))&&i.content&&"json"===a&&(i.content=w.xml2json(i.content)),JSON.stringify(i)},t.prototype.getContent=function(t,n,o){g.log("getContent");var i,r=this;null!=n&&(i=function(e){var t=e.content;"json"===a&&(t=w.xml2json(t)),r.trigger("callback-to-native",n,[{content:t,resultCode:e.status,status:e.status}])});var a=r.coreEditor.getOutputType(t),s=e.prototype.getContent.call(this,"html"===a,i,o);return s&&"json"===a&&(s=w.xml2json(s)),s},t.prototype.getFirstLineTextContent=function(){return g.log("getFirstLineTextContent"),this.coreEditor.getFirstLineTextContent()},t.prototype.getHtmlContent=function(t,n){g.log("getHtmlContent");var o,i,r=this,a=r.coreEditor;return o=e.prototype.getContent.call(this,!0,function(e){null!=(o=e.content)&&(i=a.getPcResMap(),o=_(o,i),o=d(o)),r.trigger("callback-to-native",t,[{type:"html",content:o,resultCode:e.status,status:e.status}])},n,!0)},t.prototype.getModifiers=function(t,o){g.log("getModifiers");var i,r=this,a=f.parseToNumber(t);return n.isNaN(a)&&r.trigger("callback-to-native",o,[JSON.stringify({status:2,errorCode:1})]),i=e.prototype.getModifiers.call(this,a,function(e){r.trigger("callback-to-native",o,[JSON.stringify(e)])}),JSON.stringify(i)},t.prototype.getNativeDisabledToolbarItemNames=function(){g.log("getNativeDisabledToolbarItemNames");var e,t,o=this.coreEditor.getNoteRange(),i={};return o&&(t=o.getStartBlockRange().block,r.isHeaderFooter(t)?n.extend(i,b.NATIVE_HEADER_FOOTER_DISABLED_MAP):o.isSingleTableSelected()?e=!0:r.isCatalogue(t)?n.extend(i,b.NATIVE_CATALOGUE_DISABLED_MAP):r.isCode(t)&&n.extend(i,b.NATIVE_CODE_DISABLED_MAP)),this.coreEditor.hasHandWriteBlock()&&n.extend(i,b.NATIVE_HANDWRITE_DISABLED_MAP),e&&n.extend(i,b.NATIVE_TABLE_DISABLED_MAP),JSON.stringify(n.keys(i))},t.prototype.getResourceMap=function(){g.log("getResourceMap");var e,t,o,i=this.coreEditor,r=i.getNote(),a=r.getAllBlocks(),s={};return t=r.getAllResourceInfo(),n.each(t,function(e){e&&(e.source&&e.extraSource&&(s[e.source]=e.extraSource),e.resource&&e.extraResource&&(s[e.resource]=e.extraResource))}),(o=r.getAllResouceIds())&&o.length&&(e=i.getPcResMap()||{},n.each(o,function(t){var n=e[t];n&&(s[t]=n)})),1===a.length&&a[0].isEmpty()&&this.focusEditor(),JSON.stringify(s)},t.prototype.getScrollPercent=function(){g.log("getScrollPercent");var e=this.coreEditor.getScrollPercent();return e=Math.round(e*t.SCROLL_PERCENT_RATIO)},t.prototype.getWordInfoFromPosition=function(e,t){var o,i,r;return g.log("getWordInfoFromPosition"),(o=document.caretRangeFromPoint(e,t))&&y.isText(o.commonAncestorContainer)?((i=document.createRange()).selectNode(o.commonAncestorContainer),r=i.getClientRects(),n.some(r,function(n){return n.top<t&&n.left<e&&n.bottom>t&&n.right>e})?o.startOffset+"|"+o.commonAncestorContainer.nodeValue:""):""},t.prototype.highlight=function(e){g.log("highlight");var t=JSON.parse(e);n.isString(t.words)?t.words=t.words.split(/\s+/):null==t.words&&(t.words=[]),n.each(t.images,function(e){e.height=parseInt(e.height,10),e.width=parseInt(e.width,10),n.each(e.pos,function(e){e.bottom=parseInt(e.bottom,10),e.left=parseInt(e.left,10),e.right=parseInt(e.right,10),e.top=parseInt(e.top,10)})}),this.coreEditor.highlight(t.words,t)},t.prototype.initializeEditor=function(e){g.log("initializeEditor");var t,r,a=0,s=this.coreEditor;try{if(!0===this.initializedByPC)return t="initializeEditor should only be called for one time",void g.debugAlert(t);r=JSON.parse(e),isNaN(this.options.buildVersion)&&(g.error("Invalid buildVersion:",this.options.buildVersion),this.options.buildVersion=922337203685477e4),(r=n.defaults(r,{buildVersion:this.options.buildVersion,backgroundURIJSON:[],shortCutsJSON:[],viewMode:0,pageType:i.PAGE_TYPE_A4,sessionId:o.newGUID()})).defaultFontSize=f.parseToNumber(r.defaultFontSize),s.updateEditorProps(r),s.setDefaultFont(r.defaultFontName,r.defaultFontSize),s.setAllBackgrounds(JSON.stringify(r.backgroundURIJSON),r.isVIPUser),this._setShortCut(r.shortCutsJSON),s.setViewMode(r.viewMode,!0,!1),s.showSaveSyncButton(!!r.showSaveSyncButton),s.setZoomPercent(r.zoomValue,r.isZoomPercent),a=1,this.initializedByPC=!0}catch(e){t="initializeEditor API:"+e.message,g.error(t),s.trigger("yne-log-to-native",0,t)}return a},t.prototype.insertAttachment=function(e){g.log("insertAttachment");var t=JSON.parse(e),n=this.coreEditor;n.updateResMapWithKey(t.source,t.localSource),n.updateResMapWithKey(t.resource,t.localResource),n.execCommand("comp.InsertAttachment",{fileLength:t.fileLength,fileName:t.fileName,resource:t.resource,retainStartBlock:t.retained,src:t.source})},t.prototype.insertCatalogue=function(){return g.log("insertCatalogue"),this.coreEditor.execCommand("comp.InsertCatalogue"),1},t.prototype.insertHorizontalLine=function(){g.log("insertHorizontalLine");return this.coreEditor.execCommand("comp.InsertHorizontalRule"),1},t.prototype.insertHyperlink=function(e){g.log("insertHyperlink");var t=0;return null!=e&&n.isString(e)&&""!==e&&(this.coreEditor.execCommand("comp.InsertLink",{src:e,styles:this.coreEditor.getController().getEditingInlineState()}),t=1),t},t.prototype.insertImage=function(e,t,n,o,i){g.log("insertImage");var r=this.coreEditor;r.getController().dragProhibited||(r.updateResMapWithKey(e,t,!1),r.execCommand("comp.InsertImage",{height:i,retainStartBlock:n,src:e,width:o}))},t.prototype.insertNoteLink=function(e,t){if(g.log("insertNoteLink"),e&&t){var n,o,i=this.coreEditor,r=p.fillAsUrl(e);o=(n=new l({text:t})).getLength(),n.setStyles(0,o,{color:"rgb(0, 56, 132)",href:r,underline:!0}),i.insertText(n,!1)}},t.prototype.insertTable=function(e,t){g.log("insertTable");var n=0;return e=f.parseToNumber(e,0),t=f.parseToNumber(t,0),null!=e&&e>0&&null!=t&&t>0&&(this.coreEditor.execCommand("comp.InsertTable",{cols:t,rows:e}),n=1),n},t.prototype.insertTodo=function(){g.log("insertTodo"),this.coreEditor.execCommand("comp.InsertTodo",{checked:!1})},t.prototype.isCaretInFirstTextLine=function(e){return g.log("isCaretInFirstTextLine"),this.coreEditor.isCaretInFirstTextLine(e)},t.prototype.isReadyToClose=function(){if(g.log("isReadyToClose"),this.coreEditor.isLegacyHost())return e.prototype.isReadyToClose.call(this);g.debugAlert("isReadyToClose should not be invoked after PC6.0")},t.prototype.reset=function(t){g.log("reset"),e.prototype.reset.call(this),t&&this.coreEditor.isLegacyHost()&&this.resetEditorOptions(t)},t.prototype.resetEditorOptions=function(t){g.log("resetEditorOptions");var o=t;this.coreEditor.isLegacyHost()?(n.isString(o)&&(o=JSON.parse(t)),n.isString(o.collabServer)&&(o.collabServer=JSON.parse(o.collabServer)),n.isString(o.userInfo)&&(o.userInfo=JSON.parse(o.userInfo)),o.isCollabEnabled=f.parseToBoolean(o.isCollabEnabled,!1),e.prototype.resetEditorOptions.call(this,o)):g.debugAlert("resetEditorOptions should not be invoked after PC6.0")},t.prototype.rotateSaveSyncIcon=function(e){g.log("rotateSaveSyncIcon"),this.coreEditor.isLegacyHost()?this.coreEditor.rotateSaveSyncIcon(!!e):g.debugAlert("rotateSaveSyncIcon should not be invoked after PC6.0")},t.prototype.saveNotification=function(t,o){g.log("saveNotification");var i=f.parseToNumber(t),r=f.parseToBoolean(o);if(n.isNaN(i)||null===r)throw new Error("invalid format of savedNoteVersion/isHistorySave"+t+"/"+o);e.prototype.saveNotification.call(this,i,r)},t.prototype.selectCtxMenu=function(e){g.log("selectCtxMenu"),this.trigger("select-context-menu",e)},t.prototype.setCaretPosition=function(e,t){g.log("setCaretPosition"),this.coreEditor.setCaretPosition(e,t)},t.prototype.setContent=function(e,o,r,a){g.log("setContent");var s,l,c,u,d,p=this,h=p.coreEditor,f="html";try{if(h.trigger("bridge-off-events"),d=function(e){e.type=f,e.callbackUID=a,e.hasHandWrite=h.hasHandWriteBlock(),null!=c&&(s=(c.scrollPercent||0)/t.SCROLL_PERCENT_RATIO,h.setScrollPercentWithDelay(s)),p._setContentCallBack(e)},null!=o&&n.isString(o)&&""!==o.trim()&&(l=JSON.parse(o)),null==r||n.isNumber(r)?(c=p.options||{}).scrollPercent=r:c=JSON.parse(r),c=n.defaults(c,{bgImageId:i.DEFAULT_BACKGROUND,disableBackground:!1,disableOCR:!1,hasOriginFile:!1,hideAttendeeHint:!1,isCollabEnabled:!1,isOCR:!1,ocrType:"ms",ocrParseParagraph:!0,isCopyProhibited:!1,isDragProhibited:!1,ocrParseIndent:!0,isReadOnly:!1,scrollPercent:0,todoContents:{}}),e=$.trim(e),c.isOCR)f="html";else{var y=C.getActualContent(e);y&&y.type&&(f=y.type),y.content&&(this.coreEditor.setDataFixed(e!==y.content),e=y.content)}h.setInputType(f),"json"===f&&(e=w.json2xml(e)),"html"===f?(h.setHtmlContent(e,l,c,d),h.getNote().setValidForCollab(!1)):h.setXmlContent(e,l,c,d),h.getNote().isEmptyContent()&&h.useDefaultFontAsEditingStyle()}catch(e){if(u=e.message,g.DEBUG)throw e;g.error(u),h.trigger("yne-log-to-native",0,u),null!=d&&d({resultCode:0,message:u})}},t.prototype.setDefaultFont=function(e,t){g.log("setDefaultFont"),t=parseInt(t+"",10),this.coreEditor.setDefaultFont(e,t),this.coreEditor.getController().setDefaultFont(e,t)},t.prototype.setPageMode=function(e){g.log("setPageMode"),this.coreEditor.isLegacyHost()||!this.coreEditor.isNotSetContent()?this.coreEditor.setViewMode(e,!0,!1):g.debugAlert("setPageMode should NOT be called before setContent")},t.prototype.setShortCut=function(e){var t;g.log("setShortCut"),t=JSON.parse(e),this._setShortCut(t)},t.prototype.setZoomPercent=function(e,t){g.log("setZoomPercent"),this.coreEditor.isLegacyHost()?g.debugAlert("method of setZoomPercent CAN NOT be called in less-than-6.0 PC version"):this.coreEditor.setZoomPercent(e,t)},t.prototype.showSaveSyncButton=function(e){g.log("showSaveSyncButton"),this.coreEditor.isLegacyHost()?(e=!!e,this.coreEditor.showSaveSyncButton(e)):g.debugAlert("setDefaultFont should not be invoked after PC6.0")},t.prototype.toggleAttendeeHint=function(t){g.log("toggleAttendeeHint");var n=f.parseToBoolean(t);this.coreEditor.isLegacyHost()?(null===n&&(n=!0),e.prototype.toggleAttendeeHint.call(this,n),this.coreEditor.toggleAttendeeHint(t)):g.debugAlert("toggleAttendeeHint should not be invoked after PC6.0")},t.prototype.toggleToolbar=function(e){g.log("toggleToolbar"),this.coreEditor.toggleToolbar(e)},t.prototype.triggerEvent=function(e){g.log("triggerEvent: editor api trigger: "+e);var t=n.toArray(arguments);this.trigger("bridge-event",t)},t.prototype.updateAttachment=function(e,t,o,i){g.log("updateAttachment");var a,s,l,c,u=JSON.parse(t),d=this.coreEditor,p=d.getNote(),h=[];if(i){if(!(a=p.getBlockById(i))||!r.isAttachment(a))return;h=[a]}else h=p.getAttachmentByResource(e);h&&h.length?(o=!1!==o,n.each(h,function(e){l=u.source||e.getSource(),c=u.resource||e.getResource(),u.localSource&&d.updateResMapWithKey(l,u.localSource),u.localResource&&d.updateResMapWithKey(c,u.localResource),o?d.execCommand("attachment.Replace",{attachment:e,fileLength:u.fileLength||e.getFileLength(),fileName:u.fileName||e.getFileName(),resource:c,src:l}):(s=["Source","Resource","FileName","FileLength"],n.each(s,function(t){var n="set"+t,o=t.substring(0,1).toLowerCase()+t.substring(1),i=u[o];i&&e[n](i)}))})):g.warn("Can not find attachment by resource: "+e)},t.prototype.updateImage=function(e,t,n,o,i,r,a){g.log("updateImage"),this.coreEditor.isLegacyHost()?this._updateImage(e,t,n,o,i,r,a):g.debugAlert("updateImage should NOT be called after PC 6.0")},t.prototype.updateImageV2=function(e){g.log("updateImageV2");var t=JSON.parse(e);this._updateImage(t.source,t.newSource,t.newLocalSource,t.triggerContentChange,t.blockId,t.width,t.height)},t.prototype.updateUserInfo=function(e){g.log("updateUserInfo");var t=JSON.parse(e);this.coreEditor.updateUserInfo(t)},t.prototype.GET_ENCODED_SRC=function(e){var t,n=document.createElement("img");return n.setAttribute("src",e),t=n.src,n=null,t},t.prototype.HANDLE_PASTE_OLD_CONTENT=function(e,t){var o=this;if(!e||!t)return e;var i=m(e),r=n.toArray(i.querySelectorAll("img[data-media-type=attachment]"));return n.each(r,function(e){var i,r,a=e.getAttribute("data-res-id"),s=e.getAttribute("src");s=o.GET_ENCODED_SRC(s),n.some(t,function(e,t){if((e=o.GET_ENCODED_SRC(e))===s)return i=t,!0}),i?(r={filelength:e.getAttribute("data-file-length"),path:a,src:i},o.SET_ATTRS(r,e)):e.parentNode.removeChild(e)}),r=n.toArray(i.querySelectorAll("img[data-media-type=image]")),n.each(r,function(e){var t,n=e.getAttribute("data-attr-org-src-id");n?(t={src:n},o.SET_ATTRS(t,e)):e.parentNode.removeChild(e)}),e=i.innerHTML},t.prototype.SET_ATTRS=function(e,t){n.each(e,function(e,n){e&&t.setAttribute(n,e)})},t.prototype._setContentCallBack=function(e){this.coreEditor.isLegacyHost()||null==e.callbackUID||this.trigger("callback-to-native",e.callbackUID,[{hasHandWrite:!!e.hasHandWrite,type:e.type,message:e.message,resultCode:e.resultCode}]),this.coreEditor.isCollabEnabled()&&1===e.resultCode&&this.coreEditor.noteSetNotification()},t.prototype._setShortCut=function(e){var t=this.coreEditor;e&&e.length&&n.each(e,function(e){if(e.name)if(0!==e.keyCode){var o=function(e){var t=[],o=e.keyCode,i=n.isNumber(o)?u.getKey(o):o;if(i)return i=(i+"").toLowerCase(),n.each(["ctrl","alt","shift"],function(n){!0===e[n]&&t.push(n)}),t.push(i),t.join("+")}(e);o&&t.updateShortCut(e.name,o)}else t.removeShortCut(e.name)})},t.prototype._updateImage=function(e,t,o,i,a,s,l){if(t||o){var c,u=this.coreEditor,d=u.getNote(),p=[];if(a){if(!(c=d.getBlockById(a))||!r.isImage(c))return;p=[c]}else p=d.getImageBySource(e,!1);p&&p.length?(i=!1!==i,n.each(p,function(e){i?(t=t||e.getSource(),o&&u.updateResMapWithKey(t,o,!1),u.execCommand("comp.ReplaceResource",{heights:[l],resProps:[{source:t}],resources:[e],widths:[s]})):(t&&e.setSource(t),o&&u.updateResMapWithKey(t||e.getSource(),o,!0))})):g.warn("Can not find image by source: "+e)}},t.SCROLL_PERCENT_RATIO=1e4,t.DO_PASTE_CONTENT_TYPE={PLAIN:1,HTML:2,YNE_JSON:3},t}(c)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(7),n(911),n(1)],void 0===(i=function(e,t,n,o,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.buildCollabSession=function(e,t){var n,o=0;try{if(t=t||function(){},n=this.coreEditor.getEditorProps(),null==e&&((e={}).shareKey=n.shareKey,e.sessionType=n.sessionType,null!=n.sessionId&&(e.sessionId=n.sessionId)),e.buildVersion=n.buildVersion,e.userInfo=n.userInfo,e.collabServer=n.collabServer,null==e.shareKey||"undefined"===e.shareKey)return t({resultCode:0,message:"shareKey should NOT be null"}),0;this.closeCollabSession(),this.coreEditor.buildCollabSession(e,t),o=1}catch(e){t({resultCode:0,message:e.message})}return o},t.prototype.closeCollabSession=function(){this.coreEditor.closeCollabSession(n.WSEVENTID_HOST_CLOSE,"NormalQuit")},t.prototype.getCollabContent=function(e,t){var n;e=e||function(){};try{return this.coreEditor&&this.coreEditor.isCollabEnabled()?n=this.coreEditor.getCollabContent(e,t):(e(n={status:2,resultCode:2,message:"Not-Collab-Enabled"}),n)}catch(t){return e(n={status:3,resultCode:3,message:t.message}),n}},t.prototype.getModifiers=function(e,t){var n;t=t||function(){};try{return this.coreEditor&&this.coreEditor.isCollabEnabled()?this.coreEditor.getModifiers(e,t):(t(n={status:2,resultCode:2,message:"Not-Collab-Enabled"}),n)}catch(e){return t(n={status:3,resultCode:3,message:e.message}),n}},t.prototype.isReadyToClose=function(){var e=!0;return this.coreEditor&&!this.coreEditor.isLegacyHost()?(i.debugAlert("isReadyToClose should NOT be called in new host"),!1):(this.coreEditor&&this.coreEditor.isCollabEnabled()&&(e=!this.coreEditor.hasCachedDataCmd()),e)},t.prototype.reset=function(){this.coreEditor.reset()},t.prototype.resetEditorOptions=function(e){!this.coreEditor||this.coreEditor.isLegacyHost()?this.coreEditor.updateEditorOptions(e):i.debugAlert("resetEditorOptions should NOT be called in new Host")},t.prototype.saveNotification=function(e,t){this.coreEditor&&this.coreEditor.isCollabEnabled()&&this.coreEditor.saveNotification(e,t)},t.prototype.toggleAttendeeHint=function(e){!this.coreEditor||this.coreEditor.isLegacyHost()||i.debugAlert("toggleAttendeeHint should NOT be called in New Host")},t.prototype.destroyCollabEngine=function(){this.closeCollabSession()},t.prototype.isNotSetContent=function(){return this.coreEditor.isNotSetContent()},t.prototype.saveFile=function(e){this.coreEditor.testSendMsgToCollabServer(e)},t}(o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";var a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});o=[n,r,n(0),n(7),n(17),n(1)],void 0===(i=function(e,t,n,o,i,r){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.focus=function(){return this.coreEditor.focus()},t.prototype.getContent=function(e,t,n,o){e=!!e||this.coreEditor.hasHandWriteBlock(),o=!!o;try{return!0===e?this.coreEditor.getHtmlContent(o,t,n):this.coreEditor.getXmlContent(t,n)}catch(e){null!=t&&t({status:0,resultCode:2,message:e.message})}},t.prototype.getNoteVersion=function(){return this.coreEditor.getNoteVersion()},t.prototype.getSchemaVersion=function(){return this.coreEditor.getSchemaVersion()},t.prototype.getEditorVersion=function(){return 1587118833e3},t.prototype.resetFont=function(){return this.coreEditor.resetFont()},t.prototype.setAllBackgrounds=function(e,t){if(!this.coreEditor||this.coreEditor.isLegacyHost())return this.coreEditor.setAllBackgrounds(e,t);r.debugAlert("setAllBackgrounds shoud NOT be called in new host")},t.prototype.setBackground=function(e){if(!this.coreEditor||this.coreEditor.isLegacyHost()||!this.coreEditor.isNotSetContent())return this.coreEditor.setBackground(e);r.debugAlert("setBackground shoud NOT be called before setContent")},t.prototype.setContent=function(e,t,i,a,s){var l=this;try{var c=function(e){l.coreEditor.isCollabEnabled()&&1===e.resultCode&&l.coreEditor.noteSetNotification(),null!=s&&s(e)};null==a&&(a=this.options||{}),a=n.defaults(a,{bgImageId:o.DEFAULT_BACKGROUND,disableBackground:!1,isCollabEnabled:!1,isReadOnly:!1,isAsync:!1}),!0===t?this.coreEditor.setHtmlContent(e,i,a,c):this.coreEditor.setXmlContent(e,i,a,c)}catch(e){r.error(e),null!=s&&s({resultCode:0,message:e.message})}},t.prototype.setFont=function(e,t){return this.coreEditor.setFont(e,t)},t.prototype.setReadOnly=function(e){!this.coreEditor||this.coreEditor.isLegacyHost()?this.coreEditor.setReadOnly(e):r.debugAlert("setReadOnly shoud NOT be called in new host")},t.prototype.setDragProhibited=function(e){this.coreEditor.setDragProhibited(e)},t.prototype.setCopyProhibited=function(e){this.coreEditor.setReadOnly(e)},t.prototype.setEntity=function(e,t){null!=e&&n.isString(e)&&""!==e.trim()&&(e=JSON.parse(e)),this.coreEditor.setEntity(e,t)},t.prototype.refreshPageMode=function(){var e=this.coreEditor.getNote();e&&e.blocks&&e.blocks[0]&&e.blocks[0].trigger("content-change")},t.prototype.initialize=function(e){},t}(i)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(3),o=n(16),i=n(0);return function(e){var n=i.filter(e,function(e){return!t.isImage(e)&&!t.isAttachment(e)&&!t.isHandWrite(e)});return n=i.map(n,function(e){var n;return e.removeAllStyles(),t.isListItem(e)||t.isHeading(e)||t.isCatalogue(e)||t.isTodo(e)?(n=o.createBlank(!1)).setText(e.getText()):n=e,n})}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){(function(o,i){var r,a,s=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};void 0===(r=function(t,r){"use strict";e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=356)}([function(e,t,n){var o=n(2),i=n(8),r=n(15),a=n(12),s=n(19),l=function(e,t,n){var c,u,d,p,h=e&l.F,f=e&l.G,g=e&l.S,y=e&l.P,m=e&l.B,v=f?o:g?o[t]||(o[t]={}):(o[t]||{}).prototype,b=f?i:i[t]||(i[t]={}),_=b.prototype||(b.prototype={});for(c in f&&(n=t),n)d=((u=!h&&v&&void 0!==v[c])?v:n)[c],p=m&&u?s(d,o):y&&"function"==typeof d?s(Function.call,d):d,v&&a(v,c,d,e&l.U),b[c]!=d&&r(b,c,p),y&&_[c]!=d&&(_[c]=d)};o.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){e.exports=n(358)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var o=n(5);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var o=n(60)("wks"),i=n(37),r=n(2).Symbol,a="function"==typeof r;(e.exports=function(e){return o[e]||(o[e]=a&&r[e]||(a?r:i)("Symbol."+e))}).store=o},function(e,t,n){var o=n(21),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(4),i=n(114),r=n(32),a=Object.defineProperty;t.f=n(9)?Object.defineProperty:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(28);e.exports=function(e){return Object(o(e))}},function(e,t,n){var o=n(2),i=n(15),r=n(14),a=n(37)("src"),s=n(154),l=(""+s).split("toString");n(8).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(r(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(r(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===o?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t,n){var o=n(0),i=n(3),r=n(28),a=/"/g,s=function(e,t,n,o){var i=String(r(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(o).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),o(o.P+o.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(10),i=n(36);e.exports=n(9)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(53),i=n(28);e.exports=function(e){return o(i(e))}},function(e,t,n){var o=n(3);e.exports=function(e,t){return!!e&&o(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){n.d(t,"a",function(){return o});var o=function(e,t){var n=function(e){if(Array.isArray(e))return e.forEach(n);e&&"object"==typeof e&&Object.keys(e).forEach(function(o){var i=e[o];t(o,i,e),i&&n(i)})};n(e)}},function(e,t,n){var o=n(20);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t,n){var o=n(54),i=n(36),r=n(16),a=n(32),s=n(14),l=n(114),c=Object.getOwnPropertyDescriptor;t.f=n(9)?c:function(e,t){if(e=r(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){var o=n(0),i=n(8),r=n(3);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),o(o.S+o.F*r(function(){n(1)}),"Object",a)}},function(e,t,n){var o=n(19),i=n(53),r=n(11),a=n(7),s=n(130);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d,h=t||s;return function(t,s,f){for(var g,y,m=r(t),v=i(m),b=o(s,f,3),_=a(v.length),I=0,k=n?h(t,_):l?h(t,0):void 0;_>I;I++)if((p||I in v)&&(y=b(g=v[I],I,m),e))if(n)k[I]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return I;case 2:k.push(g)}else if(u)return!1;return d?-1:c||u?u:k}}},function(e,t,n){var o=n(72),i="object"==typeof self&&self&&self.Object===Object&&self,r=o.a||i||Function("return this")();t.a=r},function(e,t,n){t.a=function(e){return null!=e&&"object"==typeof e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){if(n(9)){var o=n(38),i=n(2),r=n(3),a=n(0),s=n(71),l=n(102),c=n(19),u=n(51),d=n(36),p=n(15),h=n(52),f=n(21),g=n(7),y=n(141),m=n(40),v=n(32),b=n(14),_=n(55),I=n(5),k=n(11),w=n(94),C=n(41),S=n(43),x=n(42).f,A=n(96),T=n(37),N=n(6),E=n(24),D=n(61),M=n(56),O=n(98),L=n(49),B=n(64),R=n(50),P=n(97),j=n(132),F=n(10),z=n(22),H=F.f,G=z.f,V=i.RangeError,U=i.TypeError,W=i.Uint8Array,J=Array.prototype,Z=l.ArrayBuffer,Y=l.DataView,Q=E(0),X=E(2),$=E(3),K=E(4),q=E(5),ee=E(6),te=D(!0),ne=D(!1),oe=O.values,ie=O.keys,re=O.entries,ae=J.lastIndexOf,se=J.reduce,le=J.reduceRight,ce=J.join,ue=J.sort,de=J.slice,pe=J.toString,he=J.toLocaleString,fe=N("iterator"),ge=N("toStringTag"),ye=T("typed_constructor"),me=T("def_constructor"),ve=s.CONSTR,be=s.TYPED,_e=s.VIEW,Ie=E(1,function(e,t){return xe(M(e,e[me]),t)}),ke=r(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),we=!!W&&!!W.prototype.set&&r(function(){new W(1).set({})}),Ce=function(e,t){var n=f(e);if(n<0||n%t)throw V("Wrong offset!");return n},Se=function(e){if(I(e)&&be in e)return e;throw U(e+" is not a typed array!")},xe=function(e,t){if(!(I(e)&&ye in e))throw U("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Te(M(e,e[me]),t)},Te=function(e,t){for(var n=0,o=t.length,i=xe(e,o);o>n;)i[n]=t[n++];return i},Ne=function(e,t,n){H(e,t,{get:function(){return this._d[n]}})},Ee=function(e){var t,n,o,i,r,a,s=k(e),l=arguments.length,u=l>1?arguments[1]:void 0,d=void 0!==u,p=A(s);if(null!=p&&!w(p)){for(a=p.call(s),o=[],t=0;!(r=a.next()).done;t++)o.push(r.value);s=o}for(d&&l>2&&(u=c(u,arguments[2],2)),t=0,n=g(s.length),i=xe(this,n);n>t;t++)i[t]=d?u(s[t],t):s[t];return i},De=function(){for(var e=0,t=arguments.length,n=xe(this,t);t>e;)n[e]=arguments[e++];return n},Me=!!W&&r(function(){he.call(new W(1))}),Oe=function(){return he.apply(Me?de.call(Se(this)):Se(this),arguments)},Le={copyWithin:function(e,t){return j.call(Se(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return K(Se(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return P.apply(Se(this),arguments)},filter:function(e){return Ae(this,X(Se(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return q(Se(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Se(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Se(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Se(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Se(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Se(this),arguments)},lastIndexOf:function(e){return ae.apply(Se(this),arguments)},map:function(e){return Ie(Se(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Se(this),arguments)},reduceRight:function(e){return le.apply(Se(this),arguments)},reverse:function(){for(var e,t=Se(this).length,n=Math.floor(t/2),o=0;o<n;)e=this[o],this[o++]=this[--t],this[t]=e;return this},some:function(e){return $(Se(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Se(this),e)},subarray:function(e,t){var n=Se(this),o=n.length,i=m(e,o);return new(M(n,n[me]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?o:m(t,o))-i))}},Be=function(e,t){return Ae(this,de.call(Se(this),e,t))},Re=function(e){Se(this);var t=Ce(arguments[1],1),n=this.length,o=k(e),i=g(o.length),r=0;if(i+t>n)throw V("Wrong length!");for(;r<i;)this[t+r]=o[r++]},Pe={entries:function(){return re.call(Se(this))},keys:function(){return ie.call(Se(this))},values:function(){return oe.call(Se(this))}},je=function(e,t){return I(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return je(e,t=v(t,!0))?d(2,e[t]):G(e,t)},ze=function(e,t,n){return!(je(e,t=v(t,!0))&&I(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(e,t,n):(e[t]=n.value,e)};ve||(z.f=Fe,F.f=ze),a(a.S+a.F*!ve,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:ze}),r(function(){pe.call({})})&&(pe=he=function(){return ce.call(this)});var He=h({},Le);h(He,Pe),p(He,fe,Pe.values),h(He,{slice:Be,set:Re,constructor:function(){},toString:pe,toLocaleString:Oe}),Ne(He,"buffer","b"),Ne(He,"byteOffset","o"),Ne(He,"byteLength","l"),Ne(He,"length","e"),H(He,ge,{get:function(){return this[be]}}),e.exports=function(e,t,n,l){var c=e+((l=!!l)?"Clamped":"")+"Array",d="get"+e,h="set"+e,f=i[c],m=f||{},v=f&&S(f),b=!f||!s.ABV,k={},w=f&&f.prototype,A=function(e,n){H(e,n,{get:function(){return function(e,n){var o=e._d;return o.v[d](n*t+o.o,ke)}(this,n)},set:function(e){return function(e,n,o){var i=e._d;l&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),i.v[h](n*t+i.o,o,ke)}(this,n,e)},enumerable:!0})};b?(f=n(function(e,n,o,i){u(e,f,c,"_d");var r,a,s,l,d=0,h=0;if(I(n)){if(!(n instanceof Z||"ArrayBuffer"==(l=_(n))||"SharedArrayBuffer"==l))return be in n?Te(f,n):Ee.call(f,n);r=n,h=Ce(o,t);var m=n.byteLength;if(void 0===i){if(m%t)throw V("Wrong length!");if((a=m-h)<0)throw V("Wrong length!")}else if((a=g(i)*t)+h>m)throw V("Wrong length!");s=a/t}else s=y(n),r=new Z(a=s*t);for(p(e,"_d",{b:r,o:h,l:a,e:s,v:new Y(r)});d<s;)A(e,d++)}),w=f.prototype=C(He),p(w,"constructor",f)):r(function(){f(1)})&&r(function(){new f(-1)})&&B(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=n(function(e,n,o,i){var r;return u(e,f,c),I(n)?n instanceof Z||"ArrayBuffer"==(r=_(n))||"SharedArrayBuffer"==r?void 0!==i?new m(n,Ce(o,t),i):void 0!==o?new m(n,Ce(o,t)):new m(n):be in n?Te(f,n):Ee.call(f,n):new m(y(n))}),Q(v!==Function.prototype?x(m).concat(x(v)):x(m),function(e){e in f||p(f,e,m[e])}),f.prototype=w,o||(w.constructor=f));var T=w[fe],N=!!T&&("values"==T.name||null==T.name),E=Pe.values;p(f,ye,!0),p(w,be,c),p(w,_e,!0),p(w,me,f),(l?new f(1)[ge]==c:ge in w)||H(w,ge,{get:function(){return c}}),k[c]=f,a(a.G+a.W+a.F*(f!=m),k),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*r(function(){m.of.call(f,1)}),c,{from:Ee,of:De}),"BYTES_PER_ELEMENT"in w||p(w,"BYTES_PER_ELEMENT",t),a(a.P,c,Le),R(c),a(a.P+a.F*we,c,{set:Re}),a(a.P+a.F*!N,c,Pe),o||w.toString==pe||(w.toString=pe),a(a.P+a.F*r(function(){new f(1).slice()}),c,{slice:Be}),a(a.P+a.F*(r(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!r(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Oe}),L[c]=N?T:E,o||N||p(w,fe,E)}}else e.exports=function(){}},function(e,t,n){var o=n(25).a.Symbol;t.a=o},function(e,t,n){var o=n(30),i=Object.prototype,r=i.hasOwnProperty,a=i.toString,s=o.a?o.a.toStringTag:void 0,l=Object.prototype.toString,c=o.a?o.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=r.call(e,s),n=e[s];try{e[s]=void 0;var o=!0}catch(e){}var i=a.call(e);return o&&(t?e[s]=n:delete e[s]),i}(e):function(e){return l.call(e)}(e)}},function(e,t,n){var o=n(5);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var o=n(37)("meta"),i=n(5),r=n(14),a=n(10).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(3)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,o,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,o)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[o].i},getWeak:function(e,t){if(!r(e,o)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[o].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!r(e,o)&&u(e),e}}},function(e,t,n){t.a=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var o=Array.isArray;t.a=o},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var o=n(116),i=n(81);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){var o=n(21),i=Math.max,r=Math.min;e.exports=function(e,t){return(e=o(e))<0?i(e+t,0):r(e,t)}},function(e,t,n){var o=n(4),i=n(117),r=n(81),a=n(80)("IE_PROTO"),s=function(){},l=function(){var e,t=n(78)("iframe"),o=r.length;for(t.style.display="none",n(82).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;o--;)delete l.prototype[r[o]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=o(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var o=n(116),i=n(81).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},function(e,t,n){var o=n(14),i=n(11),r=n(80)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),o(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var o=n(6)("unscopables"),i=Array.prototype;null==i[o]&&n(15)(i,o,{}),e.exports=function(e){i[o][e]=!0}},function(e,t,n){var o=n(5);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},,function(e,t,n){var o=n(10).f,i=n(14),r=n(6)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,r)&&o(e,r,{configurable:!0,value:t})}},function(e,t,n){var o=n(0),i=n(28),r=n(3),a=n(84),s="["+a+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e,t,n){var i={},s=r(function(){return!!a[e]()||"​"!="​"[e]()}),l=i[e]=s?t(d):a[e];n&&(i[n]=l),o(o.P+o.F*s,"String",i)},d=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,n){var o=n(2),i=n(10),r=n(9),a=n(6)("species");e.exports=function(e){var t=o[e];r&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var o=n(12);e.exports=function(e,t,n){for(var i in t)o(e,i,t[i],n);return e}},function(e,t,n){var o=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var o=n(27),i=n(6)("toStringTag"),r="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:r?o(t):"Object"==(a=o(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var o=n(4),i=n(20),r=n(6)("species");e.exports=function(e,t){var n,a=o(e).constructor;return void 0===a||null==(n=o(a)[r])?t:i(n)}},function(e,t,n){(function(e){var o=n(72),i=r&&!r.nodeType&&r,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i&&o.a.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=l}).call(this,n(113)(e))},function(e,t,n){t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var o=n(112),i=n(74),r=n(107),a=Object(r.a)(Object.keys,Object),s=Object.prototype.hasOwnProperty,l=n(108);t.a=function(e){return Object(l.a)(e)?Object(o.a)(e):function(e){if(!Object(i.a)(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}},function(e,t,n){var o=n(8),i=n(2),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:n(38)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var o=n(16),i=n(7),r=n(40);e.exports=function(e){return function(t,n,a){var s,l=o(t),c=i(l.length),u=r(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var o=n(27);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,n){var o=n(6)("iterator"),i=!1;try{var r=[7][o]();r.return=function(){i=!0},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var r=[7],a=r[o]();a.next=function(){return{done:n=!0}},r[o]=function(){return a},e(r)}catch(e){}return n}},function(e,t,n){var o=n(4);e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var o=n(55),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==o(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){n(134);var o=n(12),i=n(15),r=n(3),a=n(28),s=n(6),l=n(99),c=s("species"),u=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var p=s(e),h=!r(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),f=h?!r(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t}):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var g=/./[p],y=n(a,p,""[e],function(e,t,n,o,i){return t.exec===l?h&&!i?{done:!0,value:g.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),m=y[0],v=y[1];o(String.prototype,e,m),i(RegExp.prototype,p,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},function(e,t,n){var o=n(19),i=n(129),r=n(94),a=n(4),s=n(7),l=n(96),c={},u={};(t=e.exports=function(e,t,n,d,p){var h,f,g,y,m=p?function(){return e}:l(e),v=o(n,d,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(r(m)){for(h=s(e.length);h>b;b++)if((y=t?v(a(f=e[b])[0],f[1]):v(e[b]))===c||y===u)return y}else for(g=m.call(e);!(f=g.next()).done;)if((y=i(g,v,f.value,t))===c||y===u)return y}).BREAK=c,t.RETURN=u},function(e,t,n){var o=n(2).navigator;e.exports=o&&o.userAgent||""},function(e,t,n){var o=n(2),i=n(0),r=n(12),a=n(52),s=n(33),l=n(68),c=n(51),u=n(5),d=n(3),p=n(64),h=n(47),f=n(85);e.exports=function(e,t,n,g,y,m){var v=o[e],b=v,_=y?"set":"add",I=b&&b.prototype,k={},w=function(e){var t=I[e];r(I,e,"delete"==e||"has"==e?function(e){return!(m&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(m||I.forEach&&!d(function(){(new b).entries().next()}))){var C=new b,S=C[_](m?{}:-0,1)!=C,x=d(function(){C.has(1)}),A=p(function(e){new b(e)}),T=!m&&d(function(){for(var e=new b,t=5;t--;)e[_](t,t);return!e.has(-0)});A||((b=t(function(t,n){c(t,b,e);var o=f(new v,t,b);return null!=n&&l(n,y,o[_],o),o})).prototype=I,I.constructor=b),(x||T)&&(w("delete"),w("has"),y&&w("get")),(T||S)&&w(_),m&&I.clear&&delete I.clear}else b=g.getConstructor(t,e,y,_),a(b.prototype,n),s.NEED=!0;return h(b,e),k[e]=b,i(i.G+i.W+i.F*(b!=v),k),m||g.setStrong(b,e,y),b}},function(e,t,n){for(var o,i=n(2),r=n(15),a=n(37),s=a("typed_array"),l=a("view"),c=!(!i.ArrayBuffer||!i.DataView),u=c,d=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(o=i[p[d++]])?(r(o.prototype,s,!0),r(o.prototype,l,!0)):u=!1;e.exports={ABV:c,CONSTR:u,TYPED:s,VIEW:l}},function(e,t,n){var i="object"==typeof o&&o&&o.Object===Object&&o;t.a=i},function(e,t,n){(function(e){var o=n(25),i=n(147),a=r&&!r.nodeType&&r,s=a&&"object"==typeof e&&e&&!e.nodeType&&e,l=s&&s.exports===a?o.a.Buffer:void 0,c=(l?l.isBuffer:void 0)||i.a;t.a=c}).call(this,n(113)(e))},function(e,t,n){var o=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}},function(e,t,n){t.a=function(e){return function(t){return e(t)}}},function(e,t,n){var o=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&o.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){n.d(t,"a",function(){return p});var o=n(352),i=n(18);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=Object.freeze(a({},{value:"0",document:"1",type:"2",id:"3",data:"4",nodes:"5",name:"6",leaves:"7",text:"8",marks:"9"},{},{footer:"ft",page:"p",level:"l",style:"s",href:"hf",url:"u",width:"w",height:"h",targetId:"ta",header:"hd",language:"la",theme:"th",resource:"re",source:"sr",fileName:"fn",fileLength:"fl",colsWidth:"cw",rowsHeight:"rh",colSpan:"cs",rowSpan:"rs",checked:"c",resourceId:"ri",listId:"li",listType:"lt",listLevel:"ll",templateId:"tp",fileVersion:"fv"},{},{textAlign:"t",textIndent:"ti",lineHeight:"lh",backgroundColor:"bg",padding:"pd",margin:"mg",color:"co",float:"fo",indent:"in"})),c=Object.freeze(a({},{block:"0",document:"1",text:"2",inline:"3"},{},{paragraph:"p",heading:"h",link:"li",image:"im",attachment:"a",todo:"td",quote:"q",catalog:"ca","catalog-item":"ci",code:"cd","code-line":"cl",handwriting:"hw","list-item":"l",table:"t","table-row":"tr","table-cell":"tc",layout:"la"},{},{bold:"b",italic:"i",underline:"u",delete:"d",color:"c",backgroundColor:"bg",fontFamily:"ff",fontSize:"fs",href:"hf"})),u=Object(o.a)(l),d=Object(o.a)(c),p=function(){function e(){}return e.compress=function(t){return e.checkCanCompress(t),e.removeEmpty(t),e.removeDefault(t),t.__compress__&&(Object(i.a)(t,e.compressValue),Object(i.a)(t,e.compressKey)),t},e.decompress=function(t){return t.__compress__&&(Object(i.a)(t,e.decompressKey),Object(i.a)(t,e.decompressValue)),e.addDefault(t),t},e.removeEmpty=function(t){Object(i.a)(t,function(t,n,o){"data"===t&&e.removeEmptyData(t,n,o),"leaves"===t&&e.removeEmptyLeaf(t,n,o),"nodes"===t&&e.removeEmptyNodes(t,n,o),"marks"===t&&e.removeEmptyMarks(t,n,o)})},e.checkCanCompress=function(e){var t=!0;Object(i.a)(e,function(e,n){u.hasOwnProperty(e)&&(t=!1),"type"!==e&&"name"!==e||!d.hasOwnProperty(n)||(t=!1)}),e.__compress__=t},e.compressKey=function(e,t,n){l.hasOwnProperty(e)&&(delete n[e],n[l[e]]=t)},e.compressValue=function(e,t,n){"type"!==e&&"name"!==e||!c.hasOwnProperty(t)||(n[e]=c[t])},e.decompressKey=function(e,t,n){u.hasOwnProperty(e)&&(delete n[e],n[u[e]]=t)},e.decompressValue=function(e,t,n){"type"!==e&&"name"!==e||!d.hasOwnProperty(t)||(n[e]=d[t])},e.removeEmptyLeaf=function(e,t,n){var o=t;if(1===o.length){var i=o[0];""!==i.text||i.marks&&0!==i.marks.length||delete n[e]}},e.removeEmptyMarks=function(e,t,n){t&&0===t.length&&delete n[e]},e.removeEmptyNodes=function(e,t,n){t&&0===t.length&&delete n[e]},e.removeEmptyData=function(e,t,n){var o=Object.keys(t),i=o.findIndex(function(e){return"style"===e});i>=0&&0===Object.keys(t.style||{}).length&&(delete n[e].style,o.splice(i,1)),0===o.length&&delete n[e]},e.removeDefault=function(e){Object(i.a)(e,function(e,t,n){("type"===e&&"block"===t||"name"===e&&"paragraph"===t)&&n.id&&delete n[e]})},e.addDefault=function(e){Object(i.a)(e,function(e,t,n){n.id&&(n.type||(n.type="block"),n.name||"block"!==n.type||(n.name="paragraph"))})},e}()},function(e,t,n){var o=n(5),i=n(2).document,r=o(i)&&o(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){t.f=n(6)},function(e,t,n){var o=n(60)("keys"),i=n(37);e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var o=n(2).document;e.exports=o&&o.documentElement},function(e,t,n){var o=n(5),i=n(4),r=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{(o=n(19)(Function.call,n(22).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:r}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var o=n(5),i=n(83).set;e.exports=function(e,t,n){var r,a=t.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&o(r)&&i&&i(e,r),e}},function(e,t,n){var o=n(21),i=n(28);e.exports=function(e){var t=String(i(this)),n="",r=o(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var o=n(21),i=n(28);e.exports=function(e){return function(t,n){var r,a,s=String(i(t)),l=o(n),c=s.length;return l<0||l>=c?e?"":void 0:(r=s.charCodeAt(l))<55296||r>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):r:e?s.slice(l,l+2):a-56320+(r-55296<<10)+65536}}},function(e,t,n){var o=n(38),i=n(0),r=n(12),a=n(15),s=n(49),l=n(128),c=n(47),u=n(43),d=n(6)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,f,g,y,m){l(n,t,f);var v,b,_,I=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",w="values"==g,C=!1,S=e.prototype,x=S[d]||S["@@iterator"]||g&&S[g],A=x||I(g),T=g?w?I("entries"):A:void 0,N="Array"==t&&S.entries||x;if(N&&(_=u(N.call(new e)))!==Object.prototype&&_.next&&(c(_,k,!0),o||"function"==typeof _[d]||a(_,d,h)),w&&x&&"values"!==x.name&&(C=!0,A=function(){return x.call(this)}),o&&!m||!p&&!C&&S[d]||a(S,d,A),s[t]=A,s[k]=h,g)if(v={values:w?A:I("values"),keys:y?A:I("keys"),entries:T},m)for(b in v)b in S||r(S,b,v[b]);else i(i.P+i.F*(p||C),t,v);return v}},function(e,t,n){var o=n(92),i=n(28);e.exports=function(e,t,n){if(o(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var o=n(5),i=n(27),r=n(6)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==i(e))}},function(e,t,n){var o=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var o=n(49),i=n(6)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||r[i]===e)}},function(e,t,n){var o=n(10),i=n(36);e.exports=function(e,t,n){t in e?o.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var o=n(55),i=n(6)("iterator"),r=n(49);e.exports=n(8).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||r[o(e)]}},function(e,t,n){var o=n(11),i=n(40),r=n(7);e.exports=function(e){for(var t=o(this),n=r(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:i(l,n);c>s;)t[s++]=e;return t}},function(e,t,n){var o=n(44),i=n(133),r=n(49),a=n(16);e.exports=n(90)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},function(e,t,n){var o,i,r=n(65),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,c=(o=/a/,i=/b*/g,a.call(o,"a"),a.call(i,"a"),0!==o.lastIndex||0!==i.lastIndex),u=void 0!==/()??/.exec("")[1];(c||u)&&(l=function(e){var t,n,o,i,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),c&&(t=l.lastIndex),o=a.call(l,e),c&&o&&(l.lastIndex=l.global?o.index+o[0].length:t),u&&o&&o.length>1&&s.call(o[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)}),o}),e.exports=l},function(e,t,n){var o=n(89)(!0);e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},function(e,t,n){var o,i,r,a=n(19),s=n(122),l=n(82),c=n(78),u=n(2),d=u.process,p=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,g=u.Dispatch,y=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){v.call(e.data)};p&&h||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){s("function"==typeof e?e:Function(e),t)},o(y),y},h=function(e){delete m[e]},"process"==n(27)(d)?o=function(e){d.nextTick(a(v,e,1))}:g&&g.now?o=function(e){g.now(a(v,e,1))}:f?(r=(i=new f).port2,i.port1.onmessage=b,o=a(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):o="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:p,clear:h}},function(e,t,n){var o=n(2),i=n(9),r=n(38),a=n(71),s=n(15),l=n(52),c=n(3),u=n(51),d=n(21),p=n(7),h=n(141),f=n(42).f,g=n(10).f,y=n(97),m=n(47),v=o.ArrayBuffer,b=o.DataView,_=o.Math,I=o.RangeError,k=o.Infinity,w=v,C=_.abs,S=_.pow,x=_.floor,A=_.log,T=_.LN2,N=i?"_b":"buffer",E=i?"_l":"byteLength",D=i?"_o":"byteOffset";function M(e,t,n){var o,i,r,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,c=l>>1,u=23===t?S(2,-24)-S(2,-77):0,d=0,p=e<0||0===e&&1/e<0?1:0;for((e=C(e))!=e||e===k?(i=e!=e?1:0,o=l):(o=x(A(e)/T),e*(r=S(2,-o))<1&&(o--,r*=2),(e+=o+c>=1?u/r:u*S(2,1-c))*r>=2&&(o++,r/=2),o+c>=l?(i=0,o=l):o+c>=1?(i=(e*r-1)*S(2,t),o+=c):(i=e*S(2,c-1)*S(2,t),o=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(o=o<<t|i,s+=t;s>0;a[d++]=255&o,o/=256,s-=8);return a[--d]|=128*p,a}function O(e,t,n){var o,i=8*n-t-1,r=(1<<i)-1,a=r>>1,s=i-7,l=n-1,c=e[l--],u=127&c;for(c>>=7;s>0;u=256*u+e[l],l--,s-=8);for(o=u&(1<<-s)-1,u>>=-s,s+=t;s>0;o=256*o+e[l],l--,s-=8);if(0===u)u=1-a;else{if(u===r)return o?NaN:c?-k:k;o+=S(2,t),u-=a}return(c?-1:1)*o*S(2,u-t)}function L(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function B(e){return[255&e]}function R(e){return[255&e,e>>8&255]}function P(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function j(e){return M(e,52,8)}function F(e){return M(e,23,4)}function z(e,t,n){g(e.prototype,t,{get:function(){return this[n]}})}function H(e,t,n,o){var i=h(+n);if(i+t>e[E])throw I("Wrong index!");var r=e[N]._b,a=i+e[D],s=r.slice(a,a+t);return o?s:s.reverse()}function G(e,t,n,o,i,r){var a=h(+n);if(a+t>e[E])throw I("Wrong index!");for(var s=e[N]._b,l=a+e[D],c=o(+i),u=0;u<t;u++)s[l+u]=c[r?u:t-u-1]}if(a.ABV){if(!c(function(){v(1)})||!c(function(){new v(-1)})||c(function(){return new v,new v(1.5),new v(NaN),"ArrayBuffer"!=v.name})){for(var V,U=(v=function(e){return u(this,v),new w(h(e))}).prototype=w.prototype,W=f(w),J=0;W.length>J;)(V=W[J++])in v||s(v,V,w[V]);r||(U.constructor=v)}var Z=new b(new v(2)),Y=b.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||l(b.prototype,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else v=function(e){u(this,v,"ArrayBuffer");var t=h(e);this._b=y.call(new Array(t),0),this[E]=t},b=function(e,t,n){u(this,b,"DataView"),u(e,v,"DataView");var o=e[E],i=d(t);if(i<0||i>o)throw I("Wrong offset!");if(i+(n=void 0===n?o-i:p(n))>o)throw I("Wrong length!");this[N]=e,this[D]=i,this[E]=n},i&&(z(v,"byteLength","_l"),z(b,"buffer","_b"),z(b,"byteLength","_l"),z(b,"byteOffset","_o")),l(b.prototype,{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return L(H(this,4,e,arguments[1]))},getUint32:function(e){return L(H(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return O(H(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return O(H(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){G(this,1,e,B,t)},setUint8:function(e,t){G(this,1,e,B,t)},setInt16:function(e,t){G(this,2,e,R,t,arguments[2])},setUint16:function(e,t){G(this,2,e,R,t,arguments[2])},setInt32:function(e,t){G(this,4,e,P,t,arguments[2])},setUint32:function(e,t){G(this,4,e,P,t,arguments[2])},setFloat32:function(e,t){G(this,4,e,F,t,arguments[2])},setFloat64:function(e,t){G(this,8,e,j,t,arguments[2])}});m(v,"ArrayBuffer"),m(b,"DataView"),s(b.prototype,a.VIEW,!0),t.ArrayBuffer=v,t.DataView=b},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(146)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(31),i=n(34);t.a=function(e){if(!Object(i.a)(e))return!1;var t=Object(o.a)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){t.a=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var o=n(106),i=n(58);t.a=function(e){return null!=e&&Object(i.a)(e.length)&&!Object(o.a)(e)}},function(e,t,n){t.a=function(e){return e}},function(e,t,n){var o=n(31),i=n(26),r=function(e){return Object(i.a)(e)&&"[object Arguments]"==Object(o.a)(e)},a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return Object(i.a)(e)&&s.call(e,"callee")&&!l.call(e,"callee")};t.a=c},function(e,t,n){var o=n(31),i=n(58),r=n(26),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(75),l=n(57),c=l.a&&l.a.isTypedArray,u=c?Object(s.a)(c):function(e){return Object(r.a)(e)&&Object(i.a)(e.length)&&!!a[Object(o.a)(e)]};t.a=u},function(e,t,n){var o=n(110),i=n(35),r=n(73),a=n(76),s=n(111),l=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(i.a)(e),c=!n&&Object(o.a)(e),u=!n&&!c&&Object(r.a)(e),d=!n&&!c&&!u&&Object(s.a)(e),p=n||c||u||d,h=p?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],f=h.length;for(var g in e)!t&&!l.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||Object(a.a)(g,f))||h.push(g);return h}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){e.exports=!n(9)&&!n(3)(function(){return 7!=Object.defineProperty(n(78)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(2),i=n(8),r=n(38),a=n(79),s=n(10).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var o=n(14),i=n(16),r=n(61)(!1),a=n(80)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=a&&o(s,n)&&c.push(n);for(;t.length>l;)o(s,n=t[l++])&&(~r(c,n)||c.push(n));return c}},function(e,t,n){var o=n(10),i=n(4),r=n(39);e.exports=n(9)?Object.defineProperties:function(e,t){i(e);for(var n,a=r(t),s=a.length,l=0;s>l;)o.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var o=n(16),i=n(42).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(o(e))}},function(e,t,n){var o=n(9),i=n(39),r=n(62),a=n(54),s=n(11),l=n(53),c=Object.assign;e.exports=!c||n(3)(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=o})?function(e,t){for(var n=s(e),c=arguments.length,u=1,d=r.f,p=a.f;c>u;)for(var h,f=l(arguments[u++]),g=d?i(f).concat(d(f)):i(f),y=g.length,m=0;y>m;)h=g[m++],o&&!p.call(f,h)||(n[h]=f[h]);return n}:c},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var o=n(20),i=n(5),r=n(122),a=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var o=[],i=0;i<t;i++)o[i]="a["+i+"]";s[t]=Function("F,a","return new F("+o.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=o(this),n=a.call(arguments,1),s=function(){var o=n.concat(a.call(arguments));return this instanceof s?l(t,o.length,o):r(t,o,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var o=void 0===n;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var o=n(2).parseInt,i=n(48).trim,r=n(84),a=/^[-+]?0[xX]/;e.exports=8!==o(r+"08")||22!==o(r+"0x16")?function(e,t){var n=i(String(e),3);return o(n,t>>>0||(a.test(n)?16:10))}:o},function(e,t,n){var o=n(2).parseFloat,i=n(48).trim;e.exports=1/o(n(84)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){var o=n(27);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=o(e))throw TypeError(t);return+e}},function(e,t,n){var o=n(5),i=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var o=n(41),i=n(36),r=n(47),a={};n(15)(a,n(6)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=o(a,{next:i(1,n)}),r(e,t+" Iterator")}},function(e,t,n){var o=n(4);e.exports=function(e,t,n,i){try{return i?t(o(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&o(r.call(e)),t}}},function(e,t,n){var o=n(244);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,n){var o=n(20),i=n(11),r=n(53),a=n(7);e.exports=function(e,t,n,s,l){o(t);var c=i(e),u=r(c),d=a(c.length),p=l?d-1:0,h=l?-1:1;if(n<2)for(;;){if(p in u){s=u[p],p+=h;break}if(p+=h,l?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;l?p>=0:d>p;p+=h)p in u&&(s=t(s,u[p],p,c));return s}},function(e,t,n){var o=n(11),i=n(40),r=n(7);e.exports=[].copyWithin||function(e,t){var n=o(this),a=r(n.length),s=i(e,a),l=i(t,a),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?a:i(c,a))-l,a-s),d=1;for(l<s&&s<l+u&&(d=-1,l+=u-1,s+=u-1);u-- >0;)l in n?n[s]=n[l]:delete n[s],s+=d,l+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var o=n(99);n(0)({target:"RegExp",proto:!0,forced:o!==/./.exec},{exec:o})},function(e,t,n){n(9)&&"g"!=/./g.flags&&n(10).f(RegExp.prototype,"flags",{configurable:!0,get:n(65)})},function(e,t,n){var o,i,r,a,s=n(38),l=n(2),c=n(19),u=n(55),d=n(0),p=n(5),h=n(20),f=n(51),g=n(68),y=n(56),m=n(101).set,v=n(264)(),b=n(137),_=n(265),I=n(69),k=n(138),w=l.TypeError,C=l.process,S=C&&C.versions,x=S&&S.v8||"",A=l.Promise,T="process"==u(C),N=function(){},E=i=b.f,D=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(N,N)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(N)instanceof t&&0!==x.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var o=e._v,i=1==e._s,r=0,a=function(t){var n,r,a,s=i?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(i||(2==e._h&&R(e),e._h=1),!0===s?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),a=!0)),n===t.promise?c(w("Promise-chain cycle")):(r=M(n))?r.call(n,l,c):l(n)):c(o)}catch(e){u&&!a&&u.exit(),c(e)}};n.length>r;)a(n[r++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){m.call(l,function(){var t,n,o,i=e._v,r=B(e);if(r&&(t=_(function(){T?C.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(o=l.console)&&o.error&&o.error("Unhandled promise rejection",i)}),e._h=T||B(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},B=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){m.call(l,function(){var t;T?C.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},P=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=M(e))?v(function(){var o={_w:n,_d:!1};try{t.call(e,c(j,o,1),c(P,o,1))}catch(e){P.call(o,e)}}):(n._v=e,n._s=1,O(n,!1))}catch(e){P.call({_w:n,_d:!1},e)}}};D||(A=function(e){f(this,A,"Promise","_h"),h(e),o.call(this);try{e(c(j,this,1),c(P,this,1))}catch(e){P.call(this,e)}},(o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(52)(A.prototype,{then:function(e,t){var n=E(y(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=T?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new o;this.promise=e,this.resolve=c(j,e,1),this.reject=c(P,e,1)},b.f=E=function(e){return e===A||e===a?new r(e):i(e)}),d(d.G+d.W+d.F*!D,{Promise:A}),n(47)(A,"Promise"),n(50)("Promise"),a=n(8).Promise,d(d.S+d.F*!D,"Promise",{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!D),"Promise",{resolve:function(e){return k(s&&this===a?A:this,e)}}),d(d.S+d.F*!(D&&n(64)(function(e){A.all(e).catch(N)})),"Promise",{all:function(e){var t=this,n=E(t),o=n.resolve,i=n.reject,r=_(function(){var n=[],r=0,a=1;g(e,!1,function(e){var s=r++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||o(n))},i)}),--a||o(n)});return r.e&&i(r.v),n.promise},race:function(e){var t=this,n=E(t),o=n.reject,i=_(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,o)})});return i.e&&o(i.v),n.promise}})},function(e,t,n){var o=n(20);function i(e){var t,n;this.promise=new e(function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o}),this.resolve=o(t),this.reject=o(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){var o=n(4),i=n(5),r=n(137);e.exports=function(e,t){if(o(e),i(t)&&t.constructor===e)return t;var n=r.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var o=n(10).f,i=n(41),r=n(52),a=n(19),s=n(51),l=n(68),c=n(90),u=n(133),d=n(50),p=n(9),h=n(33).fastKey,f=n(45),g=p?"_s":"size",y=function(e,t){var n,o=h(t);if("F"!==o)return e._i[o];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e(function(e,o){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,null!=o&&l(o,n,e[c],e)});return r(u.prototype,{clear:function(){for(var e=f(this,t),n=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete n[o.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=f(this,t),o=y(n,e);if(o){var i=o.n,r=o.p;delete n._i[o.i],o.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==o&&(n._f=i),n._l==o&&(n._l=r),n[g]--}return!!o},forEach:function(e){f(this,t);for(var n,o=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(o(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(f(this,t),e)}}),p&&o(u.prototype,"size",{get:function(){return f(this,t)[g]}}),u},def:function(e,t,n){var o,i,r=y(e,t);return r?r.v=n:(e._l=r={i:i=h(t,!0),k:t,v:n,p:o=e._l,n:void 0,r:!1},e._f||(e._f=r),o&&(o.n=r),e[g]++,"F"!==i&&(e._i[i]=r)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=f(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var o=n(52),i=n(33).getWeak,r=n(4),a=n(5),s=n(51),l=n(68),c=n(24),u=n(14),d=n(45),p=c(5),h=c(6),f=0,g=function(e){return e._l||(e._l=new y)},y=function(){this.a=[]},m=function(e,t){return p(e.a,function(e){return e[0]===t})};y.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var c=e(function(e,o){s(e,c,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=o&&l(o,n,e[r],e)});return o(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?g(d(this,t)).has(e):n&&u(n,this._i)}}),c},def:function(e,t,n){var o=i(r(t),!0);return!0===o?g(e).set(t,n):o[e._i]=n,e},ufstore:g}},function(e,t,n){var o=n(21),i=n(7);e.exports=function(e){if(void 0===e)return 0;var t=o(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var o=n(42),i=n(62),r=n(4),a=n(2).Reflect;e.exports=a&&a.ownKeys||function(e){var t=o.f(r(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var o=n(7),i=n(86),r=n(28);e.exports=function(e,t,n,a){var s=String(r(e)),l=s.length,c=void 0===n?" ":String(n),u=o(t);if(u<=l||""==c)return s;var d=u-l,p=i.call(c,Math.ceil(d/c.length));return p.length>d&&(p=p.slice(0,d)),a?p+s:s+p}},function(e,t,n){var o=n(9),i=n(39),r=n(16),a=n(54).f;e.exports=function(e){return function(t){for(var n,s=r(t),l=i(s),c=l.length,u=0,d=[];c>u;)n=l[u++],o&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){t.a=function(){return!1}},,,function(e,t,n){n(151);var o,i=(o=n(323))&&o.__esModule?o:{default:o};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(e,t,n){n(152),n(295),n(297),n(300),n(302),n(304),n(306),n(308),n(310),n(312),n(314),n(316),n(318),n(322)},function(e,t,n){n(153),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(234),n(235),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(98),n(258),n(134),n(259),n(135),n(260),n(261),n(262),n(263),n(136),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),e.exports=n(8)},function(e,t,n){var o=n(2),i=n(14),r=n(9),a=n(0),s=n(12),l=n(33).KEY,c=n(3),u=n(60),d=n(47),p=n(37),h=n(6),f=n(79),g=n(115),y=n(155),m=n(63),v=n(4),b=n(5),_=n(11),I=n(16),k=n(32),w=n(36),C=n(41),S=n(118),x=n(22),A=n(62),T=n(10),N=n(39),E=x.f,D=T.f,M=S.f,O=o.Symbol,L=o.JSON,B=L&&L.stringify,R=h("_hidden"),P=h("toPrimitive"),j={}.propertyIsEnumerable,F=u("symbol-registry"),z=u("symbols"),H=u("op-symbols"),G=Object.prototype,V="function"==typeof O&&!!A.f,U=o.QObject,W=!U||!U.prototype||!U.prototype.findChild,J=r&&c(function(){return 7!=C(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,n){var o=E(G,t);o&&delete G[t],D(e,t,n),o&&e!==G&&D(G,t,o)}:D,Z=function(e){var t=z[e]=C(O.prototype);return t._k=e,t},Y=V&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Q=function(e,t,n){return e===G&&Q(H,t,n),v(e),t=k(t,!0),v(n),i(z,t)?(n.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),n=C(n,{enumerable:w(0,!1)})):(i(e,R)||D(e,R,w(1,{})),e[R][t]=!0),J(e,t,n)):D(e,t,n)},X=function(e,t){v(e);for(var n,o=y(t=I(t)),i=0,r=o.length;r>i;)Q(e,n=o[i++],t[n]);return e},$=function(e){var t=j.call(this,e=k(e,!0));return!(this===G&&i(z,e)&&!i(H,e))&&(!(t||!i(this,e)||!i(z,e)||i(this,R)&&this[R][e])||t)},K=function(e,t){if(e=I(e),t=k(t,!0),e!==G||!i(z,t)||i(H,t)){var n=E(e,t);return!n||!i(z,t)||i(e,R)&&e[R][t]||(n.enumerable=!0),n}},q=function(e){for(var t,n=M(I(e)),o=[],r=0;n.length>r;)i(z,t=n[r++])||t==R||t==l||o.push(t);return o},ee=function(e){for(var t,n=e===G,o=M(n?H:I(e)),r=[],a=0;o.length>a;)!i(z,t=o[a++])||n&&!i(G,t)||r.push(z[t]);return r};V||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(H,n),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),J(this,e,w(1,n))};return r&&W&&J(G,e,{configurable:!0,set:t}),Z(e)}).prototype,"toString",function(){return this._k}),x.f=K,T.f=Q,n(42).f=S.f=q,n(54).f=$,A.f=ee,r&&!n(38)&&s(G,"propertyIsEnumerable",$,!0),f.f=function(e){return Z(h(e))}),a(a.G+a.W+a.F*!V,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var oe=N(h.store),ie=0;oe.length>ie;)g(oe[ie++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=O(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?C(e):X(C(e),t)},defineProperty:Q,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:q,getOwnPropertySymbols:ee});var re=c(function(){A.f(1)});a(a.S+a.F*re,"Object",{getOwnPropertySymbols:function(e){return A.f(_(e))}}),L&&a(a.S+a.F*(!V||c(function(){var e=O();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))})),"JSON",{stringify:function(e){for(var t,n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(n=t=o[1],(b(t)||void 0!==e)&&!Y(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),o[1]=t,B.apply(L,o)}}),O.prototype[P]||n(15)(O.prototype,P,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(o.JSON,"JSON",!0)},function(e,t,n){e.exports=n(60)("native-function-to-string",Function.toString)},function(e,t,n){var o=n(39),i=n(62),r=n(54);e.exports=function(e){var t=o(e),n=i.f;if(n)for(var a,s=n(e),l=r.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var o=n(0);o(o.S,"Object",{create:n(41)})},function(e,t,n){var o=n(0);o(o.S+o.F*!n(9),"Object",{defineProperty:n(10).f})},function(e,t,n){var o=n(0);o(o.S+o.F*!n(9),"Object",{defineProperties:n(117)})},function(e,t,n){var o=n(16),i=n(22).f;n(23)("getOwnPropertyDescriptor",function(){return function(e,t){return i(o(e),t)}})},function(e,t,n){var o=n(11),i=n(43);n(23)("getPrototypeOf",function(){return function(e){return i(o(e))}})},function(e,t,n){var o=n(11),i=n(39);n(23)("keys",function(){return function(e){return i(o(e))}})},function(e,t,n){n(23)("getOwnPropertyNames",function(){return n(118).f})},function(e,t,n){var o=n(5),i=n(33).onFreeze;n(23)("freeze",function(e){return function(t){return e&&o(t)?e(i(t)):t}})},function(e,t,n){var o=n(5),i=n(33).onFreeze;n(23)("seal",function(e){return function(t){return e&&o(t)?e(i(t)):t}})},function(e,t,n){var o=n(5),i=n(33).onFreeze;n(23)("preventExtensions",function(e){return function(t){return e&&o(t)?e(i(t)):t}})},function(e,t,n){var o=n(5);n(23)("isFrozen",function(e){return function(t){return!o(t)||!!e&&e(t)}})},function(e,t,n){var o=n(5);n(23)("isSealed",function(e){return function(t){return!o(t)||!!e&&e(t)}})},function(e,t,n){var o=n(5);n(23)("isExtensible",function(e){return function(t){return!!o(t)&&(!e||e(t))}})},function(e,t,n){var o=n(0);o(o.S+o.F,"Object",{assign:n(119)})},function(e,t,n){var o=n(0);o(o.S,"Object",{is:n(120)})},function(e,t,n){var o=n(0);o(o.S,"Object",{setPrototypeOf:n(83).set})},function(e,t,n){var o=n(55),i={};i[n(6)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",function(){return"[object "+o(this)+"]"},!0)},function(e,t,n){var o=n(0);o(o.P,"Function",{bind:n(121)})},function(e,t,n){var o=n(10).f,i=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in i||n(9)&&o(i,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(e){return""}}})},function(e,t,n){var o=n(5),i=n(43),r=n(6)("hasInstance"),a=Function.prototype;r in a||n(10).f(a,r,{value:function(e){if("function"!=typeof this||!o(e))return!1;if(!o(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var o=n(0),i=n(123);o(o.G+o.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var o=n(0),i=n(124);o(o.G+o.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){var o=n(2),i=n(14),r=n(27),a=n(85),s=n(32),l=n(3),c=n(42).f,u=n(22).f,d=n(10).f,p=n(48).trim,h=o.Number,f=h,g=h.prototype,y="Number"==r(n(41)(g)),m="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,o,i,r=(t=m?t.trim():p(t,3)).charCodeAt(0);if(43===r||45===r){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t}for(var a,l=t.slice(2),c=0,u=l.length;c<u;c++)if((a=l.charCodeAt(c))<48||a>i)return NaN;return parseInt(l,o)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(y?l(function(){g.valueOf.call(n)}):"Number"!=r(n))?a(new f(v(t)),n,h):v(t)};for(var b,_=n(9)?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;_.length>I;I++)i(f,b=_[I])&&!i(h,b)&&d(h,b,u(f,b));h.prototype=g,g.constructor=h,n(12)(o,"Number",h)}},function(e,t,n){var o=n(0),i=n(21),r=n(125),a=n(86),s=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,o=t;++n<6;)o+=e*c[n],c[n]=o%1e7,o=l(o/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=l(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};o(o.P+o.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,o,s,l=r(this,u),c=i(e),g="",y="0";if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*f(2,69,1))-69)<0?l*f(2,-t,1):l/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),o=c;o>=7;)d(1e7,0),o-=7;for(d(f(10,o,1),0),o=t-1;o>=23;)p(1<<23),o-=23;p(1<<o),d(1,1),p(2),y=h()}else d(0,n),d(1<<-t,0),y=h()+a.call("0",c);return y=c>0?g+((s=y.length)<=c?"0."+a.call("0",c-s)+y:y.slice(0,s-c)+"."+y.slice(s-c)):g+y}})},function(e,t,n){var o=n(0),i=n(3),r=n(125),a=1..toPrecision;o(o.P+o.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=r(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var o=n(0);o(o.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var o=n(0),i=n(2).isFinite;o(o.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var o=n(0);o(o.S,"Number",{isInteger:n(126)})},function(e,t,n){var o=n(0);o(o.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var o=n(0),i=n(126),r=Math.abs;o(o.S,"Number",{isSafeInteger:function(e){return i(e)&&r(e)<=9007199254740991}})},function(e,t,n){var o=n(0);o(o.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var o=n(0);o(o.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var o=n(0),i=n(124);o(o.S+o.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var o=n(0),i=n(123);o(o.S+o.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var o=n(0),i=n(127),r=Math.sqrt,a=Math.acosh;o(o.S+o.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+r(e-1)*r(e+1))}})},function(e,t,n){var o=n(0),i=Math.asinh;o(o.S+o.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var o=n(0),i=Math.atanh;o(o.S+o.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var o=n(0),i=n(87);o(o.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var o=n(0);o(o.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var o=n(0),i=Math.exp;o(o.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var o=n(0),i=n(88);o(o.S+o.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var o=n(0);o(o.S,"Math",{fround:n(198)})},function(e,t,n){var o=n(87),i=Math.pow,r=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),l=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=o(e);return i<l?c*(i/l/a+1/r-1/r)*l*a:(n=(t=(1+a/r)*i)-(t-i))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var o=n(0),i=Math.abs;o(o.S,"Math",{hypot:function(e,t){for(var n,o,r=0,a=0,s=arguments.length,l=0;a<s;)l<(n=i(arguments[a++]))?(r=r*(o=l/n)*o+1,l=n):r+=n>0?(o=n/l)*o:n;return l===1/0?1/0:l*Math.sqrt(r)}})},function(e,t,n){var o=n(0),i=Math.imul;o(o.S+o.F*n(3)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,o=+t,i=65535&n,r=65535&o;return 0|i*r+((65535&n>>>16)*r+i*(65535&o>>>16)<<16>>>0)}})},function(e,t,n){var o=n(0);o(o.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var o=n(0);o(o.S,"Math",{log1p:n(127)})},function(e,t,n){var o=n(0);o(o.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var o=n(0);o(o.S,"Math",{sign:n(87)})},function(e,t,n){var o=n(0),i=n(88),r=Math.exp;o(o.S+o.F*n(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(r(e-1)-r(-e-1))*(Math.E/2)}})},function(e,t,n){var o=n(0),i=n(88),r=Math.exp;o(o.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(r(e)+r(-e))}})},function(e,t,n){var o=n(0);o(o.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var o=n(0),i=n(40),r=String.fromCharCode,a=String.fromCodePoint;o(o.S+o.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],o=arguments.length,a=0;o>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var o=n(0),i=n(16),r=n(7);o(o.S,"String",{raw:function(e){for(var t=i(e.raw),n=r(t.length),o=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<o&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){n(48)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){var o=n(89)(!0);n(90)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var o=n(0),i=n(89)(!1);o(o.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){var o=n(0),i=n(7),r=n(91),a="".endsWith;o(o.P+o.F*n(93)("endsWith"),"String",{endsWith:function(e){var t=r(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,o=i(t.length),s=void 0===n?o:Math.min(i(n),o),l=String(e);return a?a.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){var o=n(0),i=n(91);o(o.P+o.F*n(93)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var o=n(0);o(o.P,"String",{repeat:n(86)})},function(e,t,n){var o=n(0),i=n(7),r=n(91),a="".startsWith;o(o.P+o.F*n(93)("startsWith"),"String",{startsWith:function(e){var t=r(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return a?a.call(t,o,n):t.slice(n,n+o.length)===o}})},function(e,t,n){n(13)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){n(13)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){n(13)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){n(13)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){n(13)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){n(13)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){n(13)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){n(13)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){n(13)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){n(13)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){n(13)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){n(13)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){n(13)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){var o=n(0);o(o.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){var o=n(0),i=n(11),r=n(32);o(o.P+o.F*n(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=r(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var o=n(0),i=n(233);o(o.P+o.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){var o=n(3),i=Date.prototype.getTime,r=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=o(function(){return"0385-07-25T07:06:39.999Z"!=r.call(new Date(-50000000000001))})||!o(function(){r.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),o=t<0?"-":t>9999?"+":"";return o+("00000"+Math.abs(t)).slice(o?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:r},function(e,t,n){var o=Date.prototype,i=o.toString,r=o.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(o,"toString",function(){var e=r.call(this);return e==e?i.call(this):"Invalid Date"})},function(e,t,n){var o=n(6)("toPrimitive"),i=Date.prototype;o in i||n(15)(i,o,n(236))},function(e,t,n){var o=n(4),i=n(32);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(o(this),"number"!=e)}},function(e,t,n){var o=n(0);o(o.S,"Array",{isArray:n(63)})},function(e,t,n){var o=n(19),i=n(0),r=n(11),a=n(129),s=n(94),l=n(7),c=n(95),u=n(96);i(i.S+i.F*!n(64)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,p=r(e),h="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,y=void 0!==g,m=0,v=u(p);if(y&&(g=o(g,f>2?arguments[2]:void 0,2)),null==v||h==Array&&s(v))for(n=new h(t=l(p.length));t>m;m++)c(n,m,y?g(p[m],m):p[m]);else for(d=v.call(p),n=new h;!(i=d.next()).done;m++)c(n,m,y?a(d,g,[i.value,m],!0):i.value);return n.length=m,n}})},function(e,t,n){var o=n(0),i=n(95);o(o.S+o.F*n(3)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){var o=n(0),i=n(16),r=[].join;o(o.P+o.F*(n(53)!=Object||!n(17)(r)),"Array",{join:function(e){return r.call(i(this),void 0===e?",":e)}})},function(e,t,n){var o=n(0),i=n(82),r=n(27),a=n(40),s=n(7),l=[].slice;o(o.P+o.F*n(3)(function(){i&&l.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),o=r(this);if(t=void 0===t?n:t,"Array"==o)return l.call(this,e,t);for(var i=a(e,n),c=a(t,n),u=s(c-i),d=new Array(u),p=0;p<u;p++)d[p]="String"==o?this.charAt(i+p):this[i+p];return d}})},function(e,t,n){var o=n(0),i=n(20),r=n(11),a=n(3),s=[].sort,l=[1,2,3];o(o.P+o.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n(17)(s)),"Array",{sort:function(e){return void 0===e?s.call(r(this)):s.call(r(this),i(e))}})},function(e,t,n){var o=n(0),i=n(24)(0),r=n(17)([].forEach,!0);o(o.P+o.F*!r,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var o=n(5),i=n(63),r=n(6)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var o=n(0),i=n(24)(1);o(o.P+o.F*!n(17)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var o=n(0),i=n(24)(2);o(o.P+o.F*!n(17)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var o=n(0),i=n(24)(3);o(o.P+o.F*!n(17)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var o=n(0),i=n(24)(4);o(o.P+o.F*!n(17)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var o=n(0),i=n(131);o(o.P+o.F*!n(17)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){var o=n(0),i=n(131);o(o.P+o.F*!n(17)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){var o=n(0),i=n(61)(!1),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0;o(o.P+o.F*(a||!n(17)(r)),"Array",{indexOf:function(e){return a?r.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){var o=n(0),i=n(16),r=n(21),a=n(7),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;o(o.P+o.F*(l||!n(17)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=Math.min(o,r(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}})},function(e,t,n){var o=n(0);o(o.P,"Array",{copyWithin:n(132)}),n(44)("copyWithin")},function(e,t,n){var o=n(0);o(o.P,"Array",{fill:n(97)}),n(44)("fill")},function(e,t,n){var o=n(0),i=n(24)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),o(o.P+o.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(44)("find")},function(e,t,n){var o=n(0),i=n(24)(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),o(o.P+o.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(44)(r)},function(e,t,n){n(50)("Array")},function(e,t,n){var o=n(2),i=n(85),r=n(10).f,a=n(42).f,s=n(92),l=n(65),c=o.RegExp,u=c,d=c.prototype,p=/a/g,h=/a/g,f=new c(p)!==p;if(n(9)&&(!f||n(3)(function(){return h[n(6)("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")}))){c=function(e,t){var n=this instanceof c,o=s(e),r=void 0===t;return!n&&o&&e.constructor===c&&r?e:i(f?new u(o&&!r?e.source:e,t):u((o=e instanceof c)?e.source:e,o&&r?l.call(e):t),n?this:d,c)};for(var g=function(e){e in c||r(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},y=a(u),m=0;y.length>m;)g(y[m++]);d.constructor=c,c.prototype=d,n(12)(o,"RegExp",c)}n(50)("RegExp")},function(e,t,n){n(135);var o=n(4),i=n(65),r=n(9),a=/./.toString,s=function(e){n(12)(RegExp.prototype,"toString",e,!0)};n(3)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=o(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){var o=n(4),i=n(7),r=n(100),a=n(66);n(67)("match",1,function(e,t,n,s){return[function(n){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o):new RegExp(n)[t](String(o))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=o(e),c=String(this);if(!l.global)return a(l,c);var u=l.unicode;l.lastIndex=0;for(var d,p=[],h=0;null!==(d=a(l,c));){var f=String(d[0]);p[h]=f,""===f&&(l.lastIndex=r(c,i(l.lastIndex),u)),h++}return 0===h?null:p}]})},function(e,t,n){var o=n(4),i=n(11),r=n(7),a=n(21),s=n(100),l=n(66),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(67)("replace",2,function(e,t,n,f){return[function(o,i){var r=e(this),a=null==o?void 0:o[t];return void 0!==a?a.call(o,r,i):n.call(String(r),o,i)},function(e,t){var i=f(n,e,this,t);if(i.done)return i.value;var d=o(e),p=String(this),h="function"==typeof t;h||(t=String(t));var y=d.global;if(y){var m=d.unicode;d.lastIndex=0}for(var v=[];;){var b=l(d,p);if(null===b)break;if(v.push(b),!y)break;""===String(b[0])&&(d.lastIndex=s(p,r(d.lastIndex),m))}for(var _,I="",k=0,w=0;w<v.length;w++){b=v[w];for(var C=String(b[0]),S=c(u(a(b.index),p.length),0),x=[],A=1;A<b.length;A++)x.push(void 0===(_=b[A])?_:String(_));var T=b.groups;if(h){var N=[C].concat(x,S,p);void 0!==T&&N.push(T);var E=String(t.apply(void 0,N))}else E=g(C,p,S,x,T,t);S>=k&&(I+=p.slice(k,S)+E,k=S+C.length)}return I+p.slice(k)}];function g(e,t,o,r,a,s){var l=o+e.length,c=r.length,u=h;return void 0!==a&&(a=i(a),u=p),n.call(s,u,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,o);case"'":return t.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>c){var p=d(u/10);return 0===p?n:p<=c?void 0===r[p-1]?i.charAt(1):r[p-1]+i.charAt(1):n}s=r[u-1]}return void 0===s?"":s})}})},function(e,t,n){var o=n(4),i=n(120),r=n(66);n(67)("search",1,function(e,t,n,a){return[function(n){var o=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o):new RegExp(n)[t](String(o))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=o(e),l=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var u=r(s,l);return i(s.lastIndex,c)||(s.lastIndex=c),null===u?-1:u.index}]})},function(e,t,n){var o=n(92),i=n(4),r=n(56),a=n(100),s=n(7),l=n(66),c=n(99),u=n(3),d=Math.min,p=[].push,h="length",f=!u(function(){RegExp(4294967295,"y")});n(67)("split",2,function(e,t,n,u){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!o(e))return n.call(i,e,t);for(var r,a,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,u+"g");(r=c.call(g,i))&&!((a=g.lastIndex)>d&&(l.push(i.slice(d,r.index)),r[h]>1&&r.index<i[h]&&p.apply(l,r.slice(1)),s=r[0][h],d=a,l[h]>=f));)g.lastIndex===r.index&&g.lastIndex++;return d===i[h]?!s&&g.test("")||l.push(""):l.push(i.slice(d)),l[h]>f?l.slice(0,f):l}:"0".split(void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,o){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i,o):g.call(String(i),n,o)},function(e,t){var o=u(g,e,this,t,g!==n);if(o.done)return o.value;var c=i(e),p=String(this),h=r(c,RegExp),y=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(f?"y":"g"),v=new h(f?c:"^(?:"+c.source+")",m),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===p.length)return null===l(v,p)?[p]:[];for(var _=0,I=0,k=[];I<p.length;){v.lastIndex=f?I:0;var w,C=l(v,f?p:p.slice(I));if(null===C||(w=d(s(v.lastIndex+(f?0:I)),p.length))===_)I=a(p,I,y);else{if(k.push(p.slice(_,I)),k.length===b)return k;for(var S=1;S<=C.length-1;S++)if(k.push(C[S]),k.length===b)return k;I=_=w}}return k.push(p.slice(_)),k}]})},function(e,t,n){var o=n(2),i=n(101).set,r=o.MutationObserver||o.WebKitMutationObserver,a=o.process,s=o.Promise,l="process"==n(27)(a);e.exports=function(){var e,t,n,c=function(){var o,i;for(l&&(o=a.domain)&&o.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,o&&o.enter()};if(l)n=function(){a.nextTick(c)};else if(!r||o.navigator&&o.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(c)}}else n=function(){i.call(o,c)};else{var d=!0,p=document.createTextNode("");new r(c).observe(p,{characterData:!0}),n=function(){p.data=d=!d}}return function(o){var i={fn:o,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var o=n(139),i=n(45);e.exports=n(70)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=o.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return o.def(i(this,"Map"),0===e?0:e,t)}},o,!0)},function(e,t,n){var o=n(139),i=n(45);e.exports=n(70)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return o.def(i(this,"Set"),e=0===e?0:e,e)}},o)},function(e,t,n){var o,i=n(2),r=n(24)(0),a=n(12),s=n(33),l=n(119),c=n(140),u=n(5),d=n(45),p=n(45),h=!i.ActiveXObject&&"ActiveXObject"in i,f=s.getWeak,g=Object.isExtensible,y=c.ufstore,m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(u(e)){var t=f(e);return!0===t?y(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(d(this,"WeakMap"),e,t)}},b=e.exports=n(70)("WeakMap",m,v,c,!0,!0);p&&h&&(l((o=c.getConstructor(m,"WeakMap")).prototype,v),s.NEED=!0,r(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];a(t,e,function(t,i){if(u(t)&&!g(t)){this._f||(this._f=new o);var r=this._f[e](t,i);return"set"==e?this:r}return n.call(this,t,i)})}))},function(e,t,n){var o=n(140),i=n(45);n(70)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return o.def(i(this,"WeakSet"),e,!0)}},o,!1,!0)},function(e,t,n){var o=n(0),i=n(71),r=n(102),a=n(4),s=n(40),l=n(7),c=n(5),u=n(2).ArrayBuffer,d=n(56),p=r.ArrayBuffer,h=r.DataView,f=i.ABV&&u.isView,g=p.prototype.slice,y=i.VIEW;o(o.G+o.W+o.F*(u!==p),{ArrayBuffer:p}),o(o.S+o.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||c(e)&&y in e}}),o(o.P+o.U+o.F*n(3)(function(){return!new p(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(a(this),e);for(var n=a(this).byteLength,o=s(e,n),i=s(void 0===t?n:t,n),r=new(d(this,p))(l(i-o)),c=new h(this),u=new h(r),f=0;o<i;)u.setUint8(f++,c.getUint8(o++));return r}}),n(50)("ArrayBuffer")},function(e,t,n){var o=n(0);o(o.G+o.W+o.F*!n(71).ABV,{DataView:n(102).DataView})},function(e,t,n){n(29)("Int8",1,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Uint8",1,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Uint8",1,function(e){return function(t,n,o){return e(this,t,n,o)}},!0)},function(e,t,n){n(29)("Int16",2,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Uint16",2,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Int32",4,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Uint32",4,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Float32",4,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){n(29)("Float64",8,function(e){return function(t,n,o){return e(this,t,n,o)}})},function(e,t,n){var o=n(0),i=n(20),r=n(4),a=(n(2).Reflect||{}).apply,s=Function.apply;o(o.S+o.F*!n(3)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var o=i(e),l=r(n);return a?a(o,t,l):s.call(o,t,l)}})},function(e,t,n){var o=n(0),i=n(41),r=n(20),a=n(4),s=n(5),l=n(3),c=n(121),u=(n(2).Reflect||{}).construct,d=l(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),p=!l(function(){u(function(){})});o(o.S+o.F*(d||p),"Reflect",{construct:function(e,t){r(e),a(t);var n=arguments.length<3?e:r(arguments[2]);if(p&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(c.apply(e,o))}var l=n.prototype,h=i(s(l)?l:Object.prototype),f=Function.apply.call(e,h,t);return s(f)?f:h}})},function(e,t,n){var o=n(10),i=n(0),r=n(4),a=n(32);i(i.S+i.F*n(3)(function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){r(e),t=a(t,!0),r(n);try{return o.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var o=n(0),i=n(22).f,r=n(4);o(o.S,"Reflect",{deleteProperty:function(e,t){var n=i(r(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var o=n(0),i=n(4),r=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(128)(r,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),o(o.S,"Reflect",{enumerate:function(e){return new r(e)}})},function(e,t,n){var o=n(22),i=n(43),r=n(14),a=n(0),s=n(5),l=n(4);a(a.S,"Reflect",{get:function e(t,n){var a,c,u=arguments.length<3?t:arguments[2];return l(t)===u?t[n]:(a=o.f(t,n))?r(a,"value")?a.value:void 0!==a.get?a.get.call(u):void 0:s(c=i(t))?e(c,n,u):void 0}})},function(e,t,n){var o=n(22),i=n(0),r=n(4);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return o.f(r(e),t)}})},function(e,t,n){var o=n(0),i=n(43),r=n(4);o(o.S,"Reflect",{getPrototypeOf:function(e){return i(r(e))}})},function(e,t,n){var o=n(0);o(o.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var o=n(0),i=n(4),r=Object.isExtensible;o(o.S,"Reflect",{isExtensible:function(e){return i(e),!r||r(e)}})},function(e,t,n){var o=n(0);o(o.S,"Reflect",{ownKeys:n(142)})},function(e,t,n){var o=n(0),i=n(4),r=Object.preventExtensions;o(o.S,"Reflect",{preventExtensions:function(e){i(e);try{return r&&r(e),!0}catch(e){return!1}}})},function(e,t,n){var o=n(10),i=n(22),r=n(43),a=n(14),s=n(0),l=n(36),c=n(4),u=n(5);s(s.S,"Reflect",{set:function e(t,n,s){var d,p,h=arguments.length<4?t:arguments[3],f=i.f(c(t),n);if(!f){if(u(p=r(t)))return e(p,n,s,h);f=l(0)}if(a(f,"value")){if(!1===f.writable||!u(h))return!1;if(d=i.f(h,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=s,o.f(h,n,d)}else o.f(h,n,l(0,s));return!0}return void 0!==f.set&&(f.set.call(h,s),!0)}})},function(e,t,n){var o=n(0),i=n(83);i&&o(o.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(296),e.exports=n(8).Array.includes},function(e,t,n){var o=n(0),i=n(61)(!0);o(o.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(44)("includes")},function(e,t,n){n(298),e.exports=n(8).Array.flatMap},function(e,t,n){var o=n(0),i=n(299),r=n(11),a=n(7),s=n(20),l=n(130);o(o.P,"Array",{flatMap:function(e){var t,n,o=r(this);return s(e),t=a(o.length),n=l(o,0),i(n,o,o,t,0,1,e,arguments[1]),n}}),n(44)("flatMap")},function(e,t,n){var o=n(63),i=n(5),r=n(7),a=n(19),s=n(6)("isConcatSpreadable");e.exports=function e(t,n,l,c,u,d,p,h){for(var f,g,y=u,m=0,v=!!p&&a(p,h,3);m<c;){if(m in l){if(f=v?v(l[m],m,n):l[m],g=!1,i(f)&&(g=void 0!==(g=f[s])?!!g:o(f)),g&&d>0)y=e(t,n,f,r(f.length),y,d-1)-1;else{if(y>=9007199254740991)throw TypeError();t[y]=f}y++}m++}return y}},function(e,t,n){n(301),e.exports=n(8).String.padStart},function(e,t,n){var o=n(0),i=n(143),r=n(69),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);o(o.P+o.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(303),e.exports=n(8).String.padEnd},function(e,t,n){var o=n(0),i=n(143),r=n(69),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);o(o.P+o.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(305),e.exports=n(8).String.trimLeft},function(e,t,n){n(48)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){n(307),e.exports=n(8).String.trimRight},function(e,t,n){n(48)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){n(309),e.exports=n(79).f("asyncIterator")},function(e,t,n){n(115)("asyncIterator")},function(e,t,n){n(311),e.exports=n(8).Object.getOwnPropertyDescriptors},function(e,t,n){var o=n(0),i=n(142),r=n(16),a=n(22),s=n(95);o(o.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,o=r(e),l=a.f,c=i(o),u={},d=0;c.length>d;)void 0!==(n=l(o,t=c[d++]))&&s(u,t,n);return u}})},function(e,t,n){n(313),e.exports=n(8).Object.values},function(e,t,n){var o=n(0),i=n(144)(!1);o(o.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(315),e.exports=n(8).Object.entries},function(e,t,n){var o=n(0),i=n(144)(!0);o(o.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){n(136),n(317),e.exports=n(8).Promise.finally},function(e,t,n){var o=n(0),i=n(8),r=n(2),a=n(56),s=n(138);o(o.P+o.R,"Promise",{finally:function(e){var t=a(this,i.Promise||r.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){n(319),n(320),n(321),e.exports=n(8)},function(e,t,n){var o=n(2),i=n(0),r=n(69),a=[].slice,s=/MSIE .\./.test(r),l=function(e){return function(t,n){var o=arguments.length>2,i=!!o&&a.call(arguments,2);return e(o?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:l(o.setTimeout),setInterval:l(o.setInterval)})},function(e,t,n){var o=n(0),i=n(101);o(o.G+o.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var o=n(98),i=n(39),r=n(12),a=n(2),s=n(15),l=n(49),c=n(6),u=c("iterator"),d=c("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(h),g=0;g<f.length;g++){var y,m=f[g],v=h[m],b=a[m],_=b&&b.prototype;if(_&&(_[u]||s(_,u,p),_[d]||s(_,d,m),l[m]=p,v))for(y in o)_[y]||r(_,y,o[y],!0)}},function(e,t,n){var o=function(e){var t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function s(e,t,n,o){var i=t&&t.prototype instanceof u?t:u,r=Object.create(i.prototype),a=new k(o||[]);return r._invoke=function(e,t,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return{value:void 0,done:!0}}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var u=l(e,t,n);if("normal"===u.type){if(o=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),r}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function u(){}function d(){}function p(){}var h={};h[i]=function(){return this};var f=Object.getPrototypeOf,g=f&&f(f(w([])));g&&g!==t&&n.call(g,i)&&(h=g);var y=p.prototype=u.prototype=Object.create(h);function m(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function v(e,t){var o;this._invoke=function(i,r){function a(){return new t(function(o,a){!function o(i,r,a,s){var c=l(e[i],e,r);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){o("next",e,a,s)},function(e){o("throw",e,a,s)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return o("throw",e,a,s)})}s(c.arg)}(i,r,o,a)})}return o=o?o.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=y.constructor=p,p.constructor=d,p[a]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(v.prototype),v.prototype[r]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,o,i,r){void 0===r&&(r=Promise);var a=new v(s(t,n,o,i),r);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(y),y[a]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=w,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var s=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}},function(e,t,n){n(324),e.exports=n(145).global},function(e,t,n){var o=n(325);o(o.G,{global:n(103)})},function(e,t,n){var o=n(103),i=n(145),r=n(326),a=n(328),s=n(335),l=function(e,t,n){var c,u,d,p=e&l.F,h=e&l.G,f=e&l.S,g=e&l.P,y=e&l.B,m=e&l.W,v=h?i:i[t]||(i[t]={}),b=v.prototype,_=h?o:f?o[t]:(o[t]||{}).prototype;for(c in h&&(n=t),n)(u=!p&&_&&void 0!==_[c])&&s(v,c)||(d=u?_[c]:n[c],v[c]=h&&"function"!=typeof _[c]?n[c]:y&&u?r(d,o):m&&_[c]==d?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?r(Function.call,d):d,g&&((v.virtual||(v.virtual={}))[c]=d,e&l.R&&b&&!b[c]&&a(b,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var o=n(327);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(329),i=n(334);e.exports=n(105)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(330),i=n(331),r=n(333),a=Object.defineProperty;t.f=n(105)?Object.defineProperty:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(104);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(105)&&!n(146)(function(){return 7!=Object.defineProperty(n(332)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(104),i=n(103).document,r=o(i)&&o(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){var o=n(104);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},,,,,,,,,,,,,,function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var r=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[o].concat(a).concat([r]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o,i,r={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=o.apply(this,arguments)),i}),s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var o=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),l=null,c=0,u=[],d=n(362);function p(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=r[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(v(o.parts[a],t))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(v(o.parts[a],t));r[o.id]={id:o.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function f(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=n.nc;o&&(e.attrs.nonce=o)}return m(t,e.attrs),f(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,o,i,r;if(t.transform&&e.css){if(!(r="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var a=c++;n=l||(l=y(t)),o=I.bind(null,n,a,!1),i=I.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),f(e,t),t}(t),o=function(e,t,n){var o=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(o=d(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),o=function(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return p(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var a=n[i];(s=r[a.id]).refs--,o.push(s)}for(e&&p(h(e,t),t),i=0;i<o.length;i++){var s;if(0===(s=o[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var b,_=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function I(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=_(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}},function(e,t,n){var o=function(e,t,n){for(var o=-1,i=Object(e),r=n(e),a=r.length;a--;){var s=r[++o];if(!1===t(i[s],s,i))break}return e},i=n(59),r=function(e,t,n,r){return function(e,t){e&&o(e,t,i.a)}(e,function(e,o,i){t(r,n(e),o,i)}),r},a=n(109),s=Object.prototype.toString,l=function(e,t){return function(n,o){return r(n,e,t(o),{})}}(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),e[t]=n},function(e){return function(){return e}}(a.a));t.a=l},function(e,t,n){(function(e){var o=n(25),i=r&&!r.nodeType&&r,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?o.a.Buffer:void 0,l=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,o=l?l(n):new e.constructor(n);return e.copy(o),o}}).call(this,n(113)(e))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=n(915)},function(e,t,n){n(150),e.exports=n(367)},function(e,t){
/*! *****************************************************************************
                Copyright (C) Microsoft. All rights reserved.
                Licensed under the Apache License, Version 2.0 (the "License"); you may not use
                this file except in compliance with the License. You may obtain a copy of the
                License at http://www.apache.org/licenses/LICENSE-2.0
                
                THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
                KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
                WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
                MERCHANTABLITY OR NON-INFRINGEMENT.
                
                See the Apache Version 2.0 License for specific language governing permissions
                and limitations under the License.
                ***************************************************************************** */
var n;!function(e){!function(t){var n="object"==typeof o?o:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=a(e);function a(e,t){return function(n,o){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:o}),t&&t(n,o)}}void 0===n.Reflect?n.Reflect=e:r=a(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,o=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,l=!a&&!s,c={create:a?function(){return M(Object.create(null))}:s?function(){return M({__proto__:null})}:function(){return M({})},has:l?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:l?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),d="object"==typeof i&&i.env&&"true"===i.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var o=this._keys.length,i=n+1;i<o;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,o)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function o(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}():Map,h=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}():Set,f=new(d||"function"!=typeof WeakMap?function(){var e=c.create(),n=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var t;do{t="@@WeakMap@@"+a()}while(c.has(e,t));return e[t]=!0,t}function i(e,o){if(!t.call(e,n)){if(!o)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function r(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):r(new Uint8Array(e),e):r(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",o=0;o<16;++o){var i=t[o];4!==o&&6!==o&&8!==o||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function g(e,t,n){var o=f.get(e);if(I(o)){if(!n)return;o=new p,f.set(e,o)}var i=o.get(t);if(I(i)){if(!n)return;i=new p,o.set(t,i)}return i}function y(e,t,n){var o=g(t,n,!1);return!I(o)&&!!o.has(e)}function m(e,t,n){var o=g(t,n,!1);if(!I(o))return o.get(e)}function v(e,t,n,o){g(n,o,!0).set(e,t)}function b(e,t){var n=[],o=g(e,t,!1);if(I(o))return n;for(var i=function(e){var t=T(e,r);if(!x(t))throw new TypeError;var n=t.call(e);if(!w(n))throw new TypeError;return n}(o.keys()),a=0;;){var s=N(i);if(!s)return n.length=a,n;var l=s.value;try{n[a]=l}catch(e){try{E(i)}finally{throw e}}a++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function I(e){return void 0===e}function k(e){return null===e}function w(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e){var t=function(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=T(e,o);if(void 0!==i){var r=i.call(e,n);if(w(r))throw new TypeError;return r}return function(e,t){if("string"===t){var n=e.toString;if(x(n)&&!w(i=n.call(e)))return i;if(x(o=e.valueOf)&&!w(i=o.call(e)))return i}else{var o;if(x(o=e.valueOf)&&!w(i=o.call(e)))return i;var i,r=e.toString;if(x(r)&&!w(i=r.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function S(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function A(e){return"function"==typeof e}function T(e,t){var n=e[t];if(null!=n){if(!x(n))throw new TypeError;return n}}function N(e){var t=e.next();return!t.done&&t}function E(e){var t=e.return;t&&t.call(e)}function D(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,o=n&&Object.getPrototypeOf(n);if(null==o||o===Object.prototype)return t;var i=o.constructor;return"function"!=typeof i||i===e?t:i}function M(e){return e.__=void 0,delete e.__,e}e("decorate",function(e,t,n,o){if(I(n)){if(!S(e))throw new TypeError;if(!A(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var o=(0,e[n])(t);if(!I(o)&&!k(o)){if(!A(o))throw new TypeError;t=o}}return t}(e,t)}if(!S(e))throw new TypeError;if(!w(t))throw new TypeError;if(!w(o)&&!I(o)&&!k(o))throw new TypeError;return k(o)&&(o=void 0),function(e,t,n,o){for(var i=e.length-1;i>=0;--i){var r=(0,e[i])(t,n,o);if(!I(r)&&!k(r)){if(!w(r))throw new TypeError;o=r}}return o}(e,t,n=C(n),o)}),e("metadata",function(e,t){return function(n,o){if(!w(n))throw new TypeError;if(!I(o)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(o))throw new TypeError;v(e,t,n,o)}}),e("defineMetadata",function(e,t,n,o){if(!w(n))throw new TypeError;return I(o)||(o=C(o)),v(e,t,n,o)}),e("hasMetadata",function(e,t,n){if(!w(t))throw new TypeError;return I(n)||(n=C(n)),function e(t,n,o){if(y(t,n,o))return!0;var i=D(n);return!k(i)&&e(t,i,o)}(e,t,n)}),e("hasOwnMetadata",function(e,t,n){if(!w(t))throw new TypeError;return I(n)||(n=C(n)),y(e,t,n)}),e("getMetadata",function(e,t,n){if(!w(t))throw new TypeError;return I(n)||(n=C(n)),function e(t,n,o){if(y(t,n,o))return m(t,n,o);var i=D(n);return k(i)?void 0:e(t,i,o)}(e,t,n)}),e("getOwnMetadata",function(e,t,n){if(!w(t))throw new TypeError;return I(n)||(n=C(n)),m(e,t,n)}),e("getMetadataKeys",function(e,t){if(!w(e))throw new TypeError;return I(t)||(t=C(t)),function e(t,n){var o=b(t,n),i=D(t);if(null===i)return o;var r=e(i,n);if(r.length<=0)return o;if(o.length<=0)return r;for(var a=new h,s=[],l=0,c=o;l<c.length;l++){var u=c[l];a.has(u)||(a.add(u),s.push(u))}for(var d=0,p=r;d<p.length;d++)u=p[d],a.has(u)||(a.add(u),s.push(u));return s}(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!w(e))throw new TypeError;return I(t)||(t=C(t)),b(e,t)}),e("deleteMetadata",function(e,t,n){if(!w(t))throw new TypeError;I(n)||(n=C(n));var o=g(t,n,!1);if(I(o))return!1;if(!o.delete(e))return!1;if(o.size>0)return!0;var i=f.get(t);return i.delete(n),i.size>0||f.delete(t),!0})}(r)}()}(n||(n={}))},function(e,t,n){
/** @license React v16.13.1
                 * react.production.min.js
                 *
                 * Copyright (c) Facebook, Inc. and its affiliates.
                 *
                 * This source code is licensed under the MIT license found in the
                 * LICENSE file in the root directory of this source tree.
                 */
var o=n(359),i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function I(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},I.prototype=_.prototype;var w=k.prototype=new I;w.constructor=k,o(w,_.prototype),w.isPureReactComponent=!0;var C={current:null},S=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,o)&&!x.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:r,type:e,key:a,ref:s,props:i,_owner:C.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var N=/\/+/g,E=[];function D(e,t,n,o){if(E.length){var i=E.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=o,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:o,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>E.length&&E.push(e)}function O(e,t,n){return null==e?0:function e(t,n,o,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case a:l=!0}}if(l)return o(i,t,""===n?"."+L(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=n+L(s=t[c],c);l+=e(s,u,o,i)}else if("function"==typeof(u=null===t||"object"!=typeof t?null:"function"==typeof(u=y&&t[y]||t["@@iterator"])?u:null))for(t=u.call(t),c=0;!(s=t.next()).done;)l+=e(s=s.value,u=n+L(s,c++),o,i);else if("object"===s)throw o=""+t,Error(m(31,"[object Object]"===o?"object with keys {"+Object.keys(t).join(", ")+"}":o,""));return l}(e,"",t,n)}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function R(e,t,n){var o=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?P(e,o,n,function(e){return e}):null!=e&&(T(e)&&(e=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),o.push(e))}function P(e,t,n,o,i){var r="";null!=n&&(r=(""+n).replace(N,"$&/")+"/"),O(e,R,t=D(t,r,o,i)),M(t)}var j={current:null};function F(){var e=j.current;if(null===e)throw Error(m(321));return e}var z={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:o};t.Children={map:function(e,t,n){if(null==e)return e;var o=[];return P(e,o,null,t,n),o},forEach:function(e,t,n){if(null==e)return e;O(e,B,t=D(null,null,t,n)),M(t)},count:function(e){return O(e,function(){return null},null)},toArray:function(e){var t=[];return P(e,t,null,function(e){return e}),t},only:function(e){if(!T(e))throw Error(m(143));return e}},t.Component=_,t.Fragment=s,t.Profiler=c,t.PureComponent=k,t.StrictMode=l,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null==e)throw Error(m(267,e));var i=o({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!x.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:r,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return F().useCallback(e,t)},t.useContext=function(e,t){return F().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return F().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return F().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return F().useLayoutEffect(e,t)},t.useMemo=function(e,t){return F().useMemo(e,t)},t.useReducer=function(e,t,n){return F().useReducer(e,t,n)},t.useRef=function(e){return F().useRef(e)},t.useState=function(e){return F().useState(e)},t.version="16.13.1"},function(e,t,n){
/*
                object-assign
                (c) Sindre Sorhus
                @license MIT
                */
var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(s[c]=n[c]);if(o){a=o(n);for(var u=0;u<a.length;u++)r.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},function(e,t,n){var o=n(361);"string"==typeof o&&(o=[[e.i,o,""]]),n(351)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(350)(!1)).push([e.i,"@keyframes blinkAnimation {\n  50% {\n    border-color: transparent;\n  }\n}\n.caret.blink {\n  animation: 1s blinkAnimation step-end infinite;\n}\n@keyframes blinkAnimation-restart {\n  50% {\n    border-color: transparent;\n  }\n}\n.caret.blink-restart {\n  animation: 1s blinkAnimation-restart step-end infinite;\n}\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var o=n(364);"string"==typeof o&&(o=[[e.i,o,""]]),n(351)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(350)(!1)).push([e.i,".bulb-drag-shadow > * {\n  position: absolute;\n  -webkit-mask-image: -webkit-gradient(linear, left top, right bottom, from(rgba(0, 0, 0, 0.8)), to(rgba(0, 0, 0, 0)));\n  pointer-events: none;\n}\n",""])},,,function(e,t,n){var o,r,a,c,u,d;n.r(t),n.d(t,"serializer",function(){return xd}),n.d(t,"convertor",function(){return Ad}),n.d(t,"utils",function(){return Td});var p={};n.r(p),n.d(p,"KeyBoardEventHandler",function(){return _i}),n.d(p,"MouseEventHandler",function(){return Bi}),n.d(p,"CompositionEventHandler",function(){return Ri}),n.d(p,"InputEventHandler",function(){return Pi}),n.d(p,"DragEventHandler",function(){return ji}),n.d(p,"ClipboardEventHandler",function(){return Fi}),n(357);var h,f,g,y="data-bulb-node-id";function m(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata("injectionTokens",e)||{};return Object.keys(n).forEach(function(e){t[+e]=n[e]}),t}function v(e){return!!e.useFactory}function b(e){return"string"==typeof e||"symbol"==typeof e}function _(e){return"object"==typeof e&&"token"in e&&"multiple"in e}function I(e){return null!=e.useValue}!function(e){e.VALUE_CHANGE="valueChange",e.DOCUMENT_DID_UPDATE="documentDidUpdate",e.SELECTION_DID_UPDATE="selectionDidUpdate",e.SELECT="select",e.DRAW_DRAG_SHADOW="drawDragShadow",e.DRAW_SELECTION="drawSelection"}(h||(h={})),function(e){e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD"}(f||(f={})),function(e){e.ON_REGISTER_PLUGIN="onRegisterPlugin",e.ON_REGISTER_COMPONENT="onRegisterComponent",e.ON_LOAD_DATA="onLoadData",e.ON_READY="onReady",e.AFTER_SET_VALUE="afterSetValue",e.ON_PARSE_CLIPBOARD_DATA="onParseClipboardData",e.ON_COPY_CONTENT="onCopyContent",e.ON_SET_CLIPBOARD_DATA="onSetClipboardData",e.AFTER_SET_CLIPBOARD_DATA="afterSetClipboardData",e.ON_EVENT="onEvent",e.AFTER_EVENT="afterEvent",e.ON_RANGE_PARSING="onRangeParsing",e.BEFORE_RENDER_NODE="beforeRenderNode",e.AFTER_RENDER_NODE="afterRenderNode",e.ON_EXECUTE_COMMAND="onExecuteCommand",e.BEFORE_INSERT_BLOCK="beforeInsertBlock",e.BEFORE_GEN_NODE_ID="beforeGenerateNodeId",e.ON_ERROR="onError",e.ON_WARNING="onWarning",e.ON_LOG="onLog",e.ON_DEBUG="onDebug",e.BEFORE_CONVERT_RECTS="beforeConvertRects",e.AFTER_CONVERT_RECTS="afterConvertRects"}(g||(g={}));var k=function(){function e(){this._registryMap=new Map}return e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}();function w(e,t,n){return(w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(i,n.prototype),i}).apply(null,arguments)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var S,x=new Map,A=function(){function e(e){this.parent=e,this._registry=new k}return e.prototype.register=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{singleton:!1};if(n.singleton&&(I(t)||v(t)))throw"Cannot use {singleton: true} with ValueProviders or FactoryProviders";return this._registry.set(e,{provider:t,options:n}),this},e.prototype.registerType=function(e,t){return b(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(b(e)){if(b(t))return this.register(e,{useToken:t},{singleton:!0});if(t)return this.register(e,{useClass:t},{singleton:!0});throw'Cannot register a type name as a singleton without a "to" token'}var n=e;return t&&!b(t)&&(n=t),this.register(e,{useClass:n},{singleton:!0})},e.prototype.resolve=function(e){var t=this.getRegistration(e);if(!t&&b(e))throw"Attempted to resolve unregistered dependency token: "+e.toString();return t?this.resolveRegistration(t):this.construct(e)},e.prototype.resolveRegistration=function(e){return I(e.provider)?e.provider.useValue:e.provider.useToken?e.options.singleton?e.instance||(e.instance=this.resolve(e.provider.useToken)):this.resolve(e.provider.useToken):function(e){return!!e.useClass}(e.provider)?e.options.singleton?e.instance||(e.instance=this.construct(e.provider.useClass)):this.construct(e.provider.useClass):v(e.provider)?e.provider.useFactory(this):this.construct(e.provider)},e.prototype.resolveAll=function(e){var t=this,n=this.getAllRegistrations(e);if(!n&&b(e))throw"Attempted to resolve unregistered dependency token: "+e.toString();return n?n.map(function(e){return t.resolveRegistration(e)}):[this.construct(e)]},e.prototype.isRegistered=function(e){return this._registry.has(e)},e.prototype.reset=function(){this._registry.clear()},e.prototype.createChildContainer=function(){return new e(this)},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e){var t=this;if(0===e.length)return new e;var n=x.get(e);if(!n||0===n.length)throw"TypeInfo not known for "+e;return w(e,function(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.map(function(e){return _(e)?e.multiple?t.resolveAll(e.token):t.resolve(e.token):t.resolve(e)})))},e}(),T=new A,N=function(){return function(e){x.set(e,m(e))}},E=function(){return function(e){N()(e),T.registerSingleton(e)}};if("undefined"==typeof Reflect||!Reflect.getMetadata)throw"tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.";var D="undefined"!=typeof Symbol?Symbol("immer-nothing"):((S={})["immer-nothing"]=!0,S),M="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-draftable"):"__$immer_draftable",O="undefined"!=typeof Symbol&&Symbol.for?Symbol.for("immer-state"):"__$immer_state";function L(e){return!!e&&!!e[O]}function B(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||!!e[M]||!!e.constructor[M])}var R=Object.assign||function(e,t){for(var n in t)H(t,n)&&(e[n]=t[n]);return e},P="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function j(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var n=Object.create(Object.getPrototypeOf(e));return P(e).forEach(function(o){if(o!==O){var i=Object.getOwnPropertyDescriptor(e,o),r=i.value;if(i.get){if(!t)throw new Error("Immer drafts cannot have computed properties");r=i.get.call(e)}i.enumerable?n[o]=r:Object.defineProperty(n,o,{value:r,writable:!0,configurable:!0})}}),n}function F(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(n,e[n],e);else P(e).forEach(function(n){return t(n,e[n],e)})}function z(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!n&&n.enumerable}function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function V(e){if(!B(e))return e;if(Array.isArray(e))return e.map(V);var t=Object.create(Object.getPrototypeOf(e));for(var n in e)t[n]=V(e[n]);return t}var U=function(e){this.drafts=[],this.parent=e,this.canAutoFreeze=!0,this.patches=null};function W(e){e[O].revoke()}U.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},U.prototype.revoke=function(){this.leave(),this.drafts.forEach(W),this.drafts=null},U.prototype.leave=function(){this===U.current&&(U.current=this.parent)},U.current=null,U.enter=function(){return this.current=new U(this.current)};var J={};function Z(){this.revoked=!0}function Y(e){return e.copy||e.base}function Q(e,t){var n=e[O];if(n&&!n.finalizing){n.finalizing=!0;var o=e[t];return n.finalizing=!1,o}return e[t]}function X(e){e.modified||(e.modified=!0,e.parent&&X(e.parent))}function $(e){e.copy||(e.copy=K(e.base))}function K(e){var t=e&&e[O];if(t){t.finalizing=!0;var n=j(t.draft,!0);return t.finalizing=!1,n}return j(e)}function q(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(Y(e)))}function ee(e){for(var t=e.length-1;t>=0;t--){var n=e[t][O];n.modified||(Array.isArray(n.base)?ne(n)&&X(n):te(n)&&X(n))}}function te(e){for(var t=e.base,n=e.draft,o=Object.keys(n),i=o.length-1;i>=0;i--){var r=o[i],a=t[r];if(void 0===a&&!H(t,r))return!0;var s=n[r],l=s&&s[O];if(l?l.base!==a:!G(s,a))return!0}return o.length!==Object.keys(t).length}function ne(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var oe=Object.freeze({willFinalize:function(e,t,n){e.drafts.forEach(function(e){e[O].finalizing=!0}),n?L(t)&&t[O].scope===e&&ee(e.drafts):(e.patches&&function e(t){if(t&&"object"==typeof t){var n=t[O];if(n){var o=n.base,i=n.draft,r=n.assigned;if(Array.isArray(t)){if(ne(n)){if(X(n),r.length=!0,i.length<o.length)for(var a=i.length;a<o.length;a++)r[a]=!1;else for(var s=o.length;s<i.length;s++)r[s]=!0;for(var l=0;l<i.length;l++)void 0===r[l]&&e(i[l])}}else Object.keys(i).forEach(function(t){void 0!==o[t]||H(o,t)?r[t]||e(i[t]):(r[t]=!0,X(n))}),Object.keys(o).forEach(function(e){void 0!==i[e]||H(i,e)||(r[e]=!1,X(n))})}}}(e.drafts[0]),ee(e.drafts))},createProxy:function e(t,n){var o=Array.isArray(t),i=K(t);F(i,function(n){!function(t,n,o){var i=J[n];i?i.enumerable=o:J[n]=i={configurable:!0,enumerable:o,get:function(){return function(t,n){q(t);var o=Q(Y(t),n);return t.finalizing?o:o===Q(t.base,n)&&B(o)?($(t),t.copy[n]=e(o,t)):o}(this[O],n)},set:function(e){!function(e,t,n){if(q(e),e.assigned[t]=!0,!e.modified){if(G(n,Q(Y(e),t)))return;X(e),$(e)}e.copy[t]=n}(this[O],n,e)}},Object.defineProperty(t,n,i)}(i,n,o||z(t,n))});var r,a,s,l=n?n.scope:U.current;return r=i,a=O,s={scope:l,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:n,base:t,draft:i,copy:null,revoke:Z,revoked:!1},Object.defineProperty(r,a,{value:s,enumerable:!1,writable:!0}),l.drafts.push(i),i}});function ie(e,t){var n=t?t.scope:U.current,o={scope:n,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},i=Array.isArray(e)?Proxy.revocable([o],ae):Proxy.revocable(o,re),r=i.revoke,a=i.proxy;return o.draft=a,o.revoke=r,n.drafts.push(a),a}var re={get:function(e,t){if(t===O)return e;var n=e.drafts;if(!e.modified&&H(n,t))return n[t];var o=se(e)[t];if(e.finalized||!B(o))return o;if(e.modified){if(o!==le(e.base,t))return o;n=e.copy}return n[t]=ie(o,e)},has:function(e,t){return t in se(e)},ownKeys:function(e){return Reflect.ownKeys(se(e))},set:function(e,t,n){if(!e.modified){var o=le(e.base,t);if(n?G(o,n)||n===e.drafts[t]:G(o,n)&&t in e.base)return!0;ce(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){return void 0!==le(e.base,t)||t in e.base?(e.assigned[t]=!1,ce(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var n=se(e),o=Reflect.getOwnPropertyDescriptor(n,t);return o&&(o.writable=!0,o.configurable=!Array.isArray(n)||"length"!==t),o},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},ae={};function se(e){return e.copy||e.base}function le(e,t){var n=e[O],o=Reflect.getOwnPropertyDescriptor(n?se(n):e,t);return o&&o.value}function ce(e){e.modified||(e.modified=!0,e.copy=R(j(e.base),e.drafts),e.drafts=null,e.parent&&ce(e.parent))}F(re,function(e,t){ae[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ae.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return re.deleteProperty.call(this,e[0],t)},ae.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return re.set.call(this,e[0],t,n)};var ue=Object.freeze({willFinalize:function(){},createProxy:ie}),de=function(e,t){for(var n=0,o=t;n<o.length;n+=1){var i=o[n],r=i.path,a=i.op,s=V(i.value);if(!r.length)throw new Error("Illegal state");for(var l=e,c=0;c<r.length-1;c++)if(!(l=l[r[c]])||"object"!=typeof l)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var u=r[r.length-1];switch(a){case"replace":l[u]=s;break;case"add":Array.isArray(l)?l.splice(u,0,s):l[u]=s;break;case"remove":Array.isArray(l)?l.splice(u,1):delete l[u];break;default:throw new Error("Unsupported patch operation: "+a)}}return e},pe={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:void 0===i&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},he=function(e){R(this,pe,e),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)};he.prototype.produce=function(e,t,n){var o,i=this;if("function"==typeof e&&"function"!=typeof t){var r=t;t=e;var a=this;return function(e){var n=this;void 0===e&&(e=r);for(var o=[],i=arguments.length-1;i-- >0;)o[i]=arguments[i+1];return a.produce(e,function(e){return t.call.apply(t,[n,e].concat(o))})}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("The third argument to `produce` must be a function or undefined");if(B(e)){var s=U.enter(),l=this.createProxy(e),c=!0;try{o=t(l),c=!1}finally{c?s.revoke():s.leave()}return o instanceof Promise?o.then(function(e){return s.usePatches(n),i.processResult(e,s)},function(e){throw s.revoke(),e}):(s.usePatches(n),this.processResult(o,s))}return void 0===(o=t(e))?e:o!==D?o:void 0},he.prototype.produceWithPatches=function(e,t,n){var o,i,r=this;if("function"==typeof e)return function(t){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return r.produceWithPatches(t,function(t){return e.apply(void 0,[t].concat(n))})};if(n)throw new Error("A patch listener cannot be passed to produceWithPatches");return[this.produce(e,t,function(e,t){o=e,i=t}),o,i]},he.prototype.createDraft=function(e){if(!B(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=U.enter(),n=this.createProxy(e);return n[O].isManual=!0,t.leave(),n},he.prototype.finishDraft=function(e,t){var n=e&&e[O];if(!n||!n.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(n.finalized)throw new Error("The given draft is already finalized");var o=n.scope;return o.usePatches(t),this.processResult(void 0,o)},he.prototype.setAutoFreeze=function(e){this.autoFreeze=e},he.prototype.setUseProxies=function(e){this.useProxies=e,R(this,e?ue:oe)},he.prototype.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var o=t[n];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}return L(e)?de(e,t):this.produce(e,function(e){return de(e,t.slice(n+1))})},he.prototype.processResult=function(e,t){var n=t.drafts[0],o=void 0!==e&&e!==n;if(this.willFinalize(t,e,o),o){if(n[O].modified)throw t.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");B(e)&&(e=this.finalize(e,null,t)),t.patches&&(t.patches.push({op:"replace",path:[],value:e}),t.inversePatches.push({op:"replace",path:[],value:n[O].base}))}else e=this.finalize(n,[],t);return t.revoke(),t.patches&&t.patchListener(t.patches,t.inversePatches),e!==D?e:void 0},he.prototype.finalize=function(e,t,n){var o=this,i=e[O];if(!i)return Object.isFrozen(e)?e:this.finalizeTree(e,null,n);if(i.scope!==n)return e;if(!i.modified)return i.base;if(!i.finalized){if(i.finalized=!0,this.finalizeTree(i.draft,t,n),this.onDelete)if(this.useProxies){var r=i.assigned;for(var a in r)r[a]||this.onDelete(i,a)}else{var s=i.base,l=i.copy;F(s,function(e){H(l,e)||o.onDelete(i,e)})}this.onCopy&&this.onCopy(i),this.autoFreeze&&n.canAutoFreeze&&Object.freeze(i.copy),t&&n.patches&&function(e,t,n,o){Array.isArray(e.base)?function(e,t,n,o){var i,r,a=e.base,s=e.copy,l=e.assigned;s.length<a.length&&(a=(i=[s,a])[0],s=i[1],n=(r=[o,n])[0],o=r[1]);for(var c=s.length-a.length,u=0;a[u]===s[u]&&u<a.length;)++u;for(var d=a.length;d>u&&a[d-1]===s[d+c-1];)--d;for(var p=u;p<d;++p)if(l[p]&&s[p]!==a[p]){var h=t.concat([p]);n.push({op:"replace",path:h,value:s[p]}),o.push({op:"replace",path:h,value:a[p]})}for(var f=n.length,g=d+c-1;g>=d;--g){var y=t.concat([g]);n[f+g-d]={op:"add",path:y,value:s[g]},o.push({op:"remove",path:y})}}(e,t,n,o):function(e,t,n,o){var i=e.base,r=e.copy;F(e.assigned,function(e,a){var s=i[e],l=r[e],c=a?e in i?"replace":"add":"remove";if(s!==l||"replace"!==c){var u=t.concat(e);n.push("remove"===c?{op:c,path:u}:{op:c,path:u,value:l}),o.push("add"===c?{op:"remove",path:u}:"remove"===c?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}})}(e,t,n,o)}(i,t,n.patches,n.inversePatches)}return i.copy},he.prototype.finalizeTree=function(e,t,n){var o=this,i=e[O];i&&(this.useProxies||(i.copy=j(i.draft,!0)),e=i.copy);var r=!!t&&!!n.patches,a=function(s,l,c){if(l===c)throw Error("Immer forbids circular references");var u=!!i&&c===e;if(L(l)){var d=u&&r&&!i.assigned[s]?t.concat(s):null;if(L(l=o.finalize(l,d,n))&&(n.canAutoFreeze=!1),Array.isArray(c)||z(c,s)?c[s]=l:Object.defineProperty(c,s,{value:l}),u&&l===i.base[s])return}else{if(u&&G(l,i.base[s]))return;B(l)&&!Object.isFrozen(l)&&F(l,a)}u&&o.onAssign&&o.onAssign(i,s,l)};return F(e,a),e};var fe,ge,ye,me=new he,ve=me.produce,be=(me.produceWithPatches.bind(me),me.setAutoFreeze.bind(me),me.setUseProxies.bind(me),me.applyPatches.bind(me),me.createDraft.bind(me),me.finishDraft.bind(me),ve);!function(e){e.Document="document",e.Block="block",e.Inline="inline",e.Text="text",e.Unknown="unknown"}(fe||(fe={})),function(e){e[e.DepthFirst=0]="DepthFirst"}(ge||(ge={}));var _e=new he({autoFreeze:!1}).produce,Ie=function(){this[ye]=!0};ye=M;var ke=0,we=function(){return ir.generateNodeId(ke++)};function Ce(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var xe=function(e){function t(t){var n=this;(n=e.call(this)||this).nodes=[],n.parent=null;var o=t.id,i=void 0===o?we():o,r=t.nodes,a=void 0===r?[]:r;return n.id=i,n.nodes=a,n}return s(t,e),t.findCommonAncestor=function(e,n){var o=e.getDepth();if(0===o)return e;var i=n.getDepth();if(0===i)return n;if(o<i)return t.findCommonAncestor(n,e);for(var r=o-i,a=0;a<r;a++)e=e.parent;for(;e.id!==n.id;)e=e.parent,n=n.parent;return e},t.fromJSON=function(e){var t=e.id;return{id:t}},t.prototype.toJSON=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={type:this.type};return e&&(t.id=this.id),t},t.prototype.find=function(e){return this.nodes.find(e)},t.prototype.deepFind=function(e){if(e(this))return this;for(var t,n=0,o=this.nodes;n<o.length;n++){var i=o[n],r=i.deepFind(e);if(r){t=r;break}}return t},t.prototype.findLast=function(e){return Ce(this.nodes).reverse().find(e)},t.prototype.deepFindLast=function(e){for(var t=0,n=Ce(this.nodes).reverse();t<n.length;t++){var o=n[t],i=o.deepFindLast(e);if(i)return i}return e(this)?this:null},t.prototype.forEach=function(e){this.nodes.forEach(e)},t.prototype.deepForEach=function(e){e(this),this.nodes.forEach(function(t){t.deepForEach(e)})},t.prototype.deepRemove=function(e){return e(this)?this.parent&&this.parent.remove(this.index()):this.isBlock()||this.isDocument()||this.isInline()?this.nodes.forEach(function(t){return t.deepRemove(e)}):void 0},t.prototype.indexOf=function(e){return this.nodes.findIndex(function(t){return t.id===e.id})},t.prototype.deepIndexOf=function(e){if(!e)return-1;for(var t=e;t.parent&&t.parent.id!==this.id;)t=t.parent;return this.indexOf(t)},t.prototype.findNodeById=function(e){return this.deepFind(function(t){return t.id===e})},t.prototype.remove=function(e){if(e>this.nodes.length)throw Error("error param: slotIndex!");this.nodes.splice(e,1)},t.prototype.insert=function(e,t){if(e.isDocument())throw Error("cannot insert document!");if(!e.nodes)throw Error("cannot insert Node into a empty Node!");if(t>this.nodes.length)throw Error("error param: slotIndex!");this.nodes.splice(t,0,e)},t.prototype.index=function(){if(!this.isDocument())return this.parent.indexOf(this)},t.prototype.isDocument=function(){return this.type===fe.Document},t.prototype.isBlock=function(){return this.type===fe.Block},t.prototype.isInline=function(){return this.type===fe.Inline},t.prototype.isText=function(){return this.type===fe.Text},t.prototype.nextSibling=function(){if(this.isDocument())return null;var e=this.index();return this.parent.nodes.length!==e+1?this.parent.nodes[e+1]:null},t.prototype.preSibling=function(){if(this.isDocument())return null;var e=this.index();return 0!==e?this.parent.nodes[e-1]:null},t.prototype.next=function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.DepthFirst)===ge.DepthFirst){if(this.nodes.length)return this.nodes[0];for(var e,t=this;t;){if(e=t.nextSibling())return e;t=t.parent}return null}},t.prototype.pre=function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.DepthFirst)===ge.DepthFirst){var e=this.preSibling();if(e){for(;e.nodes.length;)e=e.nodes[e.nodes.length-1];return e}return this.parent}},t.prototype.getDepth=function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},t.prototype.getLast=function(){for(var e=this;e.nodes&&e.nodes.length>0;)e=e.nodes[e.nodes.length-1];return e},t.prototype.getFirst=function(){for(var e=this;e.nodes&&e.nodes.length>0;)e=e.nodes[0];return e},t.prototype.getFirstText=function(){return this.isText()?this:this.deepFind(function(e){return e.isText()})},t.prototype.getLastText=function(){return this.isText()?this:this.deepFindLast(function(e){return e.isText()})},t.prototype.contains=function(e){var t=this;return!!e.closest(function(e){return e.equals(t)})},t.prototype.hasText=function(){return!!this.find(function(e){return e.isText()})},t.prototype.deepHasText=function(){return!!this.deepFind(function(e){return e.isText()})},t.prototype.hasInline=function(){return!!this.find(function(e){return e.isInline()})},t.prototype.hasBlock=function(){return!!this.find(function(e){return e.isBlock()})},t.prototype.equals=function(e){return e.id===this.id},t.prototype.isBefore=function(e){if(!e)return!1;var n=t.findCommonAncestor(this,e);return!!n&&n.deepIndexOf(this)<n.deepIndexOf(e)},t.prototype.isAfter=function(e){if(!e)return!1;var n=t.findCommonAncestor(this,e);return!!n&&n.deepIndexOf(this)>n.deepIndexOf(e)},t.prototype.closest=function(e){if(e(this,0))return this;for(var t=this.parent,n=1;t;){if(e(t,n))return t;t=t.parent,n++}},t.prototype.getPath=function(e){if(!e)return[];for(var t=e,n=[];t.parent&&t.id!==this.id;)n.push(t.index()),t=t.parent;return n.reverse()},t.prototype.updateParent=function(e){var t=this;this.parent=e,this.nodes.forEach(function(n){return n.updateParent(null===e?null:t)})},t.prototype.getLength=function(){return this.getText().length},t.prototype.getText=function(){return this.nodes.map(function(e){return e.getText()}).join("")},t}(Ie),Ae=function(e,t){return e===t||e!=e&&t!=t},Te=function(e,t){for(var n=e.length;n--;)if(Ae(e[n][0],t))return n;return-1},Ne=Array.prototype.splice;function Ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ee.prototype.clear=function(){this.__data__=[],this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=Te(t,e);return!(n<0||(n==t.length-1?t.pop():Ne.call(t,n,1),--this.size,0))},Ee.prototype.get=function(e){var t=this.__data__,n=Te(t,e);return n<0?void 0:t[n][1]},Ee.prototype.has=function(e){return Te(this.__data__,e)>-1},Ee.prototype.set=function(e,t){var n=this.__data__,o=Te(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};var De,Me=Ee,Oe=n(106),Le=n(25),Be=Le.a["__core-js_shared__"],Re=(De=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||""))?"Symbol(src)_1."+De:"",Pe=n(34),je=Function.prototype.toString,Fe=function(e){if(null!=e){try{return je.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ze=/^\[object .+?Constructor\]$/,He=Function.prototype,Ge=Object.prototype,Ve=He.toString,Ue=Ge.hasOwnProperty,We=RegExp("^"+Ve.call(Ue).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=function(e){return!(!Object(Pe.a)(e)||function(e){return!!Re&&Re in e}(e))&&(Object(Oe.a)(e)?We:ze).test(Fe(e))},Ze=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Je(n)?n:void 0},Ye=Ze(Le.a,"Map"),Qe=Ze(Object,"create"),Xe=Object.prototype.hasOwnProperty,$e=Object.prototype.hasOwnProperty;function Ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Ke.prototype.clear=function(){this.__data__=Qe?Qe(null):{},this.size=0},Ke.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ke.prototype.get=function(e){var t=this.__data__;if(Qe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Xe.call(t,e)?t[e]:void 0},Ke.prototype.has=function(e){var t=this.__data__;return Qe?void 0!==t[e]:$e.call(t,e)},Ke.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qe&&void 0===t?"__lodash_hash_undefined__":t,this};var qe=Ke,et=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function tt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}tt.prototype.clear=function(){this.size=0,this.__data__={hash:new qe,map:new(Ye||Me),string:new qe}},tt.prototype.delete=function(e){var t=et(this,e).delete(e);return this.size-=t?1:0,t},tt.prototype.get=function(e){return et(this,e).get(e)},tt.prototype.has=function(e){return et(this,e).has(e)},tt.prototype.set=function(e,t){var n=et(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};var nt=tt;function ot(e){var t=this.__data__=new Me(e);this.size=t.size}ot.prototype.clear=function(){this.__data__=new Me,this.size=0},ot.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ot.prototype.get=function(e){return this.__data__.get(e)},ot.prototype.has=function(e){return this.__data__.has(e)},ot.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Me){var o=n.__data__;if(!Ye||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new nt(o)}return n.set(e,t),this.size=n.size,this};var it=ot,rt=function(){try{var e=Ze(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),at=function(e,t,n){"__proto__"==t&&rt?rt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},st=Object.prototype.hasOwnProperty,lt=function(e,t,n){var o=e[t];st.call(e,t)&&Ae(o,n)&&(void 0!==n||t in e)||at(e,t,n)},ct=function(e,t,n,o){var i=!n;n||(n={});for(var r=-1,a=t.length;++r<a;){var s=t[r],l=o?o(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?at(n,s,l):lt(n,s,l)}return n},ut=n(59),dt=n(112),pt=n(74),ht=Object.prototype.hasOwnProperty,ft=function(e){if(!Object(Pe.a)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Object(pt.a)(e),n=[];for(var o in e)("constructor"!=o||!t&&ht.call(e,o))&&n.push(o);return n},gt=n(108),yt=function(e){return Object(gt.a)(e)?Object(dt.a)(e,!0):ft(e)},mt=n(353),vt=function(){return[]},bt=Object.prototype.propertyIsEnumerable,_t=Object.getOwnPropertySymbols,It=_t?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,i=0,r=[];++n<o;){var a=e[n];t(a,n,e)&&(r[i++]=a)}return r}(_t(e),function(t){return bt.call(e,t)}))}:vt,kt=function(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e},wt=n(107),Ct=Object(wt.a)(Object.getPrototypeOf,Object),St=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)kt(t,It(e)),e=Ct(e);return t}:vt,xt=n(35),At=function(e,t,n){var o=t(e);return Object(xt.a)(e)?o:kt(o,n(e))},Tt=function(e){return At(e,ut.a,It)},Nt=function(e){return At(e,yt,St)},Et=Ze(Le.a,"DataView"),Dt=Ze(Le.a,"Promise"),Mt=Ze(Le.a,"Set"),Ot=Ze(Le.a,"WeakMap"),Lt=n(31),Bt=Fe(Et),Rt=Fe(Ye),Pt=Fe(Dt),jt=Fe(Mt),Ft=Fe(Ot),zt=Lt.a;(Et&&"[object DataView]"!=zt(new Et(new ArrayBuffer(1)))||Ye&&"[object Map]"!=zt(new Ye)||Dt&&"[object Promise]"!=zt(Dt.resolve())||Mt&&"[object Set]"!=zt(new Mt)||Ot&&"[object WeakMap]"!=zt(new Ot))&&(zt=function(e){var t=Object(Lt.a)(e),n="[object Object]"==t?e.constructor:void 0,o=n?Fe(n):"";if(o)switch(o){case Bt:return"[object DataView]";case Rt:return"[object Map]";case Pt:return"[object Promise]";case jt:return"[object Set]";case Ft:return"[object WeakMap]"}return t});var Ht=zt,Gt=Object.prototype.hasOwnProperty,Vt=Le.a.Uint8Array,Ut=function(e){var t=new e.constructor(e.byteLength);return new Vt(t).set(new Vt(e)),t},Wt=/\w*$/,Jt=n(30),Zt=Jt.a?Jt.a.prototype:void 0,Yt=Zt?Zt.valueOf:void 0,Qt=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return Ut(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?Ut(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Ut(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,Wt.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new o;case"[object Symbol]":return function(e){return Yt?Object(Yt.call(e)):{}}(e)}},Xt=Object.create,$t=function(){function e(){}return function(t){if(!Object(Pe.a)(t))return{};if(Xt)return Xt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Kt=n(73),qt=n(26),en=n(75),tn=n(57),nn=tn.a&&tn.a.isMap,on=nn?Object(en.a)(nn):function(e){return Object(qt.a)(e)&&"[object Map]"==Ht(e)},rn=tn.a&&tn.a.isSet,an=rn?Object(en.a)(rn):function(e){return Object(qt.a)(e)&&"[object Set]"==Ht(e)},sn={};sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object DataView]"]=sn["[object Boolean]"]=sn["[object Date]"]=sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object Symbol]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Error]"]=sn["[object Function]"]=sn["[object WeakMap]"]=!1;var ln,cn=function e(t,n,o,i,r,a){var s,l=1&n,c=2&n,u=4&n;if(o&&(s=r?o(t,i,r,a):o(t)),void 0!==s)return s;if(!Object(Pe.a)(t))return t;var d=Object(xt.a)(t);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Gt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(t,s)}else{var p=Ht(t),h="[object Function]"==p||"[object GeneratorFunction]"==p;if(Object(Kt.a)(t))return Object(mt.a)(t,l);if("[object Object]"==p||"[object Arguments]"==p||h&&!r){if(s=c||h?{}:function(e){return"function"!=typeof e.constructor||Object(pt.a)(e)?{}:$t(Ct(e))}(t),!l)return c?function(e,t){return ct(e,St(e),t)}(t,function(e,t){return e&&ct(t,yt(t),e)}(s,t)):function(e,t){return ct(e,It(e),t)}(t,function(e,t){return e&&ct(t,Object(ut.a)(t),e)}(s,t))}else{if(!sn[p])return r?t:{};s=Qt(t,p,l)}}a||(a=new it);var f=a.get(t);if(f)return f;a.set(t,s),an(t)?t.forEach(function(i){s.add(e(i,n,o,i,t,a))}):on(t)&&t.forEach(function(i,r){s.set(r,e(i,n,o,r,t,a))});var g=u?c?Nt:Tt:c?keysIn:ut.a,y=d?void 0:g(t);return function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););}(y||t,function(i,r){y&&(i=t[r=i]),lt(s,r,e(i,n,o,r,t,a))}),s},un=function(e){return cn(e,5)};function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach(function(t){hn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fn=function(e){function t(t){var n=e.call(this,t)||this,o=t.name,i=t.type,r=t.data,a=void 0===r?{}:r,s=t.state,l=void 0===s?{}:s,c=t.nodes,u=void 0===c?[]:c;return n.name=o,n.data=a,n.state=l,n.type=i,n.nodes=u,n}return s(t,e),t.fromJSON=function(n){var o=n.name,i=n.type,r=n.data,a=void 0===r?{}:r,s=n.nodes,l=void 0===s?[]:s,c=n.state,u=void 0===c?{}:c;return new t(Object.assign(e.fromJSON.call(this,n),{name:o,type:i,data:a,state:u,nodes:l.map(function(e){return jn(e)})}))},t.prototype.toJSON=function(t,n){var o=Object.assign(e.prototype.toJSON.call(this,t),{type:this.type,name:this.name,data:un(this.data),nodes:this.nodes.map(function(e){return e.toJSON(t)})});return n&&(o.state=un(this.state)),o},t.prototype.setBlockProp=function(e,t){return e?be(this,function(n){n[e]=t}):this},t.prototype.split=function(e,n){var o=this.nodes.slice(0,e),i=this.nodes.slice(e);return o.length?i.length?[t.fromJSON(pn({},this.toJSON(),{nodes:o})),t.fromJSON(pn({},this.toJSON(),{id:n||we(),nodes:i}))]:[t.fromJSON(this.toJSON()),null]:[null,t.fromJSON(pn({},this.toJSON(),{id:n||we()}))]},t.prototype.merge=function(e){return e.type===this.type&&(this.nodes=this.nodes.concat(e.nodes),!0)},t}(xe),gn=function(e){function t(t){var n=e.call(this)||this,o=t.value,i=void 0===o?"":o,r=t.type;return n.type=r,n.value=i,n}return s(t,e),t.fromJSON=function(e){if("string"==typeof e)return new t({type:e,value:""});var n=e.value,o=void 0===n?"":n,i=e.type;return new t({type:i,value:o})},t.prototype.toJSON=function(){var e={type:this.type};return this.value&&Object.assign(e,{value:this.value}),e},t.prototype.copy=function(){return new t(this)},t.prototype.equals=function(e){return this.type===e.type&&this.value===e.value},t}(Ie);function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach(function(t){vn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bn=function(e){function t(t){return e.call(this,mn({},t,{name:"",type:fe.Document}))||this}return s(t,e),t.fromJSON=function(n){var o=n.nodes,i=void 0===o?[]:o,r=new t(Object.assign(e.fromJSON.call(this,n),{nodes:i.map(function(e){return jn(e)})}));return r.updateParent(),r},t.prototype.toJSON=function(t,n){var o=e.prototype.toJSON.call(this,t);return delete o.name,mn({},o,{nodes:this.nodes.map(function(e){return e.toJSON(t,n)})})},t.prototype.merge=function(e){throw Error("document cannot merge other node!")},t.prototype.split=function(e,t){throw Error("document cannot split!")},t}(fn);function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kn=function(e){function t(t){var n=this;return(n=e.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach(function(t){In(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},JSON.parse(JSON.stringify(t)),{nodes:[]}))||this).props=t,n}return s(t,e),t.fromJSON=function(e){return new t(e)},t.prototype.toJSON=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=un(this.props);return!e&&t.id&&delete t.id,t},t}(fn);function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Cn=function(e){function t(t){var n=e.call(this)||this,o=t.text,i=void 0===o?"":o,r=t.marks,a=void 0===r?[]:r;return n.text=i,n.marks=a,n}return s(t,e),t.createEmptyLeaf=function(){return new t({text:""})},t.marksEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=function(e){if(t.findIndex(function(t){return e.equals(t)})<0)return{value:!1}},o=0,i=e;o<i.length;o++){var r=i[o],a=n(r);if("object"==typeof a)return a.value}return!0},t.marksCopy=function(e){return e.map(function(e){return e.copy()})},t.marksIntersect=function(e,t){for(var n=[],o=function(e){var o=t.find(function(t){return e.equals(t)});o&&n.push(o)},i=0,r=e;i<r.length;i++){var a=r[i];o(a)}return n},t.marksUnion=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(e){return function(e){if(Array.isArray(e))return wn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),i=function(e){var t=o.findIndex(function(t){return n?t.type===e.type:t.equals(e)});t<0?o.push(e):n&&(o[t].value=e.value)},r=0,a=t;r<a.length;r++){var s=a[r];i(s)}return o},t.marksDiffer=function(e,t){for(var n=[],o=function(e){t.find(function(t){return e.equals(t)})||n.push(e)},i=0,r=e;i<r.length;i++){var a=r[i];o(a)}for(var s=function(t){e.find(function(e){return e.equals(t)})||n.push(t)},l=0,c=t;l<c.length;l++){var u=c[l];s(u)}return n},t.mergeLeaves=function(e){if(e.length<=1)return e;var t=!1,n=e.reduce(function(e,n){if(e.length>0){var o=e[e.length-1];if(o.shouldMerge(n))return t=!0,o.text+=n.text,e;if(""===o.text)return t=!0,e[e.length-1]=n,e;if(""===n.text)return t=!0,e}return e.push(n),e},[]);return t?n:e},t.splitLeaves=function(e,n){if(n<0)return[[],e];if(0===e.length)return[[],[]];var o,i,r=0,a=-1;return e.find(function(e){a++;var s=r,l=e.text;if((r+=l.length)<n)return!1;if(s>n)return!1;var c=n-s;return o=new t({marks:t.marksCopy(e.marks),text:l.slice(0,c)}),i=new t({marks:t.marksCopy(e.marks),text:l.slice(c)}),!0}),o?""===o.text?0===a?[[o],e]:[e.slice(0,a),e.slice(a)]:""===i.text?a===e.length-1?[e,[i]]:[e.slice(0,a+1),e.slice(a+1)]:[e.slice(0,a).concat([o]),[i].concat(e.slice(a+1))]:[e,[]]},t.fromJSON=function(e){var n=e.text,o=e.marks,i=void 0===o?[]:o;return new t({text:n,marks:i.map(function(e){return gn.fromJSON(e)})})},t.prototype.toJSON=function(){return{text:this.text,marks:this.marks.map(function(e){return e.toJSON()})}},t.prototype.shouldMerge=function(e){return t.marksEqual(this.marks,e.marks)},t.prototype.addMark=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.marks.findIndex(function(t){return t.type===e.type});return n<0?this.marks.push(e):t&&(this.marks[n]=e),this},t.prototype.addMarks=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach(function(e){t.addMark(e,n)})},t.prototype.removeMark=function(e){var t=e instanceof gn?this.marks.findIndex(function(t){return t.equals(e)}):this.marks.findIndex(function(t){return t.type===e});if(!(t<0)){var n=this.marks[t];return this.marks.splice(t,1),n}},t.prototype.hasMark=function(e){return!!e&&this.marks.some(function(t){return t.equals(e)})},t.prototype.getMarkOfType=function(e){return this.marks.find(function(t){return t.type===e})},t.prototype.copy=function(){return t.fromJSON(this)},t}(Ie);function Sn(e){return function(e){if(Array.isArray(e))return xn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var An=function(e){function t(t){var n=this;(n=e.call(this,t)||this).type=fe.Text,n.nodes=[],n.leaves=[];var o=t.leaves,i=void 0===o?[]:o;return n.setLeaves(i),n}return s(t,e),t.fromJSON=function(n){var o=n.leaves,i=void 0===o?[]:o;return new t(Object.assign(e.fromJSON.call(this,n),{leaves:i.map(function(e){return Cn.fromJSON(e)})}))},t.prototype.toJSON=function(t){return Object.assign(e.prototype.toJSON.call(this,t),{type:this.type,leaves:this.leaves.map(function(e){return e.toJSON()})})},t.prototype.copy=function(){return t.fromJSON(this.toJSON())},t.prototype.getText=function(){return this.leaves.reduce(function(e,t){return e+t.text},"")},t.prototype.setLeaves=function(e){0!==(e=Cn.mergeLeaves(e)).length?this.leaves=e:this.leaves=[Cn.createEmptyLeaf()]},t.prototype.insertText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==this.getText()){if(0!==t.length){e=this.normalizeOffset(e);var o=this.searchLeafAtOffset(e),i=o.startOffset,r=o.leaf,a=o.index,s=e-i,l=r.text.slice(0,s),c=r.text.slice(s);if(Cn.marksEqual(n,r.marks))r.text=l+t+c;else{var u=this.leaves,d=[l?new Cn({text:l,marks:r.marks}):null,new Cn({text:t,marks:n}),c?new Cn({text:c,marks:r.marks}):null].filter(Boolean);u.splice.apply(u,[a,1].concat(Sn(d))),this.setLeaves(u)}}}else this.setLeaves([new Cn({text:t,marks:n})])},t.prototype.removeText=function(e,t){if(!(t<=0||e>=this.getText().length||e<0)){if(1===t){var n=this.searchLeafAtOffset(e+1),o=n.leaf,i=n.startOffset,r=n.index,a=e-i;if(o){if(1===o.text.length&&1!==this.leaves.length)return this.leaves.splice(r,1),void this.setLeaves(this.leaves);var s=o.text.slice(0,a)+o.text.slice(a+t);return void this.leaves.splice(r,1,new Cn({text:s,marks:o.marks}))}}var l=Cn.splitLeaves(this.leaves,e),c=l[0],u=l[1],d=Cn.splitLeaves(u,t),p=(d[0],d[1]),h=Cn.mergeLeaves(c.concat(p));this.leaves=h}},t.prototype.addMark=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.addMarks(e,t,[n],o)},t.prototype.addMarks=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.getText();if(""===i&&0===t&&0===e)return 0===this.leaves.length?void(this.leaves=[new Cn({text:"",marks:n})]):void this.leaves[0].addMarks(n,o);if(!(""===i||0===t||e>=i.length||e<0)){var r=Cn.splitLeaves(this.leaves,e),a=r[0],s=r[1],l=Cn.splitLeaves(s,t),c=l[0],u=l[1];c.forEach(function(e){return e.addMarks(n,o)});var d=a.concat(c,u);this.setLeaves(d)}},t.prototype.removeMark=function(e,t,n){var o=this.getText();if(""!==o||0!==e||0!==t){if(!(0===this.leaves.length||0===t||e>=o.length||e<0)){var i=Cn.splitLeaves(this.leaves,e),r=i[0],a=i[1],s=Cn.splitLeaves(a,t),l=s[0],c=s[1];l.forEach(function(e){return e.removeMark(n)});var u=r.concat(l,c);this.setLeaves(u)}}else 0!==this.leaves.length&&this.leaves[0].removeMark(n)},t.prototype.mergeDecorations=function(e){var t=this;if(!e||!e.length)return this.leaves;var n=this.leaves.map(function(e){return e.copy()}),o=this.getText();return e.forEach(function(e){var i=e.getRange(),r=i.getStart(),a=i.getEnd(),s=e.getMark(),l=r.nodeId===t.id,c=a.nodeId===t.id;if(l&&c){var u=i.getStartOffset(),d=i.getEndOffset()-u;if(d<1)return;if(u>=o.length)return;if(0!==u||d<o.length){var p=Cn.splitLeaves(n,u),h=p[0],f=p[1],g=Cn.splitLeaves(f,d),y=g[0],m=g[1];return void(n=h.concat(y.map(function(e){return e.addMark(s)}),m).filter(function(e){return!!e.text}))}}n=n.map(function(e){return e.addMark(s)})}),Cn.mergeLeaves(n)},t.prototype.getAllMarksBetweenOffsets=function(e,t){return e=this.normalizeOffset(e),t=this.normalizeOffset(t),e<=0&&t>=this.getLength()?this.getAllMarks():e>t?[]:""===this.getText()?this.getActiveMarks():this.searchLeavesBetweenOffsets(e,t).reduce(function(e,t){return Cn.marksUnion(e,t.marks)},[])},t.prototype.getActiveMarksBetweenOffsets=function(e,t){return e=this.normalizeOffset(e),t=this.normalizeOffset(t),e<=0&&t>=this.getLength()?this.getActiveMarks():e>t?[]:""===this.getText()?this.getActiveMarks():this.searchLeavesBetweenOffsets(e,t).reduce(function(e,t){return t?e?Cn.marksIntersect(e,t.marks):Sn(t.marks):[]},null)},t.prototype.split=function(e,n){var o=Cn.splitLeaves(this.leaves,e),i=o[0],r=o[1];return[new t({id:this.id,leaves:i}),new t({id:n||we(),leaves:r})]},t.prototype.slice=function(e,n){var o=Cn.splitLeaves(this.leaves,e),i=(o[0],o[1]),r=Cn.splitLeaves(i,n-e),a=r[0];return r[1],new t({leaves:a})},t.prototype.merge=function(e){if(!e.isText())return!1;var t=this.leaves.concat(e.leaves);return this.setLeaves(t),!0},t.prototype.searchLeavesBetweenOffsets=function(e,t){if(e===t){var n=this.searchLeafAtOffset(e).leaf;return[n]}var o=this.searchLeafAtOffset(e),i=o.index,r=o.endOffset,a=this.searchLeafAtOffset(t),s=a.index,l=a.startOffset,c=i,u=s;return e===r&&c++,l===t&&u--,this.leaves.slice(c,u+1)},t.prototype.searchLeafAtOffset=function(e){var t=0,n=0,o=-1;return{leaf:this.leaves.find(function(i){return o++,(t=(n=t)+i.text.length)>=e}),endOffset:t,index:o,startOffset:n}},t.prototype.searchOffsetOfLeaf=function(e){var t=this.leaves.indexOf(e);return this.leaves.slice(0,t).reduce(function(e,t){return e+t.text.length},0)},t.prototype.getActiveMarks=function(){return 0===this.leaves.length?[]:0===this.leaves[0].marks.length?[]:this.leaves.reduce(function(e,t){return t?e?Cn.marksIntersect(e,t.marks):Sn(t.marks):[]},null)},t.prototype.getAllMarks=function(){return 0===this.leaves.length?[]:1===this.leaves.length?Sn(this.leaves[0].marks):this.leaves.reduce(function(e,t){return Cn.marksUnion(e,t.marks)},[])},t.prototype.normalizeOffset=function(e){return e=Math.max(e,0),e=Math.min(e,this.getLength())},t}(xe);!function(e){e.focusable="focused"}(ln||(ln={}));var Tn=function(){function e(){}return e.isFocusable=function(t){return En(t,e.focusable)},e.isAtomic=function(t){return En(t,e.atomic)},e.isDependency=function(t){return En(t,e.depend)},e.isDefaults=function(t){return En(t,e.defaults)},e.isUndraggable=function(t){return En(t,e.undraggable)},e.isUndroppable=function(t){return t.closest(function(t){return En(t,e.undroppable)})},e.isContainer=function(t){return En(t,e.container)},e}();Tn.focusable="focusable",Tn.atomic="atomic",Tn.defaults="defaults",Tn.undraggable="undraggable",Tn.undroppable="undroppable",Tn.depend="depend",Tn.container="container";var Nn,En=function(e,t){if(!e||!t)return!1;var n=ir.getComponent(e.name);return n&&n[t]};function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.LineStart=0]="LineStart",e[e.LineEnd=1]="LineEnd",e[e.LineCenter=2]="LineCenter"}(Nn||(Nn={}));var On=function(){function e(e){this.data={};var t=e.range,n=e.marks,o=e.data,i=e.position;this.range=t,this.marks=n||this.getActiveMarks(),this.position=i,o&&(this.data=o)}return e.emptySelection=function(){return new e({})},e.fromJSON=function(t){var n=t.range,o=t.marks,i=t.data;return new e(n?{range:sr.fromJSON(n),marks:o,data:i}:{})},e.prototype.toJSON=function(){return this.isEmpty()?{}:{range:this.range.toJSON(),marks:this.marks.map(function(e){return e.toJSON()}),data:un(this.data),position:this.position}},e.prototype.isEmpty=function(){return!this.range},e.prototype.isCollapsed=function(){return!this.isEmpty()&&this.range.isCollapsed()},e.prototype.setData=function(e,t){var n;this.data=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach(function(t){Mn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.data,((n={})[e]=t,n))},e.prototype.getData=function(e){return e?this.data[e]:this.data},e.prototype.removeData=function(e){this.getData(e)&&delete this.data[e]},e.prototype.getActiveMarks=function(){return this.isEmpty()?[]:this.range.getActiveMarks()},e.prototype.getAllMarks=function(){return this.isEmpty()?[]:this.range.getAllMarks()},e.prototype.getMarks=function(){return Cn.marksUnion(this.marks,this.getActiveMarks())},e.prototype.addMarks=function(e){this.marks=Cn.marksUnion(this.getMarks(),e,!0)},e.prototype.deleteMarks=function(e){var t=e.map(function(e){return gn.fromJSON(e)});this.marks=this.getMarks().filter(function(e){return!t.some(function(t){return t.type===e.type})})},e.prototype.copy=function(){var t;return new e({range:null===(t=this.range)||void 0===t?void 0:t.copy(),marks:this.marks.map(function(e){return e.copy()}),data:un(this.data),position:this.position})},e}();function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rn=function(e){function t(t){var n=e.call(this)||this,o=t.document,i=t.readonly,r=void 0!==i&&i,a=t.selection,s=void 0===a?On.emptySelection():a,l=t.decorations,c=void 0===l?[]:l,u=t.data,d=void 0===u?{}:u;return n.document=o,n.selection=s,n.decorations=c,n.readonly=r,n.data=d,n}return s(t,e),t.fromJSON=function(e){return new t(e)},t.prototype.toJSON=function(){return{document:this.document.toJSON(),selection:this.selection.toJSON(),decorations:this.decorations.map(function(e){return e.toJSON()}),data:un(this.data)}},t.prototype.setProps=function(e){return new t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach(function(t){Bn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this,{},e))},t.prototype.setBlockProp=function(e,t,n){var o=_e(this,function(o){var i=o.document.findNodeById(e);i&&!i.isText()&&(i[t]=n)});return o.document.updateParent(),o},t.prototype.insertNode=function(e,t,n){e.updateParent(null);var o=_e(this,function(o){var i=o.document.findNodeById(t);e&&i&&i.insert(e,n)});return o.document.updateParent(),o},t.prototype.insertText=function(e,t,n,o){var i=_e(this,function(i){var r=i.document.findNodeById(e);r&&r.isText()&&r.insertText(t,n,o)});return i.document.updateParent(),i},t.prototype.addMark=function(e,t,n,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=_e(this,function(r){var a=r.document.findNodeById(e);a&&a.isText()&&a.addMark(t,n,o,i)});return r.document.updateParent(),r},t.prototype.removeNode=function(e,t){var n=_e(this,function(n){var o=n.document.findNodeById(e);o&&o.remove(t)});return n.document.updateParent(),n},t.prototype.removeText=function(e,t,n){var o=_e(this,function(o){var i=o.document.findNodeById(e);i&&i.isText()&&i.removeText(t,n)});return o.document.updateParent(),o},t.prototype.removeMark=function(e,t,n,o){var i=_e(this,function(i){var r=i.document.findNodeById(e);r&&r.isText()&&r.removeMark(t,n,o)});return i.document.updateParent(),i},t.prototype.splitNode=function(e,t,n){var o=_e(this,function(o){var i=o.document.findNodeById(e),r=o.document.findNodeById(i.parent.id);if(i&&r){var a=i.split(t,n),s=a[0],l=a[1];l&&(r.remove(i.index()),s?(r.insert(s,i.index()),r.insert(l,i.index()+1)):r.insert(l,i.index()))}});return o.document.updateParent(),o},t.prototype.mergeNode=function(e){var t=_e(this,function(t){var n=t.document.findNodeById(e),o=n.nextSibling(),i=t.document.findNodeById(n.parent.id);n&&o&&n.merge(o)&&i.remove(o.index())});return t.document.updateParent(),t},t.prototype.getFragmentByRange=function(e){if(!e)return[];var t=e.getStartNode(),n=e.getEndNode();if(e.isCollapsed())return t.isBlock()?[t.toJSON(!1)]:[];var o=this,i=xe.findCommonAncestor(t,n);(i=i.closest(function(e){return Tn.isContainer(e)}))||(i=o.document);for(var r=e.getEndOffset();n.id!==i.id;)o=o.splitNode(n.id,r),r=n.index()+1,n=n.parent;for(var a=e.getStartOffset(),s=!0;t.id!==i.id;)o=o.splitNode(t.id,a),Tn.isFocusable(t)&&Tn.isUndroppable(t)?(a=t.index(),s=!1):(a=t.index()+1,s=!0),t=t.parent;return i=o.document.findNodeById(i.id),this.document.updateParent(),i.nodes.slice(a,s?r+1:r).map(function(e){return e.isBlock()?e.toJSON(!1,!0):e.toJSON(!1)})},t}(Ie),Pn=Object.values(fe).filter(function(e){return e!==fe.Unknown}),jn=function(e){if(function(e){if(e.type===fe.Block){var t=ir.getComponent(e.name);return!t||t.blockName===fe.Unknown}return!Pn.includes(e.type)}(e))return kn.fromJSON(e);switch(e.type){case fe.Document:return bn.fromJSON(e);case fe.Text:return An.fromJSON(e);default:return fn.fromJSON(e)}},Fn=function(){};function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Hn=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).commands=[],t}return s(t,e),t.prototype.execute=function(){},t.prototype.undo=function(){var e;(e=this.commands,function(e){if(Array.isArray(e))return zn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse().forEach(function(e){e.undo()})},t.prototype.redo=function(){this.commands.forEach(function(e){e.redo()})},t.prototype.getSelectionBefore=function(){return this.selectionBefore},t.prototype.getSelectionAfter=function(){return this.selectionAfter},t.prototype.setSelectionBefore=function(e){this.selectionBefore=e},t.prototype.setSelectionAfter=function(e){this.selectionAfter=e},t.prototype.pushCommand=function(e){this.commands.push(e)},t.prototype.hasSubCommands=function(){return this.commands.length>0},t}(Fn),Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.setOperationClasses=function(e){t.operationClasses=e},t.prototype.execute=function(){return this.apply()},t.prototype.undo=function(){this.revert()},t.prototype.redo=function(){this.apply()},t.prototype.applyOperation=function(e,n){var o=t.operationClasses[e];ir.setValue(new o(n).apply(ir.getValue()))},t}(Fn);Gn.operationClasses=[];var Vn=Gn,Un=function(){function e(){this.commandStack=[]}return e.prototype.push=function(e){this.commandStack.push(e)},e.prototype.pop=function(){return this.commandStack.pop()},e.prototype.executing=function(){return this.commandStack.length>0},e.prototype.current=function(){return this.executing()?this.commandStack[this.commandStack.length-1]:null},e.prototype.root=function(){return this.executing()?this.commandStack[0]:null},e}();function Wn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nt;++t<n;)this.add(e[t])}Un=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([N()],Un),Wn.prototype.add=Wn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Wn.prototype.has=function(e){return this.__data__.has(e)};var Jn=Wn,Zn=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},Yn=function(e,t){return e.has(t)},Qn=function(e,t,n,o,i,r){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=r.get(e);if(c&&r.get(t))return c==t;var u=-1,d=!0,p=2&n?new Jn:void 0;for(r.set(e,t),r.set(t,e);++u<s;){var h=e[u],f=t[u];if(o)var g=a?o(f,h,u,t,e,r):o(h,f,u,e,t,r);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!Zn(t,function(e,t){if(!Yn(p,t)&&(h===e||i(h,e,n,o,r)))return p.push(t)})){d=!1;break}}else if(h!==f&&!i(h,f,n,o,r)){d=!1;break}}return r.delete(e),r.delete(t),d},Xn=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,o){n[++t]=[o,e]}),n},$n=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},Kn=Jt.a?Jt.a.prototype:void 0,qn=Kn?Kn.valueOf:void 0,eo=Object.prototype.hasOwnProperty,to=n(111),no=Object.prototype.hasOwnProperty,oo=function(e,t,n,o,i,r){var a=Object(xt.a)(e),s=Object(xt.a)(t),l=a?"[object Array]":Ht(e),c=s?"[object Array]":Ht(t),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),d="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),p=l==c;if(p&&Object(Kt.a)(e)){if(!Object(Kt.a)(t))return!1;a=!0,u=!1}if(p&&!u)return r||(r=new it),a||Object(to.a)(e)?Qn(e,t,n,o,i,r):function(e,t,n,o,i,r,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new Vt(e),new Vt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ae(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Xn;case"[object Set]":var l=1&o;if(s||(s=$n),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;o|=2,a.set(e,t);var u=Qn(s(e),s(t),o,i,r,a);return a.delete(e),u;case"[object Symbol]":if(qn)return qn.call(e)==qn.call(t)}return!1}(e,t,l,n,o,i,r);if(!(1&n)){var h=u&&no.call(e,"__wrapped__"),f=d&&no.call(t,"__wrapped__");if(h||f){var g=h?e.value():e,y=f?t.value():t;return r||(r=new it),i(g,y,n,o,r)}}return!!p&&(r||(r=new it),function(e,t,n,o,i,r){var a=1&n,s=Tt(e),l=s.length;if(l!=Tt(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:eo.call(t,u)))return!1}var d=r.get(e);if(d&&r.get(t))return d==t;var p=!0;r.set(e,t),r.set(t,e);for(var h=a;++c<l;){var f=e[u=s[c]],g=t[u];if(o)var y=a?o(g,f,u,t,e,r):o(f,g,u,e,t,r);if(!(void 0===y?f===g||i(f,g,n,o,r):y)){p=!1;break}h||(h="constructor"==u)}if(p&&!h){var m=e.constructor,v=t.constructor;m==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v||(p=!1)}return r.delete(e),r.delete(t),p}(e,t,n,o,i,r))},io=function e(t,n,o,i,r){return t===n||(null==t||null==n||!Object(qt.a)(t)&&!Object(qt.a)(n)?t!=t&&n!=n:oo(t,n,o,i,e,r))},ro=function(e){return e==e&&!Object(Pe.a)(e)},ao=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},so=function(e){var t=function(e){for(var t=Object(ut.a)(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,ro(i)]}return t}(e);return 1==t.length&&t[0][2]?ao(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,o){var i=n.length,r=i,a=!o;if(null==e)return!r;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new it;if(o)var p=o(c,u,l,e,t,d);if(!(void 0===p?io(u,c,3,o,d):p))return!1}}return!0}(n,e,t)}},lo=function(e){return"symbol"==typeof e||Object(qt.a)(e)&&"[object Symbol]"==Object(Lt.a)(e)},co=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uo=/^\w*$/,po=function(e,t){if(Object(xt.a)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!lo(e))||uo.test(e)||!co.test(e)||null!=t&&e in Object(t)};function ho(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var o=arguments,i=t?t.apply(this,o):o[0],r=n.cache;if(r.has(i))return r.get(i);var a=e.apply(this,o);return n.cache=r.set(i,a)||r,a};return n.cache=new(ho.Cache||nt),n}ho.Cache=nt;var fo=ho,go=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yo=/\\(\\)?/g,mo=function(e){var t=fo(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(go,function(e,n,o,i){t.push(o?i.replace(yo,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(),vo=Jt.a?Jt.a.prototype:void 0,bo=vo?vo.toString:void 0,_o=function e(t){if("string"==typeof t)return t;if(Object(xt.a)(t))return function(e,t){for(var n=-1,o=null==e?0:e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}(t,e)+"";if(lo(t))return bo?bo.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Io=function(e){return null==e?"":_o(e)},ko=function(e,t){return Object(xt.a)(e)?e:po(e,t)?[e]:mo(Io(e))},wo=function(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Co=function(e,t){for(var n=0,o=(t=ko(t,e)).length;null!=e&&n<o;)e=e[wo(t[n++])];return n&&n==o?e:void 0},So=function(e,t){return null!=e&&t in Object(e)},xo=n(110),Ao=n(76),To=n(58),No=function(e,t){return null!=e&&function(e,t,n){for(var o=-1,i=(t=ko(t,e)).length,r=!1;++o<i;){var a=wo(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||++o!=i?r:!!(i=null==e?0:e.length)&&Object(To.a)(i)&&Object(Ao.a)(a,i)&&(Object(xt.a)(e)||Object(xo.a)(e))}(e,t,So)},Eo=function(e,t){return po(e)&&ro(t)?ao(wo(e),t):function(n){var o=function(e,t,n){var o=null==e?void 0:Co(e,t);return void 0===o?n:o}(n,e);return void 0===o&&o===t?No(n,e):io(t,o,3)}},Do=n(109),Mo=function(e){return po(e)?function(e){return function(t){return null==t?void 0:t[e]}}(wo(e)):function(e){return function(t){return Co(t,e)}}(e)},Oo=function(e,t,n){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++o<i;)r[o]=e[o+t];return r},Lo=function(e,t){return t=ko(t,e),null==(e=function(e,t){return t.length<2?e:Co(e,Oo(t,0,-1))}(e,t))||delete e[wo(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}(t))]},Bo=Array.prototype.splice,Ro=function(e,t){var n=[];if(!e||!e.length)return n;var o=-1,i=[],r=e.length;for(t=function(e){return"function"==typeof e?e:null==e?Do.a:"object"==typeof e?Object(xt.a)(e)?Eo(e[0],e[1]):so(e):Mo(e)}(t);++o<r;){var a=e[o];t(a,o,e)&&(n.push(a),i.push(o))}return function(e,t){for(var n=e?t.length:0,o=n-1;n--;){var i=t[n];if(n==o||i!==r){var r=i;Object(Ao.a)(i)?Bo.call(e,i,1):Lo(e,i)}}}(e,i),n},Po=function(){},jo=function(e){function t(){var n=this;return(n=e.apply(this,arguments)||this).name=t.name,n.priority=1/0,n}return s(t,e),t.prototype.onLoadData=function(e,t){t instanceof bn||Uo.error("data is not a BulbDocument");var n=Object.values(fe);return t.deepForEach(function(e){e.type||Uo.error("node must have a type"),n.includes(e.type)||Uo.warn("node type: `"+e.type+"` is not match with NodeTypes"),e.isBlock()&&(e.name||Uo.error("block must have a name")),(e.hasText()||e.hasInline())&&e.hasBlock()&&Uo.warn("node: `"+e.type+"` cannot has text or inline meanwhile node has block")}),e},t}(Po),Fo=function(){function e(){this.listeners=[]}return e.prototype.on=function(e){this.listeners.push(e)},e.prototype.emit=function(e){this.listeners.forEach(function(t){t(e)})},e.prototype.off=function(e){var t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)},e}(),zo="internal-plugin-notify",Ho=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).name=zo,t.emitters=new Map,t}return s(t,e),t.prototype.on=function(e,t){var n=this.emitters.get(e);n||(n=new Fo,this.emitters.set(e,n)),n.on(t)},t.prototype.off=function(e,t){var n=this.emitters.get(e);n&&n.off(t)},t.prototype.emit=function(e,t){var n=this.emitters.get(e);n&&n.emit(t)},t}(Po),Go=function(){function e(){this.plugins=[],this.registerInternalPlugins()}return e.prototype.register=function(e){var t=this;[].concat(e).forEach(function(e){var n="function"==typeof e?new e:e;n.name||Uo.warn("Plugin("+(null==e?void 0:e.name)+") must contains property `name`"),t.plugins.push(n)}),this.sortPluginsByPriority()},e.prototype.remove=function(e){return Ro(this.plugins,function(t){return t.name===e})},e.prototype.get=function(e){return this.plugins.find(function(t){return t.name===e})},e.prototype.getHooks=function(e){return this.plugins.reduce(function(t,n){return n[e]&&t.push([n,n[e]]),t},[])},e.prototype.sortPluginsByPriority=function(){this.plugins.sort(function(e,t){return e.priority===1/0||t.priority===-1/0?-1:t.priority===1/0||e.priority===-1/0?1:Number(e.priority)-Number(t.priority)})},e.prototype.registerInternalPlugins=function(){this.register([jo,Ho])},e}();function Vo(e,t){var n,o=T.resolve(Go).getHooks(e);return o&&(n=o.reduce(function(e,n){var o=n[0],i=n[1];return e=i.call(o,e,t)},"")),n}Go=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([E(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],Go);var Uo=function(){function e(){}return e.debug=function(t,n){Vo(g.ON_LOG,e.makeObjectMessage(t,n))},e.log=function(t,n){Vo(g.ON_LOG,e.makeObjectMessage(t,n))},e.warn=function(t,n){Vo(g.ON_WARNING,e.makeObjectMessage(t,n))},e.error=function(t,n){Vo(g.ON_ERROR,e.makeObjectMessage(t,n))},e.makeObjectMessage=function(e,t){return"string"==typeof e?{label:"",message:e,optionalOutputs:t}:e},e}(),Wo=function(){function e(){this.undoStack=[],this.redoStack=[]}return e.setEnable=function(e){this.enable=e},e.prototype.pushHistory=function(t){e.enable&&(this.undoStack.push(t),this.redoStack=[])},e.prototype.canUndo=function(){return this.undoStack.length>0},e.prototype.canRedo=function(){return this.redoStack.length>0},e.prototype.undo=function(){if(this.canUndo()){var e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}},e.prototype.redo=function(){if(this.canRedo()){var e=this.redoStack.pop();return e.redo(),this.undoStack.push(e),e}},e.prototype.clear=function(){this.undoStack=[],this.redoStack=[]},e}();Wo.enable=!0,Wo=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([N()],Wo);var Jo=new(function(){function e(){}return e.prototype.getPlatform=function(){return ir.platform},e.prototype.getPlugin=function(e){return ir.getPlugin(e)},e.prototype.registerPlugins=function(e){return ir.registerPlugins(e)},e.prototype.getComponent=function(e){return ir.getComponent(e)},e.prototype.removeComponent=function(e){return ir.removeComponent(e)},e.prototype.removePlugin=function(e){return ir.removePlugin(e)},e.prototype.removeCommand=function(e){return ir.removeCommand(e)},e.prototype.getComponents=function(){return ir.getComponents()},e.prototype.registerComponents=function(e){return ir.registerComponents(e)},e.prototype.executeCommand=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return ir.executeCommand.apply(ir,[e].concat(n))},e.prototype.registerCommand=function(e,t){return ir.registerCommand(e,t)},e.prototype.registerInternalCommands=function(e){return ir.registerInternalCommands(e)},e.prototype.overrideCommand=function(e,t){return ir.overrideCommand(e,t)},e.prototype.undo=function(){ir.undo()},e.prototype.redo=function(){ir.redo()},e.prototype.canUndo=function(){return ir.canUndo()},e.prototype.canRedo=function(){return ir.canRedo()},e.prototype.setDocument=function(e){ir.loadData(e)},e.prototype.setValueData=function(e){ir.setValueData(e)},e.prototype.getValue=function(){return ir.getValue()},e.prototype.getValueData=function(){return ir.getValueData()},e.prototype.getDocument=function(){return ir.getDocument()},e.prototype.getBulbSelection=function(){return ir.getBulbSelection()},e.prototype.getBulbRange=function(){return ir.getBulbRange()},e.prototype.setBulbSelection=function(e){ir.setBulbSelection(e)},e.prototype.setBulbSelectionFromRange=function(e){ir.setBulbSelectionFromRange(e)},e.prototype.on=function(e,t){ir.on(e,t)},e.prototype.off=function(e,t){ir.off(e,t)},e.prototype.emit=function(e,t){ir.emit(e,t)},e.prototype.setReadOnly=function(e){e&&ir.setBulbSelectionFromRange(null),ir.setReadOnly(e)},e.prototype.setDecorations=function(e){ir.setDecorations(e)},e.prototype.isComposing=function(){return ir.isComposing()},e.prototype.isSelecting=function(){return ir.isSelecting()},e.prototype.getCurrentEvent=function(){return ir.getCurrentEvent()},e.prototype.isReadOnly=function(){return ir.isReadonly()},e.prototype.reset=function(){return ir.reset()},e}());function Zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Yo(e,t,n){return(Yo=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(i,n.prototype),i}).apply(null,arguments)}var Qo,Xo,$o=function(){function e(e,t){this.commandHistoryService=e,this.context=t,this.commands=new Map,this.isClass=function(e){return"function"==typeof e&&/^\s*class\s+/.test(e.toString())},this.reset()}return e.prototype.register=function(e){var t=this;[].concat(e).forEach(function(e){var n=t.isClass(e)?e.commandName:e.name;t.checkDuplicated(n),t.commands.set(n,e),t.injectCommand(n)})},e.prototype.registerCommandFn=function(e,t){!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&this.checkDuplicated(e)||(this.commands.set(e,{name:e,fn:t}),this.injectCommand(e))},e.prototype.override=function(e,t){var n=this,o=this.get(e);this.registerCommandFn(e,function(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];if(n.isClass(o)){var s=Yo(o,r);e=s.execute.bind(s)}else e=o.fn.bind(o);t.apply(void 0,[e].concat(r))},!0)},e.prototype.remove=function(e){if(this.get(e))return delete Jo[e],this.commands.delete(e)},e.prototype.get=function(e){return this.commands.get(e)},e.prototype.canUndo=function(){return ir.isComposing()||(this.previousCanUndo=this.commandHistoryService.canUndo()),this.previousCanUndo},e.prototype.canRedo=function(){return ir.isComposing()||(this.previousCanRedo=this.commandHistoryService.canRedo()),this.previousCanRedo},e.prototype.undo=function(){this.context.push(new Hn);var e=this.commandHistoryService.undo();e?(e instanceof Hn&&ir.setBulbSelection(e.getSelectionBefore()),this.context.pop(),ir.setValueData({canRedo:this.canRedo(),canUndo:this.canUndo()})):this.context.pop()},e.prototype.redo=function(){this.context.push(new Hn);var e=this.commandHistoryService.redo();e?(e instanceof Hn&&ir.setBulbSelection(e.getSelectionAfter()),this.context.pop(),ir.setValueData({canRedo:this.canRedo(),canUndo:this.canUndo()})):this.context.pop()},e.prototype.reset=function(){this.previousCanRedo=!1,this.previousCanUndo=!1,this.commandHistoryService.clear()},e.prototype.executeCommand=function(e,t){this.context.executing()||Vo(g.ON_EXECUTE_COMMAND,{name:e,args:t});var n=this.createCommand(e,t);if(n instanceof Vn){var o=this.context.root();o&&o instanceof Hn&&o.pushCommand(n)}if(this.context.push(n),n instanceof Hn){var i=ir.getBulbSelection();n.setSelectionBefore(i&&i.copy())}var r=n.execute();if(this.context.pop(),n instanceof Hn){var a=ir.getBulbSelection();n.setSelectionAfter(a&&a.copy())}return this.context.executing()||((n instanceof Vn||n.hasSubCommands())&&this.commandHistoryService.pushHistory(n),ir.setValueData({canRedo:this.canRedo(),canUndo:this.canUndo()})),r},e.prototype.isExecuting=function(){return this.context.executing()},e.prototype.registerInternalCommands=function(e){this.register(e)},e.prototype.createCommand=function(e,t){var n=this.get(e);return this.isClass(n)?Yo(n,function(e){return function(e){if(Array.isArray(e))return Zo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t)):this.createAnonymousCommand(n.fn,t)},e.prototype.checkDuplicated=function(e){if(this.get(e))return Uo.error("You might register a duplicated command: "+e+"\nUse `editor.overrideCommand`, if you want to overload a command"),!0},e.prototype.createAnonymousCommand=function(e,t){return new(function(n){function o(){var e=this;return(e=n.apply(this,arguments)||this).args=t,e}return s(o,n),o.prototype.execute=function(){e.apply(this,t)},o}(Hn))},e.prototype.injectCommand=function(e){Jo[e]=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Jo.executeCommand.apply(ir,[e].concat(n)),Jo}},e}();$o=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([E(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",["function"==typeof(Qo=void 0!==Wo&&Wo)?Qo:Object,"function"==typeof(Xo=void 0!==Un&&Un)?Xo:Object])],$o);var Ko=function(){function e(){this.components=[]}return e.prototype.register=function(e){var t=this;Vo(g.ON_REGISTER_COMPONENT,e),Array.isArray(e)||(e=[e]),e.forEach(function(e){t.components.push(e)})},e.prototype.remove=function(e){return Ro(this.components,function(t){return t.blockName===e})},e.prototype.get=function(e){return this.components.find(function(t){return t.blockName===e})},e.prototype.getComponents=function(){return this.components},e}();Ko=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([E()],Ko),Tn.undraggable,Tn.focusable,Tn.atomic,Tn.defaults;var qo=function(){function e(){}return e.prototype.checkValid=function(e,t){return e instanceof t&&!e.isDefaultPrevented()&&this.handleTypes.indexOf(e.type)>=0},e.prototype.insertText=function(e,t,n){var o;n=n||(null===(o=ir.getBulbSelection())||void 0===o?void 0:o.getMarks()),Jo.insertTextByRange(e,t,n)},e.prototype.deleteBlock=function(e){Jo.deleteByRange(e)},e.prototype.deleteText=function(e,t){Jo.deleteByRange(e,t)},e.prototype.splitBlock=function(e){var t=e.getStartNode().parent;if(!ir.getComponent(t.name).atomic){if(t.isInline()&&e.getStartOffset()===t.getText().length){var n=t.nextSibling();e.setEnd(n.id,0),e.collapseToEnd()}Jo.splitBlock(e)}},e}();qo.isComposing=!1,qo.currentEvent=null;var ei,ti,ni=qo,oi=function(){function e(t){e.create.apply(this,[t,this])}return e.create=function(e,t){var n=e.nativeEvent,o=e.range;return t.type=e.type||n.type,t.target=n.target,t.currentTarget=n.currentTarget,t.eventPhase=n.eventPhase,t.bubbles=n.bubbles,t.cancelable=n.cancelable,t.timeStamp=n.timeStamp,t.isTrusted=n.isTrusted,t.defaultPrevented=!1,t.nativeEvent=n,t.range=o,t},e.prototype.preventDefault=function(){var e;this.defaultPrevented=!0,null===(e=this.nativeEvent)||void 0===e||e.preventDefault()},e.prototype.stopPropagation=function(){var e,t;null===(e=this.nativeEvent)||void 0===e||null===(t=e.stopPropagation)||void 0===t||t.call(e)},e.prototype.isDefaultPrevented=function(){return this.defaultPrevented},e.prototype.getRange=function(){return this.range},e.prototype.getNativeEvent=function(){return this.nativeEvent},e}(),ii=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){oi.create.apply(t,[e,t]);var n=e.nativeEvent;return t.view=n.view,t.detail=n.detail,t},t}(oi),ri=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){ii.create.apply(t,[e,t]);var n=e.nativeEvent;return t.altKey=n.altKey,t.ctrlKey=n.ctrlKey,t.shiftKey=n.shiftKey,t.metaKey=n.metaKey,t},t.prototype.getModifierState=function(){return this.altKey||this.metaKey||this.shiftKey||this.ctrlKey},t}(ii),ai=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){return ri.create.apply(t,[e,t]),t.key=e.nativeEvent.key,t},t}(ri),si=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){ri.create.apply(t,[e,t]);var n=e.nativeEvent;return t.button=n.button,t.buttons=n.buttons,t.clientX=n.clientX,t.clientY=n.clientY,t.pageX=n.pageX,t.pageY=n.pageY,t},t}(ri),li=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){return oi.create.apply(t,[e,t]),t.clipboardData=e.clipboardData,t},t}(oi),ci=function(){function e(){this.dataMap=new Map}return e.prototype.setData=function(e,t){return this.dataMap.set(e,t)},e.prototype.getData=function(e){return this.dataMap.get(e)},e.prototype.clearData=function(e){return e?this.dataMap.delete(e):this.dataMap=new Map},e}(),ui=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){return si.create.apply(t,[e,t]),t.dataTransfer=new ci,t},t}(si),di=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){ii.create.apply(t,[e,t]);var n=e.nativeEvent;return t.data=n.data,t.isComposing=n.isComposing,t},t}(ii),pi=function(e){function t(n){var o=this;return o=e.call(this,n)||this,t.create.apply(o,[n,o]),o}return s(t,e),t.create=function(e,t){return oi.create.apply(t,[e,t]),t.data=e.nativeEvent.data,t},t}(oi);!function(e){e.Enter="Enter",e.Backspace="Backspace",e.Delete="Delete",e.Space=" ",e.Tab="Tab",e.Esc="Escape",e.Win="OS",e.Home="Home",e.End="End",e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight"}(ei||(ei={})),function(e){e.Click="click",e.DoubleClick="dblclick",e.BeforeInput="textInput",e.Input="input",e.CompositeStart="compositionstart",e.CompositeUpdate="compositionupdate",e.CompositeEnd="compositionend",e.Drag="drag",e.DragEnd="dragend",e.DragEnter="dragenter",e.DragExit="dragexit",e.DragLeave="dragleave",e.DragOver="dragover",e.DragStart="dragstart",e.Drop="drop",e.Scroll="scroll",e.Wheel="wheel",e.KeyDown="keydown",e.KeyPress="keypress",e.KeyUp="keyup",e.MouseDown="mousedown",e.MouseMove="mousemove",e.MouseOut="mouseout",e.MouseOver="mouseover",e.MouseUp="mouseup",e.TouchSancel="touchcancel",e.TouchStart="touchstart",e.TouchMove="touchmove",e.TouchEnd="touchend",e.Copy="copy",e.Cut="cut",e.Paste="paste"}(ti||(ti={}));var hi,fi=[ti.KeyDown,ti.KeyPress,ti.KeyUp],gi=[ti.MouseDown,ti.MouseMove,ti.MouseUp,ti.Click,ti.DoubleClick],yi=[ti.BeforeInput,ti.Input],mi=[ti.Copy,ti.Cut,ti.Paste],vi=[ti.CompositeStart,ti.CompositeUpdate,ti.CompositeEnd],bi=[ti.DragStart,ti.Drag,ti.DragOver,ti.Drop,ti.DragEnd];!function(e){e[e.MOUSE_LEFT=0]="MOUSE_LEFT",e[e.MOUSE_MIDDLE=1]="MOUSE_MIDDLE",e[e.MOUSE_RIGHT=2]="MOUSE_RIGHT"}(hi||(hi={}));var _i=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).handleTypes=[ti.KeyDown,ti.KeyUp],t}return s(t,e),t.prototype.handleEvent=function(e){this.checkValid(e,ai)&&(ni.isComposing||(ir.getBulbRange().getStartNode().isText()?this.handleTextNode(e):this.handleNonTextNode(e)))},t.prototype.handleTextNode=function(e){var t=e.key,n=e.getRange();if(e.type===ti.KeyDown){switch(t){case ei.Backspace:this.deleteText(n,-1);break;case ei.Delete:this.deleteText(n,1);break;case ei.Enter:this.splitBlock(n);break;case ei.Space:this.insertText(n,t);break;case ei.Tab:this.insertText(n,"\t");break;default:return}e.preventDefault()}},t.prototype.handleNonTextNode=function(e){var t=e.key,n=e.getRange(),o=n.getStartNode(),i=ir.getBulbSelection().getData(o.id);if(i&&i[ln.focusable]&&e.type===ti.KeyDown)switch(t){case ei.Backspace:case ei.Delete:case ei.Enter:this.deleteBlock(n),e.preventDefault();break;default:e.getModifierState()||(this.insertText(n,t),e.preventDefault())}},t}(ni),Ii=new(function(){function e(){this.pool=new Map}return e.prototype.get=function(e,t){var n=this.pool.get(e);if(!n||!n.length){var o=new e(t);return this.pool.set(e,[o]),o}return e.create(t,n[0])},e}()),ki=new(function(){function e(){var e=this;this.onCompositeEvents=function(t){ir.getBulbRange()&&e.isEventInEditor(t)&&e.onControllerEvent(pi,t)},this.onKeyboardEvent=function(t){ir.getBulbRange()&&e.isEventInEditor(t)&&e.onControllerEvent(ai,t)},this.onInputEvent=function(t){ir.getBulbRange()&&e.isEventInEditor(t)&&e.onControllerEvent(di,t)},this.onClipboardEvent=function(t){ir.getBulbRange()&&e.isEventInEditor(t)&&e.onControllerEvent(li,t)},this.onMouseEvent=function(t){var n=ir.selectionAdapter.buildBulbRangeFromPoint(t.clientX,t.clientY);e.onControllerEvent(si,t,n)}}return e.prototype.addListenersTo=function(e,t){var n=function(t,n){t.forEach(function(t){e.addEventListener(t,n)})};this.editor=t,this.eventDelegate=e,n(fi,this.onKeyboardEvent),n(gi,this.onMouseEvent),n(yi,this.onInputEvent),n(mi,this.onClipboardEvent),n(vi,this.onCompositeEvents)},e.prototype.isEventInEditor=function(e){var t=e.target;return this.editor.contains(t)},e.prototype.onControllerEvent=function(e,t,n){if(!ir.isReadonly()){var o=this.buildEvent(e,t,n);ir.onEvent(o)}},e.prototype.buildEvent=function(e,t,n){return n||(n=ir.getBulbRange()),Ii.get(e,{range:n,nativeEvent:t})},e}()),wi=function(e,t){if(!Intl.v8BreakIterator)return t===e.length?{start:t-1,end:t}:{start:t,end:t+1};var n=Intl.v8BreakIterator(["zh"]);n.adoptText(e);for(var o=0,i=0,r=n.first();i<=t&&-1!==i;)o=i,i=r,r=n.next();return{start:o,end:i}},Ci=function(e){if(!e)return null;e.nodeType===Node.TEXT_NODE&&(e=e.parentElement);var t=e.closest("*["+y+"]");return null==t?void 0:t.getAttribute(y)},Si=function(e,t){var n=function(e){var t={textNode:null,leafNode:null};for(e.getAttribute||(t.textNode=e.parentElement,t.leafNode=e);t.textNode;){if(t.textNode.getAttribute(y))return t;t.leafNode=t.textNode,t.textNode=t.textNode.parentElement}return t}(e),o=n.textNode,i=n.leafNode;return function(e,t,n){if(!e||!t)return n;var o=e.firstChild,i=" "===t.textContent&&1===n?0:n;if(o===t)return i;for(;o!==t;)i+=o.length||o.innerText.length,o=o.nextSibling;return i}(o,i,t)},xi=function(e,t){var n,o=window.document;if(o.caretRangeFromPoint)n=o.caretRangeFromPoint(e,t);else if(o.caretPositionFromPoint){var i=o.caretPositionFromPoint(e,t);(n=o.createRange()).setStart(i.offsetNode,i.offset),n.setEnd(i.offsetNode,i.offset)}else if(o.body.createTextRange){n=o.body.createTextRange();try{n.moveToPoint(e,t)}catch(e){return null}}return n},Ai=function(e,t){var n=Ti(e);return Ni(n,t)},Ti=function(e){var t="["+y+"='"+e+"']";return window.document.querySelector(t)},Ni=function(e,t){if(!e)return null;var n={node:null,offset:0};return Array.from(e.childNodes).forEach(function(e){if(!n.node){var o=e.length||e.textContent.length;(t-=o)<=0&&(n.node=function(e){for(;e&&3!==e.nodeType;)e=e.firstChild;return e}(e),n.offset=t+o)}}),n.node||(n.node=e,n.offset=0),n},Ei=function(){function e(){this.bulbSelection=new On({})}return e.toNativeRange=function(e){if(!e)return null;var t=window.document.createRange(),n=e.getStartNode(),o=e.getEndNode();if(!n||!o)return null;if(n.isText()){var i=Ai(n.id,e.getStartOffset());if(!i)return null;t.setStart(i.node,i.offset)}else{var r=Ti(n.id);if(!r)return null;t.setStart(r,0)}if(o.isText()){var a=Ai(o.id,e.getEndOffset());if(!a)return null;t.setEnd(a.node,a.offset)}else{var s=Ti(o.id);if(!s)return null;t.setEnd(s,0)}return t},e.caretRangeFromPoint=function(e,t){return xi(e,t)},e.prototype.setBulbSelection=function(e){this.bulbSelection=e},e.prototype.getBulbSelection=function(){return this.bulbSelection},e.prototype.buildBulbRangeFromPoint=function(e,t){var n=xi(e,t);return n&&this.buildBulbRange(n)},e.prototype.buildBulbRange=function(e){var t=e.startContainer,n=e.startOffset,o=e.endContainer,i=e.endOffset,r=Ci(t),a=Ci(o),s=Si(t,n),l=Si(o,i);if(!r||!a)return null;var c=sr.fromJSON({anchor:{nodeId:r,offset:s},focus:{nodeId:a,offset:l}});return this.convertBulbRange(c)},e.prototype.convertBulbRange=function(e){var t,n,o=null===(t=e.getStartNode())||void 0===t?void 0:t.closest(function(e){return e.isInline()});if(o){var i=e.getAnchorOffset();0===i?e.moveToEndOfNode(o.preSibling()):i===o.getLength()&&e.moveToStartOfNode(o.nextSibling())}return(null===(n=e.getStartNode())||void 0===n?void 0:n.isBlock())&&e.setAnchorOffset(1).collapseToStart(),e},e}(),Di=new Ei,Mi=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).handleTypes=gi,t}return s(t,e),t.prototype.handleEvent=function(e){if(this.checkValid(e,si)&&(e.type===ti.MouseDown&&ni.isComposing&&(ni.isComposing=!1),e.type===ti.MouseUp&&this.handleMouseUp(e),ki.isEventInEditor(e.getNativeEvent()))){var t=e.button;if(!(t===hi.MOUSE_RIGHT&&this.isMouseDownOnPreRange(e,e.getRange())||t!==hi.MOUSE_LEFT&&t!==hi.MOUSE_RIGHT))switch(e.preventDefault(),e.type){case ti.DoubleClick:this.handleDoubleClick(e);break;case ti.Click:3===e.detail&&this.handleTripleClick(e);break;case ti.MouseDown:this.handleMouseDown(e);break;case ti.MouseMove:this.handleMouseMove(e)}}},t.prototype.isStartToDrag=function(){return t.dragState.startToDrag},t.prototype.isDragging=function(){return t.dragState.isDragging},t.prototype.handleDoubleClick=function(e){var t=e.getRange(),n=t.getStartNode();if(n.isText()){var o=n.getText(),i=t.getStartOffset(),r=wi(o,i),a=r.start,s=r.end;t.setStartOffset(a).setEndOffset(s);var l=new On({range:t});ir.setBulbSelection(l)}},t.prototype.handleTripleClick=function(e){var t=e.getRange(),n=t.getStartNode();if(!n.isBlock()){var o=n.parent,i=o.nodes[0],r=o.nodes[o.nodes.length-1],a=r.isText()?r.getLength():1;t.moveStartTo(i,0).moveEndTo(r,a);var s=new On({range:t});ir.setBulbSelection(s)}},t.prototype.handleShiftSelecting=function(e){var n=Jo.getBulbRange(),o=n.getAnchor(),i=n.getFocus(),r=new sr({anchor:e.getRange().getAnchor(),focus:o}),a=new sr({anchor:e.getRange().getAnchor(),focus:i}),s=r.getText().length,l=a.getText().length;t.selectingState.anchor=s>=l?o:i},t.prototype.handleMouseDown=function(e){var n;t.dragState.startToDrag=!1,t.selectingState.isSelecting=!0,t.selectingState.anchor=null===(n=e.getRange())||void 0===n?void 0:n.getAnchor(),e.shiftKey&&this.handleShiftSelecting(e),this.setSelection(e)},t.prototype.handleMouseUp=function(e){!this.isDragging()&&this.isStartToDrag()||(t.selectingState.anchor=null),this.isDragging()?ir.onEvent(this.buildDragEvent(e,ti.Drop)):ki.isEventInEditor(e.getNativeEvent())&&ir.emit(h.SELECT),t.dragState.startToDrag=!1,t.dragState.isDragging=!1,t.dragState.dragMoveCount=0,t.selectingState.isSelecting=!1,this.setSelection(e)},t.prototype.handleMouseMove=function(e){var n;if(t.selectingState.isSelecting&&!(null===(n=e.getRange())||void 0===n?void 0:n.equals(ir.getBulbRange())))if(this.isStartToDrag()&&this.isDraggable()){if(t.dragState.dragMoveCount>1){var o=this.isDragging()?ti.DragOver:ti.DragStart;t.dragState.isDragging=!0,ir.onEvent(this.buildDragEvent(e,o))}t.dragState.dragMoveCount++}else this.setSelection(e)},t.prototype.setSelection=function(e){var n,o=null===(n=e.getRange())||void 0===n?void 0:n.getFocus(),i=t.selectingState.anchor;if(i&&o&&(i.equals(o)||!o.getNode().isBlock())){var r=new sr({anchor:i,focus:o}),a=r.getStartNode(),s=ir.getComponent(null==a?void 0:a.name);if(this.isMouseDownOnPreRange(e,r)&&!ir.getBulbRange().someNode(function(e){return Tn.isUndraggable(e)}))return t.dragState.startToDrag=!0;var l=s?this.handleFocusable(a,s,r):new On({range:r,position:this.getSelectionPosition(e)});l&&ir.setBulbSelection(l)}},t.prototype.getSelectionPosition=function(e){if(e.type===ti.MouseDown&&e.button===hi.MOUSE_LEFT){var t=Array.from(Ei.toNativeRange(e.getRange()).getClientRects());if(2===(null==t?void 0:t.length)){var n=e.pageX,o=t[0],i=t[1];if(o.width<=1&&i.width<=1&&o.right>i.left&&o.top<i.top)return Math.abs(o.right-n)>Math.abs(i.right-n)?Nn.LineStart:Nn.LineEnd}return Nn.LineCenter}},t.prototype.handleFocusable=function(e,t,n){var o;if(t.focusable){for(var i=new On({range:n});!e.isDocument();)i.setData(e.id,((o={})[ln.focusable]=!0,o)),e=e.parent;return i}},t.prototype.isMouseDownOnPreRange=function(e,t){var n;if(e.type===ti.MouseDown){var o=ir.getBulbRange();if((null==o||null===(n=o.getStartNode())||void 0===n?void 0:n.isBlock())&&o.equals(t))return!0;if(!o||o.isCollapsed())return!1;var i=t.getAnchor();return!(i.equals(o.getStart())||i.equals(o.getEnd()))&&t.getAnchor().isInRange(o)}},t.prototype.buildDragEvent=function(e,t){return new ui({type:t,nativeEvent:e.getNativeEvent(),range:e.getRange()})},t.prototype.isDraggable=function(){var e=ir.getBulbRange().getStartNode();return!Tn.isUndraggable(e)},t}(ni);Mi.dragState={startToDrag:!1,dragMoveCount:0,isDragging:!1},Mi.selectingState={isSelecting:!1,anchor:null};var Oi,Li,Bi=Mi,Ri=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).handleTypes=vi.concat(yi),t}return s(t,e),t.prototype.handleEvent=function(e){if(this.checkValid(e,pi)||this.checkValid(e,di)){var t=e.data;if(e.type===ti.CompositeStart)return ni.isComposing||(this.isFirstCompositeUpdateTrigger=!0),ni.isComposing=!0,void(this.inputtingMarks=ir.getBulbSelection().getMarks());if(ni.isComposing){if(e.type===ti.CompositeUpdate||e.type===ti.BeforeInput){if(this.currentUpdateText===t)return;this.isFirstCompositeUpdateTrigger||ir.undo(),this.currentUpdateText=t,this.isFirstCompositeUpdateTrigger=!1,this.insertText(ir.getBulbRange(),t,this.inputtingMarks),e.preventDefault()}return e.type===ti.CompositeEnd||e.type===ti.BeforeInput?(ni.isComposing=!1,this.inputtingMarks=[],e.preventDefault(),void ir.setValueData({canRedo:ir.canRedo(),canUndo:ir.canUndo()})):void 0}}},t}(ni),Pi=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).handleTypes=[ti.BeforeInput],t}return s(t,e),t.prototype.handleEvent=function(e){if(this.checkValid(e,di)&&!ni.isComposing){var t=e.data,n=e.getRange();return e.type===ti.BeforeInput?(this.insertText(n,t),void e.preventDefault()):void 0}},t}(ni),ji=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).handleTypes=bi,t}return s(t,e),t.prototype.handleEvent=function(e){if(this.checkValid(e,ui)){var t=e.getRange(),n=ir.getBulbSelection(),o=ir.getBulbRange();if(e.type===ti.DragStart&&this.drawDragShadow(n,e),e.type===ti.DragOver&&this.drawDragShadow(n,e),e.type===ti.Drop){this.removeDragShadow();var i=t.getStart();if(i.isInRange(o)||Tn.isUndroppable(i.getNode()))return;Jo.drop({dragRange:o,dropRange:t})}}},t.prototype.drawDragShadow=function(e,t){ir.emit(h.DRAW_DRAG_SHADOW,{selection:e,event:t})},t.prototype.removeDragShadow=function(){ir.emit(h.DRAW_DRAG_SHADOW,{})},t}(ni),Fi=function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).handleTypes=mi,t}return s(t,e),t.prototype.handleEvent=function(e){if(this.checkValid(e,li)){e.preventDefault();var t=ir.getBulbRange(),n=this.getNativeClipboardData(e);if(e.type===ti.Copy&&this.setRangeContentsToClipboard(e),e.type===ti.Paste){var o=Vo(g.ON_PARSE_CLIPBOARD_DATA,n);if(o)this.checkDataValid(o),this.insertNodes(o);else{var i=n.getData("__@@bulb@@__");this.pasteEditorData(i)}}e.type===ti.Cut&&(this.setRangeContentsToClipboard(e),this.deleteBlock(t))}},t.prototype.pasteEditorData=function(e){if(e){var t=JSON.parse(e);this.insertNodes(t)}},t.prototype.setRangeContentsToClipboard=function(e){var t=this.getNativeClipboardData(e);this.setPlainText(t);var n,o=ir.getBulbRange().cloneContents();o=Vo(g.ON_COPY_CONTENT,o),Vo(g.ON_SET_CLIPBOARD_DATA,{dataTransfer:t,jsonContent:o});try{n=JSON.stringify(o)}catch(e){throw new Error("result of `range.cloneContents()` cannot be stringify")}t.setData("__@@bulb@@__",n),Vo(g.AFTER_SET_CLIPBOARD_DATA,t)},t.prototype.checkDataValid=function(e){},t.prototype.setPlainText=function(e){var t=Jo.getBulbRange();if(t){var n=t.cloneContents().map(jn),o=n.every(function(e){return e.isText()||e.isInline()})?n.map(function(e){return e.getText()}).join(""):n.map(function(e){return e.getText()}).join("\n");e.setData("text/plain",o)}},t.prototype.insertNodes=function(e){var t=e.map(function(e){return jn(e)});Jo.insertNodesAtRange(t,ir.getBulbRange())},t.prototype.getNativeClipboardData=function(e){return e.getNativeEvent().clipboardData},t}(ni);!function(e){e.SAFARI="safari",e.CHROME="chrome",e.FIREFOX="firefox",e.EDGE="edge",e.OPERA="opera",e.IE="ie"}(Oi||(Oi={})),function(e){e.ANDROID="android",e.IOS="ios",e.MAC_OS="macos",e.WINDOWS="windows",e.FIREFOX_OS="firefoxos"}(Li||(Li={}));var zi=[[Oi.EDGE,/Edge\/([0-9\._]+)/],[Oi.CHROME,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],[Oi.FIREFOX,/Firefox\/([0-9\.]+)(?:\s|$)/],[Oi.OPERA,/Opera\/([0-9\.]+)(?:\s|$)/],[Oi.OPERA,/OPR\/([0-9\.]+)(:?\s|$)$/],[Oi.IE,/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],[Oi.IE,/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],[Oi.IE,/MSIE\s(7\.0)/],[Oi.SAFARI,/Version\/([0-9\._]+).*Safari/]],Hi=[[Li.IOS,/os ([\.\_\d]+) like mac os/i],[Li.MAC_OS,/mac os x/i],[Li.ANDROID,/android/i],[Li.FIREFOX_OS,/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],[Li.WINDOWS,/windows\s*(?:nt)?\s*[\.\_\d]*/i]],Gi=new(function(){function e(){this.browser=this.getBrowserName(),this.os=this.getOSName()}return e.prototype.getBrowserName=function(){for(var e=0,t=zi;e<t.length;e++){var n=t[e],o=n[0],i=n[1];if(i.test(window.navigator.userAgent))return o}},e.prototype.getOSName=function(){for(var e=0,t=Hi;e<t.length;e++){var n=t[e],o=n[0],i=n[1];if(i.test(window.navigator.userAgent))return o}},e.prototype.isSafari=function(){return this.browser===Oi.SAFARI},e.prototype.isChrome=function(){return this.browser===Oi.CHROME},e.prototype.isAndroid=function(){return this.os===Li.ANDROID},e.prototype.isIOS=function(){return this.os===Li.IOS},e.prototype.isMac=function(){return this.os===Li.MAC_OS},e.prototype.isWindows=function(){return this.os===Li.WINDOWS},e}());function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=ir.getComponents(),n=t.find(function(e){return e.defaults});return new fn({name:n.blockName,type:fe.Block,id:we(),nodes:[new An({id:we(),leaves:[new Cn({text:e})]})]})},Ji=function(e){return e&&0!==Object.keys(e).length?e.nodes&&0!==e.nodes.length?e instanceof bn?e:bn.fromJSON(e):e instanceof bn?(e.nodes=[Wi()],e.updateParent(),e):bn.fromJSON(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach(function(t){Ui(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{nodes:[Wi()]})):bn.fromJSON({nodes:[Wi()]})};function Zi(e,t,n){var o=n.value;return n.value=function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(this,t)}catch(e){console.error(e),Jo.reset()}},n}function Yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(n),!0).forEach(function(t){Xi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $i,Ki,qi,er,tr=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},nr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},or=function(){function e(e,t,n){this.componentsManager=e,this.pluginsManager=t,this.commandManager=n,this.platform=Gi,this.value=new Rn({}),this.selectionAdapter=Di}return e.prototype.init=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.eventHandlers=Object.values(p).map(function(e){return new e}),this.registerPlugins([].concat(e).filter(Boolean)),this.registerComponents(t),this.registerCommands(n),this.setReadOnly(o)},e.prototype.getPlugin=function(e){return this.pluginsManager.get(e)},e.prototype.registerPlugins=function(e){return Vo(g.ON_REGISTER_PLUGIN,e),this.pluginsManager.register(e)},e.prototype.removePlugin=function(e){return this.pluginsManager.remove(e)},e.prototype.getComponent=function(e){return this.componentsManager.get(e)||e&&this.componentsManager.get(fe.Unknown)},e.prototype.getComponents=function(){return this.componentsManager.getComponents()},e.prototype.registerComponents=function(e){return this.componentsManager.register(e)},e.prototype.removeComponent=function(e){return this.componentsManager.remove(e)},e.prototype.executeCommand=function(e){if(!this.isReadonly()){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return this.commandManager.executeCommand(e,n)}},e.prototype.registerCommand=function(e,t){this.commandManager.registerCommandFn(e,t)},e.prototype.registerCommands=function(e){(null!=e||Array.isArray(e)&&e.length)&&this.commandManager.register(e)},e.prototype.registerInternalCommands=function(e){this.commandManager.registerInternalCommands(e)},e.prototype.overrideCommand=function(e,t){this.commandManager.override(e,t)},e.prototype.removeCommand=function(e){return this.commandManager.remove(e)},e.prototype.undo=function(){this.commandManager.undo()},e.prototype.redo=function(){this.commandManager.redo()},e.prototype.canUndo=function(){return this.commandManager.canUndo()},e.prototype.canRedo=function(){return this.commandManager.canRedo()},e.prototype.loadData=function(e){e=Ji(e),e=Vo(g.ON_LOAD_DATA,e)||e,this.setValue(this.value.setProps({document:e}))},e.prototype.getValue=function(){return this.value},e.prototype.setValueData=function(e){!function(e){Uo.warn("\n            Do not delete or add data on Value!\n            Used for modify Node.state"),Wo.setEnable(!1),e(),Wo.setEnable(!0)}(function(){var t=ir.getValue(),n=t.data;ir.setValue(t.setProps({data:Qi({},n,{},e)}))})},e.prototype.getValueData=function(){var e;return null===(e=ir.getValue())||void 0===e?void 0:e.data},e.prototype.setValue=function(e){this.value=new Rn(e),this.commandManager.isExecuting()||(this.value=Vo(g.AFTER_SET_VALUE,this.value)||this.value,this.emit(h.VALUE_CHANGE,this.value))},e.prototype.getDocument=function(){return this.value.document},e.prototype.getBulbSelection=function(){return this.value?this.value.selection.copy():null},e.prototype.getBulbRange=function(){var e=this.getBulbSelection();return!e||e.isEmpty()?null:e.range.copy()},e.prototype.setBulbSelection=function(e){this.setValue(this.value.setProps({selection:e}))},e.prototype.setBulbSelectionFromRange=function(e){this.setBulbSelection(new On({range:e}))},e.prototype.onEvent=function(e){if(!(e instanceof oi))throw new Error("event MUST be a bulb event");ni.currentEvent=e,Vo(g.ON_EVENT,e),this.emit(e.type,e),e.isDefaultPrevented()||this.eventHandlers.forEach(function(t){return t.handleEvent(e)}),Vo(g.AFTER_EVENT,e),ni.currentEvent=null},e.prototype.on=function(e,t){this.getPlugin(zo).on(e,t)},e.prototype.off=function(e,t){this.getPlugin(zo).off(e,t)},e.prototype.emit=function(e,t){this.getPlugin(zo).emit(e,t)},e.prototype.generateNodeId=function(e){return Vo(g.BEFORE_GEN_NODE_ID,e)||"bulb-node-"+e},e.prototype.setDecorations=function(e){ir.setValue(this.value.setProps({decorations:e}))},e.prototype.setReadOnly=function(e){this.value.readonly!==e&&this.setValue(this.value.setProps({readonly:e}))},e.prototype.isReadonly=function(){return this.value.readonly},e.prototype.isComposing=function(){return ni.isComposing},e.prototype.isSelecting=function(){return Bi.selectingState.isSelecting},e.prototype.getCurrentEvent=function(){return ni.currentEvent},e.prototype.reset=function(){this.commandManager.reset(),this.setValue(new Rn({selection:On.emptySelection()}))},e}();tr([Zi,nr("design:type",Function),nr("design:paramtypes",[String,Object]),nr("design:returntype",Object)],or.prototype,"executeCommand",null),tr([Zi,nr("design:type",Function),nr("design:paramtypes",["function"==typeof($i=void 0!==oi&&oi)?$i:Object]),nr("design:returntype",void 0)],or.prototype,"onEvent",null);var ir=new(or=tr([function(e){var t=m(e);return function(n){function o(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return n.apply(this,i.concat(t.slice(i.length).map(function(t,n){try{return _(t)?t.multiple?T.resolveAll(t.token):T.resolve(t.token):T.resolve(t)}catch(t){var o=n+i.length,r=e.toString().match(/constructor\(([\w, ]+)\)/)||[],a=r[1],s=void 0===a?null:a;throw"Cannot inject the dependency "+(s?s.split(",")[o]:"#"+o)+" of "+e.name+" constructor. "+t}})))||this}return s(o,n),o}(e)},nr("design:paramtypes",["function"==typeof(Ki=void 0!==Ko&&Ko)?Ki:Object,"function"==typeof(qi=void 0!==Go&&Go)?qi:Object,"function"==typeof(er=void 0!==$o&&$o)?er:Object])],or)),rr=function(){function e(e){var t=e.nodeId,n=e.offset,o=void 0===n?0:n;this.nodeId=t,this.offset=Math.max(o,0)}return e.fromJSON=function(t){var n=t.offset,o=void 0===n?0:n,i=t.nodeId;return new e({nodeId:i,offset:o})},e.prototype.toJSON=function(){return{nodeId:this.nodeId,offset:this.offset}},e.prototype.copy=function(){return new e(this)},e.prototype.equals=function(e){return this.nodeId===e.nodeId&&this.offset===e.offset},e.prototype.getNode=function(){return e=this.nodeId,null===(t=ir.getValue().document)||void 0===t?void 0:t.findNodeById(e);var e,t},e.prototype.isAfterPoint=function(e){var t=this.getNode();return e.nodeId===this.nodeId&&this.offset>e.offset||!!t&&t.isAfter(e.getNode())},e.prototype.isBeforePoint=function(e){var t=this.getNode();return e.nodeId===this.nodeId&&this.offset<e.offset||!!t&&t.isBefore(e.getNode())},e.prototype.isAtEndOfRange=function(e){return this.equals(e.getEnd())},e.prototype.isAtStartOfRange=function(e){return this.equals(e.getStart())},e.prototype.isBeforeRange=function(e){return this.isBeforePoint(e.getStart())},e.prototype.isAfterRange=function(e){return this.isAfterPoint(e.getEnd())},e.prototype.isInRange=function(e){return e&&(this.equals(e.getStart())||this.equals(e.getEnd())||this.isAfterPoint(e.getStart())&&this.isBeforePoint(e.getEnd()))},e.prototype.isAtEndOfNode=function(e){var t=e.getLastText();return!!t&&this.nodeId===t.id&&this.offset===t.getLength()},e.prototype.isAtStartOfNode=function(e){var t=e.getFirstText();return!!t&&this.nodeId===t.id&&0===this.offset},e.prototype.isInNode=function(e){return!(!e.isText()||e.id!==this.nodeId)||e.contains(this.getNode())},e.prototype.moveForward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e<=0||(this.offset=Math.min(this.offset+e,this.length())),this},e.prototype.moveBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e<=0||(this.offset=Math.max(this.offset-e,0)),this},e.prototype.moveTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.nodeId=e.id,this.offset=t<0?0:t>e.getLength()?e.getLength():t,this},e.prototype.moveToStartOfNode=function(e){var t=e.getFirstText();return t?this.moveTo(t):Tn.isFocusable(e)&&this.moveTo(e),this},e.prototype.moveToEndOfNode=function(e){var t=e.getLastText();return t?this.moveTo(t,t.getLength()):Tn.isFocusable(e)&&this.moveTo(e),this},e.prototype.length=function(){return this.getNode().getLength()},e}(),ar=function(e){return"number"==typeof e||Object(qt.a)(e)&&"[object Number]"==Object(Lt.a)(e)},sr=function(){function e(e){var t=e.anchor,n=e.focus;this.anchor=t,this.focus=n}return e.fromJSON=function(t){var n=t.anchor,o=void 0===n?{}:n,i=t.focus,r=void 0===i?{}:i;return new e({anchor:rr.fromJSON(o),focus:rr.fromJSON(r)})},e.prototype.toJSON=function(){return{anchor:this.anchor.toJSON(),focus:this.focus.toJSON()}},e.prototype.cloneContents=function(){return ir.getValue().getFragmentByRange(this)},e.prototype.copy=function(){return new e({anchor:this.anchor.copy(),focus:this.focus.copy()})},e.prototype.equals=function(e){return!!e&&this.anchor.equals(e.anchor)&&this.focus.equals(e.focus)},e.prototype.isCollapsed=function(){return this.anchor.equals(this.focus)},e.prototype.inSingleNode=function(){return this.anchor.nodeId===this.focus.nodeId},e.prototype.inSingleBlock=function(){var e=this.getStartBlock(),t=this.getEndBlock();return e&&t&&e.id===t.id},e.prototype.deepSomeNode=function(e){var t=!1;return this.deepForEachNode(function(n){t=t||e(n)}),t},e.prototype.someNode=function(e){var t=!1;return this.forEachNode(function(n){t=t||e(n)}),t},e.prototype.deepEveryNode=function(e){var t=!0;return this.deepForEachNode(function(n){e(n)||(t=!1)}),t},e.prototype.everyNode=function(e){var t=!0;return this.forEachNode(function(n){e(n)||(t=!1)}),t},e.prototype.isBackward=function(){return this.anchor.isAfterPoint(this.focus)},e.prototype.isStartNode=function(e){return!!e&&this.getStartNodeId()===e.id},e.prototype.isEndNode=function(e){return!!e&&this.getEndNodeId()===e.id},e.prototype.getAnchor=function(){return this.anchor},e.prototype.getFocus=function(){return this.focus},e.prototype.getStart=function(){return this.isBackward()?this.focus:this.anchor},e.prototype.getEnd=function(){return this.isBackward()?this.anchor:this.focus},e.prototype.getAnchorNode=function(){return this.anchor.getNode()},e.prototype.getFocusNode=function(){return this.focus.getNode()},e.prototype.getStartNode=function(){return this.getStart().getNode()},e.prototype.getStartBlock=function(){var e=this.getStartNode();return e.isText()?e.closest(function(e){return e.isBlock()}):e},e.prototype.getEndBlock=function(){var e=this.getEndNode();return e.isText()?e.closest(function(e){return e.isBlock()}):e},e.prototype.getCommonAncestor=function(){var e=this.getStartNode(),t=this.getEndNode();if(e&&t){var n=xe.findCommonAncestor(e,t);return n.isText()&&(n=n.closest(function(e){return e.isBlock()})),n}},e.prototype.getEndNode=function(){return this.getEnd().getNode()},e.prototype.getAnchorNodeId=function(){return this.getAnchor().nodeId},e.prototype.getFocusNodeId=function(){return this.getFocus().nodeId},e.prototype.getStartNodeId=function(){return this.getStart().nodeId},e.prototype.getEndNodeId=function(){return this.getEnd().nodeId},e.prototype.getAnchorOffset=function(){return this.anchor.offset},e.prototype.getFocusOffset=function(){return this.focus.offset},e.prototype.getStartOffset=function(){return this.getStart().offset},e.prototype.getEndOffset=function(){return this.getEnd().offset},e.prototype.setAnchorPoint=function(e){return e&&(this.anchor=e),this},e.prototype.setFocusPoint=function(e){return e&&(this.focus=e),this},e.prototype.setStartPoint=function(e){return this.isBackward()?this.setFocusPoint(e):this.setAnchorPoint(e),this},e.prototype.setEndPoint=function(e){return this.isBackward()?this.setAnchorPoint(e):this.setFocusPoint(e),this},e.prototype.setAnchor=function(e,t){return e&&ar(t)?this.setAnchorPoint(new rr({nodeId:e,offset:t})):this},e.prototype.setFocus=function(e,t){return e&&ar(t)?this.setFocusPoint(new rr({nodeId:e,offset:t})):this},e.prototype.setStart=function(e,t){return e&&ar(t)?this.setStartPoint(new rr({nodeId:e,offset:t})):this},e.prototype.setEnd=function(e,t){return e&&ar(t)?this.setEndPoint(new rr({nodeId:e,offset:t})):this},e.prototype.setPoints=function(e){return this.setAnchorPoint(e).setFocusPoint(e)},e.prototype.setAnchorNodeId=function(e){return e&&(this.anchor.nodeId=e),this},e.prototype.setFocusNodeId=function(e){return e&&(this.focus.nodeId=e),this},e.prototype.setStartNodeId=function(e){return this.isBackward()?this.setFocusNodeId(e):this.setAnchorNodeId(e)},e.prototype.setEndNodeId=function(e){return this.isBackward()?this.setAnchorNodeId(e):this.setFocusNodeId(e)},e.prototype.setAnchorOffset=function(e){return ar(e)&&(this.anchor.offset=Math.max(e,0)),this},e.prototype.setFocusOffset=function(e){return ar(e)&&(this.focus.offset=Math.max(e,0)),this},e.prototype.setStartOffset=function(e){return this.isBackward()?this.setFocusOffset(e):this.setAnchorOffset(e),this},e.prototype.setEndOffset=function(e){return this.isBackward()?this.setAnchorOffset(e):this.setFocusOffset(e),this},e.prototype.flip=function(){var e=this.getAnchor(),t=this.getFocus();return this.setAnchorPoint(t).setFocusPoint(e),this},e.prototype.collapseToEnd=function(){return this.setStartPoint(this.getEnd().copy())},e.prototype.collapseToStart=function(){return this.setEndPoint(this.getStart().copy())},e.prototype.move=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?this:e>0?this.moveForward(e):this.moveBackward(-e)},e.prototype.moveForward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.updatePoints(function(t){return t.moveForward(e)})},e.prototype.moveBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.updatePoints(function(t){return t.moveBackward(e)})},e.prototype.moveEndBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.getEnd().moveBackward(e),this},e.prototype.moveEndForward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.getEnd().moveForward(e),this},e.prototype.moveEndTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e&&this.getEnd().moveTo(e,t),this},e.prototype.moveEndToStartOfNode=function(e){return e&&this.getEnd().moveToStartOfNode(e),this},e.prototype.moveEndToEndOfNode=function(e){return e&&this.getEnd().moveToEndOfNode(e),this},e.prototype.moveStartBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.getStart().moveBackward(e),this},e.prototype.moveStartForward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.getStart().moveForward(e),this},e.prototype.moveStartTo=function(e,t){return e&&this.getStart().moveTo(e,t),this},e.prototype.moveStartToStartOfNode=function(e){return e&&this.getStart().moveToStartOfNode(e),this},e.prototype.moveStartToEndOfNode=function(e){return e&&this.getStart().moveToEndOfNode(e),this},e.prototype.moveTo=function(e,t){return e?this.updatePoints(function(n){return n.moveTo(e,t)}):this},e.prototype.moveToEndOfNode=function(e){return e?this.updatePoints(function(t){return t.moveToEndOfNode(e)}):this},e.prototype.moveToStartOfNode=function(e){return e?this.updatePoints(function(t){return t.moveToStartOfNode(e)}):this},e.prototype.moveToRangeOfNode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.isBefore(e))return this;var n=null==e?void 0:e.getFirstText(),o=null==t?void 0:t.getLastText();return n&&o?(this.getStart().moveToStartOfNode(n),this.getEnd().moveToEndOfNode(o)):e&&t&&(this.getStart().moveToStartOfNode(e),this.getEnd().moveToEndOfNode(t)),this},e.prototype.forEachBlock=function(e){var t=this.getStartNode(),n=this.getEndNode(),o=t.parent,i=n.parent;if(this.inSingleNode()||t.parent===n.parent||o.isInline()&&o.parent===i||i.isInline()&&i.parent===o){var r=t.isBlock()?t:t.parent;e(r)}else{var a=xe.findCommonAncestor(t,n),s=a.deepIndexOf(t),l=a.deepIndexOf(n);a.nodes.slice(s,l+1).filter(function(e){return e.isBlock()||e.isInline()&&!Tn.isAtomic(e)}).forEach(function(t){return e(t)})}},e.prototype.forEachNode=function(e){if(this.inSingleNode())return e(this.anchor.getNode()),this;var t=this.getStartNode(),n=this.getEndNode(),o=xe.findCommonAncestor(t,n),i=o.deepIndexOf(t),r=o.deepIndexOf(n),a=o.nodes[i],s=o.nodes[r];return e(t),this.traverseStartNode(t,a,e),o.nodes.slice(i+1,r).forEach(function(t){return e(t)}),this.traverseEndNode(n,s,e),e(n),this},e.prototype.forEachText=function(e){this.forEachNode(function(t){return t.isText()&&e(t)})},e.prototype.deepForEachNode=function(e){this.forEachNode(function(t){return t.deepForEach(e)})},e.prototype.deepForEachText=function(e){this.deepForEachNode(function(t){return t.isText()&&e(t)})},e.prototype.getActiveMarks=function(){var e=this,t=null;return this.deepForEachText(function(n){var o=0,i=n.getLength();e.isStartNode(n)&&(o=e.getStartOffset()),e.isEndNode(n)&&(i=e.getEndOffset());var r=n.getActiveMarksBetweenOffsets(o,i);t=t?Cn.marksIntersect(t,r):r}),t||[]},e.prototype.getAllMarks=function(){var e=this,t=[];return this.deepForEachText(function(n){var o=0,i=n.getLength();e.isStartNode(n)&&(o=e.getStartOffset()),e.isEndNode(n)&&(i=e.getEndOffset()),t=Cn.marksUnion(t,n.getAllMarksBetweenOffsets(o,i))}),t},e.prototype.getText=function(){var e=this,t="";return this.deepForEachText(function(n){var o=0,i=n.getLength();e.isStartNode(n)&&(o=e.getStartOffset()),e.isEndNode(n)&&(i=e.getEndOffset()),t+=n.getText().substring(o,i)}),t},e.prototype.getCommonRange=function(t){var n=e.fromJSON({});return n.setAnchorPoint(this.getStart().isBeforeRange(t)?t.getStart():this.getStart()),n.setFocusPoint(this.getEnd().isAfterRange(t)?t.getEnd():this.getEnd()),n.isBackward()?null:n},e.prototype.traverseStartNode=function(e,t,n){if(e.parent&&t&&e.id!==t.id){var o=e.parent,i=e.index();o.nodes.slice(i+1,o.nodes.length).forEach(function(e){return n(e)}),this.traverseStartNode(o,t,n)}},e.prototype.traverseEndNode=function(e,t,n){if(e.parent&&t&&e.id!==t.id){var o=e.parent;this.traverseEndNode(o,t,n);var i=e.index();o.nodes.slice(0,i).forEach(function(e){return n(e)})}},e.prototype.updatePoints=function(e){return this.anchor=e(this.anchor),this.focus=e(this.focus),this},e}(),lr=function(e,t,n){var o,i;return n===f.FORWARD?o=e.getText().slice(t).split(cr).filter(function(e){return""!==e})[0]:n===f.BACKWARD&&(o=e.getText().slice(0,t).split(cr).filter(function(e){return""!==e}).slice(-1)[0]),i=o,cr.test(i)?o.length:1},cr=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/,ur=function(e){return function(t){return function(n){return Object.defineProperty(n,e,{value:t,writable:!1}),n}}},dr=(ur(Tn.undraggable)(!0),ur(Tn.undroppable)(!0),ur(Tn.focusable)(!0),ur(Tn.atomic)(!0),ur(Tn.depend),ur(Tn.defaults)(!0));ur(Tn.container)(!0);var pr,hr=n(352);!function(e){e.note="note",e.head="head",e.body="body",e.fileId="file-id",e.fileVersion="file-version",e.para="para",e.todo="todo",e.list="list",e.listItem="list-item",e.catalogue="catalogue",e.heading="heading",e.quote="quote",e.attach="attach",e.image="image",e.table="table",e.code="code",e.layout="layout",e.hr="horizontal-line",e.coId="coId",e.id="id",e.blockStyles="styles",e.compat="compat",e.align="align",e.margin="margin",e.indent="indent",e.textIndent="text-indent",e.lineHeight="line-height",e.blockBackColor="back-color",e.padding="padding",e.float="float",e.text="text",e.inlineStyles="inline-styles",e.from="from",e.to="to",e.value="value",e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.color="color",e.inlineBackColor="back-color",e.fontSize="font-size",e.fontFamily="font-family",e.imageSource="source",e.imageTitle="text",e.imageHeight="height",e.imageWidth="width",e.imageFloat="float",e.attachSource="source",e.attachResource="resource",e.attachName="filename",e.attachLength="filelength",e.catalogHref="href",e.catalogIndent="indent",e.catalogValue="value",e.catalogueWrap="catalogue-wrap",e.catalogueId="catalogue-id",e.hrType="type",e.hrColor="color",e.linkHref="href",e.tableContent="content",e.tableResources="resource-list",e.tableResource="resource-mono",e.tableResId="res-id",e.tableImageRes="image",e.tableImageResSource="source",e.tableImageResWidth="width",e.tableImageResHeight="height",e.tableAttachRes="attach",e.tableAttachResSource="source",e.tableAttachResResource="resource",e.tableAttachResName="filename",e.tableAttachResLength="filelength",e.checked="checked",e.language="language",e.theme="theme",e.level="level",e.header="header",e.footer="footer",e.headerContent="text",e.footerContent="text",e.headerStyle="styles",e.footerStyle="styles",e.listType="type",e.listId="list-id",e.unknown="unknown",e.unknownContent="content"}(pr||(pr={}));var fr=n(1),gr=n.n(fr);function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach(function(t){vr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(360);var br=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).isBlinkRestart=!1,n}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.top,n=e.left,o=e.show,i=e.style,r=e.blink,a=void 0===r||r,s=mr({},i,{},_r);o||(s=mr({},s,{},Ir)),this.isBlinkRestart=!this.isBlinkRestart;var l=a?this.isBlinkRestart?"caret blink-restart":"caret blink":"caret";return fr.createElement("div",{style:mr({},kr,{top:t,left:n})},fr.createElement("div",{className:l,style:s}))},t}(fr.Component),_r={position:"absolute",width:0,fontSize:0,borderLeft:"1px solid"},Ir={opacity:0},kr={position:"absolute",zIndex:100},wr=function(){return document.querySelector(".bulb-scroll-container")};fr.PureComponent;var Cr=!1;function Sr(e){Cr=e}function xr(e){if(null==e?void 0:e.isCollapsed()){var t=Ei.toNativeRange(e),n=Tr(t);if(n){var o=null==t?void 0:t.startContainer;return o?(o.nodeType===Node.TEXT_NODE&&(o=o.parentElement),{scrollEl:n,targetNode:o}):void 0}}}var Ar="bulb-scroll";fr.Component,ir.on(h.SELECTION_DID_UPDATE,function(){var e=ir.getBulbRange();if(!Cr){var t=xr(ir.getBulbRange())||{},n=t.targetNode,o=t.scrollEl;if(n&&o){var i=Ei.toNativeRange(e).getBoundingClientRect().left,r=o.getBoundingClientRect(),a=r.left,s=r.right;i<a&&(o.scrollLeft+=i-a-36),i+12>s&&(o.scrollLeft+=i-s+12)}}}),ir.registerPlugins(function(e){function t(){var t=this;return(t=e.apply(this,arguments)||this).name="PreventMouseDown",t}return s(t,e),t.prototype.onEvent=function(e,t){if(t.type!==ti.MouseDown)return Sr(!1),e;var n=xr(t.getRange())||{},o=n.targetNode,i=n.scrollEl;if(!o||!i)return e;(function(e,t){var n=e.getBoundingClientRect().bottom;return t.pageY>n})(i.firstChild,t)&&(Sr(!0),t.preventDefault(),t.stopPropagation())},t}(Po));var Tr=function(e){var t,n=e;return e instanceof Range&&(n=e.startContainer.parentElement),null===(t=n)||void 0===t?void 0:t.closest("."+Ar)};fr.Component,fr.PureComponent,Object.prototype.hasOwnProperty,new Map,fr.Component,fr.Component;var Nr,Er=function(e,t){var n,o;if(t=null!==(n=t)&&void 0!==n?n:null===(o=document.querySelector(".caret"))||void 0===o?void 0:o.getBoundingClientRect(),2===(null==e?void 0:e.length)){var i,r,a=e[0],s=e[1];if(a.width<=1&&s.width<=1&&a.right>s.left&&a.top<s.top)return Math.abs(a.right-(null===(i=t)||void 0===i?void 0:i.right))>Math.abs(s.right-(null===(r=t)||void 0===r?void 0:r.right))?Nn.LineStart:Nn.LineEnd}return Nn.LineCenter};!function(e){e.RANGE="range",e.ELEMENT="element"}(Nr||(Nr={}));var Dr=[ei.ArrowUp,ei.ArrowDown,ei.ArrowLeft,ei.ArrowRight];new(function(){function e(){var e=this;this.handle=function(t){var n=t.getRange();e.shouldHandleArrow(t)&&(e.handleArrowMove(t,n),t.preventDefault())},this.handleArrowMove=function(t,n){var o=e.getDirection(t);e.caretBase=e.getCaretBase(n,o),t.shiftKey?e.moveWithSelection(n,t,o):e.move(n,t,o);var i=e.getCaretBase(n,o),r=i.x,a=i.y;e.caretBase.y=a,e.shouldHoldCaretX(t)||(e.caretBase.x=r),e.setBulbSelection(n)},this.moveWithSelection=function(t,n,o){var i=t.getAnchor().copy();e.move(t,n,o),t.setAnchorPoint(i)},this.move=function(t,n,o){var i=ir.platform;if(i.isWindows())switch(n.key){case ei.ArrowUp:case ei.ArrowDown:return n.ctrlKey?e.moveToBlockBoundary(t,n,o):e.moveVertical(t,n,o);case ei.ArrowLeft:case ei.ArrowRight:return e.moveHorizontal(t,n,o,n.ctrlKey)}if(i.isMac())switch(n.key){case ei.ArrowUp:case ei.ArrowDown:return n.ctrlKey?e.moveToDocBoundary(t,n,o):n.altKey?e.moveToBlockBoundary(t,n,o):e.moveVertical(t,n,o);case ei.ArrowLeft:case ei.ArrowRight:return n.ctrlKey?e.moveToRowBoundary():e.moveHorizontal(t,n,o,n.altKey)}},this.moveVertical=function(t,n,o){if(e.shouldCollapseRange(t,n))return e.collapseRange(t,o);for(var i,r=e.caretBase.x,a=e.caretBase.x,s=e.caretBase.y,l=e.getRectHeight(t);!e.shouldStopMoveCaret(i,r,s,t,o,l)&&(i=e.moveHorizontal(t,n,o,!1));){a=r;var c=e.getCaretBase(t,o),u=c.x,d=c.y;r=u,s=d}return i&&i.isText()&&Math.abs(r-e.caretBase.x)>Math.abs(a-e.caretBase.x)&&(o===f.FORWARD?t.moveBackward():t.moveForward()),i},this.moveHorizontal=function(t,n,o,i){if(e.shouldCollapseRange(t,n))return e.collapseRange(t,o);var r=t.getFocusNode(),a=e.isAtTextBoundary(t,o);return r.isText()&&!a?e.moveInSameText(r,i,t,o):e.moveFromTextBoundary(r,t,o)},this.moveToBlockBoundary=function(t,n,o){if(e.shouldCollapseRange(t,n))return e.collapseRange(t,o);var i=t.getFocusNode();return i.isBlock()||e.isAtBlockBoundary(t,o)?e.moveToAnotherBlockBoundary(i,t,o):e.moveToCurrentBlockBoundary(i,t,o)},this.moveToCurrentBlockBoundary=function(e,t,n){var o,i,r=e.parent;return n===f.FORWARD?(o=r.nodes[r.nodes.length-1],i=o.isText()?o.getLength():1):(o=r.nodes[0],i=0),t.moveTo(o,i),o},this.moveToAnotherBlockBoundary=function(t,n,o){var i=e.getNode(t,o);return i?(i.isText()?(e.moveToText(i,t,n,o),i=e.moveToCurrentBlockBoundary(i,n,o)):e.moveToBlock(i,n,o),i):null},this.moveToDocBoundary=function(t,n,o){if(e.shouldCollapseRange(t,n))return e.collapseRange(t,o);var i,r,a=ir.getDocument().nodes;if(o===f.FORWARD){for(;a.length;)i=a[a.length-1],a=i.nodes;for(;!e.canSetRange(i);)i=i.pre(ge.DepthFirst);r=i.isText()?i.getLength():1}else{for(i=a[0];!e.canSetRange(i);)i=i.next(ge.DepthFirst);r=0}t.moveTo(i,r)},this.moveToRowBoundary=function(){},this.moveInSameText=function(t,n,o,i){if(n)e.moveBySegment(t,o,i);else{var r=lr(t,o.getFocusOffset(),i);i===f.FORWARD?o.moveForward(r):i===f.BACKWARD&&o.moveBackward(r)}return t},this.moveFromTextBoundary=function(t,n,o){var i=e.getNode(t,o);return i?(i.isText()?e.moveToText(i,t,n,o):e.moveToBlock(i,n,o),i):null},this.moveBySegment=function(e,t,n){var o,i=e.getText(),r=t.getFocusOffset(),a=wi(i,r),s=a.start,l=a.end;n===f.FORWARD?o=l:r===(o=s)&&(o=wi(i,r-1).start),t.moveTo(e,o)},this.moveToText=function(e,t,n,o){if(n&&e){var i,r=t.parent.isInline()?t.parent.parent:t.parent,a=e.parent.isInline()?e.parent.parent:e.parent;if(o===f.FORWARD)i=t.isText()&&r===a?1:0;else{var s=e.getLength();i=t.isText()&&r===a?s-1:s}n.moveTo(e,i)}},this.moveToBlock=function(e,t,n){if(t&&e){var o=n===f.FORWARD?1:0;t.moveTo(e,o)}},this.isAtTextBoundary=function(e,t){var n=e.getFocus(),o=n.offset,i=n.getNode();if(i.isText()){var r=i.getLength();return t===f.FORWARD?o===r:0===o}},this.isAtBlockBoundary=function(e,t){var n=e.getFocus(),o=n.offset,i=n.getNode(),r=i.parent.nodes.indexOf(i),a=i.parent.nodes.length;if(i.isText()){var s=i.getLength();return t===f.FORWARD?r===a-1&&o===s:0===r&&0===o}if(i.isInline())return t===f.FORWARD?r===a:0===r},this.canSetRange=function(e){return!!e&&!(e.isText()&&0===e.getLength()&&e.closest(function(e){return e.isBlock()}).getLength()>0)&&(e.isText()||Tn.isFocusable(e)&&Tn.isAtomic(e))},this.shouldCollapseRange=function(e,t){return!e.isCollapsed()&&!t.shiftKey},this.shouldHoldCaretX=function(e){return!(e.ctrlKey||e.altKey||e.key===ei.ArrowLeft||e.key===ei.ArrowRight)},this.shouldStopMoveCaret=function(t,n,o,i,r,a){if(o<=0||o>=document.documentElement.offsetHeight)return!0;if(!t)return!1;if(t.isText()){var s=t.closest(function(e){return e.isBlock()}),l=s.getLength(),c=0;if(s.deepForEach(function(e){e.isText()&&(e.isBefore(t)?c+=e.getLength():e.id===t.id&&(c+=i.getFocusOffset()))}),r===f.FORWARD&&o>e.caretBase.y+a)return c>=l||n>=e.caretBase.x;var u=e.getRectHeight(i);if(r===f.BACKWARD&&o<e.caretBase.y-u)return c<=0||n<=e.caretBase.x}return Tn.isFocusable(t)&&Tn.isAtomic(t)},this.getDirection=function(e){switch(e.key){case ei.ArrowUp:case ei.ArrowLeft:return f.BACKWARD;case ei.ArrowDown:case ei.ArrowRight:return f.FORWARD}},this.getRects=function(e){var t=Ei.toNativeRange(e);if(!t)return null;var n=t.getClientRects(),o=Nr.RANGE;n.length||(n=t.startContainer.getClientRects(),o=Nr.ELEMENT);var i=Array.from(n),r=Er(i);return r===Nn.LineEnd?i.pop():r===Nn.LineStart&&i.shift(),{value:i,type:o}},this.getRectHeight=function(t){return e.getRects(t).value[0].height},this.getCaretBase=function(t,n){var o,i,r=e.getRects(t);if(!r)return null;var a=r.value,s=r.type;return s===Nr.ELEMENT?(o=n===f.BACKWARD?a[0].right:a[0].left,i=a[0].top):(o=t.isBackward()?a[0].left:a[a.length-1].right,i=t.isBackward()?a[0].top:a[a.length-1].top),{x:Math.floor(o+window.scrollX),y:Math.floor(i+window.scrollY)}},this.getNode=function(t,n){var o=t;do{if(!o)return null;o=n===f.FORWARD?o.next(ge.DepthFirst):o.pre(ge.DepthFirst)}while(!e.canSetRange(o));return o},this.setBulbSelection=function(e){var t,n=Array.from(Ei.toNativeRange(e).getClientRects()),o=new On({range:e,position:Er(n)});if(e.isCollapsed()){var i=e.getStartNode();Tn.isFocusable(i)&&o.setData(i.id,((t={})[ln.focusable]=!0,t))}ir.setBulbSelection(o)},this.collapseRange=function(e,t){return t===f.FORWARD?(e.collapseToEnd(),e.getEndNode()):(e.collapseToStart(),e.getStartNode())}}return e.prototype.shouldHandleArrow=function(e){return e instanceof ai&&Dr.includes(e.key)},e}());var Mr,Or=function(){return Le.a.Date.now()},Lr=/^\s+|\s+$/g,Br=/^[-+]0x[0-9a-f]+$/i,Rr=/^0b[01]+$/i,Pr=/^0o[0-7]+$/i,jr=parseInt,Fr=function(e){if("number"==typeof e)return e;if(lo(e))return NaN;if(Object(Pe.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(Pe.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Lr,"");var n=Rr.test(e);return n||Pr.test(e)?jr(e.slice(2),n?2:8):Br.test(e)?NaN:+e},zr=Math.max,Hr=Math.min,Gr=function(e,t,n){var o,i,r,a,s,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=o,r=i;return o=i=void 0,c=t,a=e.apply(r,n)}function f(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=r}function g(){var e=Or();if(f(e))return y(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?Hr(n,r-(e-c)):n}(e))}function y(e){return s=void 0,p&&o?h(e):(o=i=void 0,a)}function m(){var e=Or(),n=f(e);if(o=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(g,t),u?h(e):a}(l);if(d)return clearTimeout(s),s=setTimeout(g,t),h(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=Fr(t)||0,Object(Pe.a)(n)&&(u=!!n.leading,r=(d="maxWait"in n)?zr(Fr(n.maxWait)||0,t):r,p="trailing"in n?!!n.trailing:p),m.cancel=function(){void 0!==s&&clearTimeout(s),c=0,o=l=i=s=void 0},m.flush=function(){return void 0===s?a:y(Or())},m},Vr=function(){function e(){}return e.scrollElBy=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getScrollContainer();0===t&&0===n||(t+=t>0?o:-o,n+=n>0?o:-o,i.scrollLeft+=t,i.scrollTop+=n)},e.getScrollContainer=function(){return e.scrollView||(e.scrollView=wr()),e.scrollView},e.getScrollDistanceByCursorDistanceToBoundary=function(e){return Math.ceil(20/Math.max(Math.abs(e),2.5))},e}();function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e){return function(e){if(Array.isArray(e))return Zr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}Vr.blockXAxisScrollingBySelecting=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Object(Pe.a)(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),Gr(e,t,{leading:o,maxWait:t,trailing:i})}(function(e){if(Jo.isSelecting()&&e&&!e.isCollapsed()){var t=Ti(e.getFocusNode().id).closest("."+Ar),n=null==t?void 0:t.getBoundingClientRect(),o=(Jo.getCurrentEvent()||{}).pageX;if(n&&null!=o)if(e.isBackward()){var i=n.left-o;i<0&&-i<60&&Vr.scrollElBy(-15,0,null,t)}else{var r=n.right-o;r>0&&r<60&&Vr.scrollElBy(15,0,null,t)}}},150),Vr.scrollPageYAxisBySelecting=function(){var e=Jo.getBulbRange();if(!Jo.isSelecting()||!e||e.isCollapsed())return Vr.setY(null);var t=(document.documentElement||{}).offsetHeight,n=(Jo.getCurrentEvent()||{}).pageY,o=null!=n;if(!Vr.stopped||o)if(o||(n=Vr.mouseY),n>0&&(Vr.stopped=n<Vr.mouseY,Vr.stopped))Vr.mouseY=n;else{o&&Vr.setY(n);var i=0;if(e.isBackward())Math.abs(n)<60&&(i=-Vr.getScrollDistanceByCursorDistanceToBoundary(n),setTimeout(function(){Vr.scrollPageYAxisBySelecting()},20));else{var r=t-n;r<60&&(i=Vr.getScrollDistanceByCursorDistanceToBoundary(r),setTimeout(function(){Vr.scrollPageYAxisBySelecting()},20))}Vr.scrollElBy(scrollX,i,0)}},Vr.setY=function(e){Vr.mouseY=e},Vr.scrollView=null,Vr.mouseY=null,Vr.stopped=!1,fr.PureComponent;var Yr=function(e){var t=wr(),n=null==t?void 0:t.getBoundingClientRect();return{top:Math.round(e.top-n.top+t.scrollTop),left:Math.round(e.left-n.left+t.scrollLeft),height:Math.round(e.height),width:Math.round(e.width),bottom:Math.round(e.bottom-n.top+t.scrollTop),right:Math.round(e.right-n.left+t.scrollLeft)}},Qr=function(e){if(!e||e.isEmpty())return[];var t=e.range.copy();t.isCollapsed()||0===t.getEndOffset()&&0===t.getEndNode().getLength()&&t.setEndOffset(1);var n=Ei.toNativeRange(t);if(!n)return[];var o=Array.from(n.getClientRects()),i=Vo(g.BEFORE_CONVERT_RECTS)||[];i=Kr(o.concat(i).map(Yr));var r=function(e){var t=Array.from(e.commonAncestorContainer.childNodes);return(t=t.slice(t.findIndex(function(t){return t.contains(e.startContainer)}),t.findIndex(function(t){return t.contains(e.endContainer)})+1)).reduce(function(e,t){return t.querySelectorAll("."+Ar).forEach(function(t){var n=Yr(t.getBoundingClientRect());e.push(n)}),e},[])}(n),a=function(e){var t=Tr(e);return t&&Yr(t.getBoundingClientRect())}(n),s=a?[a].concat(Jr(r)):r;return i=$r(Kr(na(i,s))),Vo(g.AFTER_CONVERT_RECTS,i)||i},Xr=function(e,t){return!(!e||!t)&&e.top<=t.top&&e.left<=t.left&&e.bottom>=t.bottom&&e.right>=t.right},$r=function(e){return e.reduce(function(e,t){return e.length?e.some(function(n,o){if((qr(n,t)||qr(t,n))&&ta(n,t)){var i=ea(n,t);return e[o]=i,!0}return!1})?e:[].concat(Jr(e),[t]):[t]},[])},Kr=function(e){return e.reduce(function(e,t){return e.length?e.some(function(n,o){return Xr(n,t)&&0!==t.width?(e[o]=t,!0):!(!Xr(t,n)||0===n.width)})?e:[].concat(Jr(e),[t]):[t]},[])},qr=function(e,t){return!(!e||!t)&&e.bottom>=t.bottom&&e.top<=t.top},ea=function(e,t){var n=Math.max(e.right,t.right),o=Math.min(e.left,t.left);return{top:Math.min(e.top,t.top),height:Math.max(e.height,t.height),bottom:Math.max(e.bottom,t.bottom),left:o,right:n,width:n-o}},ta=function(e,t){return e.right>=t.left&&e.left<=t.right},na=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=Yr(null===(t=Mr=Mr||document.querySelector(".bulb-editor-inner"))||void 0===t?void 0:t.getBoundingClientRect());return e.map(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach(function(t){Wr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return n.forEach(function(e){qr(e,t)&&(t.left=Math.max(e.left,t.left),t.right=Math.min(e.right,t.right),t.width=Math.max(t.right-t.left,0))}),function(e,t){return e.left>t.right&&(e.left=t.right),e.right>t.right&&(e.right=t.right),e.width=Math.max(e.right-e.left,0),e}(t,o)})};function oa(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ia(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}fr.Component,n(363);var ra=function(e){function t(n){var o,i=this;return i=e.call(this,n)||this,o=i,i.selection=ir.getBulbSelection(),i.onDrawDragShadowListener=function(e){var t=e.selection,n=e.event;if(!t||!n)return o.removeGlobalCSS(),o.setState({show:!1});var i=n.clientX,r=n.clientY;t.range.equals(o.selection.range)||(o.selection=t,o.dropStartX=i,o.dropStartY=r);var a=Ei.toNativeRange(t.range),s=t.range.getStartNode().isBlock(),l=a.startContainer,c=s?[Yr(l.getBoundingClientRect())]:Qr(t),u=Math.max.apply(Math,oa(c.map(function(e){return e.right})))-Math.min.apply(Math,oa(c.map(function(e){return e.left}))),d=s?[l.cloneNode(!0)]:Array.from(a.cloneContents().childNodes),p=c.map(function(e,t){var n=d[t];if(n instanceof Text){var a=document.createElement("span");a.appendChild(n),n=a}if(n instanceof HTMLElement)return n.style.top=e.top+r-o.dropStartY+"px",n.style.left=e.left+i-o.dropStartX+"px",n.style.width=u+"px",n.outerHTML}).filter(Boolean),h=ir.selectionAdapter.buildBulbRangeFromPoint(n.clientX,n.clientY),f=Ei.toNativeRange(h);if(f){var g=Tn.isUndroppable(h.getStartNode())?{}:Yr(f.getBoundingClientRect());o.setState({show:!0,rectHTMLs:p,dragCaretX:g.left,dragCaretY:g.top,dragCaretHeight:g.height}),o.injectGlobalCSS(o.generateDisabledCursorCSS())}},i.removeGlobalCSS=function(){document.head.querySelectorAll("."+t.cursorClassName).forEach(function(e){return e.remove()})},i.injectGlobalCSS=function(e){if(!document.head.querySelectorAll("."+t.cursorClassName).length){var n=document.createElement("style");n.type="text/css",n.className=t.cursorClassName,n.appendChild(document.createTextNode(e)),document.head.appendChild(n)}},i.generateDisabledCursorCSS=function(){return t.getUndroppableComponents().map(function(e){return"[data-block-type='"+e+"'] {\n                                cursor: no-drop !important;\n                            }"}).join("\n")},i.state={show:!1},ir.on(h.DRAW_DRAG_SHADOW,i.onDrawDragShadowListener),i}return s(t,e),t.prototype.render=function(){var e=this.state,t=e.rectHTMLs,n=e.show,o=e.dragCaretX,i=e.dragCaretY,r=e.dragCaretHeight,a=t&&t.join("");return fr.createElement(fr.Fragment,null,fr.createElement("div",{className:"bulb-drag-shadow",style:{display:!n&&"none"},dangerouslySetInnerHTML:{__html:a}}),n&&fr.createElement(br,{top:i,left:o,show:!(!n||!o),blink:!1,style:{color:"red",height:r}}))},t}(fr.Component);function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach(function(t){la(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ra.cursorClassName="bulb-drag-shadow-cursor",ra.getUndroppableComponents=function(){return Jo.getComponents().filter(function(e){return e[Tn.undroppable]}).map(function(e){return e.blockName})},fr.Component;var ca=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.setData=function(e){Jo.setBlockProp(this.props.block.id,"data",sa({},this.props.block.data,{},e))},t.prototype.setBlockState=function(e){Jo.setBlockProp(this.props.block.id,"state",sa({},this.props.block.state,{},e))},t}(fr.Component),ua=n(354),da=n.n(ua),pa=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},ha=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,fa=pa(function(e){return ha.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),ga=n(349),ya=n.n(ga),ma=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,n=function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}(this);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,t),this.tags.push(n)}var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(o);try{var r=105===e.charCodeAt(1)&&64===e.charCodeAt(0);i.insertRule(e,r?0:i.cssRules.length)}catch(e){}}else o.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}(),va=function(e){function t(e,t,o){var i=t.trim().split(f);t=i;var r=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<r;++s)t[s]=n(e,t[s],o).trim();break;default:var l=s=0;for(t=[];s<r;++s)for(var c=0;c<a;++c)t[l++]=n(e[c]+" ",i[s],o).trim()}return t}function n(e,t,n){var o=t.charCodeAt(0);switch(33>o&&(o=(t=t.trim()).charCodeAt(0)),o){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function o(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===N||2===N&&i(l,1)?"-webkit-"+l+l:l}if(0===N||2===N&&!i(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(S,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(b,"tb");break;case 232:l=a.replace(b,"tb-rl");break;case 220:l=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(k,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(k,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===C.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?o(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+a}return a}function i(e,t){var n=e.indexOf(1===t?":":"{"),o=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),O(2!==t?o:o.replace(w,"$1"),n,t)}function r(e,t){var n=o(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(I," or ($1)").substring(4):"("+t+")"}function a(e,t,n,o,i,r,a,s,c,u){for(var d,p=0,h=t;p<M;++p)switch(d=D[p].call(l,e,h,n,o,i,r,a,s,c,u)){case void 0:case!1:case!0:case null:break;default:h=d}if(h!==t)return h}function s(e){return void 0!==(e=e.prefix)&&(O=null,e?"function"!=typeof e?N=1:(N=2,O=e):N=0),s}function l(e,n){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<M){var l=a(-1,n,s,s,A,x,0,0,0,0);void 0!==l&&"string"==typeof l&&(n=l)}var d=function e(n,s,l,d,p){for(var h,f,g,b,I,k=0,w=0,C=0,S=0,D=0,O=0,B=g=h=0,R=0,P=0,j=0,F=0,z=l.length,H=z-1,G="",V="",U="",W="";R<z;){if(f=l.charCodeAt(R),R===H&&0!==w+S+C+k&&(0!==w&&(f=47===w?10:47),S=C=k=0,z++,H++),0===w+S+C+k){if(R===H&&(0<P&&(G=G.replace(u,"")),0<G.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:G+=l.charAt(R)}f=59}switch(f){case 123:for(h=(G=G.trim()).charCodeAt(0),g=1,F=++R;R<z;){switch(f=l.charCodeAt(R)){case 123:g++;break;case 125:g--;break;case 47:switch(f=l.charCodeAt(R+1)){case 42:case 47:e:{for(B=R+1;B<H;++B)switch(l.charCodeAt(B)){case 47:if(42===f&&42===l.charCodeAt(B-1)&&R+2!==B){R=B+1;break e}break;case 10:if(47===f){R=B+1;break e}}R=B}}break;case 91:f++;case 40:f++;case 34:case 39:for(;R++<H&&l.charCodeAt(R)!==f;);}if(0===g)break;R++}switch(g=l.substring(F,R),0===h&&(h=(G=G.replace(c,"").trim()).charCodeAt(0)),h){case 64:switch(0<P&&(G=G.replace(u,"")),f=G.charCodeAt(1)){case 100:case 109:case 115:case 45:P=s;break;default:P=E}if(F=(g=e(s,P,g,f,p+1)).length,0<M&&(I=a(3,g,P=t(E,G,j),s,A,x,F,f,p,d),G=P.join(""),void 0!==I&&0===(F=(g=I.trim()).length)&&(f=0,g="")),0<F)switch(f){case 115:G=G.replace(_,r);case 100:case 109:case 45:g=G+"{"+g+"}";break;case 107:g=(G=G.replace(y,"$1 $2"))+"{"+g+"}",g=1===N||2===N&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=G+g,112===d&&(V+=g,g="")}else g="";break;default:g=e(s,t(s,G,j),g,d,p+1)}U+=g,g=j=P=B=h=0,G="",f=l.charCodeAt(++R);break;case 125:case 59:if(1<(F=(G=(0<P?G.replace(u,""):G).trim()).length))switch(0===B&&(h=G.charCodeAt(0),45===h||96<h&&123>h)&&(F=(G=G.replace(" ",":")).length),0<M&&void 0!==(I=a(1,G,s,n,A,x,V.length,d,p,d))&&0===(F=(G=I.trim()).length)&&(G="\0\0"),h=G.charCodeAt(0),f=G.charCodeAt(1),h){case 0:break;case 64:if(105===f||99===f){W+=G+l.charAt(R);break}default:58!==G.charCodeAt(F-1)&&(V+=o(G,h,f,G.charCodeAt(2)))}j=P=B=h=0,G="",f=l.charCodeAt(++R)}}switch(f){case 13:case 10:47===w?w=0:0===1+h&&107!==d&&0<G.length&&(P=1,G+="\0"),0<M*L&&a(0,G,s,n,A,x,V.length,d,p,d),x=1,A++;break;case 59:case 125:if(0===w+S+C+k){x++;break}default:switch(x++,b=l.charAt(R),f){case 9:case 32:if(0===S+k+w)switch(D){case 44:case 58:case 9:case 32:b="";break;default:32!==f&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===S+w+k&&(P=j=1,b="\f"+b);break;case 108:if(0===S+w+k+T&&0<B)switch(R-B){case 2:112===D&&58===l.charCodeAt(R-3)&&(T=D);case 8:111===O&&(T=O)}break;case 58:0===S+w+k&&(B=R);break;case 44:0===w+C+S+k&&(P=1,b+="\r");break;case 34:case 39:0===w&&(S=S===f?0:0===S?f:S);break;case 91:0===S+w+C&&k++;break;case 93:0===S+w+C&&k--;break;case 41:0===S+w+k&&C--;break;case 40:if(0===S+w+k){if(0===h)switch(2*D+3*O){case 533:break;default:h=1}C++}break;case 64:0===w+C+S+k+B+g&&(g=1);break;case 42:case 47:if(!(0<S+k+C))switch(w){case 0:switch(2*f+3*l.charCodeAt(R+1)){case 235:w=47;break;case 220:F=R,w=42}break;case 42:47===f&&42===D&&F+2!==R&&(33===l.charCodeAt(F+2)&&(V+=l.substring(F,R+1)),b="",w=0)}}0===w&&(G+=b)}O=D,D=f,R++}if(0<(F=V.length)){if(P=s,0<M&&void 0!==(I=a(2,V,P,n,A,x,F,d,p,d))&&0===(V=I).length)return W+V+U;if(V=P.join(",")+"{"+V+"}",0!=N*T){switch(2!==N||i(V,2)||(T=0),T){case 111:V=V.replace(v,":-moz-$1")+V;break;case 112:V=V.replace(m,"::-webkit-input-$1")+V.replace(m,"::-moz-$1")+V.replace(m,":-ms-input-$1")+V}T=0}}return W+V+U}(E,s,n,0,0);return 0<M&&void 0!==(l=a(-2,d,s,s,A,x,d.length,0,0,0))&&(d=l),T=0,x=A=1,d}var c=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,f=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,v=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,I=/([\s\S]*?);/g,k=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,x=1,A=1,T=0,N=1,E=[],D=[],M=0,O=null,L=0;return l.use=function e(t){switch(t){case void 0:case null:M=D.length=0;break;default:if("function"==typeof t)D[M++]=t;else if("object"==typeof t)for(var n=0,o=t.length;n<o;++n)e(t[n]);else L=0|!!t}return e},l.set=s,void 0!==e&&s(e),l},ba=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var o=e(n);return t.set(n,o),o}};function _a(e){e&&Ia.current.insert(e+"}")}var Ia={current:null},ka=function(e,t,n,o,i,r,a,s,l,c){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return Ia.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===s)return t+"/*|*/";break;case 3:switch(s){case 102:case 112:return Ia.current.insert(n[0]+t),"";default:return t+(0===c?"/*|*/":"")}case-2:t.split("/*|*/}").forEach(_a)}},wa=function(e,t){if(1===e&&108===t.charCodeAt(0)&&98===t.charCodeAt(2))return""},Ca="undefined"!=typeof document,Sa={},xa=Ca?void 0:ba(function(){var e=ba(function(){return{}}),t={},n={};return function(o){return void 0===o||!0===o?t:!1===o?n:e(o)}}),Aa=function(e){void 0===e&&(e={});var t,n=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var o,i,r=new va(t),a={};if(Ca){o=e.container||document.head;var s=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(s,function(e){e.getAttribute("data-emotion-"+n).split(" ").forEach(function(e){a[e]=!0}),e.parentNode!==o&&o.appendChild(e)})}if(Ca)r.use(e.stylisPlugins)(ka),i=function(e,t,n,o){var i=t.name;Ia.current=n,r(e,t.styles),o&&(c.inserted[i]=!0)};else{r.use(wa);var l=Sa;(e.stylisPlugins||void 0!==e.prefix)&&(r.use(e.stylisPlugins),l=xa(e.stylisPlugins||Sa)(e.prefix)),i=function(e,t,n,o){var i=t.name,a=function(e,t){var n=t.name;return void 0===l[n]&&(l[n]=r(e,t.styles)),l[n]}(e,t);return void 0===c.compat?(o&&(c.inserted[i]=!0),a):o?void(c.inserted[i]=a):a}}var c={key:n,sheet:new ma({key:n,container:o,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:a,registered:{},insert:i};return c},Ta="undefined"!=typeof document;function Na(e,t,n){var o="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]):o+=n+" "}),o}var Ea=function(e,t,n){var o=e.key+"-"+t.name;if((!1===n||!1===Ta&&void 0!==e.compat)&&void 0===e.registered[o]&&(e.registered[o]=t.styles),void 0===e.inserted[t.name]){var i="",r=t;do{var a=e.insert("."+o,r,e.sheet,!0);Ta||void 0===a||(i+=a),r=r.next}while(void 0!==r);if(!Ta&&0!==i.length)return i}},Da=function(e){for(var t,n=0,o=0,i=e.length;i>=4;++o,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Ma={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Oa=/[A-Z]|^ms/g,La=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ba=function(e){return 45===e.charCodeAt(1)},Ra=function(e){return null!=e&&"boolean"!=typeof e},Pa=pa(function(e){return Ba(e)?e:e.replace(Oa,"-$&").toLowerCase()}),ja=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(La,function(e,t,n){return za={name:t,styles:n,next:za},t})}return 1===Ma[e]||Ba(e)||"number"!=typeof t||0===t?t:t+"px"};function Fa(e,t,n,o){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return za={name:n.name,styles:n.styles,next:za},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)za={name:i.name,styles:i.styles,next:za},i=i.next;return n.styles+";"}return function(e,t,n){var o="";if(Array.isArray(n))for(var i=0;i<n.length;i++)o+=Fa(e,t,n[i],!1);else for(var r in n){var a=n[r];if("object"!=typeof a)null!=t&&void 0!==t[a]?o+=r+"{"+t[a]+"}":Ra(a)&&(o+=Pa(r)+":"+ja(r,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=Fa(e,t,a,!1);switch(r){case"animation":case"animationName":o+=Pa(r)+":"+s+";";break;default:o+=r+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Ra(a[l])&&(o+=Pa(r)+":"+ja(r,a[l])+";")}return o}(e,t,n);case"function":if(void 0!==e){var r=za,a=n(e);return za=r,Fa(e,t,a,o)}}if(null==t)return n;var s=t[n];return void 0===s||o?n:s}var za,Ha=/label:\s*([^\s;\n{]+)\s*;/g,Ga=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var o=!0,i="";za=void 0;var r=e[0];null==r||void 0===r.raw?(o=!1,i+=Fa(n,t,r,!1)):i+=r[0];for(var a=1;a<e.length;a++)i+=Fa(n,t,e[a],46===i.charCodeAt(i.length-1)),o&&(i+=r[a]);Ha.lastIndex=0;for(var s,l="";null!==(s=Ha.exec(i));)l+="-"+s[1];return{name:Da(i)+l,styles:i,next:za}},Va=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ga(t)},Ua="undefined"!=typeof document,Wa=Object(fr.createContext)("undefined"!=typeof HTMLElement?Aa():null),Ja=Object(fr.createContext)({}),Za=(Wa.Provider,function(e){return Object(fr.forwardRef)(function(t,n){return Object(fr.createElement)(Wa.Consumer,null,function(o){return e(t,o,n)})})});if(!Ua){var Ya=function(e){function t(t,n,o){var i;return(i=e.call(this,t,n,o)||this).state={value:Aa()},i}return ya()(t,e),t.prototype.render=function(){return Object(fr.createElement)(Wa.Provider,this.state,this.props.children(this.state.value))},t}(fr.Component);Za=function(e){return function(t){return Object(fr.createElement)(Wa.Consumer,null,function(n){return null===n?Object(fr.createElement)(Ya,null,function(n){return e(t,n)}):e(t,n)})}}}Object.prototype.hasOwnProperty;var Qa=Za(function(e,t){var n=e.styles;if("function"==typeof n)return Object(fr.createElement)(Ja.Consumer,null,function(e){var o=Ga([n(e)]);return Object(fr.createElement)(Xa,{serialized:o,cache:t})});var o=Ga([n]);return Object(fr.createElement)(Xa,{serialized:o,cache:t})}),Xa=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}ya()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.sheet=new ma({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var e=document.querySelector("style[data-emotion-"+this.props.cache.key+'="'+this.props.serialized.name+'"]');null!==e&&this.sheet.tags.push(e),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},n.componentDidUpdate=function(e){e.serialized.name!==this.props.serialized.name&&this.insertStyles()},n.insertStyles=function(){if(void 0!==this.props.serialized.next&&Ea(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var e=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=e,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},n.componentWillUnmount=function(){this.sheet.flush()},n.render=function(){if(!Ua){for(var e=this.props.serialized,t=e.name,n=e.styles,o=e.next;void 0!==o;)t+=" "+o.name,n+=o.styles,o=o.next;var i,r=!0===this.props.cache.compat,a=this.props.cache.insert("",{name:t,styles:n},this.sheet,r);if(!r)return Object(fr.createElement)("style",((i={})["data-emotion-"+this.props.cache.key]=t,i.dangerouslySetInnerHTML={__html:a},i.nonce=this.props.cache.sheet.nonce,i))}return null},t}(fr.Component);Za(function(e,t){return Object(fr.createElement)(Ja.Consumer,null,function(n){var o,i="",r="",a=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=Ga(n,t.registered);if(Ua)Ea(t,a,!1);else{var s=Ea(t,a,!1);void 0!==s&&(i+=s)}return Ua||(r+=" "+a.name),t.key+"-"+a.name},s={css:a,cx:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return function(e,t,n){var o=[],i=Na(e,o,n);return o.length<2?n:i+t(o)}(t.registered,a,function e(t){for(var n=t.length,o=0,i="";o<n;o++){var r=t[o];if(null!=r){var a=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))a=e(r);else for(var s in a="",r)r[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=r}a&&(i&&(i+=" "),i+=a)}}return i}(n))},theme:n},l=e.children(s);return Ua||0===i.length?l:Object(fr.createElement)(fr.Fragment,null,Object(fr.createElement)("style",((o={})["data-emotion-"+t.key]=r.substring(1),o.dangerouslySetInnerHTML={__html:i},o.nonce=t.sheet.nonce,o)),l)})});var $a=fa,Ka=function(e){return"theme"!==e&&"innerRef"!==e},qa=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?$a:Ka};function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var ts="undefined"!=typeof document,ns=function e(t,n){var o,i,r;void 0!==n&&(o=n.label,r=n.target,i=t.__emotion_forwardProp&&n.shouldForwardProp?function(e){return t.__emotion_forwardProp(e)&&n.shouldForwardProp(e)}:n.shouldForwardProp);var a=t.__emotion_real===t,s=a&&t.__emotion_base||t;"function"!=typeof i&&a&&(i=t.__emotion_forwardProp);var l=i||qa(s),c=!l("as");return function(){var u=arguments,d=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&d.push("label:"+o+";"),null==u[0]||void 0===u[0].raw)d.push.apply(d,u);else{d.push(u[0][0]);for(var p=u.length,h=1;h<p;h++)d.push(u[h],u[0][h])}var f=Za(function(e,t,n){return Object(fr.createElement)(Ja.Consumer,null,function(o){var a=c&&e.as||s,u="",p=[],h=e;if(null==e.theme){for(var f in h={},e)h[f]=e[f];h.theme=o}"string"==typeof e.className?u=Na(t.registered,p,e.className):null!=e.className&&(u=e.className+" ");var g=Ga(d.concat(p),t.registered,h),y=Ea(t,g,"string"==typeof a);u+=t.key+"-"+g.name,void 0!==r&&(u+=" "+r);var m=c&&void 0===i?qa(a):l,v={};for(var b in e)c&&"as"===b||m(b)&&(v[b]=e[b]);v.className=u,v.ref=n||e.innerRef;var _=Object(fr.createElement)(a,v);if(!ts&&void 0!==y){for(var I,k=g.name,w=g.next;void 0!==w;)k+=" "+w.name,w=w.next;return Object(fr.createElement)(fr.Fragment,null,Object(fr.createElement)("style",((I={})["data-emotion-"+t.key]=k,I.dangerouslySetInnerHTML={__html:y},I.nonce=t.sheet.nonce,I)),_)}return _})});return f.displayName=void 0!==o?o:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=s,f.__emotion_styles=d,f.__emotion_forwardProp=i,Object.defineProperty(f,"toString",{value:function(){return"."+r}}),f.withComponent=function(t,o){return e(t,void 0!==o?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(n,!0).forEach(function(t){da()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n||{},{},o):n).apply(void 0,d)},f}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){ns[e]=ns(e)});var os,is=ns;!function(e){e.OrderedList="ordered",e.UnorderedList="unordered"}(os||(os={}));var rs,as=["decimal","lower-alpha","lower-roman"],ss=["disc","circle","square"];function ls(){var e=function(e,t){return t||(t=e.slice(0)),e.raw=t,e}(["\n    display: flex;\n    & svg {\n        align-self: center;\n    }\n"]);return ls=function(){return e},e}function cs(){var e=function(e,t){return t||(t=e.slice(0)),e.raw=t,e}(["\n    ::after {\n        content: '","';\n        white-space: pre;\n        display: none;\n        position: absolute;\n        z-index: 1000;\n        color: #fff;\n        text-align: center;\n        border-radius: 2px;\n        padding: 3px 11px;\n        font-size: 12px;\n        line-height: 21px;\n        background: rgba(0, 0, 0, 0.7);\n        pointer-events: none;\n        ",";\n        ","\n    }\n\n    ::before {\n        content: '';\n        display: none;\n        position: absolute;\n        z-index: 2;\n        border-top: 8px solid rgba(0, 0, 0, 0.7);\n        border-left: 8px solid transparent;\n        width: 0;\n        height: 0;\n        ","\n        ","\n    }\n\n    &:hover {\n        cursor: ",";\n\n        ::after,\n        ::before {\n            display: ",";\n        }\n    }\n"]);return cs=function(){return e},e}function us(){var e=ys(["\n    position: relative;\n"]);return us=function(){return e},e}function ds(){var e=ys(["\n    width: 1px;\n    color: #ebebeb;\n    margin: 5px 6px 0 6px;\n    height: 15px;\n    line-height: 15px;\n    opacity: 1;\n"]);return ds=function(){return e},e}function ps(){var e=ys(["\n    color: #409fff;\n    cursor: default;\n    /* stylelint-disable-next-line no-descending-specificity */\n    path {\n        fill: #409fff;\n    }\n"]);return ps=function(){return e},e}function hs(){var e=ys(["\n    margin: 0 0 0 8px;\n    cursor: pointer;\n    width: 28px;\n    height: 27px;\n    line-height: 26px;\n    :hover {\n        color: #409fff;\n        path {\n            fill: #409fff;\n        }\n    }\n"]);return hs=function(){return e},e}function fs(){var e=ys(["\n    display: flex;\n    justify-content: space-between;\n    position: absolute;\n    margin: 0.3em 0;\n    padding: 8px 12px 8px 7px;\n    font-size: 14px;\n    font-weight: 400;\n    color: rgba(102, 102, 102, 1);\n    background-color: rgba(255, 255, 255, 1);\n    list-style: none;\n    border: none;\n    box-shadow: 0 3px 8px 0 rgba(0, 0, 0, 0.1);\n    border-radius: 2px;\n    z-index: 1;\n    box-sizing: border-box;\n    transition: left 0.5s, right 0.5s;\n"]);return fs=function(){return e},e}function gs(){var e=ys(["\n                ."," ."," {\n                    display: none;\n                }\n            "]);return gs=function(){return e},e}function ys(e,t){return t||(t=e.slice(0)),e.raw=t,e}!function(e){e.metaKey="Meta",e.shiftKey="Shift",e.ctrlKey="Control",e.altKey="Alt"}(rs||(rs={})),is.span(ls()),fr.Component,fr.memo(function(){return fr.createElement(Qa,{styles:Va(gs(),"bulb-drag-shadow","hovering-menu-list")})}),is.ul(fs());var ms=is.li(hs()),vs=(is(ms)(ps()),is.div(ds()),is.div(us()));function bs(){var e=xs(["\n    right: -5px;\n    bottom: 0;\n    cursor: se-resize;\n"]);return bs=function(){return e},e}function _s(){var e=xs(["\n    left: -5px;\n    bottom: 0;\n    cursor: sw-resize;\n"]);return _s=function(){return e},e}function Is(){var e=xs(["\n    top: -5px;\n    right: -5px;\n    cursor: ne-resize;\n"]);return Is=function(){return e},e}function ks(){var e=xs(["\n    top: -5px;\n    left: -5px;\n    cursor: nw-resize;\n"]);return ks=function(){return e},e}function ws(){var e=xs(["\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    border-radius: 2px;\n    background-color: #4285f4;\n    outline: 1px solid #fff;\n"]);return ws=function(){return e},e}function Cs(){var e=xs(["\n    position: relative;\n    width: ",";\n    max-height: ",";\n    overflow-y: hidden;\n    overflow-x: hidden;\n    height: auto;\n"]);return Cs=function(){return e},e}function Ss(){var e=xs(["\n    position: relative;\n    display: inline-block;\n"]);return Ss=function(){return e},e}function xs(e,t){return t||(t=e.slice(0)),e.raw=t,e}is(vs)(cs(),function(e){return e.popLabel},function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom";switch(e){case"bottom":return"\n            top: calc(100% + 6px);\n        ";case"left":return"\n            right: calc(100% + 6px);\n            ";case"right":return"\n            left: calc(100% + 6px);\n        ";case"top":return"\n            bottom: calc(100% + 6px);\n            "}}(e.position)},function(e){return e.popStyle},function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom";switch(e){case"bottom":return"\n            bottom: -10px;\n            left: 50%;\n            transform: translateX(-50%) rotate(-45deg);\n        ";case"left":return"\n            left: 0;\n            transform: translateX(-10px) rotate(45deg);\n            ";case"right":return"\n            right: 0;\n            transform: translateX(10px) rotate(-135deg);\n        ";case"top":return"\n            top: -10px;\n            left: 50%;\n            transform: translateX(-50%) rotate(135deg);\n            "}}(e.position)},function(e){return e.popStyle},function(e){return!e.disabled&&"pointer"},function(e){return e.popLabel?"block":"none"}),fr.Component;var As=function(e){return e?"number"==typeof e?e+"px":e:null},Ts=(is.div(Ss()),is.div(Cs(),function(e){var t=e.w;return As(t)},function(e){var t=e.maxH;return As(t)}),is.div(ws()));function Ns(){var e=function(e,t){return t||(t=e.slice(0)),e.raw=t,e}(["\n    opacity: ",";\n    transition: opacity ","s;\n"]);return Ns=function(){return e},e}function Es(){var e=Ms(["\n    width: ","px;\n    position: absolute;\n    justify-content: flex-start;\n    z-index: 1001;\n    right: 9px;\n    top: 35px;\n    border: 1px solid rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 16px rgba(90, 109, 122, 0.4);\n    flex-wrap: wrap;\n\n    &::before {\n        content: '';\n        width: 0;\n        height: 0;\n        position: absolute;\n        top: -12px;\n        right: ","px;\n        transition: right 0.5s;\n        border-bottom: 7px solid #fff;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n        border-top: 5px solid transparent;\n    }\n"]);return Es=function(){return e},e}function Ds(){var e=Ms(["\n    padding: 10px;\n    background: white;\n    display: flex;\n    justify-content: center;\n    align-content: center;\n"]);return Ds=function(){return e},e}function Ms(e,t){return t||(t=e.slice(0)),e.raw=t,e}is(Ts)(ks()),is(Ts)(Is()),is(Ts)(_s()),is(Ts)(bs()),is.div(Ns(),function(e){var t=e.visible;return t?1:0},function(e){var t=e.time;return t});var Os=is("div")(Ds()),Ls=is(Os)(Es(),function(e){return e.fixedWidth},function(e){return e.arrawRight||17});function Bs(){var e=Ps(["\n    padding: 4px;\n    position: relative;\n    border-radius: 5px;\n    width: ","px;\n    top: 0;\n"]);return Bs=function(){return e},e}function Rs(){var e=Ps(["\n    position: absolute;\n    border-radius: 2px;\n    display: ",";\n    top: ","px;\n    left: ","px;\n    width: ",";\n    height: ",";\n    transition: left 0.5s, top 0.5s;\n"]);return Rs=function(){return e},e}function Ps(e,t){return t||(t=e.slice(0)),e.raw=t,e}function js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fr.Component,is.div(Rs(),function(e){var t=e.visible;return t?"block":"none"},function(e){var t=e.top;return t},function(e){var t=e.left;return t},function(e){var t=e.visible;return!t&&0},function(e){var t=e.visible;return!t&&0}),is(Ls)(Bs(),function(e){var t=e.width;return t});var zs,Hs,Gs=/\s\s*/;function Vs(e){return"number"==typeof e&&!isNaN(e)}function Us(e,t,n){t.trim().split(Gs).forEach(function(t){e.addEventListener(t,n)})}function Ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.trim().split(Gs).forEach(function(t){e.removeEventListener(t,n)})}function Js(e,t){var n=e.pageX,o=e.pageY,i={endX:n,endY:o};return t?i:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?js(Object(n),!0).forEach(function(t){Fs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({startX:n,startY:o},i)}!function(e){e.POINTERDOWN="pointerdown",e.POINTERMOVE="pointermove",e.POINTERUP="pointerup pointercancel",e.MOUSEDOWN="mousedown"}(zs||(zs={})),function(e){e.Move="move",e.TopLeft="topLeft",e.Top="top",e.TopRight="topRight",e.Left="left",e.Right="right",e.BottomLeft="bottomLeft",e.Bottom="bottom",e.BottomRight="bottomRight"}(Hs||(Hs={}));var Zs,Ys=n(355),Qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.addListener=function(t,n){return e.prototype.addListener.call(this,"web"+t,n),this},t.prototype.removeListener=function(t,n){return e.prototype.removeListener.call(this,"web"+t,n),this},t.prototype.removeAllListeners=function(t){return e.prototype.removeAllListeners.call(this,"web"+t),this},t.prototype.on=function(t,n){return e.prototype.on.call(this,"web"+t,n),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,"web"+t,n),this},t.prototype.emit=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.prototype.emit.apply(this,["web"+t].concat(o))},t}(Ys.EventEmitter);!function(e){e.ImageLoaded="image-loaded",e.RequestLocalSrc="request-local-url"}(Zs||(Zs={}));var Xs=new Qs;function $s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(n),!0).forEach(function(t){qs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var el={cropBoxLeft:0,cropBoxTop:0,minLeft:0,minTop:0};function tl(){var e=ml(["\n    bottom: -3px;\n    cursor: nwse-resize;\n    opacity: 1;\n    right: -3px;\n"]);return tl=function(){return e},e}function nl(){var e=ml(["\n    bottom: -3px;\n    cursor: s-resize;\n    left: 50%;\n    margin-left: -3px;\n"]);return nl=function(){return e},e}function ol(){var e=ml(["\n    bottom: -3px;\n    cursor: ns-resize;\n    left: -3px;\n"]);return ol=function(){return e},e}function il(){var e=ml(["\n    cursor: ew-resize;\n    margin-top: -3px;\n    right: -3px;\n    top: 50%;\n"]);return il=function(){return e},e}function rl(){var e=ml(["\n    cursor: ew-resize;\n    left: -3px;\n    margin-top: -3px;\n    top: 50%;\n"]);return rl=function(){return e},e}function al(){var e=ml(["\n    cursor: nesw-resize;\n    right: -3px;\n    top: -3px;\n"]);return al=function(){return e},e}function sl(){var e=ml(["\n    cursor: ns-resize;\n    left: 50%;\n    margin-left: -3px;\n    top: -3px;\n"]);return sl=function(){return e},e}function ll(){var e=ml(["\n    cursor: nwse-resize;\n    left: -3px;\n    top: -3px;\n"]);return ll=function(){return e},e}function cl(){var e=ml(["\n    position: absolute;\n    background: #409fff;\n    top: ",";\n    right: ",";\n    bottom: ",";\n    left: ",";\n    width: ",";\n    height: ",";\n"]);return cl=function(){return e},e}function ul(){var e=ml(["\n    background-color: #fff;\n    left: 0;\n    top: 0;\n    height: 100%;\n    opacity: 0.1;\n    position: absolute;\n    width: 100%;\n"]);return ul=function(){return e},e}function dl(){var e=ml(["\n    display: block;\n    opacity: 0.75;\n    position: absolute;\n    width: 20px;\n    height: 20px;\n"]);return dl=function(){return e},e}function pl(){var e=ml(["\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: 0;\n    cursor: move;\n    width: ",";\n    height: ",";\n    outline: 2px solid #409fff;\n    ",";\n"]);return pl=function(){return e},e}function hl(){var e=ml(["\n    display: block;\n    max-height: none !important;\n    max-width: none !important;\n    min-height: 0 !important;\n    min-width: 0 !important;\n    width: ",";\n    height: ",";\n    ",";\n"]);return hl=function(){return e},e}function fl(){var e=ml(["\n    display: block;\n    height: 100%;\n    overflow: hidden;\n    width: 100%;\n"]);return fl=function(){return e},e}function gl(){var e=ml(["\n    opacity: 0.7;\n"]);return gl=function(){return e},e}function yl(){var e=ml(["\n    touch-action: none;\n    user-select: none;\n    font-size: 0;\n    line-height: 0;\n    position: relative;\n    width: ",";\n    height: ",";\n    margin-left: ",";\n"]);return yl=function(){return e},e}function ml(e,t){return t||(t=e.slice(0)),e.raw=t,e}new(function(){function e(){var e=this;this.cropStart=function(t){var n=t.buttons,o=t.button;if("mousedown"!==t.type&&("pointerdown"!==t.type||"mouse"!==t.pointerType)||!(Vs(n)&&1!==n||Vs(o)&&0!==o||t.ctrlKey)){e.pointers[t.pointerId||0]=Js(t);var i=t.target.getAttribute("data-type")||t.target.parentElement.getAttribute("data-type");Object.values(Hs).includes(i)&&(t.preventDefault(),e.action=i)}},this.cropMove=function(t){if(e.action){t.preventDefault();var n=e.pointers[t.pointerId||0];e.pointers[t.pointerId||0]=Ks({},n,{},Js(t,!0)),e.handleAction()}},this.cropEnd=function(t){delete e.pointers[t.pointerId||0],e.action&&(t.preventDefault(),Object.keys(e.pointers).length||(e.action=""),e.cropEnded=!0)},this.cropImage=function(){var t=e.options.containerData,n=e.cropBoxData;t.width===n.width&&t.height===n.height||!e.cropEnded?e.options.cropImage(null):e.options.cropImage(n)},this.handleAction=function(){var t=e.options.containerData,n=e.cropBoxData,o=n.left,i=n.top,r=n.width,a=n.height,s=n.minWidth,l=(n.minHeight,o+r),c=i+a,u=0,d=0,p=t.width,h=t.height;u=n.minLeft,d=n.minTop;var f=e.pointers[Object.keys(e.pointers)[0]],g={x:f.endX-f.startX,y:f.endY-f.startY},y=function(e){switch(e){case Hs.Right:l+g.x>p&&(g.x=p-l);break;case Hs.Left:o+g.x<u&&(g.x=u-o);break;case Hs.Top:i+g.y<d&&(g.y=d-i);break;case Hs.Bottom:c+g.y>h&&(g.y=h-c)}},m=!0,v=e.action;switch(v){case Hs.Move:y(Hs.Right),y(Hs.Top),y(Hs.Left),y(Hs.Bottom),o+=g.x,i+=g.y;break;case Hs.Right:if(g.x>=0&&l>=p){m=!1;break}y(Hs.Right),(r+=g.x)<0&&(v=Hs.Left,o-=r=-r);break;case Hs.Top:if(g.y<=0&&i<=d){m=!1;break}y(Hs.Top),a-=g.y,i+=g.y,a<0&&(v=Hs.Bottom,i-=a=-a);break;case Hs.Left:if(g.x<=0&&o<=u){m=!1;break}y(Hs.Left),r-=g.x,o+=g.x,r<0&&(v=Hs.Right,o-=r=-r);break;case Hs.Bottom:if(g.y>=0&&c>=h){m=!1;break}y(Hs.Bottom),(a+=g.y)<0&&(v=Hs.Top,i-=a=-a);break;case Hs.TopRight:y(Hs.Top),y(Hs.Right),g.x>=0?l<p?r+=g.x:g.y<=0&&i<=d&&(m=!1):r+=g.x,g.y<=0?i>d&&(a-=g.y,i+=g.y):(a-=g.y,i+=g.y),r<0&&a<0?(v=Hs.BottomLeft,i-=a=-a,o-=r=-r):r<0?(v=Hs.TopLeft,o-=r=-r):a<0&&(v=Hs.BottomRight,i-=a=-a);break;case Hs.TopLeft:y(Hs.Top),y(Hs.Left),g.x<=0?o>u?(r-=g.x,o+=g.x):g.y<=0&&i<=d&&(m=!1):(r-=g.x,o+=g.x),g.y<=0?i>d&&(a-=g.y,i+=g.y):(a-=g.y,i+=g.y),r<0&&a<0?(v=Hs.BottomRight,i-=a=-a,o-=r=-r):r<0?(v=Hs.TopRight,o-=r=-r):a<0&&(v=Hs.BottomLeft,i-=a=-a);break;case Hs.BottomLeft:y(Hs.Bottom),y(Hs.Left),g.x<=0?o>u?(r-=g.x,o+=g.x):g.y>=0&&c>=h&&(m=!1):(r-=g.x,o+=g.x),g.y>=0?c<h&&(a+=g.y):a+=g.y,r<0&&a<0?(v=Hs.TopRight,i-=a=-a,o-=r=-r):r<0?(v=Hs.BottomRight,o-=r=-r):a<0&&(v=Hs.TopRight,i-=a=-a);break;case Hs.BottomRight:y(Hs.Bottom),y(Hs.Right),g.x>=0?l<p?r+=g.x:g.y>=0&&c>=h&&(m=!1):r+=g.x,g.y>=0?c<h&&(a+=g.y):a+=g.y,r<0&&a<0?(v=Hs.TopRight,i-=a=-a,o-=r=-r):r<0?(v=Hs.BottomLeft,o-=r=-r):a<0&&(v=Hs.TopRight,i-=a=-a)}m&&(n.width=r<s?s:r,n.height=a,n.top=i,n.left=o,e.action=v,Xs.emit("change_cropper_style",{cropBoxWidth:n.width,cropBoxHeight:n.height,cropBoxTranslateY:n.top,cropBoxTranslateX:n.left})),Object.keys(e.pointers).forEach(function(t){var n=e.pointers[t];n.startX=n.endX,n.startY=n.endY})},this.cropEnded=!1,this.pointers={}}return e.prototype.addListeners=function(e,t){this.element=e,this.options=Ks({},el,{},t),this.cropBoxData=t.cropBoxData,Us(this.element,zs.POINTERDOWN,this.cropStart),Us(this.element.ownerDocument,zs.POINTERMOVE,this.cropMove),Us(this.element.ownerDocument,zs.POINTERUP,this.cropEnd),Us(this.element.ownerDocument,zs.MOUSEDOWN,this.cropImage)},e.prototype.removeListeners=function(){Ws(this.element,zs.POINTERDOWN,this.cropStart),Ws(this.element.ownerDocument,zs.POINTERMOVE,this.cropMove),Ws(this.element.ownerDocument,zs.POINTERUP,this.cropEnd),Ws(this.element.ownerDocument,zs.MOUSEDOWN,this.cropImage)},e}()),gr.a.Component,is.div(yl(),function(e){return e.width+"px"},function(e){return e.height+"px"},function(e){return e.offsetLeft+"px"}),is.div(gl()),is.span(fl()),is.img(hl(),function(e){return e.width+"px !important"},function(e){return e.height+"px !important"},function(e){return e.transform}),is.div(pl(),function(e){return e.width+"px"},function(e){return e.height+"px"},function(e){return e.transform});var vl,bl=is.span(dl()),_l=(is.span(ul()),is.div(cl(),function(e){return e.top+"px"},function(e){return e.right+"px"},function(e){return e.bottom+"px"},function(e){return e.left+"px"},function(e){return e.width+"px"},function(e){return e.height+"px"}),is(bl)(ll()),is(bl)(sl()),is(bl)(al()),is(bl)(rl()),is(bl)(il()),is(bl)(ol()),is(bl)(nl()),is(bl)(tl()),function(e){var t=(e+"").split(".")[1];return t?t.length:0}),Il=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"string"==typeof t&&(t=parseFloat(t));var o=_l(t);if(o&&o<=n)return t;var i=Math.pow(10,n);return e(t*i)/i}};function kl(e,t,n,o,i,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}Il(Math.round),Il(Math.ceil),Il(Math.floor),function(e){e.ShowSideCatalog="show-side-catalog",e.ContentChange="content-change",e.TitleChange="title-change",e.Translate="translate",e.Comment="comment",e.Ready="ready",e.InsertAttachment="insert-attachment",e.InsertImage="insert-image",e.InsertScreenshot="insert-screenshot",e.PreviewImage="preview-image",e.SaveImage="save-image",e.DownloadOriginFile="download-file",e.EditorClick="editor-click",e.ImageLoaded="image-loaded",e.ChangeBGImageFailed="background-failed-update",e.ChangeBGImage="background-changed",e.OpenLink="open-link",e.SetClipboard="clipboard-set",e.WordCount="show-note-char-num",e.FindText="find-text",e.ImageOCR="image-orc",e.GetVersion="get-version",e.IsVIPUser="is-vip-user",e.RotateImage="rotate-image",e.ChangeZoomByEditor="change-zoom-by-editor",e.GetClipboardData="get-clipboard-data",e.OnDrop="on-drop",e.GetTemplateEntity="get-template-entity",e.ScrollInContentLoading="scroll-in-content-loading",e.DataCommandSuccess="data-command-success",e.CollabSessionChange="collab-session-change",e.SessionBuilt="session-built",e.SessionClosed="session-closed",e.SessionInitialized="session-initialized",e.UserActionFailed="user-action-Failed",e.StartSync="start-sync",e.ShowShareNote="show-share-note",e.Export2PDF="export-to-pdf",e.Export2Word="export-to-word",e.ExitFullScreen="exit-full-screen",e.ExitPresentation="exit-presentation",e.CloneAttachmentAsync="clone-attachment-async",e.SaveImageToNote="save-image-to-note",e.IsImageSavedToNote="is-image-saved-to-note",e.ShowInsertLinkDialogAsync="show-insert-link-dialog-async",e.GetCefFocus="get-cef-focus",e.ReloadEditor="reload-editor",e.SnapScreen="snap-screen",e.TrackBehavior="track-behavior",e.NoteEditorActionCollection="note-editor-action-collection",e.SaveAsAttachment="save-as-attachment",e.IsNoteLinkInClipboard="is-note-link-in-clipboard",e.PasteNoteLink="paste-note-link",e.PasteAsText="paste-as-text",e.Paste="paste",e.ClipboardAvailable="clipboard-available",e.Log="log",e.RequestRotateImg="request-rotate-img"}(vl||(vl={}));var wl,Cl=[ti.Copy,ti.Cut,ti.Paste,ti.DoubleClick,ti.DragStart,ti.Drop],Sl=Object.values(vl);new(function(e){function t(){var t,n=this;return n=e.call(this)||this,t=n,n.recordBehavior=function(e,n){t.record(t.createBehavior(e,n))},n.getTargets=function(e){if(e){if(e.isCollapsed())return[e.getStartNode().parent.name];var t=[];return e.forEachBlock(function(e){t.push(e.name)}),t}},n.initListeners(),n}return s(t,e),t.prototype.createBehavior=function(e,t){return{time:Date.now(),action:e,payload:t}},t.prototype.send=function(){return(e=function(){return l(this,function(e){return[2]})},function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(e){kl(r,o,i,a,s,"next",e)}function s(e){kl(r,o,i,a,s,"throw",e)}a(void 0)})})();var e},t.prototype.initListeners=function(){var e=this;ir.on(h.SELECT,function(){var t=ir.getBulbRange();t&&t.isCollapsed()||e.recordBehavior(h.SELECT,{targets:e.getTargets(t)})}),Cl.forEach(function(t){return ir.on(t,function(t){var n={targets:e.getTargets(t.getRange())};e.recordBehavior(t.type,n)})}),Sl.filter(function(e){return e!==vl.TrackBehavior}).forEach(function(t){return Xs.on(t,function(){e.recordBehavior(t)})})},t}(function(){var e=this;this.storage=[],this.record=function(t){Xs.emit(vl.TrackBehavior,t),e.storage.push(t)},this.getLatest=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=e.storage;return n.slice(n.length-t,n.length)},this.clear=function(){e.storage.length=0}})),function(e){e.SelectAll="右键全选",e.WordCount="右键统计字数",e.Float="浮动",e.SaveAsImage="图片保存",e.MoveBlockUp="段落上移",e.MoveBlockDown="段落下移",e.ToolbarClick="工具栏点击"}(wl||(wl={}));var xl,Al={FangSong_GB2312:"FangSong_GB2312, FangSong, STFangsong",KaiTi_GB2312:"KaiTi_GB2312, KaiTi, STKaiti",SimHei:"SimHei, STHeiti",SimSun:"SimSun, STSong",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana",NSimSun:"NSimSun"};!function(e){e.Italic="italic",e.Bold="bold",e.Underline="underline",e.Delete="delete",e.FontSize="fontSize",e.FontFamily="fontFamily",e.Color="color",e.BackgroundColor="backgroundColor"}(xl||(xl={})),Object.values(xl);var Tl=function(e){return"number"==typeof e?e:parseFloat(e)},Nl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=!t;return e.reduce(function(e,t){switch(t.type){case xl.Bold:e.fontWeight="bold";break;case xl.Italic:e.fontStyle="italic";break;case xl.Delete:n||(e.textDecoration="line-through");break;case xl.FontFamily:e.fontFamily=Al[t.value]||t.value;break;default:if(t.type===xl.BackgroundColor&&n)break;e[t.type]=t.value}return e},{})},El={fontFamily:"-apple-system, BlinkMacSystemFont, PingFang SC, Helvetica, Tahoma, Arial, Hiragino Sans GB, Microsoft YaHei, 微软雅黑, SimSun, 宋体, Heiti, 黑体, sans-serif",fontSize:14,color:"#393939",fontWeight:"normal",fontStyle:"normal",textDecoration:"none"},Dl=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ml=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ol=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Ll=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rl="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pl="["+Rl+"]",jl="\\d+",Fl="[a-z\\xdf-\\xf6\\xf8-\\xff]",zl="[^\\ud800-\\udfff"+Rl+jl+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Hl="(?:\\ud83c[\\udde6-\\uddff]){2}",Gl="[\\ud800-\\udbff][\\udc00-\\udfff]",Vl="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ul="(?:"+Fl+"|"+zl+")",Wl="(?:"+Vl+"|"+zl+")",Jl="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Zl="[\\ufe0e\\ufe0f]?"+Jl+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Hl,Gl].join("|")+")[\\ufe0e\\ufe0f]?"+Jl+")*",Yl="(?:"+["[\\u2700-\\u27bf]",Hl,Gl].join("|")+")"+Zl,Ql=RegExp([Vl+"?"+Fl+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Pl,Vl,"$"].join("|")+")",Wl+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Pl,Vl+Ul,"$"].join("|")+")",Vl+"?"+Ul+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Vl+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jl,Yl].join("|"),"g"),Xl=function(e,t,n){return e=Io(e),void 0===(t=n?void 0:t)?function(e){return Bl.test(e)}(e)?function(e){return e.match(Ql)||[]}(e):function(e){return e.match(Ll)||[]}(e):e.match(t)||[]},$l=RegExp("['’]","g"),Kl=function(e){return function(t){return function(e,t,n,o){var i=-1,r=null==e?0:e.length;for(o&&r&&(n=e[++i]);++i<r;)n=t(n,e[i],i,e);return n}(Xl(function(e){return(e=Io(e))&&e.replace(Ml,Dl).replace(Ol,"")}(t).replace($l,"")),e,"")}},ql=Kl(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nc,oc=function(e){var t=e.marks,n=e.children,o=e.text,i=void 0===o?" ":o,r=e.defaultStyle,a=void 0===r?{}:r,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){tc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{},Nl(t,i));!function(e){e.paddingTop="1px",e.paddingBottom="1px"}(s),function(e){return e.find(function(e){return e.type===xl.Underline})}(t)&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:El.color,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:El.fontSize,o=Tl(e.fontSize||n),i=1*o/Tl(El.fontSize),r=e.color||t;e.borderBottom=i+"px solid "+r}(s);var l=t.map(function(e){return ql(e.type)}).join(" ");return fr.createElement("span",{style:s,className:""+l},n)};function ic(){var e=lc(["\n    margin-left: ",";\n"]);return ic=function(){return e},e}function rc(){var e=lc(["\n    list-style: inside;\n    white-space: inherit;\n    list-style-type: ",";\n    margin: 0;\n    padding: 0;\n"]);return rc=function(){return e},e}function ac(){var e=lc(["\n    list-style: inside;\n    white-space: inherit;\n    list-style-type: ",";\n    margin: 0;\n    padding: 0;\n"]);return ac=function(){return e},e}function sc(){var e=lc(["\n    text-align: left;\n    white-space: inherit;\n    line-height: 1.5;\n    word-break: break-word;\n    font-size: 14px;\n    margin-left: ",";\n"]);return sc=function(){return e},e}function lc(e,t){return t||(t=e.slice(0)),e.raw=t,e}function cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(){function e(){}return e.set=function(e,t){var n;null===(n=this.store)||void 0===n||n.setItem(e,t)},e.get=function(e){var t;return null===(t=this.store)||void 0===t?void 0:t.getItem(e)},e}()).store=localStorage,function(e){e[e.GlobalMessage=0]="GlobalMessage",e[e.WordCount=1]="WordCount",e[e.SelectAll=2]="SelectAll",e[e.MoveBlock=3]="MoveBlock",e[e.InsertTime=4]="InsertTime",e[e.DeleteSelection=5]="DeleteSelection",e[e.Underline=6]="Underline",e[e.Strike=7]="Strike",e[e.Italic=8]="Italic",e[e.FontSize=9]="FontSize",e[e.FontFamily=10]="FontFamily",e[e.FontColor=11]="FontColor",e[e.Bold=12]="Bold",e[e.BackColor=13]="BackColor",e[e.Presentation=14]="Presentation",e[e.Pagination=15]="Pagination",e[e.RemoveFormat=16]="RemoveFormat",e[e.FormatPainter=17]="FormatPainter",e[e.FindText=18]="FindText",e[e.FileVersion=19]="FileVersion",e[e.ErrorRecord=20]="ErrorRecord",e[e.Undo=21]="Undo",e[e.Redo=22]="Redo",e[e.Collaboration=23]="Collaboration",e[e.PasteAsPlain=24]="PasteAsPlain",e[e.Paste=25]="Paste",e[e.Drop=26]="Drop",e[e.Cut=27]="Cut",e[e.Copy=28]="Copy",e[e.TextIndent=29]="TextIndent",e[e.RenderBlockStyle=30]="RenderBlockStyle",e[e.LineHeight=31]="LineHeight",e[e.IncreaseIndent=32]="IncreaseIndent",e[e.DecreaseIndent=33]="DecreaseIndent",e[e.Align=34]="Align",e[e.FloatBlockArrowMove=35]="FloatBlockArrowMove",e[e.BackgroundImage=36]="BackgroundImage",e[e.IndentSlot=37]="IndentSlot",e[e.BlockSlot=38]="BlockSlot",e[e.Comment=39]="Comment",e[e.Translate=40]="Translate",e[e.SideCatalog=41]="SideCatalog",e[e.Title=42]="Title",e[e.Compare=43]="Compare",e[e.Paragraph=44]="Paragraph",e[e.Heading=45]="Heading",e[e.Todo=46]="Todo",e[e.Quote=47]="Quote",e[e.List=48]="List",e[e.Unknown=49]="Unknown",e[e.Image=50]="Image",e[e.Attachment=51]="Attachment",e[e.Catalog=52]="Catalog",e[e.HR=53]="HR",e[e.Link=54]="Link",e[e.Code=55]="Code",e[e.Table=56]="Table",e[e.Handwriting=57]="Handwriting",e[e.Layout=58]="Layout"}(nc||(nc={}));var dc=[xl.Delete,xl.Underline,xl.BackgroundColor],pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(e){var t=e.children,n=e.attributes,o=this.props.block,i=o.data,r=i.listLevel,a=i.listType,s=o.state.index||1,l=a===os.OrderedList?gc:fc,c=(a===os.OrderedList?as:ss)[(r-1)%3],u=o.getFirstText().getActiveMarksBetweenOffsets(0,0).filter(function(e){return!dc.includes(e.type)});return n.style=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach(function(t){uc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.style,{},Nl(u)),fr.createElement(l,{styleType:c,start:s},fr.createElement(hc,Object.assign({level:r},n),fr.createElement(yc,{listType:a},t)))},t.prototype.renderMark=function(e){var t=e.marks,n=e.children;return oc({marks:t,children:n,defaultStyle:El})},t}(ca);pc.blockName="list-item";var hc=is.li(sc(),function(e){return 28*(e.level-1)+"px"}),fc=is.ul(ac(),function(e){return e.styleType}),gc=is.ol(rc(),function(e){return e.styleType}),yc=is.span(ic(),function(e){return e.listType===os.UnorderedList?"-5px":"0px"}),mc=function(){function e(e,t){this.id=e,this.type=t,this.listItemIds=[]}return e.prototype.forEach=function(e){this.listItemIds.forEach(e)},e.prototype.addListItem=function(e){this.listItemIds.push(e)},e}();new(function(){function e(){}return e.prototype.setIndex=function(e){var t,n=this;this.indexCounters={};var o={};return null==e||null===(t=e.document)||void 0===t||t.deepForEach(function(e){if(e.isBlock()&&e.name===pc.blockName){var t=e,i=t.data,r=i.listLevel,a=i.listId,s=(i.listType,un(t.state));s.index=n.increaseIndexCounter(a,r),o[t.id]=s,n.indexCounters[a].fill(0,r)}}),Object.entries(o).reduce(function(e,t){var n=t[0],o=t[1];return e.setBlockProp(n,"state",o)},e)},e.prototype.cacheLists=function(e){var t,n=this;this.cachedLists={},null==e||null===(t=e.document)||void 0===t||t.deepForEach(function(e){if(e.isBlock()&&e.name===pc.blockName){var t=e;n.cacheListItem(t)}})},e.prototype.forEach=function(e,t){var n=this.cachedLists[e];n&&n.forEach(t)},e.prototype.getStyleType=function(e){var t=e.data,n=t.listType,o=t.listLevel;return(n===os.OrderedList?as:ss)[(o-1)%3]},e.prototype.reset=function(){this.indexCounters={},this.cachedLists={}},e.prototype.increaseIndexCounter=function(e,t){var n=this.indexCounters[e];return n||(n=new Array(9).fill(0),this.indexCounters[e]=n),++n[t-1]},e.prototype.cacheListItem=function(e){var t=e.data,n=t.listId,o=t.listType,i=this.cachedLists[n];i||(i=new mc(n,o),this.cachedLists[n]=i),i.addListItem(e.id)},e.prototype.predictListId=function(e,t){var n;if(!(isNaN(e)||e<2))return Object.entries(this.indexCounters).forEach(function(o){var i=o[0],r=o[1];r[t-1]===e-1&&(n=i)}),n},e.prototype.getListType=function(e){var t;return null===(t=this.cachedLists[e])||void 0===t?void 0:t.type},e}());var vc,bc,_c,Ic,kc,wc,Cc,Sc,xc=new(function(){function e(){var e=window.document.implementation;this.currentXML=e.createDocument("http://note.youdao.com",pr.note,null)}return e.prototype.isXML=function(e){var t;try{t=this.parseXML(e)}catch(e){return!1}if(!t)return!1;var n=this.getChildByTagName(t,pr.note);if(!n)return!1;var o=n.getAttribute("schema-version");return"http://note.youdao.com"===n.getAttribute("xmlns")&&null!=o},e.prototype.setXML=function(e){this.currentXML=e},e.prototype.getXML=function(){return this.currentXML},e.prototype.setBulbDocument=function(e){this.bulbDocument=e},e.prototype.getBulbDocument=function(){return this.bulbDocument},e.prototype.setLists=function(e){var t=xc.getChildren(e,function(e){return e.nodeName===pr.list})||[];this.lists=t.map(function(e){var t=e.getAttribute(pr.id),n=e.getAttribute(pr.listType);return new mc(t,n===os.OrderedList?os.OrderedList:os.UnorderedList)})},e.prototype.getLists=function(){return this.lists},e.prototype.appendElToHeader=function(e){if(this.currentXML){var t=this.currentXML.documentElement;this.getChildByTagName(t,pr.head).appendChild(e)}},e.prototype.createElement=function(e){if(this.currentXML)return this.currentXML.createElement(e)},e.prototype.createTextNode=function(e){if(this.currentXML)return this.currentXML.createTextNode(e)},e.prototype.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.createElement(e);return n.appendChild(this.createTextNode(t.toString())),n},e.prototype.getChildByTagName=function(e,t){return this.filterChildren(e,function(e){return e.nodeName===t})},e.prototype.getChildTextByTagName=function(e,t){var n=this.getChildByTagName(e,t);return this.getTextContent(n)},e.prototype.getChildren=function(e,t){if(!e)return[];for(var n=e.childNodes[0],o=[];n;)t&&!t(n)||o.push(n),n=n.nextSibling;return o},e.prototype.getElementChildren=function(e){return this.getChildren(e,function(e){return 1===e.nodeType})},e.prototype.getTextContent=function(e){return e?e.textContent:""},e.prototype.filterChildren=function(e,t){if(e)for(var n=e.childNodes[0];n;){if(!t||t(n))return n;n=n.nextSibling}},e.prototype.append=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n.forEach(function(t){return e.appendChild(t)})},e.prototype.parseXML=function(e){try{if(window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");if(window.ActiveXObject){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}}catch(e){console.error("parse xml error")}},e.prototype.stringify=function(e){var t=new XMLSerializer,n="";try{n=t.serializeToString(e)}catch(e){return n}return n.startsWith("<?xml")||(n='<?xml version="1.0"?>'+n),n},e.prototype.hasListInHeader=function(e){if(!this.currentXML)return!1;var t=this.currentXML.documentElement,n=this.getChildByTagName(t,pr.head);return this.filterChildren(n,function(t){return t.nodeName===pr.list&&t.getAttribute(pr.id)===e})},e}());!function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward"}(vc||(vc={})),function(e){e[e.GlobalMessage=0]="GlobalMessage",e[e.WordCount=1]="WordCount",e[e.SelectAll=2]="SelectAll",e[e.MoveBlock=3]="MoveBlock",e[e.InsertTime=4]="InsertTime",e[e.DeleteSelection=5]="DeleteSelection",e[e.Underline=6]="Underline",e[e.Strike=7]="Strike",e[e.Italic=8]="Italic",e[e.FontSize=9]="FontSize",e[e.FontFamily=10]="FontFamily",e[e.FontColor=11]="FontColor",e[e.Bold=12]="Bold",e[e.BackColor=13]="BackColor",e[e.Presentation=14]="Presentation",e[e.Pagination=15]="Pagination",e[e.RemoveFormat=16]="RemoveFormat",e[e.FormatPainter=17]="FormatPainter",e[e.FindText=18]="FindText",e[e.FileVersion=19]="FileVersion",e[e.ErrorRecord=20]="ErrorRecord",e[e.Undo=21]="Undo",e[e.Redo=22]="Redo",e[e.Collaboration=23]="Collaboration",e[e.PasteAsPlain=24]="PasteAsPlain",e[e.Paste=25]="Paste",e[e.Drop=26]="Drop",e[e.Cut=27]="Cut",e[e.Copy=28]="Copy",e[e.TextIndent=29]="TextIndent",e[e.RenderBlockStyle=30]="RenderBlockStyle",e[e.LineHeight=31]="LineHeight",e[e.IncreaseIndent=32]="IncreaseIndent",e[e.DecreaseIndent=33]="DecreaseIndent",e[e.Align=34]="Align",e[e.BackgroundImage=35]="BackgroundImage",e[e.Paragraph=36]="Paragraph",e[e.Heading=37]="Heading",e[e.Todo=38]="Todo",e[e.Quote=39]="Quote",e[e.List=40]="List",e[e.Unknown=41]="Unknown",e[e.Image=42]="Image",e[e.Attachment=43]="Attachment",e[e.Catalog=44]="Catalog",e[e.HR=45]="HR",e[e.Link=46]="Link",e[e.Code=47]="Code",e[e.Table=48]="Table",e[e.Handwriting=49]="Handwriting",e[e.Layout=50]="Layout"}(bc||(bc={})),function(e){e.Block="block",e.RichText="richText",e.BlockStyle="blockStyle",e.CommandHistory="commandHistory",e.Formats="formats",e.Clipboard="clipboard",e.DEFAULT="default"}(_c||(_c={})),function(e){e.Block="Block",e.Indent="Indent"}(Ic||(Ic={})),function(e){e.Splitter="ToolbarSplitter",e.Slot="ToolbarSlot",e.Attachment="ToolbarAttachment",e.Catalog="ToolbarCatalogue",e.Code="ToolbarCode",e.CodeTheme="ToolbarCodeTheme",e.CodeLanguage="ToolbarCodeLanguage",e.Heading="ToolbarHeading",e.Hr="ToolbarHr",e.Image="ToolbarImg",e.Link="ToolbarLink",e.OrderedList="ToolbarOrderedList",e.UnorderedList="ToolbarUnorderedList",e.Quote="ToolbarQuote",e.Table="ToolbarTable",e.TableOperate="ToolbarTableOperate",e.TableMergeCell="ToolbarTableMergeCell",e.TableCellWrap="ToolbarTableCellWrap",e.TableCellAlign="ToolbarTableCellAlign",e.TableBackColor="ToolbarTableBackColor",e.Todo="ToolbarTodo",e.Layout="ToolbarLayout",e.Screenshot="ToolbarScreenshot",e.Align="ToolbarAlign",e.Indent="ToolbarIndent",e.Outdent="ToolbarOutDent",e.LineHeight="ToolbarLineHeight",e.BackColor="ToolbarBackColor",e.Bold="ToolbarBold",e.DeleteLine="ToolbarDeleteLine",e.FontColor="ToolbarFontColor",e.FontFamily="ToolbarFontFamily",e.FontSize="ToolbarFontSize",e.Italic="ToolbarItalic",e.Underline="ToolbarUnderline",e.Undo="ToolbarUndo",e.Redo="ToolbarRedo",e.FormatPainter="ToolbarFormatPainter",e.RemoveFormat="ToolbarRemoveFormat",e.Pagination="ToolbarPagination",e.BackgroundImage="ToolbarSetBackgroundImage",e.Translate="ToolbarTranslate",e.Comment="ToolbarComment"}(kc||(kc={})),function(e){e.Split="ContextMenuSplit",e.Undo="ContextMenuUndo",e.Redo="ContextMenuRedo",e.Copy="ContextMenuCopy",e.Cut="ContextMenuCut",e.Paste="ContextMenuPaste",e.PasteAsPlain="ContextMenuPasteAsPlain",e.Delete="ContextMenuDelete",e.SelectAll="ContextMenuSelectAll",e.WordCount="ContextMenuWordCount",e.ImageTitle="ContextMenuImageTitle",e.ImageClearStretch="ContextMenuImageClearStretch",e.ImageStretch="ContextMenuImageStretch",e.ImageLeftRotation="ContextMenuImageLeftRotation",e.ImageRightRotation="ContextMenuImageRightRotation",e.ImageOCR="ContextMenuImageOCR",e.SaveAsImage="ContextMenuSaveAsImage",e.RemoveFormat="ContextMenuRemoveFormat",e.InsertRowAbove="ContextMenuInsertRowAbove",e.InsertRowBelow="ContextMenuInsertRowBelow",e.DeleteRow="ContextMenuDeleteRow",e.InsertColumnLeft="ContextMenuInsertColumnLeft",e.InsertColumnRight="ContextMenuInsertColumnRight",e.InsertDownRow="ContextMenuTableInsertDownRow",e.DeleteColumn="ContextMenuDeleteColumn",e.DeleteTable="ContextMenuDeleteTable",e.DeleteCode="DeleteCode",e.SelectCode="SelectCode",e.FloatLeft="ContextMenuFloatLeft",e.FloatRight="ContextMenuFloatRight",e.ClearFloat="ContextMenuClearFloat",e.SaveAs="ContextMenuSaveAs",e.ShareLink="ContextMenuShareLink",e.InsertTime="ContextMenuInsertTime",e.SaveAsAttachment="ContextMenuSaveAsAttachment",e.PasteNoteLink="ContextMenuPasteNoteLink"}(wc||(wc={})),function(e){e.Delete="delete",e.MoveUp="moveUp",e.MoveDown="moveDown"}(Cc||(Cc={})),function(e){e.Normal="normal",e.Paging="paging",e.Reading="reading"}(Sc||(Sc={}));var Ac={Paragraph:"paragraph",Heading:"heading",Todo:"todo",Quote:"quote",ListItem:"list-item",Unknown:"unknown",Image:"image",Attachment:"attachment",Catalog:"catalog",CatalogItem:"catalog-item",HR:"hr",Emoji:"emoji",Link:"link",Code:"code",CodeLine:"code-line",Table:"table",TableRow:"table-row",TableCell:"table-cell",Handwriting:"handwriting",Layout:"layout"},Tc={serialize:function(e){var t=xc.createElement(pr.attach),n=e.data,o=n.resourceId;return xc.append(t,Ku(e)),o&&xc.append(t,xc.create(pr.id,o)),xc.append(t,xc.create(pr.attachSource,n.source)),xc.append(t,xc.create(pr.attachResource,n.resource)),xc.append(t,xc.create(pr.attachName,n.fileName)),xc.append(t,xc.create(pr.attachLength,n.fileLength)),xc.append(t,qu(e)),t},deserialize:function(e){var t=td(e)||we(),n=Ac.Attachment,o=fe.Block,i=xc.getChildByTagName(e,pr.blockStyles),r=xc.getChildTextByTagName(e,pr.id),a={resource:xc.getChildTextByTagName(e,pr.attachResource),source:xc.getChildTextByTagName(e,pr.attachSource),fileLength:xc.getChildTextByTagName(e,pr.attachLength),fileName:xc.getChildTextByTagName(e,pr.attachName),style:nd(i)};return r&&Object.assign(a,{resourceId:r}),new fn({id:t,name:n,type:o,data:a})}},Nc=function(e){return e&&e.isInline()&&e.name===Ac.Link};function Ec(e){return function(e){if(Array.isArray(e))return Dc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Mc,Oc,Lc={bold:pr.bold,italic:pr.italic,underline:pr.underline,delete:pr.strike,color:pr.color,backgroundColor:pr.inlineBackColor,fontFamily:pr.fontFamily,fontSize:pr.fontSize,href:pr.linkHref},Bc=function(e,t){var n=t.getText();return xc.create(e,n)},Rc=function(e){var t=xc.createElement(pr.inlineStyles);return Fc(e).forEach(function(e){var n=Lc[e.type]||e.type;xc.append(t,Pc(n,e.value,e.from,e.to))}),t},Pc=function(e,t,n,o){var i=xc.createElement(e);return xc.append(i,xc.create(pr.from,n)),xc.append(i,xc.create(pr.to,o)),xc.append(i,xc.create(pr.value,jc(e,t))),i},jc=function(e,t){return e===pr.fontSize&&"string"==typeof t&&t.endsWith("px")&&(t=t.slice(0,t.length-2)),t||(t="true"),t},Fc=function(e){var t=0,n=[];return e.forEach(function(e){Nc(e)&&(e.nodes[0].addMarks(0,e.getText().length,[new gn({type:pr.color,value:"#003884"}),new gn({type:pr.linkHref,value:e.data.href})],!1),e=e.nodes[0]),e.isText()&&e.leaves.forEach(function(e){if(""!==e.text){var o=t+Ec(e.text).length;e.marks.forEach(function(e){zc(n,{type:e.type,from:t,to:o,value:e.value})}),t=o}})}),n},zc=function(e,t){e.find(function(e){return e.type===t.type&&e.value===t.value&&!(e.from>t.to||e.to<t.from)&&(e.from=Math.min(e.from,t.from),e.to=Math.max(e.to,t.to),!0)})||e.push(t)},Hc=((o={})[pr.bold]="bold",o[pr.italic]="italic",o[pr.underline]="underline",o[pr.strike]="delete",o[pr.color]="color",o[pr.inlineBackColor]="backgroundColor",o[pr.fontFamily]="fontFamily",o[pr.fontSize]="fontSize",o[pr.linkHref]="href",o),Gc=function(e){var t=xc.getChildByTagName(e,pr.text),n=xc.getTextContent(t),o=xc.getChildByTagName(e,pr.inlineStyles),i=Uc(o);return Vc(n,i)},Vc=function(e,t){var n=Xc(e,t);return Wc(n)},Uc=function(e){var t=[];return xc.getElementChildren(e).forEach(function(e){var n=Hc[e.nodeName],o=xc.getChildTextByTagName(e,pr.value),i=parseInt(xc.getChildTextByTagName(e,pr.from),10),r=parseInt(xc.getChildTextByTagName(e,pr.to),10);o="true"===(o=isNaN(o)?o:parseInt(o,10))?"":o,t.push({from:i,to:r,type:n,value:o})}),t},Wc=function(e){var t=[],n=[],o=function(e){if(e){var o=Qc(t,e.value);if(n.length){var i=n[n.length-1];Nc(i)&&n.push(Zc(i))}else n.push(Jc(o));n.push(o)}else n.push(new An({leaves:t}))};if(e.forEach(function(e){if(t.length){var n=e.getMarkOfType("href"),i=t[0].getMarkOfType("href");!n&&!i||n&&i&&n.value===i.value?t.push(e):(o(i),t=[e])}else t.push(e)}),t.length){var i=t[0].getMarkOfType("href");o(i);var r=n[n.length-1];Nc(r)&&n.push(Zc(r))}return n},Jc=function(e){return Yc(e.nodes[0].leaves[0].marks.filter(function(e){return e.type!==pr.underline&&e.type!==pr.color}))},Zc=function(e){var t=e.nodes[0];return Yc(t.leaves[t.leaves.length-1].marks.filter(function(e){return e.type!==pr.underline&&e.type!==pr.color}))},Yc=function(e){return new An({leaves:[new Cn({text:"",marks:e})]})},Qc=function(e,t){return new fn({type:fe.Inline,name:Ac.Link,data:{href:t},nodes:[new An({leaves:e.map(function(e){return e.removeMark("href"),e.removeMark(new gn({type:"color",value:"#003884"})),e})})]})},Xc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];t.forEach(function(e){var t=new gn(e);n.push({from:e.from,mark:t}),n.push({to:e.to,mark:t})}),n.sort(function(e,t){return(e.hasOwnProperty("from")?e.from:e.to)-(t.hasOwnProperty("from")?t.from:t.to)});var o=[],i=[],r=0,a="";return n.forEach(function(t){var n=t.hasOwnProperty("from"),s=n?t.from:t.to;a=Ec(e).slice(r,s).join(""),o.push(new Cn({text:a,marks:a?i.map(function(e){return e.copy()}):[]})),n?i.push(t.mark):i.splice(i.indexOf(t.mark),1),r=s}),a=Ec(e).slice(r).join(""),o.push(new Cn({text:a,marks:a?i.map(function(e){return e.copy()}):[]})),Cn.mergeLeaves(o)},$c=function(e){var t=td(e),n=Ac.CatalogItem,o=fe.Block,i=Gc(e),r=xc.getChildByTagName(e,pr.blockStyles),a=nd(r),s=xc.getChildByTagName(e,pr.catalogHref),l={style:nd(r)};return s&&(!a.indent||parseInt(a.indent,10)/28+1)&&(l.targetId=xc.getChildTextByTagName(s,pr.catalogValue)),new fn({id:t,name:n,type:o,data:l,nodes:i})};!function(e){e.Backspace="{backspace}",e.Delete="{del}",e.ArrowDown="{downarrow}",e.ArrowLeft="{leftarrow}",e.ArrowRight="{rightarrow}",e.ArrowTop="{toparrow}",e.Tab="{tab}",e.End="{end}",e.Enter="{enter}",e.Esc="{esc}",e.Home="{home}",e.Insert="{insert}",e.PageUp="{pageup}",e.PageDown="{pagedown}",e.Alt="{alt}",e.Ctrl="{ctrl}",e.Meta="{meta}",e.Shift="{shift}"}(Mc||(Mc={})),function(e){e.Redo="redo",e.Undo="undo",e.RemoveFormat="remove_format",e.FormatPainter="format_painter",e.Align="align",e.Outdent="outdent",e.Indent="indent",e.Catalog="catalog",e.LineHeight="lineHeight",e.Bold="bold",e.Delete="delete",e.FontFamily="font-family",e.FontSize="font-size",e.Italic="italic",e.Underline="underline",e.Image="image",e.Code="code",e.CodeLine="code-line",e.Quote="quote",e.Todo="todo",e.Attachment="attachment",e.Link="link",e.Table="table",e.Hr="hr",e.Heading="heading",e.Paragraph="paragraph",e.Dropdown="dropdown",e.CodeLanguage="code-language",e.CodeTheme="code-theme",e.OL="ordered-list",e.UL="unordered-list",e.TextBackColor="text_background",e.FontColor="text_color"}(Oc||(Oc={}));var Kc={serialize:function(e){var t=[],n=e.id;e.nodes.forEach(function(n){var o=function(e){var t=xc.createElement(pr.catalogue),n=xc.createElement(pr.catalogHref),o=e.data;xc.append(t,Bc(pr.text,e));var i=qu(e);return xc.append(t,Rc(e)),xc.append(t,i),xc.append(t,Ku(e)),o.targetId&&(xc.append(n,xc.create(pr.value,o.targetId)),xc.append(t,n)),o.level&&o.level>1&&xc.append(i,xc.create(pr.catalogIndent,o.level-1)),t}(n);o.setAttribute(pr.catalogueId,e.id),o.setAttribute(pr.compat,"true"),t.push(o)});var o=xc.createElement(pr.catalogueWrap);return o.setAttribute(pr.id,n),xc.appendElToHeader(o),t},deserialize:function(e){var t=e.getAttribute(pr.catalogueId),n=xc.getBulbDocument().findNodeById(t);if(n)return n.insert($c(e),n.nodes.length),null;var o=Ac.Catalog,i=fe.Block,r=[$c(e)];return new fn({id:t,name:o,type:i,nodes:r})}},qc={serialize:function(e){var t=xc.createElement(pr.hr);return xc.append(t,Ku(e)),xc.append(t,qu(e)),t},deserialize:function(e){var t=td(e),n=Ac.HR,o=fe.Block,i=xc.getChildByTagName(e,pr.blockStyles),r=nd(i);return new fn({id:t,name:n,type:o,data:{style:r}})}},eu=function(e){return e?isNaN(Number(e))?e:parseInt(e,10):null},tu={serialize:function(e){var t=xc.createElement(pr.image),n=e.data,o=n.url,i=n.resourceId;xc.append(t,Ku(e)),i&&xc.append(t,xc.create(pr.id,i)),xc.append(t,xc.create(pr.imageSource,o)),xc.append(t,Bc(pr.imageTitle,e));var r=qu(e);return n.width&&xc.append(r,xc.create(pr.imageWidth,n.width)),n.height&&xc.append(r,xc.create(pr.imageHeight,n.height)),xc.append(t,r),t},deserialize:function(e){var t=td(e)||we(),n=Ac.Image,o=fe.Block,i=xc.getChildByTagName(e,pr.blockStyles),r=xc.getChildTextByTagName(i,pr.imageWidth),a=xc.getChildTextByTagName(i,pr.imageHeight),s=xc.getChildTextByTagName(e,pr.id),l=eu(r),c=eu(a),u={url:xc.getChildTextByTagName(e,pr.imageSource),style:nd(i)};l&&Object.assign(u,{width:l}),c&&Object.assign(u,{height:c}),s&&Object.assign(u,{resourceId:s});var d=[],p=xc.getChildByTagName(e,pr.imageTitle);return xc.getTextContent(p)&&(d=d.concat(function(e){var t=xc.getTextContent(e);return Vc(t,[{from:0,to:t.length,type:"title",value:""}])}(p))),new fn({id:t,name:n,type:o,data:u,nodes:d})}},nu={serialize:function(e){var t=xc.createElement(pr.para);return xc.append(t,Ku(e)),xc.append(t,Bc(pr.text,e)),xc.append(t,Rc(e)),xc.append(t,qu(e)),t},deserialize:function(e){var t=td(e),n=Ac.Paragraph,o=fe.Block,i=Gc(e),r={style:nd(xc.getChildByTagName(e,pr.blockStyles))};return new fn({id:t,name:n,type:o,data:r,nodes:i})}};function ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var iu,ru={serialize:function(e){var t=xc.createElement(pr.code),n=e.data,o=function(e){return e.map(function(e){return e.getText()}).join("\n")+"\n"}(e.nodes);xc.append(t,xc.create(pr.text,o)),xc.append(t,Ku(e));var i=xc.createElement(pr.inlineStyles),r=0;return e.nodes.map(function(e){!function(e,t,n){Fc(e).forEach(function(e){var o=e.from,i=e.to,r=e.value,a=e.type,s=Lc[a]||a;xc.append(n,Pc(s,r,o+t,i+t))})}(e,r,i),r+=function(e){return function(e){if(Array.isArray(e))return ou(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ou(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.getText()).length+1}),xc.append(t,i),xc.append(t,qu(e)),xc.append(t,xc.create(pr.language,n.language)),xc.append(t,xc.create(pr.theme,n.theme)),t},deserialize:function(e){var t=td(e),n=Ac.Code,o=fe.Block,i={style:nd(xc.getChildByTagName(e,pr.blockStyles)),language:xc.getChildTextByTagName(e,pr.language),theme:xc.getChildTextByTagName(e,pr.theme)},r=xc.getChildTextByTagName(e,pr.text),a=xc.getChildByTagName(e,pr.inlineStyles),s=Uc(a),l=function(e,t){var n=e.split("\n"),o=n.length,i=0;return n.slice(0,o-1||1).map(function(e){var n=function(e,t,n){return e.filter(function(e){return!(e.from>=t+n||e.to<t)}).map(function(e){return{from:Math.max(e.from-t,0),to:Math.min(e.to-t,n),type:e.type,value:e.value}})}(t,i,e.length);return i+=e.length+1,new fn({name:Ac.CodeLine,type:fe.Block,nodes:[new An({leaves:Xc(e,n)})]})})}(r,s);return new fn({id:t,name:n,type:o,data:i,nodes:l})}};!function(e){e.Title="title",e.SubTitle="subtitle",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4"}(iu||(iu={}));var au=[gn.fromJSON({type:"bold"})],su=((r={})[iu.Title]=[].concat(au,[gn.fromJSON({type:"fontSize",value:32})]),r[iu.SubTitle]=[].concat(au,[gn.fromJSON({type:"fontSize",value:18}),gn.fromJSON({type:"color",value:"#595959"})]),r[iu.H1]=[].concat(au,[gn.fromJSON({type:"fontSize",value:20})]),r[iu.H2]=[].concat(au,[gn.fromJSON({type:"fontSize",value:18})]),r[iu.H3]=[].concat(au,[gn.fromJSON({type:"fontSize",value:16})]),r[iu.H4]=[].concat(au,[gn.fromJSON({type:"fontSize",value:14})]),r),lu=function(e){return un(su[e])};function cu(){var e=function(e,t){return t||(t=e.slice(0)),e.raw=t,e}(["\n    white-space: pre-wrap;\n    line-height: 1.5;\n    word-break: break-word;\n"]);return cu=function(){return e},e}function uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function du(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(e){var t=e.children,n=e.attributes,o=this.props.block.data.level,i=Nl(lu(o));return n.style=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uu(Object(n),!0).forEach(function(t){du(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i,{},n.style),fr.createElement(pu,Object.assign({"data-heading-level":o},n),t)},t.prototype.renderMark=function(e){var t=e.marks,n=e.children,o=this.props.block.data.level,i=lu(o);return oc({marks:Cn.marksUnion(i,t),children:n})},t}(ca)).blockName="heading";var pu=is.div(cu());function hu(e){return function(e){if(Array.isArray(e))return fu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var gu=((a={})[iu.Title]=[].concat(hu(au),[gn.fromJSON({type:"fontSize",value:32})]),a[iu.SubTitle]=[].concat(hu(au),[gn.fromJSON({type:"fontSize",value:18}),gn.fromJSON({type:"color",value:"#595959"})]),a[iu.H1]=[].concat(hu(au),[gn.fromJSON({type:"fontSize",value:28})]),a[iu.H2]=[].concat(hu(au),[gn.fromJSON({type:"fontSize",value:20})]),a[iu.H3]=[].concat(hu(au),[gn.fromJSON({type:"fontSize",value:16})]),a[iu.H4]=[].concat(hu(au),[gn.fromJSON({type:"fontSize",value:14})]),a),yu=function(e){return un(gu[e])},mu=((c={})[iu.Title]="a",c[iu.SubTitle]="b",c[iu.H1]="1",c[iu.H2]="2",c[iu.H3]="3",c[iu.H4]="4",c),vu=Object(hr.a)(mu),bu={serialize:function(e){var t,n,o=xc.createElement(pr.heading),i=e.data.level,r=mu[i];return t=e.nodes,n=yu(i),t.forEach(function(e){e.isText()&&e.leaves.forEach(function(e){n.forEach(function(t){if(!e.marks.find(function(e){return e.type===t.type})){if("fontSize"===t.type&&14===t.value)return;e.addMark(t)}})})}),o.setAttribute(pr.compat,"true"),o.setAttribute(pr.level,r),xc.append(o,Ku(e)),xc.append(o,Bc(pr.text,e)),xc.append(o,Rc(e)),xc.append(o,qu(e)),o},deserialize:function(e){var t=td(e),n=Ac.Heading,o=fe.Block,i=Gc(e),r=vu[e.getAttribute(pr.level)]||iu.H4,a={level:r};!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.forEach(function(e){e.isText()&&e.leaves.forEach(function(e){var n=[];e.marks.forEach(function(e){t.find(function(t){return e.equals(t)})&&n.push(e)}),n.forEach(function(t){e.removeMark(t.type)})})})}(i,yu(r));var s=xc.getChildByTagName(e,pr.blockStyles);return s&&(a.style=nd(s)),new fn({id:t,name:n,type:o,data:a,nodes:i})}},_u=[],Iu={serialize:function(e){var t=[];return e.forEach(function(e){if(e.isBlock()){var n=xc.createElement(pr.quote);xc.append(n,Ku(e)),xc.append(n,Bc(pr.text,e)),xc.append(n,Rc(e)),xc.append(n,qu(e)),t.push(n)}}),t},deserialize:function(e){if(e.nodeName===pr.quote){var t=e.previousElementSibling,n=e.nextElementSibling;return t&&t.nodeName===pr.quote||(_u=[]),_u.push(e),n&&n.nodeName===pr.quote?void 0:function(e){if(e.length){var t=e.map(function(e){var t=td(e),n=Ac.Paragraph,o=fe.Block,i=Gc(e),r={style:nd(xc.getChildByTagName(e,pr.blockStyles))};return new fn({id:t,name:n,type:o,data:r,nodes:i})}),n=we(),o=Ac.Quote,i=fe.Block;return new fn({id:n,name:o,type:i,nodes:t})}}(_u)}}},ku={serialize:function(e){var t=xc.createElement(pr.todo),n=e.data;return xc.append(t,Ku(e)),xc.append(t,Bc(pr.text,e)),xc.append(t,Rc(e)),xc.append(t,qu(e)),xc.append(t,xc.create(pr.checked,n.checked)),t},deserialize:function(e){var t,n=td(e),o=Ac.Todo,i=fe.Block,r=xc.getChildByTagName(e,pr.blockStyles),a=Gc(e),s={checked:(t=xc.getChildTextByTagName(e,pr.checked),"true"===t),style:nd(r)};return new fn({id:n,name:o,type:i,data:s,nodes:a})}};function wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Cu,Su,xu,Au,Tu=function(){function e(e){var t=this;this.rectUnion=function(e,t){if(e&&t)return{startCellIndex:Math.min(e.startCellIndex,t.startCellIndex),startRowIndex:Math.min(e.startRowIndex,t.startRowIndex),endCellIndex:Math.max(e.endCellIndex,t.endCellIndex),endRowIndex:Math.max(e.endRowIndex,t.endRowIndex)}},this.rectContains=function(e,t){return!(!e||!t)&&e.startCellIndex<=t.startCellIndex&&e.startRowIndex<=t.startRowIndex&&e.endCellIndex>=t.endCellIndex&&e.endRowIndex>=t.endRowIndex},this.calculateRect=function(e,n){var o=t.cellIdToRect.get(e&&e.id);if(t.rectContains(t.selectionRect,o)){if(n)return;t.selectionRect=t.rectUnion(t.startRect,o)}else t.selectionRect=t.rectUnion(t.selectionRect,o);t.getSelectedCells().filter(function(t){return t.id!==e.id}).forEach(function(e){return t.calculateRect(e,!0)})},this.getSelectedCells=function(){var e=Object.values(t.cellMatrix);if(t.selectionRect){var n=t.selectionRect,o=n.startRowIndex,i=n.endRowIndex,r=n.startCellIndex,a=n.endCellIndex,s=e.slice(o,i+1).reduce(function(e,t){var n=Object.values(t);return e.concat(n.slice(r,a+1))},[]);return function(e){return function(e){if(Array.isArray(e))return wu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(s))}return[]},this.init(e)}return e.prototype.getTable=function(){return this.table},e.prototype.setTable=function(e){this.table=e},e.prototype.getCellByPosition=function(e,t){return this.cellMatrix[e][t]},e.prototype.getSelectionRect=function(){return this.selectionRect},e.prototype.getRectByCell=function(e){return this.cellIdToRect.get(e.id)},e.prototype.getTableSpan=function(){return{rowSpan:Object.keys(this.cellMatrix).length,colSpan:Object.keys(this.cellMatrix[0]).length}},e.prototype.resetSelectionRect=function(){this.selectionRect=this.startRect=null},e.prototype.initSelectionRect=function(e){this.selectionRect=this.startRect=this.cellIdToRect.get(e&&e.id)},e.prototype.init=function(e){this.table=e,this.initRects()},e.prototype.initRects=function(){var e=this;this.cellIdToRect=new Map,this.cellMatrix={},this.table.forEach(function(t){var n=0;t.forEach(function(o){for(var i=o.data.colSpan||1,r=o.data.rowSpan||1,a=o.index()+n,s=0,l=0;l<r;l++)for(var c=0;c<i;c++)s+=e.updateCell(t.index()+l,a+c+s,o,0);e.cellIdToRect.set(o.id,{startCellIndex:a+s,endCellIndex:a+i-1+s,startRowIndex:t.index(),endRowIndex:t.index()+r-1}),n+=i-1+s})})},e.prototype.updateCell=function(e,t,n,o){var i=o||0;return this.cellMatrix[e]||(this.cellMatrix[e]={}),this.cellMatrix[e][t]?this.updateCell(e,t+1,n,++i):(this.cellMatrix[e][t]=n,i)},e}();function Nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Du(e){return function(e){if(Array.isArray(e))return Mu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Mu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}!function(e){e.TABLE="table",e.TABLE_CELL="table-cell",e.TABLE_ROW="table-row"}(Cu||(Cu={})),function(e){e.VERTICAL="VERTICAL",e.HORIZONTAL="HORIZONTAL"}(Su||(Su={})),function(e){e.ON_TABLE_EVENT="ON_TABLE_EVENT",e.ON_LEAVE_TABLE="ON_LEAVE_TABLE",e.ON_ENTER_TABLE="ON_ENTER_TABLE",e.ON_SELECT_ALL="ON_SELECT_ALL"}(xu||(xu={})),function(e){e[e.DELETE_TABLE=0]="DELETE_TABLE",e[e.DELETE_ROW=1]="DELETE_ROW",e[e.DELETE_COL=2]="DELETE_COL"}(Au||(Au={}));var Ou={backgroundColor:"backColor"},Lu={backColor:"backgroundColor"},Bu=function(){var e=Ac.Paragraph,t=fe.Block;return new fn({name:e,type:t,nodes:[new An({leaves:[new Cn({text:""})]})]})},Ru=function(e,t){var n=function(e){var t=e.mergeWidth,n=e.mergeHeight,o=["value","inlineStyles","mergeWidth","mergeHeight","resource","mergePointDX","mergePointDY"],i=Object.keys(e).filter(function(e){return!o.includes(e)}).reduce(function(t,n){return"wrap"===n&&!1===e[n]?t.whiteSpace="nowrap":t[Lu[n]||n]=e[n],t},{}),r={};return Object.keys(i).length&&(r.style=i),t>1&&(r.colSpan=t),n>1&&(r.rowSpan=n),r}(e),o=new fn({name:Ac.TableCell,type:fe.Block,data:n,nodes:[]});if(e.resource){var i;(i=o.nodes).push.apply(i,Du(function(e,t){var n=[],o=xc.getElementChildren(t).find(function(t){return e.resource===xc.getChildTextByTagName(t,pr.tableResId)}),i=xc.getChildByTagName(o,pr.image)||xc.getChildByTagName(o,pr.attach);xc.append(i,xc.create(pr.coId,e.resource));var r=Xu[i.nodeName](i);return n.push(Bu()),n.push(r),n.push(Bu()),n}(e,t)))}else{var r,a=function(e){return(e.value&&e.value.split(/\r?\n/)||[""]).map(function(t){var n=Ac.Paragraph,o=fe.Block,i=function(e){return Object.keys(e).reduce(function(t,n){return e[n].forEach(function(e){t.push({from:e.from,to:e.to,type:Hc[n],value:!0===e.value?"":e.value})}),t},[])}(e.inlineStyles||{}),r=Vc(t||"",i);return new fn({name:n,type:o,nodes:r})})}(e);(r=o.nodes).push.apply(r,Du(a))}return o},Pu={serialize:function(e){var t=xc.createElement(pr.table),n=xc.createElement(pr.tableResources),o=function(e,t){var n=e.data,o=n.colsWidth,i=n.rowsHeight,r=Du(Array(i.length)).map(function(){return Du(Array(o.length)).map(function(){return{}})}),a=new Tu(e);return e.nodes.forEach(function(e){e.nodes.forEach(function(e){var n=a.getRectByCell(e),s=n.startRowIndex,l=n.startCellIndex;s<i.length&&l<o.length&&function(e,t,n,o,i){var r=e.find(function(e){return[Ac.Image,Ac.Attachment].includes(e.name)});r&&function(e,t){var n=xc.createElement(pr.tableResource),o=xc.create(pr.tableResId,e.id);xc.append(t,n),xc.append(n,o),e.name===Ac.Image?xc.append(n,tu.serialize(e)):e.name===Ac.Attachment&&xc.append(n,Tc.serialize(e))}(r,i);var a=e.data,s=a.rowSpan,l=void 0===s?1:s,c=a.colSpan,u=void 0===c?1:c,d=a.style,p=function(e){return e.nodes.reduce(function(e,t,n){var o=t.getText();return e+=n>0?"\n"+o:o},"")}(e),h=u,f=l,g=function(e){var t={},n=0;return e.nodes.forEach(function(e){Fc(e).forEach(function(e){var o=e.from,i=e.to,r=e.value,a=e.type,s=Lc[a]||a;t[s]||(t[s]=[]),t[s].push({from:o+n,to:i+n,value:""===r||r})}),n+=1+Du(e.getText()).length}),t}(e);d&&Object.keys(d).forEach(function(e){(function(e){return"textAlign"===e&&"left"===d[e]||"verticalAlign"===e&&"middle"===d[e]})(e)||("nowrap"!==d[e]?t[n][o][Ou[e]||e]=d[e]:t[n][o].wrap=!1)}),(h>1||f>1)&&(t[n][o]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nu(Object(n),!0).forEach(function(t){Eu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t[n][o],{mergeHeight:f,mergeWidth:h})),r?t[n][o]={value:"",resource:r.id}:((p.length||Object.keys(t[n][o]).length)&&(t[n][o].value=p),Object.keys(g).length&&(t[n][o].inlineStyles=g));for(var y=0;y<l;y++)for(var m=0;m<u;m++)if(0!==y||0!==m){var v=n+y,b=o+m;v<t.length&&b<t[v].length&&(t[v][b].mergePointDX=m,t[v][b].mergePointDY=y,t[v][b].value="")}}(e,r,s,l,t)})}),{cells:r.reduce(function(e,t){return e.push.apply(e,Du(t)),e},[]),heights:i.map(function(e){return e||40}),widths:o.map(function(e){return e||100})}}(e,n);return xc.append(t,Ku(e)),xc.append(t,n),xc.append(t,xc.create(pr.tableContent,JSON.stringify(o))),xc.append(t,qu(e)),t},deserialize:function(e){var t,n,o=td(e),i=Ac.Table,r=fe.Block,a=JSON.parse(xc.getChildTextByTagName(e,pr.tableContent).replace(/\n/g,"\\n")),s=a.widths,l=a.heights,c=a.cells,u={colsWidth:null==s?void 0:s.map(function(e){return e||100}),rowsHeight:null==l?void 0:l.map(function(e){return e||40}),style:nd(xc.getChildByTagName(e,pr.blockStyles))||{}},d=new fn({id:o,name:i,type:r,data:u,nodes:[]}),p=(n=l.length,Array(n).fill(null).map(function(e){return new fn({name:Ac.TableRow,type:fe.Block,nodes:[]})}));return c.forEach(function(t,n){var o=Math.floor(n/s.length);if(!t.mergePointDX&&!t.mergePointDY){var i=xc.getChildByTagName(e,pr.tableResources),r=Ru(t,i);p[o].nodes.push(r)}}),(t=d.nodes).push.apply(t,Du(p)),d}},ju={serialize:function(e){var t=xc.createElement(pr.listItem);xc.append(t,Bc(pr.text,e)),xc.append(t,Rc(e)),xc.append(t,Ku(e)),xc.append(t,qu(e));var n=e.data,o=n.listLevel,i=n.listId,r=n.listType;return t.setAttribute(pr.level,""+o),t.setAttribute(pr.listId,i),xc.hasListInHeader(i)||function(e,t){var n=xc.createElement(pr.list);n.setAttribute(pr.id,e),n.setAttribute(pr.listType,t),xc.appendElToHeader(n)}(i,r),t},deserialize:function(e){var t=e.getAttribute(pr.listId),n=parseInt(e.getAttribute(pr.level),10),o=xc.getLists().find(function(e){return e.id===t}),i=o?o.type:os.UnorderedList,r=td(e),a={listId:t,listLevel:n,listType:i,style:nd(xc.getChildByTagName(e,pr.blockStyles))};return new fn({id:r,name:Ac.ListItem,type:fe.Block,data:a,nodes:Gc(e)})}},Fu=["padding","backgroundColor"],zu=[Ac.Catalog,Ac.Quote,Ac.TableCell,Ac.TableRow],Hu=function(e){var t=e&&e.data&&e.data.style;if(t)return Fu.reduce(function(e,n){return t[n]&&(e[n]=t[n]),e},{})},Gu=function(e){e.deepForEach(function(e){if(e.isBlock()){var t=e.data.style;Fu.forEach(function(e){t&&t.hasOwnProperty(e)&&t[e]&&delete t[e]})}})},Vu=function(e){return e.reduce(function(e,t){var n=function(e){if(function(e){return e&&e.isBlock()&&zu.indexOf(e.name)>=0}(e)){var t=e.nodes[0];return n(t)}return Hu(e)},o=n(t),i=e.length,r=i&&e[i-1];return i&&function(e,t){var n=Hu(e);if(n&&t)return e.name===pr.layout&&function(e,t){return io(e,t)}(n,t)}(r,o)?(Gu(t),r.nodes.push(t)):e.push(o&&Object.keys(o).length?function(e,t){var n=we(),o=Ac.Layout,i=fe.Block;return Gu(e),new fn({id:n,data:{style:t},name:o,type:i,nodes:[e]})}(t,o):t),e},[])};function Uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zu={serialize:function(e){var t=[],n=e.data;return e.deepForEach(function(e){(function(e){return e.isBlock()&&zu.indexOf(e.name)<=-1})(e)&&function(e,t){e.data.style=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(n),!0).forEach(function(t){Ju(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.data.style,{},t.style)}(e,n)}),e.nodes.forEach(function(e){var n=od.serialize(e);n instanceof Array?t.push.apply(t,function(e){return function(e){if(Array.isArray(e))return Uu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n)):t.push(n)}),t}},Yu={serialize:function(e){var t=function(){var t=xc.createElement(pr.unknown);return xc.append(t,Ku(e)),xc.append(t,xc.create(pr.unknownContent,JSON.stringify(e.toJSON()))),t},n=e.data.xml;if(n)try{return xc.parseXML(n).childNodes[0]}catch(e){return t()}return t()},deserialize:function(e){var t=xc.getChildTextByTagName(e,pr.unknownContent);if(t)return kn.fromJSON(JSON.parse(t));var n,o={xml:(n=e.outerHTML,n.replace(/(\r\n|\n|\r)/g,"").replace(/>\s*</g,"><").replace(/\s+xmlns=".*"/g,""))};return new kn({type:fe.Unknown,name:fe.Unknown,data:o})}},Qu=((u={})[Ac.Attachment]=Tc.serialize,u[Ac.Catalog]=Kc.serialize,u[Ac.HR]=qc.serialize,u[Ac.Paragraph]=nu.serialize,u[Ac.Image]=tu.serialize,u[Ac.Code]=ru.serialize,u[Ac.Heading]=bu.serialize,u[Ac.Quote]=Iu.serialize,u[Ac.Todo]=ku.serialize,u[Ac.Table]=Pu.serialize,u[Ac.ListItem]=ju.serialize,u[Ac.Unknown]=Yu.serialize,u[Ac.Layout]=Zu.serialize,u),Xu=((d={})[pr.attach]=Tc.deserialize,d[pr.catalogue]=Kc.deserialize,d[pr.hr]=qc.deserialize,d[pr.para]=nu.deserialize,d[pr.image]=tu.deserialize,d[pr.code]=ru.deserialize,d[pr.heading]=bu.deserialize,d[pr.quote]=Iu.deserialize,d[pr.todo]=ku.deserialize,d[pr.table]=Pu.deserialize,d[pr.listItem]=ju.deserialize,d[pr.unknown]=Yu.deserialize,d[pr.layout]=Zu.deserialize,d),$u={textAlign:pr.align,indent:pr.indent,textIndent:pr.textIndent,lineHeight:pr.lineHeight,backgroundColor:pr.blockBackColor,padding:pr.padding,float:pr.float,color:pr.color,margin:pr.margin},Ku=function(e){return xc.create(pr.coId,e.id)},qu=function(e){var t=xc.createElement(pr.blockStyles),n=e.data.style;return n&&Object.keys(n).forEach(function(e){var o=n[e],i=$u[e];i!==pr.indent&&i!==pr.textIndent||(o/=28),xc.append(t,xc.create(i,o))}),t},ed=Object(hr.a)($u),td=function(e){return xc.getChildTextByTagName(e,pr.coId)},nd=function(e){var t={};return(xc.getElementChildren(e)||[]).forEach(function(e){var n=ed[e.nodeName];if(n){var o=xc.getTextContent(e);switch(n){case"indent":case"textIndent":o=28*parseInt(o,10);break;case"lineHeight":o=parseFloat(o)}t[n]=o}}),t},od={serialize:function(e){return Qu[e.name]?Qu[e.name](e):Qu[pr.unknown](e)},deserialize:function(e){return Xu[e.nodeName]?Xu[e.nodeName](e):Xu[pr.unknown](e)}},id=function(e){var t={};if(e){var n=xc.getChildByTagName(e,pr.header),o=xc.getChildByTagName(e,pr.footer);(n||o)&&(rd(t,n,"header"),rd(t,o,"footer"))}return t},rd=function(e,t,n){var o="header"===n?pr.headerStyle:pr.footerStyle,i="header"===n?pr.headerContent:pr.footerContent,r="header"===n?"headerStyle":"footerStyle",a=t&&xc.getChildByTagName(t,o),s=a&&xc.getChildTextByTagName(a,pr.align),l=xc.getChildTextByTagName(t,i)||"";e[n]=[{page:1,text:l}],e[r]={textAlign:s||"center"}},ad=function(e,t){var n=t[e][0].text,o=xc.createElement(e);if(xc.append(o,xc.create(pr.text,n)),t&&e===pr.header){var i=xc.createElement(pr.headerStyle),r=t.headerStyle||{textAlign:"center"};xc.append(i,xc.create(pr.align,r.textAlign)),o.appendChild(i)}if(t&&e===pr.footer){var a=xc.createElement(pr.footerStyle),s=t.footerStyle||{textAlign:"center"};xc.append(a,xc.create(pr.align,s.textAlign)),o.appendChild(a)}return o.setAttribute("compat","true"),o};function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var ld=function(e){var t=window.document.implementation;xc.setXML(t.createDocument("http://note.youdao.com",pr.note,null));var n=xc.getXML().documentElement;n.setAttribute("schema-version","1.0.3");var o=e.data.fileVersion;o&&n.setAttribute(pr.fileVersion,o.toString());var i=e.data.templateId;i&&n.setAttribute(pr.fileId,i.toString());var r=xc.createElement(pr.head);(function(e,t){var n=e.data;n&&n.header&&t.appendChild(ad(pr.header,n)),n&&n.footer&&t.appendChild(ad(pr.footer,n))})(e,r),xc.append(n,r);var a=xc.createElement(pr.body);return xc.append(n,a),e.nodes.forEach(function(e){var t=od.serialize(e);t&&xc.append.apply(xc,[a].concat(function(e){return function(e){if(Array.isArray(e))return sd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sd(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}([].concat(t))))}),xc.getXML()},cd=n(77),ud={svg:!0,video:!0,style:!0},dd=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),pd=function(e){return dd.test(e)},hd="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",fd="[^\\ud800-\\udfff]",gd="(?:\\ud83c[\\udde6-\\uddff]){2}",yd="[\\ud800-\\udbff][\\udc00-\\udfff]",md="(?:"+hd+"|\\ud83c[\\udffb-\\udfff])?",vd="[\\ufe0e\\ufe0f]?"+md+"(?:\\u200d(?:"+[fd,gd,yd].join("|")+")[\\ufe0e\\ufe0f]?"+md+")*",bd="(?:"+[fd+hd+"?",hd,gd,yd,"[\\ud800-\\udfff]"].join("|")+")",_d=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+bd+vd,"g"),Id=function(e){return pd(e)?function(e){return e.match(_d)||[]}(e):function(e){return e.split("")}(e)},kd=function(e){e=Io(e);var t=pd(e)?Id(e):void 0,n=t?t[0]:e.charAt(0),o=t?function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:Oo(e,t,n)}(t,1).join(""):e.slice(1);return n.toUpperCase()+o},wd=Kl(function(e,t,n){return t=t.toLowerCase(),e+(n?function(e){return kd(Io(e).toLowerCase())}(t):t)}),Cd=function(){function e(){}return e.purifyHTMLDocument=function(e){return Object.keys(ud).forEach(function(t){Array.from(e.querySelectorAll(t)).forEach(function(e){e.remove()})}),e},e.createHTMLDocument=function(e){var t;if(document.implementation&&document.implementation.createHTMLDocument&&(t=document.implementation.createHTMLDocument("title")),window.DOMParser){var n=new window.DOMParser;try{t=n.parseFromString("","text/html")}catch(e){return null}}if(t)return t.body.innerHTML=e,t},e.deepForEachNode=function(t,n){t.hasChildNodes()&&(e.getChildNodes(t).forEach(n),e.getChildNodes(t).forEach(function(t){e.deepForEachNode(t,n)}))},e.getStyle=function(e){return Array.from(e.style).reduce(function(t,n){return t[wd(n)]=e.style[n],t},{})},e.getChildNodes=function(e){return Array.from(e.childNodes)},e.getByTag=function(e,t){return Array.from(e.getElementsByTagName(t))},e.getAttr=function(e,t){var n=e.attributes&&e.attributes[t];return n&&n.textContent},e.convertBlockStyleValue=function(t){return Object.entries(t).forEach(function(n){var o=n[0],i=n[1];i?t[o]=e.convertNumberValue(i)||i:delete t[o]}),t},e.escapeHTML=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.convertNumberValue=function(e){if(e=(e=(""+e).replace(/(\d+)(?:em|rem)/g,function(e,t){return 14*parseInt(t,10)+"px"})).replace("px",""),!isNaN(Number(e)))return Number(e)},e.purifyHTML=function(t){var n=/<html[\S\s]*<\/html>/i;return n.test(t)&&(t=t.match(n)[0]),e.removals.forEach(function(e){t=t.replace(e,"")}),t},e}();Cd.removals=[/<!--[\w\W]*?-->/g,/&quot;/g];var Sd=function(){};Sd.blockName="paragraph",Sd=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([dr],Sd),ir.registerComponents([Sd]),ir.getComponent=function(e){return Object.values(Ac).includes(e)},ir.registerPlugins(function(e){function t(){var t,n=this;return n=e.apply(this,arguments)||this,t=n,n.name="bulb-plugin-ynote-guid",n.beforeGenerateNodeId=function(e,n){return String.fromCharCode.apply(t,t.randomCharCodes(4))+"-"+Date.now().toString()},n.randomCharCodes=function(e){for(var n=[];n.length<e;)n.push(t.randomCharCode());return n},n.randomCharCode=function(){var e=Math.floor(62*Math.random());return e<10?e+48:e<36?e-10+65:e-36+97},n}return s(t,e),t}(Po));var xd={serialize:function(e){e instanceof bn&&(e=e.toJSON());var t=Ji(e);return function(e){return xc.stringify(e)}(ld(t))},deserialize:function(e){return function(e){var t=xc.getChildByTagName(e,pr.note),n=xc.getChildByTagName(t,pr.body),o=xc.getChildByTagName(t,pr.head),i=new bn({nodes:[],data:id(o)}),r=t.getAttribute(pr.fileVersion);r&&(i.data.fileVersion=r);var a=t.getAttribute(pr.fileId);return a&&(i.data.templateId=a),xc.setBulbDocument(i),xc.setLists(o),xc.getElementChildren(n).forEach(function(e){var t=od.deserialize(e);t&&i.nodes.push(t)}),i.nodes=Vu(i.nodes),i.updateParent(),i}(function(e){return xc.parseXML(e)}(e))}},Ad={xml2json:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=xd.deserialize(e),o=n.toJSON();return t&&(o=cd.a.compress(o)),JSON.stringify(o)},json2xml:function(e){var t;try{t=JSON.parse(e)}catch(e){console.warn("parsing data error")}return xd.serialize(cd.a.decompress(t))}},Td={isXML:function(e){return xc.isXML(e)},isJSON:function(e){return function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e)},getActualContent:function(e){var t=Dd(e);if(t)return{type:"json",content:t};var n=Nd(e);if(n)return{type:n.isXml?"xml":"json",content:n.content};var o=Ed(e);return o?{type:o.isHtml?"html":"json",content:o.content}:{type:"html",content:e}}},Nd=function(e){try{var t=xc.parseXML(e);if(!t)return;var n=t.getElementsByTagName("note");if(0===n.length)return;var o=n[0],i=o.getAttribute("schema-version");if("http://note.youdao.com"!==o.getAttribute("xmlns")||null==i)return;var r=t.getElementsByTagName("body");if(r.length<1)return{isXml:!0,content:e};var a=r[0];if(1!==a.children.length)return{isXml:!0,content:e};var s=a.children[0];if("para"!==s.tagName)return{isXml:!0,content:e};var l=s.getElementsByTagName("text");if(l.length<1)return{isXml:!0,content:e};var c=l[0].innerHTML;return c.startsWith('{"2":"1",')&&Td.isJSON(c)?{isXml:!1,content:c}:{isXml:!0,content:e}}catch(e){return}},Ed=function(e){try{var t=Cd.createHTMLDocument(e);if(!t)return{isHtml:!0,content:e};var n=t.getElementsByTagName("div");if(1!==n.length)return{isHtml:!0,content:e};if("paragraph"!==n[0].getAttribute("yne-bulb-block"))return{isHtml:!0,content:e};var o=n[0].innerHTML.trim();return o.startsWith('{"2":"1",')&&Td.isJSON(o)?{isHtml:!1,content:o}:{isHtml:!0,content:e}}catch(e){return}},Dd=function(e){try{var t;try{t=JSON.parse(e)}catch(o){var n=e.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(n===e)return;t=JSON.parse(n),e=n}var o=bn.fromJSON(cd.a.decompress(t));if(!o)return;if(1!==o.nodes.length)return e;var i=o.nodes[0];if(!i.isBlock()||i.name!==Ac.Paragraph)return e;var r=i.getText();return r.startsWith('{"2":"1",')&&JSON.parse(r)?r:e}catch(e){return}}}])}.apply(t,[n,t]))||(e.exports=r)}).call(this,n(54),n(914))},function(e,t){var n,o,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var o,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};o=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,o){var i,r,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),a=r[t]),void 0===a)a=r[t]=n,++e._eventsCount;else if("function"==typeof a?a=r[t]=o?[n,a]:[a,n]:o?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function d(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,r(this.listener,this.target,e))}.bind(o);return i.listener=n,o.wrapFn=i,i}function p(e,t,n){var o=e._events;if(void 0===o)return[];var i=o[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,o,i,r,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(o=this._events))return this;if(void 0===(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){a=n[r].listener,i=r;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,r=Object.keys(n);for(o=0;o<r.length;++o)"removeListener"!==(i=r[o])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(0),n(917)],void 0===(i=function(e,t,n,o){return n.union(["content-set","open-image","open-attachment","on-paste","snap-screen","clipboard-status","require-paste","edit-link","click","find","check-image","export-pdf","export-word","download-file","exit-full-screen","exit-presentation","save-and-sync","request-image-rendered-src","get-clipboard","share-note","clipboard-set","rotate-image","zoom-changed","log-to-native","user-action-collection","image-ocr","scroll-in-content-loading"],o)}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){return["content-change","insert-photo","insert-link","insert-attachment","replace-image","replace-attachment","open-link","download-attachment","get-entity","replace-img-url","get-exif-data","download-image","preview-image","context-menu","show-words","save-content","blob-paste","upload-image","clipboard-error","mac-preview","background-failed-update","background-changed","is-vip-user","table-click","image-ocr","collabsession-change","datacommand-success","session-built","session-closed","session-initialized","useraction-failed","user-action-collection","view-mode-change","note-version-change"]}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o,i;void 0===(i=function(t,r){"use strict";o=[n,r,n(919),n(920),n(156)],void 0===(i=function(e,t,n,o,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.injectToWindow=function(){window&&(window.debugTool={breakPoints:n.default,breakPointsGroup:o.default,stopHere:function(e,t){i.breakPointsLog(e,t);var o=n.default&&n.default[e];return o&&o.enable}},window.postMessage({type:"initial-break-points",from:"inspectWindow",sender:"inspectWindow",to:"devPage",payload:{breakPoints:n.default,breakPointsGroup:o.default}},"*"))},e}();t.default=r}.apply(r,o))||(e.exports=i)}.apply(t,o=[n,t]))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={insertCode:{name:"插入代码块",enable:!1,group:["insert","code"]},insertQuote:{name:"插入引用",enable:!1,group:["insert","quote"]},insertTodo:{name:"插入代办",enable:!1,group:["insert","todo"]},insertImage:{name:"插入图片",enable:!1,group:["insert","image"]},insertLink:{name:"插入链接",enable:!1,group:["insert","link"]},insertList:{name:"插入列表",enable:!1,group:["insert","list"]},insertAttachment:{name:"插入附件",enable:!1,group:["insert","attachment"]},insertHorizontalLine:{name:"插入水平线",enable:!1,group:["insert","hr"]},insertTable:{name:"插入表格",enable:!1,group:["insert","table"]},insertCatalogue:{name:"插入目录",enable:!1,group:["insert","catalogue"]},parseNativeRange:{name:"解析原生range",enable:!1,group:["range","other"]},drawRange:{name:"绘制Range",enable:!1,group:["range","other"]},addDragHint:{name:"绘制拖拽光标",enable:!1,group:["drag","other"]},handleKey:{name:"处理key输入",enable:!1,group:["input"]},textInput:{name:"文本输入",enable:!1,group:["input"]},paste:{name:"粘贴",enable:!1,group:["paste","other"]},copy:{name:"复制",enable:!1,group:["copy","other"]},cut:{name:"剪切",enable:!1,group:["cut","other"]},dragStart:{name:"开始拖拽",enable:!1,group:["drag","other"]},dragEnd:{name:"结束拖拽",enable:!1,group:["drag","other"]},pdfPrintCSS:{name:"pdf/print样式",enable:!1,group:["style","other"]},tab:{name:"tab键",enable:!1,group:["key","other"]},codeUpdate:{name:"代码块更新",enable:!1,group:["render","code"]},codeParse:{name:"代码块解析",enable:!1,group:["code"]},codeRender:{name:"代码块渲染",enable:!1,group:["code","render"]},codeSelectAll:{name:"全选代码块",enable:!1,group:["code","style"]},pcPresentation:{name:"pc演示模式",enable:!1,group:["pc","style","other"]},scrollView:{name:"滚动视图",enable:!1,group:["scroll","other"]},setImageWidth:{name:"设置图片宽度",enable:!1,group:["image","render"]},imageHeight:{name:"图片高度溢出",enable:!1,group:["image","render"]},clickMenu:{name:"点击右键菜单",enable:!1,group:["click","menu","other"]},removeFormat:{name:"清除格式",enable:!1,group:["format","other"]},updateSelectionUI:{name:"更新选区UI",enable:!1,group:["range","render"]},execCommand:{name:"执行命令",enable:!1,group:["command","other"]},doUnapply:{name:"undo命令",enable:!1,group:["command","other"]},execEditorApi:{name:"执行api",enable:!1,group:["api","other"]}}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={action:["insert","input","render","other"],feature:["todo","code","quote","image","link","list","attachment","hr","table","catalogue","other"]}}.apply(i,[n,i]))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t,o=n(0),i=n(21),r=n(27),a=n(1),s=n(922),l=o.keys(s),c=function(e){return(e=(e=e.toString()).substr(0,100)).replace(/%/g,function(){return"%%"})};return t=o.extend({_legacyAPIs:["ExitFullScreen"],initialize:function(e){this._editor=e.editor,this._hasReadyRun=!1,this._nativeApiObj=window.YNote||{}},execEditorApi:function(e,t){var n,o,i=this._editor,r=Date.now(),s="EditorApi."+e;if(!i[e])return o="Editor does not implement api: "+e,a.error(o),this.callNativeApi("Log",[this._nativeApiObj.LOG_FATAL,o]),n;if(a.DEBUG)a.profile(s),a.time(s),n=i[e].apply(i,t);else try{n=i[e].apply(i,t)}catch(t){o="Failed to execute EditorAPI:"+e,a.error(o,t),this.callNativeApi("Log",[this._nativeApiObj.LOG_FATAL,o])}return a.DEBUG&&(a.timeEnd(s),a.profileEnd(s)),this.callNativeApi("Log",[this._nativeApiObj.LOG_TEST,"@@ANALYSIS@@ javascript:"+e+"="+(Date.now()-r)]),n},callNativeApi:function(e,t){var n,o,i=this._nativeApiObj,r="nativeApi."+e;if(-1!==l.indexOf(e))return a.log("Executing native Api:"+e,t),(n=i[e])?(a.DEBUG&&(a.profile(r),a.time(r)),"Log"===e?t[1]=c(t[1]):this._logMethodInfoToNative(e,t),o=n.apply(i,t||[]),a.DEBUG&&(a.timeEnd(r),a.profileEnd(r))):a.error("no native api: "+e),o;a.error("The native api ["+e+"] is not in nativeApiInterface.js")},asyncCallNativeApi:function(e,t,n){var o,i=this,r="on"+e;i.off(r),"function"==typeof t&&(n=t,t=[]),o=function(){i.off(r,o),n.apply(null,arguments)},i.on(r,o,i),i._nativeApiObj[e].apply(i._nativeApiObj,t)},ready:function(){this._hasReadyRun||(this._hasReadyRun=!0,this._checkNativeApi(),this._nativeApiObj.Ready(this.execEditorApi.bind(this),document))},_checkNativeApi:function(){var e=this,t=e._nativeApiObj,n=[];o.each(l,function(o){null==t[o]&&(e._editor.isLegacyHost()||-1===e._legacyAPIs.indexOf(o))&&(n.push(o),a.error("Native does not implement api: "+o))}),a.DEBUG&&n.length>0&&(n=n.join("\n - "),window.alert("No native apis: \n - "+n))},_logMethodInfoToNative:function(e,t){var n="NativeAPI:"+e;t&&t.length>0&&o.each(t,function(e){n=n+"#"+c(e)}),this._nativeApiObj.Log.apply(this._nativeApiObj,[4,n])}},r.Events),i.extend(t)}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(){return{Ready:function(e,t){},PasteAsText:function(){},PasteNoteLink:function(){},ClipboardAvailable:function(){},IsNoteLinkInClipboard:function(){},OnDocumentChange:function(){},OnAreaClick:function(){},OpenLink:function(e){},OpenNote:function(e){},OpenImage:function(e){},Paste:function(){},CtxMenu:function(e){},InsertAttachments:function(e){},ReplaceAttachments:function(e,t,n){},FindText:function(){},OpenAttachment:function(e,t,n){},SaveImage:function(e){},SaveAsAttachment:function(e){},GetTemplateEntity:function(e,t){},RequestReplaceImage:function(e,t,n){},CloneAttachmentAsync:function(e,t){},SaveImageToNote:function(e,t){},IsImageSavedToNote:function(e,t){},ShowInsertLinkDialogAsync:function(e){},GetFocus:function(){},ReloadEditor:function(){},SnapScreen:function(e){},OnCopy:function(e){},Log:function(e,t){},NoteEditorActionCollection:function(e){},LOG_TEST:4,LOG_DEBUG:3,LOG_INFO:2,LOG_WARN:1,LOG_FATAL:0,ShowNoteCharNum:function(e,t){},OnDrop:function(e,t){},ShowShareMenu:function(){},Export2PDF:function(){},Export2Word:function(){},DownloadOriginFile:function(){},ExitFullScreen:function(){},ExitPresentation:function(){},PageModeChanged:function(e){},StartSync:function(){},GetClipboardData:function(e){},RotateImage:function(e,t,n){},OnChangeZoomByEditor:function(e){},ChangeBGImage:function(e,t){},ChangeBGImageFailed:function(e){},IsVIPUser:function(){},OnCollabSessionChange:function(){},OnDataCommandSuccess:function(e){},OnSessionBuilt:function(e){},OnSessionClosed:function(e){},OnSessionInitialized:function(e,t){},OnUserActionFailed:function(e){},EditorCallBack:function(e){},GetVersion:function(){},ImageOCR:function(e){},OnScrollInContentLoading:function(){}}}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(t,i){"use strict";void 0===(o=function(e){var t=n(0),o=n(17);return o.extend({_noteId:null,_xhr:null,_fileReader:null,_queue:null,_savingItem:null,_cacheData:null,initialize:function(){this._queue=[],this._cacheData={}},updateNoteId:function(e){e&&(this._noteId=e,this._queue=t.filter(this._queue,function(t){return t.noteId===e}),this._cacheData={},this._resetSaveProgress())},addImgInfo:function(e,n){if(n&&e){var o=this;o._noteId===n&&(t.isArray(e)||(e=[e]),t.each(e,function(e){if(e&&e.source&&e.extraSource&&e.blockId){var i=t.find(o._queue,function(t){return e.blockId===t.blockId});i?(i.source=e.source,i.extraSource=e.extraSource,i.encode=!1):o._queue.push({source:e.source,extraSource:e.extraSource,blockId:e.blockId,noteId:n,encode:!1})}}))}},startSave:function(){var e,t,n;if(!this._savingItem){for(e=this._queue;e&&e.length&&(!t||t.noteId!==this._noteId);)t=e.shift();if(t){if(n=this._cacheData[t.extraSource])return this.trigger("save-image",n,t),void this.startSaveWithDelay();this._loadItem(t)}}},startSaveWithDelay:function(e){var t=this;e=e||100,window.setTimeout(function(){t.startSave()},e)},_resetSaveProgress:function(){this._xhr&&(this._xhr.onload=null,this._xhr.abort(),this._xhr=null),this._fileReader&&(this._fileReader.onload=null,this._fileReader.abort(),this._fileReader=null),this._savingItem=null},_loadItem:function(e){var t;this._resetSaveProgress(),this._xhr=t=new XMLHttpRequest,t.responseType="blob",this._savingItem=e,t.onload=this._xhrOnLoadEnd.bind(this),t.open("GET",e.extraSource,!0),t.send()},_xhrOnLoadEnd:function(){var e,t=this,n=t._xhr,o=t._savingItem,i=o.noteId,r=t._noteId===i;if(!n.response||!r)return r&&!1===o.encode&&(e=function(e){var t=e.lastIndexOf("\\");if(-1!==t)return{path:e.substring(0,t+1),fileName:e.substring(t+1)}}(o.extraSource))&&t._queue.unshift({source:o.source,extraSource:e.path+window.encodeURIComponent(e.fileName),blockId:o.blockId,noteId:i,encode:!0}),t._resetSaveProgress(),void t.startSaveWithDelay();t._fileReader=new FileReader,t._fileReader.onload=function(){this.result&&t._noteId===i&&t._saveData(this.result,o),t._resetSaveProgress(),t.startSaveWithDelay()},t._fileReader.readAsDataURL(n.response)},_saveData:function(e,t){this._cacheData[t.extraSource]=e,this.trigger("save-image",e,t)},stopSave:function(){this._resetSaveProgress()}})}.call(i,n,i,e))||(e.exports=o)}.apply(t,[n,t]))||(e.exports=o)},,,,,,,function(e,t){},,,,,,,function(e,t){}])});